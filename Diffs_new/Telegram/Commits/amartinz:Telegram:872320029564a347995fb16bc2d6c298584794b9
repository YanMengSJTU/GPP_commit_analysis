diff --git a/Android.mk b/Android.mk
new file mode 100644
index 000000000..b32342d5f
--- /dev/null
+++ b/Android.mk
@@ -0,0 +1,3 @@
+LOCAL_PATH := $(call my-dir)
+
+include $(LOCAL_PATH)/TMessagesProj/jni/Android.mk $(LOCAL_PATH)/TMessagesProj/src/main/Android.mk
diff --git a/TMessagesProj/jni/Android.mk b/TMessagesProj/jni/Android.mk
index 930f2fc80..ad337e97a 100755
--- a/TMessagesProj/jni/Android.mk
+++ b/TMessagesProj/jni/Android.mk
@@ -1,10 +1,13 @@
+APP_PLATFORM := android-9
+APP_ABI := armeabi armeabi-v7a x86
 NDK_TOOLCHAIN_VERSION := 4.8
 LOCAL_PATH := $(call my-dir)
 
 include $(CLEAR_VARS)
-LOCAL_MODULE := tmessages
-LOCAL_CFLAGS = -w -std=gnu99 -O3
+LOCAL_MODULE := libtmessages
+LOCAL_CFLAGS := -w -std=gnu99 -O3
 LOCAL_LDLIBS := -llog
+LOCAL_LDFLAGS := -ldl
 
 LOCAL_SRC_FILES :=  \
 ./aes_core.c \
diff --git a/TMessagesProj/libs/HockeySDK-3.0.1.jar b/TMessagesProj/libs/HockeySDK-3.0.1.jar
deleted file mode 100644
index 7b7d60379..000000000
Binary files a/TMessagesProj/libs/HockeySDK-3.0.1.jar and /dev/null differ
diff --git a/TMessagesProj/libs/armeabi-v7a/libtmessages.so b/TMessagesProj/libs/armeabi-v7a/libtmessages.so
deleted file mode 100755
index 2cd5e4e54..000000000
Binary files a/TMessagesProj/libs/armeabi-v7a/libtmessages.so and /dev/null differ
diff --git a/TMessagesProj/libs/armeabi/libtmessages.so b/TMessagesProj/libs/armeabi/libtmessages.so
deleted file mode 100755
index adc126c73..000000000
Binary files a/TMessagesProj/libs/armeabi/libtmessages.so and /dev/null differ
diff --git a/TMessagesProj/libs/x86/libtmessages.so b/TMessagesProj/libs/x86/libtmessages.so
deleted file mode 100755
index 6375537c5..000000000
Binary files a/TMessagesProj/libs/x86/libtmessages.so and /dev/null differ
diff --git a/TMessagesProj/src/main/Android.mk b/TMessagesProj/src/main/Android.mk
new file mode 100644
index 000000000..241430700
--- /dev/null
+++ b/TMessagesProj/src/main/Android.mk
@@ -0,0 +1,41 @@
+LOCAL_PATH := $(call my-dir)
+include $(CLEAR_VARS)
+
+LOCAL_JNI_SHARED_LIBRARIES := libtmessages
+
+LOCAL_STATIC_JAVA_LIBRARIES := \
+        android-support-v4 \
+        android-support-v7-appcompat \
+        play
+
+LOCAL_ASSET_DIR := \
+        $(LOCAL_PATH)/assets
+
+LOCAL_SRC_FILES := \
+        $(call all-java-files-under, java)
+
+LOCAL_RESOURCE_DIR := \
+        $(LOCAL_PATH)/res \
+        frameworks/support/v7/appcompat/res \
+        external/google/google_play_services/libproject/google-play-services_lib/res
+
+# Needed to expose library resource files
+LOCAL_AAPT_FLAGS := \
+        --auto-add-overlay \
+        --extra-packages android.support.v7.appcompat \
+        --extra-packages com.google.android.gms
+
+LOCAL_PACKAGE_NAME := Telegram
+LOCAL_MODULE_TAGS := optional
+LOCAL_SDK_VERSION := current
+
+include $(BUILD_PACKAGE)
+
+include $(CLEAR_VARS)
+# UNCOMMENT in case you didnt declare it somewhere before
+#LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES := \
+#    play:../../../external/google/google_play_services/libproject/google-play-services_lib/libs/google-play-services.jar
+#
+#include $(BUILD_MULTI_PREBUILT)
+
+include $(call all-makefiles-under,$(LOCAL_PATH))
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ApplicationActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ApplicationActivity.java
index 873466412..1c94fe120 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ApplicationActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ApplicationActivity.java
@@ -39,9 +39,6 @@
 import org.telegram.ui.Views.BaseFragment;
 import org.telegram.ui.Views.NotificationView;
 
-import net.hockeyapp.android.CrashManager;
-import net.hockeyapp.android.UpdateManager;
-
 import java.lang.reflect.Field;
 import java.lang.reflect.Method;
 
@@ -339,16 +336,6 @@ public void didSelectDialog(MessagesActivity messageFragment, long dialog_id) {
         }
     }
 
-    private void checkForCrashes() {
-        CrashManager.register(this, ConnectionsManager.HOCKEY_APP_HASH);
-    }
-
-    private void checkForUpdates() {
-        if (ConnectionsManager.DEBUG_VERSION) {
-            UpdateManager.register(this, ConnectionsManager.HOCKEY_APP_HASH);
-        }
-    }
-
     @Override
     protected void onPause() {
         super.onPause();
@@ -375,8 +362,6 @@ protected void onResume() {
             notificationView = (NotificationView) getLayoutInflater().inflate(R.layout.notification_layout, null);
         }
         fixLayout();
-        checkForCrashes();
-        checkForUpdates();
         ApplicationLoader.resetLastPauseTime();
         supportInvalidateOptionsMenu();
         updateActionBar();
