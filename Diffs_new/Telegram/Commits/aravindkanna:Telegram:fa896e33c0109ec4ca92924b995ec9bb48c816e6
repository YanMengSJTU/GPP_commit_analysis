diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenu.java b/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenu.java
index b0fa9ab09..a26dcd178 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenu.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenu.java
@@ -97,7 +97,8 @@ public void onClick(View view) {
     }
 
     public void hideAllPopupMenus() {
-        for (int a = 0; a < getChildCount(); a++) {
+        int childCount = getChildCount();
+        for (int a = 0; a < childCount; a++) {
             View view = getChildAt(a);
             if (view instanceof ActionBarMenuItem) {
                 ((ActionBarMenuItem) view).closeSubMenu();
@@ -116,7 +117,8 @@ public void clearItems() {
     }
 
     public void onMenuButtonPressed() {
-        for (int a = 0; a < getChildCount(); a++) {
+        int childCount = getChildCount();
+        for (int a = 0; a < childCount; a++) {
             View view = getChildAt(a);
             if (view instanceof ActionBarMenuItem) {
                 ActionBarMenuItem item = (ActionBarMenuItem) view;
@@ -135,7 +137,8 @@ public void onMenuButtonPressed() {
     }
 
     public void closeSearchField() {
-        for (int a = 0; a < getChildCount(); a++) {
+        int childCount = getChildCount();
+        for (int a = 0; a < childCount; a++) {
             View view = getChildAt(a);
             if (view instanceof ActionBarMenuItem) {
                 ActionBarMenuItem item = (ActionBarMenuItem) view;
@@ -148,7 +151,8 @@ public void closeSearchField() {
     }
 
     public void openSearchField(boolean toggle, String text) {
-        for (int a = 0; a < getChildCount(); a++) {
+        int childCount = getChildCount();
+        for (int a = 0; a < childCount; a++) {
             View view = getChildAt(a);
             if (view instanceof ActionBarMenuItem) {
                 ActionBarMenuItem item = (ActionBarMenuItem) view;
diff --git a/build.gradle b/build.gradle
index 7f37cedee..0ac36d7c6 100644
--- a/build.gradle
+++ b/build.gradle
@@ -5,7 +5,7 @@ buildscript {
         mavenCentral()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.1.0-beta3'
+        classpath 'com.android.tools.build:gradle:2.1.0'
         classpath 'com.google.gms:google-services:2.1.0-alpha3'
     }
 }
\ No newline at end of file
