diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java b/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
index 0f69ff953..b71db8186 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
@@ -1070,7 +1070,16 @@ public void sendScreenshotMessage(TLRPC.User user, int messageId, TLRPC.Message
         performSendMessageRequest(req, newMsgObj, null, null, null);
     }
 
+    public void sendGifWithCaption(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject, String caption) {
+        if (caption.startsWith("@gif")) caption = "";
+        sendSticker(document, peer, replyingMessageObject, parentObject, caption);
+    }
+
     public void sendSticker(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject) {
+        sendSticker(document, peer, replyingMessageObject, parentObject, null);
+    }
+
+    public void sendSticker(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject, String caption) {
         if (document == null) {
             return;
         }
@@ -1132,7 +1141,7 @@ public void sendSticker(TLRPC.Document document, long peer, MessageObject replyi
             document = newDocument;
         }
         if (document instanceof TLRPC.TL_document) {
-            sendMessage((TLRPC.TL_document) document, null, null, peer, replyingMessageObject, null, null, null, null, 0, parentObject);
+            sendMessage((TLRPC.TL_document) document, null, null, peer, replyingMessageObject, caption, null, null, null, 0, parentObject);
         }
     }
 
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
index e577ca4cf..f80e3c58c 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
@@ -3358,8 +3358,9 @@ public void onGifSelected(Object gif, Object parent) {
                 }
                 if (gif instanceof TLRPC.Document) {
                     TLRPC.Document document = (TLRPC.Document) gif;
-                    SendMessagesHelper.getInstance(currentAccount).sendSticker(document, dialog_id, replyingMessageObject, parent);
+                    SendMessagesHelper.getInstance(currentAccount).sendGifWithCaption(document, dialog_id, replyingMessageObject, parent, messageEditText.getText().toString());
                     MediaDataController.getInstance(currentAccount).addRecentGif(document, (int) (System.currentTimeMillis() / 1000));
+                    messageEditText.setText("");
                     if ((int) dialog_id == 0) {
                         MessagesController.getInstance(currentAccount).saveGif(parent, document);
                     }
