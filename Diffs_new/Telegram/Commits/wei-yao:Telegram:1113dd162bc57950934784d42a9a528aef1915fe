diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 8f24270a7..6a4ad8558 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -83,29 +83,29 @@ android {
         targetSdkVersion 22
         versionCode 542
         versionName "2.9.1"
-        ndk {
-            moduleName "tmessages.8"
-        }
-    }
-    task buildNative(type: Exec, description: 'Compile JNI source via NDK') {
-        def ndkDir = android.ndkDirectory
-        commandLine "$ndkDir/ndk-build.cmd",
-                '-C', file('jni').absolutePath, // Change src/main/jni the relative path to your jni source
-                '-j', Runtime.runtime.availableProcessors(),
-                'all',
-                'NDK_DEBUG=1'
-    }
-
-    task cleanNative(type: Exec, description: 'Clean JNI object files') {
-        def ndkDir = android.ndkDirectory
-        commandLine "$ndkDir/ndk-build.cmd",
-                '-C', file('jni').absolutePath, // Change src/main/jni the relative path to your jni source
-                'clean'
-    }
-
-    clean.dependsOn 'cleanNative'
-
-    tasks.withType(JavaCompile) {
-        compileTask -> compileTask.dependsOn buildNative
+//        ndk {
+//            moduleName "tmessages.8"
+//        }
     }
+//    task buildNative(type: Exec, description: 'Compile JNI source via NDK') {
+//        def ndkDir = android.ndkDirectory
+//        commandLine "$ndkDir/ndk-build.cmd",
+//                '-C', file('jni').absolutePath, // Change src/main/jni the relative path to your jni source
+//                '-j', Runtime.runtime.availableProcessors(),
+//                'all',
+//                'NDK_DEBUG=1'
+//    }
+//
+//    task cleanNative(type: Exec, description: 'Clean JNI object files') {
+//        def ndkDir = android.ndkDirectory
+//        commandLine "$ndkDir/ndk-build.cmd",
+//                '-C', file('jni').absolutePath, // Change src/main/jni the relative path to your jni source
+//                'clean'
+//    }
+//
+//    clean.dependsOn 'cleanNative'
+//
+//    tasks.withType(JavaCompile) {
+//        compileTask -> compileTask.dependsOn buildNative
+//    }
 }
diff --git a/TMessagesProj/libs/armeabi-v7a/libtmessages.8.so b/TMessagesProj/libs/armeabi-v7a/libtmessages.8.so
index 301836b9d..f3fd00b2e 100755
Binary files a/TMessagesProj/libs/armeabi-v7a/libtmessages.8.so and b/TMessagesProj/libs/armeabi-v7a/libtmessages.8.so differ
diff --git a/TMessagesProj/libs/armeabi/libtmessages.8.so b/TMessagesProj/libs/armeabi/libtmessages.8.so
index 9be5d1d50..1bf2c2f3e 100755
Binary files a/TMessagesProj/libs/armeabi/libtmessages.8.so and b/TMessagesProj/libs/armeabi/libtmessages.8.so differ
diff --git a/TMessagesProj/libs/x86/libtmessages.8.so b/TMessagesProj/libs/x86/libtmessages.8.so
index a6d49e650..920c60a56 100755
Binary files a/TMessagesProj/libs/x86/libtmessages.8.so and b/TMessagesProj/libs/x86/libtmessages.8.so differ
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/Stego.java b/TMessagesProj/src/main/java/org/telegram/messenger/Stego.java
new file mode 100644
index 000000000..85cc7bad5
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/Stego.java
@@ -0,0 +1,7 @@
+package org.telegram.messenger;
+
+/**
+ * Created by yao on 2015/10/6.
+ */
+public class Stego {
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index d70c5ac79..d53fa45f5 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -768,7 +768,7 @@ public void onClick(DialogInterface dialogInterface, int i) {
                 } else if (id == clear_history || id == delete_chat) {
                     if (getParentActivity() == null) {
 
-                        return;  //// TODO: 2015/10/2 0002
+                        return;
 
                     }
                     final boolean isChat = (int) dialog_id < 0 && (
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
index 8394fbdfa..bca761556 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
@@ -46,25 +46,36 @@
 import org.telegram.messenger.R;
 import org.telegram.messenger.TLRPC;
 import org.telegram.messenger.UserConfig;
+import org.telegram.messenger.Utilities;
 import org.telegram.ui.ActionBar.BaseFragment;
 import org.telegram.android.AnimationCompat.AnimatorListenerAdapterProxy;
 import org.telegram.android.AnimationCompat.AnimatorSetProxy;
 import org.telegram.android.AnimationCompat.ObjectAnimatorProxy;
 import org.telegram.android.AnimationCompat.ViewProxy;
 import org.telegram.messenger.ApplicationLoader;
+
+import java.nio.ByteBuffer;
+import java.util.ArrayList;
+
 //输入的view
 public class ChatActivityEnterView extends FrameLayoutFixed implements NotificationCenter.NotificationCenterDelegate, SizeNotifierRelativeLayout.SizeNotifierRelativeLayoutDelegate {
 
     public interface ChatActivityEnterViewDelegate {
         void onMessageSend(String message);
-//        void onStegoMsgSend(String msg);
+
+        //        void onStegoMsgSend(String msg);
         void needSendTyping();
+
         void onTextChanged(CharSequence text, boolean bigChange);
+
         void onAttachButtonHidden();
+
         void onAttachButtonShow();
+
         void onWindowSizeChanged(int size);
     }
-    private boolean isStego=false;
+
+    private boolean isStego = true;
     private EditText messageEditText;
     /**
      * sendbutton 发送消息的按钮.
@@ -528,10 +539,9 @@ public boolean onTouch(View view, MotionEvent motionEvent) {
         sendButton.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
-                if(!isStego)
-                sendMessage();
-                else
-                {
+                if (!isStego)
+                    sendMessage();
+                else {
 //                    if (delegate != null) {
 //                        delegate.onStegoMsgSend("/storage/emulated/0/baidu/18f40ad162d9f2d3f07c0bcaaaec8a136327cca2.jpg");
 //                    }
@@ -544,8 +554,16 @@ public void onClick(View view) {
     }
 
     private void sendStegoMsg() {
-        String path="/storage/emulated/0/DCIM/Camera/xifan.jpg";
-        SendMessagesHelper.prepareSendingPhoto(path, null, dialog_id, replyingMessageObject, null);
+        String inputPath = "/mnt/sdcard/DCIM/Camera/cover1.jpg";
+        String outputPath = "/mnt/sdcard/DCIM/Camera/stego1.jpg";
+        byte[] msg = "hello".getBytes();
+        ByteBuffer bb = ByteBuffer.allocateDirect(msg.length);
+        bb.put(msg);
+        Utilities.lsbEmbed(bb, "", inputPath, outputPath, bb.capacity());
+        ArrayList<String> files = new ArrayList<String>();
+        files.add(outputPath);
+        SendMessagesHelper.prepareSendingDocuments(files, files, null, null, dialog_id, replyingMessageObject);
+//        SendMessagesHelper.prepareSendingPhoto(path, null, dialog_id, replyingMessageObject, null);
     }
 
     private void setKeyboardTransitionState(int state) {
@@ -794,6 +812,7 @@ private void sendMessage() {
 
     /**
      * 发送消息
+     *
      * @param text
      * @return
      */
