diff --git a/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java b/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
index fc898962f..bf94328d9 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
@@ -9,6 +9,7 @@
 package org.telegram.android;
 
 import android.app.AlarmManager;
+import android.app.Notification;
 import android.app.PendingIntent;
 import android.content.Context;
 import android.content.Intent;
@@ -38,6 +39,7 @@
 import org.telegram.ui.PopupNotificationActivity;
 
 import java.util.ArrayList;
+import java.util.Arrays;
 import java.util.Calendar;
 import java.util.HashMap;
 import java.util.List;
@@ -284,7 +286,7 @@ private void showOrUpdateNotification(boolean notifyAboutLast) {
             TLRPC.FileLocation photoPath = null;
 
             boolean notifyDisabled = false;
-            int needVibrate = 0;
+            boolean needVibrate = false;
             String choosenSoundPath = null;
             int ledColor = 0xff00ff00;
             boolean inAppSounds = false;
@@ -312,7 +314,7 @@ private void showOrUpdateNotification(boolean notifyAboutLast) {
                     } else if (choosenSoundPath == null) {
                         choosenSoundPath = preferences.getString("GroupSoundPath", defaultPath);
                     }
-                    needVibrate = preferences.getInt("vibrate_group", 0);
+                    needVibrate = preferences.getBoolean("EnableVibrateGroup", true);
                     ledColor = preferences.getInt("GroupLed", 0xff00ff00);
                 } else if (user_id != 0) {
                     if (choosenSoundPath != null && choosenSoundPath.equals(defaultPath)) {
@@ -320,22 +322,24 @@ private void showOrUpdateNotification(boolean notifyAboutLast) {
                     } else if (choosenSoundPath == null) {
                         choosenSoundPath = preferences.getString("GlobalSoundPath", defaultPath);
                     }
-                    needVibrate = preferences.getInt("vibrate_messages", 0);
+                    needVibrate = preferences.getBoolean("EnableVibrateAll", true);
                     ledColor = preferences.getInt("MessagesLed", 0xff00ff00);
                 }
                 if (preferences.contains("color_" + dialog_id)) {
                     ledColor = preferences.getInt("color_" + dialog_id, 0);
                 }
 
-                if (needVibrate == 2 && (vibrate_override == 1 || vibrate_override == 3 || vibrate_override == 5) || needVibrate != 2 && vibrate_override == 2 || vibrate_override != 0) {
-                    needVibrate = vibrate_override;
+                if (!needVibrate && vibrate_override == 1) {
+                    needVibrate = true;
+                } else if (needVibrate && vibrate_override == 2) {
+                    needVibrate = false;
                 }
                 if (!ApplicationLoader.mainInterfacePaused) {
                     if (!inAppSounds) {
                         choosenSoundPath = null;
                     }
                     if (!inAppVibrate) {
-                        needVibrate = 2;
+                        needVibrate = false;
                     }
                 }
             }
@@ -519,6 +523,7 @@ private void showOrUpdateNotification(boolean notifyAboutLast) {
                             pattern[i] = ((i % 2 != 0) ? duration : pause);
                         }
 
+                        FileLog.d("tmessages", "Vibrating with pattern " + Arrays.toString(pattern));
                         mBuilder.setVibrate(pattern);
                     }
                 } else {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ProfileNotificationsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ProfileNotificationsActivity.java
index aea0cd026..e62822fc1 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ProfileNotificationsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ProfileNotificationsActivity.java
@@ -104,40 +104,7 @@ public void onItemClick(int id) {
             listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                 @Override
                 public void onItemClick(AdapterView<?> adapterView, View view, final int i, long l) {
-                    if (i == settingsVibrateRow) {
-                        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                        builder.setTitle(LocaleController.getString("Vibrate", R.string.Vibrate));
-                        builder.setItems(new CharSequence[] {
-                                LocaleController.getString("Disabled", R.string.Disabled),
-                                LocaleController.getString("SettingsDefault", R.string.SettingsDefault),
-                                LocaleController.getString("SystemDefault", R.string.SystemDefault),
-                                LocaleController.getString("Short", R.string.Short),
-                                LocaleController.getString("Long", R.string.Long)
-                        }, new DialogInterface.OnClickListener() {
-                            @Override
-                            public void onClick(DialogInterface dialog, int which) {
-                                SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
-                                SharedPreferences.Editor editor = preferences.edit();
-                                if (which == 0) {
-                                    editor.putInt("vibrate_" + dialog_id, 2);
-                                } else if (which == 1) {
-                                    editor.putInt("vibrate_" + dialog_id, 0);
-                                } else if (which == 2) {
-                                    editor.putInt("vibrate_" + dialog_id, 4);
-                                } else if (which == 3) {
-                                    editor.putInt("vibrate_" + dialog_id, 1);
-                                } else if (which == 4) {
-                                    editor.putInt("vibrate_" + dialog_id, 3);
-                                }
-                                editor.commit();
-                                if (listView != null) {
-                                    listView.invalidateViews();
-                                }
-                            }
-                        });
-                        builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
-                        showAlertDialog(builder);
-                    } else if (i == settingsNotificationsRow) {
+                    if (i == settingsVibrateRow || i == settingsNotificationsRow) {
                         if (getParentActivity() == null) {
                             return;
                         }
@@ -496,15 +463,11 @@ public View getView(int i, View view, ViewGroup viewGroup) {
                     SharedPreferences preferences = mContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
                     int value = preferences.getInt("vibrate_" + dialog_id, 0);
                     if (value == 0) {
-                        detailTextView.setText(LocaleController.getString("SettingsDefault", R.string.SettingsDefault));
+                        detailTextView.setText(LocaleController.getString("Default", R.string.Default));
                     } else if (value == 1) {
-                        detailTextView.setText(LocaleController.getString("Short", R.string.Short));
+                        detailTextView.setText(LocaleController.getString("Enabled", R.string.Enabled));
                     } else if (value == 2) {
                         detailTextView.setText(LocaleController.getString("Disabled", R.string.Disabled));
-                    } else if (value == 3) {
-                        detailTextView.setText(LocaleController.getString("Long", R.string.Long));
-                    } else if (value == 4) {
-                        detailTextView.setText(LocaleController.getString("SystemDefault", R.string.SystemDefault));
                     }
                 } else if (i == settingsNotificationsRow) {
                     textView.setText(LocaleController.getString("Notifications", R.string.Notifications));
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SettingsNotificationsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/SettingsNotificationsActivity.java
index c39663d0c..2b7d77768 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SettingsNotificationsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SettingsNotificationsActivity.java
@@ -475,40 +475,6 @@ public void onClick(DialogInterface dialog, int which) {
                         });
                         builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
                         showAlertDialog(builder);
-                    } else if (i == messageVibrateRow || i == groupVibrateRow) {
-                        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                        builder.setTitle(LocaleController.getString("Vibrate", R.string.Vibrate));
-                        builder.setItems(new CharSequence[] {
-                                LocaleController.getString("Disabled", R.string.Disabled),
-                                LocaleController.getString("Default", R.string.Default),
-                                LocaleController.getString("Short", R.string.Short),
-                                LocaleController.getString("Long", R.string.Long)
-                        }, new DialogInterface.OnClickListener() {
-                            @Override
-                            public void onClick(DialogInterface dialog, int which) {
-                                SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
-                                SharedPreferences.Editor editor = preferences.edit();
-                                String param = "vibrate_messages";
-                                if (i == groupVibrateRow) {
-                                    param = "vibrate_group";
-                                }
-                                if (which == 0) {
-                                    editor.putInt(param, 2);
-                                } else if (which == 1) {
-                                    editor.putInt(param, 0);
-                                } else if (which == 2) {
-                                    editor.putInt(param, 1);
-                                } else if (which == 3) {
-                                    editor.putInt(param, 3);
-                                }
-                                editor.commit();
-                                if (listView != null) {
-                                    listView.invalidateViews();
-                                }
-                            }
-                        });
-                        builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
-                        showAlertDialog(builder);
                     }
                 }
             });
@@ -705,6 +671,14 @@ public View getView(int i, View view, ViewGroup viewGroup) {
                     }
                     textView.setText(LocaleController.getString("MessagePreview", R.string.MessagePreview));
                     divider.setVisibility(View.VISIBLE);
+                } else if (i == messageVibrateRow || i == groupVibrateRow) {
+                    if (i == messageVibrateRow) {
+                        enabled = preferences.getBoolean("EnableVibrateAll", true);
+                    } else if (i == groupVibrateRow) {
+                        enabled = preferences.getBoolean("EnableVibrateGroup", true);
+                    }
+                    textView.setText(LocaleController.getString("Vibrate", R.string.Vibrate));
+                    divider.setVisibility(View.VISIBLE);
                 } else if (i == inappSoundRow) {
                     enabled = preferences.getBoolean("EnableInAppSounds", true);
                     textView.setText(LocaleController.getString("InAppSounds", R.string.InAppSounds));
@@ -824,33 +798,6 @@ public View getView(int i, View view, ViewGroup viewGroup) {
                     colorView.setBackgroundColor(preferences.getInt("GroupLed", 0xff00ff00));
                 }
                 divider.setVisibility(View.VISIBLE);
-            } else if (type == 4) {
-                if (view == null) {
-                    LayoutInflater li = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
-                    view = li.inflate(R.layout.user_profile_leftright_row_layout, viewGroup, false);
-                }
-                TextView textView = (TextView)view.findViewById(R.id.settings_row_text);
-                TextView detailTextView = (TextView)view.findViewById(R.id.settings_row_text_detail);
-
-                View divider = view.findViewById(R.id.settings_row_divider);
-                SharedPreferences preferences = mContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
-                int value = 0;
-                textView.setText(LocaleController.getString("Vibrate", R.string.Vibrate));
-                divider.setVisibility(View.VISIBLE);
-                if (i == messageVibrateRow) {
-                    value = preferences.getInt("vibrate_messages", 0);
-                } else if (i == groupVibrateRow) {
-                    value = preferences.getInt("vibrate_group", 0);
-                }
-                if (value == 0) {
-                    detailTextView.setText(LocaleController.getString("Default", R.string.Default));
-                } else if (value == 1) {
-                    detailTextView.setText(LocaleController.getString("Short", R.string.Short));
-                } else if (value == 2) {
-                    detailTextView.setText(LocaleController.getString("Disabled", R.string.Disabled));
-                } else if (value == 3) {
-                    detailTextView.setText(LocaleController.getString("Long", R.string.Long));
-                }
             }
             return view;
         }
@@ -869,8 +816,6 @@ public int getItemViewType(int i) {
                 return 1;
             } else if (i == messageLedRow || i == groupLedRow) {
                 return 3;
-            } else if (i == groupVibrateRow || i == messageVibrateRow) {
-                return 4;
             } else {
                 return 2;
             }
