diff --git a/TMessagesProj/src/main/java/io/bettergram/adapters/CryptoAdapter.java b/TMessagesProj/src/main/java/io/bettergram/adapters/CryptoAdapter.java
index 7891570bd..78e327741 100644
--- a/TMessagesProj/src/main/java/io/bettergram/adapters/CryptoAdapter.java
+++ b/TMessagesProj/src/main/java/io/bettergram/adapters/CryptoAdapter.java
@@ -46,6 +46,7 @@
 import io.bettergram.messenger.R;
 import io.bettergram.service.CryptoCurrencyDataService;
 import io.bettergram.telegram.messenger.AndroidUtilities;
+import io.bettergram.telegram.messenger.FileLog;
 import io.bettergram.telegram.messenger.ImageReceiver;
 import io.bettergram.telegram.messenger.NotificationCenter;
 import io.bettergram.telegram.messenger.support.widget.RecyclerView;
@@ -132,6 +133,15 @@ public void didReceivedNotification(int id, int account, Object... args) {
                 data.addAll(backup);
                 notifyDataSetChanged();
             });
+        } else if (id == NotificationCenter.updateCurrencyData) {
+            String json = (String) args[0];
+            try {
+                CryptoCurrencyInfoResponse res = CryptoCurrencyInfoResponse__JsonHelper.parseFromJson(json);
+                AndroidUtilities.runOnUIThread(() -> setCryptoData(res));
+            } catch (IOException e) {
+                e.printStackTrace();
+                FileLog.e(e);
+            }
         }
     }
 
@@ -280,6 +290,7 @@ public CryptoAdapter(Activity activity) {
         this.activity = activity;
         NotificationCenter.getGlobalInstance().addObserver(this, NotificationCenter.currencySearchResultsUpdate);
         NotificationCenter.getGlobalInstance().addObserver(this, NotificationCenter.updateCurrencyDataToBackup);
+        NotificationCenter.getGlobalInstance().addObserver(this, NotificationCenter.updateCurrencyData);
     }
 
     public void setCryptoData(CryptoCurrencyInfoResponse cryptoData) {
diff --git a/TMessagesProj/src/main/java/io/bettergram/data/Video.java b/TMessagesProj/src/main/java/io/bettergram/data/Video.java
index fee22d2f5..856ed08b3 100644
--- a/TMessagesProj/src/main/java/io/bettergram/data/Video.java
+++ b/TMessagesProj/src/main/java/io/bettergram/data/Video.java
@@ -1,5 +1,6 @@
 package io.bettergram.data;
 
+import com.crashlytics.android.Crashlytics;
 import com.instagram.common.json.annotation.JsonField;
 import com.instagram.common.json.annotation.JsonType;
 
@@ -32,8 +33,9 @@
     public Date getPublishedAt() {
         try {
             return FROM_FORMAT2.parse(publishedAt);
-        } catch (ParseException e) {
+        } catch (ParseException | NumberFormatException e) {
             e.printStackTrace();
+            Crashlytics.logException(e);
             return null;
         }
     }
diff --git a/TMessagesProj/src/main/java/io/bettergram/service/CryptoCurrencyDataService.java b/TMessagesProj/src/main/java/io/bettergram/service/CryptoCurrencyDataService.java
index 25defb088..9e6ff519c 100644
--- a/TMessagesProj/src/main/java/io/bettergram/service/CryptoCurrencyDataService.java
+++ b/TMessagesProj/src/main/java/io/bettergram/service/CryptoCurrencyDataService.java
@@ -90,7 +90,7 @@ protected void onHandleIntent(@Nullable Intent intent) {
                 String savedCryptoInfoJson = preferences
                         .getString(KEY_CRYPTO_CURRENCIES_SAVED, null);
                 if (!isEmpty(savedCryptoInfoJson)) {
-                    publishResults(savedCryptoInfoJson, NOTIFICATION, RESULT);
+                    NotificationCenter.getGlobalInstance().postNotificationName(NotificationCenter.updateCurrencyData, savedCryptoInfoJson);
                 }
                 canStart = true;
             }
@@ -130,7 +130,7 @@ private void startTimer(Intent intent) {
         public void run() {
             String savedCryptoInfoJson = preferences.getString(KEY_CRYPTO_CURRENCIES_SAVED, null);
             if (!isEmpty(savedCryptoInfoJson)) {
-                publishResults(savedCryptoInfoJson, NOTIFICATION, RESULT);
+                NotificationCenter.getGlobalInstance().postNotificationName(NotificationCenter.updateCurrencyData, savedCryptoInfoJson);
             }
 
             boolean fetchCryptoCurrencies = intent.getBooleanExtra(KEY_CRYPTO_CURRENCIES, false);
@@ -211,7 +211,7 @@ public void onResponse(Call call, Response response) throws IOException {
                         }
                         String json = CryptoCurrencyInfoResponse__JsonHelper.serializeToJson(cryptoResponse);
                         preferences.edit().putString(KEY_CRYPTO_CURRENCIES_SAVED, json).apply();
-                        publishResults(json, NOTIFICATION, RESULT);
+                        NotificationCenter.getGlobalInstance().postNotificationName(NotificationCenter.updateCurrencyData, json);
                     }
                 }
             });
diff --git a/TMessagesProj/src/main/java/io/bettergram/telegram/messenger/NotificationCenter.java b/TMessagesProj/src/main/java/io/bettergram/telegram/messenger/NotificationCenter.java
index eb93b6eaf..73f9a5a6b 100644
--- a/TMessagesProj/src/main/java/io/bettergram/telegram/messenger/NotificationCenter.java
+++ b/TMessagesProj/src/main/java/io/bettergram/telegram/messenger/NotificationCenter.java
@@ -150,6 +150,7 @@
     public static final int updateToLatestApiVersion = totalEvents++;
     public static final int currencySearchResultsUpdate = totalEvents++;
     public static final int updateCurrencyDataToBackup = totalEvents++;
+    public static final int updateCurrencyData = totalEvents++;
     public static final int updateBottombarCounter = totalEvents++;
     public static final int openBottombarCounter = totalEvents++;
 
diff --git a/TMessagesProj/src/main/java/io/bettergram/telegram/ui/DialogsActivity.java b/TMessagesProj/src/main/java/io/bettergram/telegram/ui/DialogsActivity.java
index 3c453a7a7..f530438a5 100644
--- a/TMessagesProj/src/main/java/io/bettergram/telegram/ui/DialogsActivity.java
+++ b/TMessagesProj/src/main/java/io/bettergram/telegram/ui/DialogsActivity.java
@@ -1657,6 +1657,7 @@ private void autoSubscribeToGroups() {
             req.username = group;
             ConnectionsManager.getInstance(0).sendRequest(req, (response, error) -> AndroidUtilities.runOnUIThread(() -> {
                 final TLRPC.TL_contacts_resolvedPeer res = (TLRPC.TL_contacts_resolvedPeer) response;
+                if (res == null) return;
                 for (int j = 0, size = res.chats.size(); j < size; j++) {
                     TLRPC.Chat chat = res.chats.get(j);
                     if (ChatObject.isChannel(chat) && !(chat instanceof TLRPC.TL_channelForbidden)) {
diff --git a/TMessagesProj/src/main/java/io/bettergram/telegram/ui/LaunchActivity.java b/TMessagesProj/src/main/java/io/bettergram/telegram/ui/LaunchActivity.java
index 12a49f312..3d2976a5e 100644
--- a/TMessagesProj/src/main/java/io/bettergram/telegram/ui/LaunchActivity.java
+++ b/TMessagesProj/src/main/java/io/bettergram/telegram/ui/LaunchActivity.java
@@ -28,31 +28,78 @@
 import android.os.StatFs;
 import android.provider.ContactsContract;
 import android.text.TextUtils;
-import android.view.*;
+import android.util.Log;
+import android.view.ActionMode;
+import android.view.KeyEvent;
+import android.view.Menu;
+import android.view.MotionEvent;
+import android.view.View;
+import android.view.ViewGroup;
+import android.view.ViewTreeObserver;
+import android.view.Window;
+import android.view.WindowManager;
 import android.widget.FrameLayout;
 import android.widget.LinearLayout;
 import android.widget.RelativeLayout;
 import android.widget.Toast;
+
+import java.io.File;
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Map;
+
 import io.bettergram.messenger.R;
-import io.bettergram.telegram.messenger.*;
+import io.bettergram.telegram.messenger.AndroidUtilities;
+import io.bettergram.telegram.messenger.ApplicationLoader;
+import io.bettergram.telegram.messenger.BuildVars;
+import io.bettergram.telegram.messenger.ChatObject;
+import io.bettergram.telegram.messenger.ContactsController;
+import io.bettergram.telegram.messenger.DataQuery;
+import io.bettergram.telegram.messenger.FileLoader;
+import io.bettergram.telegram.messenger.FileLog;
+import io.bettergram.telegram.messenger.ImageLoader;
+import io.bettergram.telegram.messenger.LocaleController;
+import io.bettergram.telegram.messenger.MediaController;
+import io.bettergram.telegram.messenger.MessageObject;
+import io.bettergram.telegram.messenger.MessagesController;
+import io.bettergram.telegram.messenger.MessagesStorage;
+import io.bettergram.telegram.messenger.NotificationCenter;
+import io.bettergram.telegram.messenger.NotificationsController;
+import io.bettergram.telegram.messenger.SendMessagesHelper;
+import io.bettergram.telegram.messenger.SharedConfig;
+import io.bettergram.telegram.messenger.UserConfig;
+import io.bettergram.telegram.messenger.UserObject;
+import io.bettergram.telegram.messenger.Utilities;
 import io.bettergram.telegram.messenger.browser.Browser;
 import io.bettergram.telegram.messenger.camera.CameraController;
 import io.bettergram.telegram.messenger.support.widget.DefaultItemAnimator;
 import io.bettergram.telegram.messenger.support.widget.LinearLayoutManager;
 import io.bettergram.telegram.tgnet.ConnectionsManager;
 import io.bettergram.telegram.tgnet.TLRPC;
-import io.bettergram.telegram.ui.ActionBar.*;
+import io.bettergram.telegram.ui.ActionBar.ActionBarLayout;
+import io.bettergram.telegram.ui.ActionBar.AlertDialog;
+import io.bettergram.telegram.ui.ActionBar.BaseFragment;
+import io.bettergram.telegram.ui.ActionBar.DrawerLayoutContainer;
+import io.bettergram.telegram.ui.ActionBar.Theme;
 import io.bettergram.telegram.ui.Adapters.DrawerLayoutAdapter;
 import io.bettergram.telegram.ui.Cells.DrawerAddCell;
 import io.bettergram.telegram.ui.Cells.DrawerUserCell;
 import io.bettergram.telegram.ui.Cells.LanguageCell;
-import io.bettergram.telegram.ui.Components.*;
-
-import java.io.File;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
+import io.bettergram.telegram.ui.Components.AlertsCreator;
+import io.bettergram.telegram.ui.Components.AudioPlayerAlert;
+import io.bettergram.telegram.ui.Components.BlockingUpdateView;
+import io.bettergram.telegram.ui.Components.EmbedBottomSheet;
+import io.bettergram.telegram.ui.Components.JoinGroupAlert;
+import io.bettergram.telegram.ui.Components.LayoutHelper;
+import io.bettergram.telegram.ui.Components.PasscodeView;
+import io.bettergram.telegram.ui.Components.PipRoundVideoView;
+import io.bettergram.telegram.ui.Components.RecyclerListView;
+import io.bettergram.telegram.ui.Components.SharingLocationsAlert;
+import io.bettergram.telegram.ui.Components.StickersAlert;
+import io.bettergram.telegram.ui.Components.TermsOfServiceView;
+import io.bettergram.telegram.ui.Components.ThemeEditorView;
+import io.bettergram.telegram.ui.Components.UpdateAppAlertDialog;
 
 public class LaunchActivity extends Activity implements ActionBarLayout.ActionBarLayoutDelegate, NotificationCenter.NotificationCenterDelegate, DialogsActivity.DialogsActivityDelegate {
 
@@ -172,6 +219,7 @@ protected void onCreate(Bundle savedInstanceState) {
         }
 
         super.onCreate(savedInstanceState);
+        Log.e("test", "super.onCreate(savedInstanceState)");
         if (Build.VERSION.SDK_INT >= 24) {
             AndroidUtilities.isInMultiwindow = isInMultiWindowMode();
         }
diff --git a/inline-youtube-view/build.gradle b/inline-youtube-view/build.gradle
index 692a86c2e..87c51fe88 100644
--- a/inline-youtube-view/build.gradle
+++ b/inline-youtube-view/build.gradle
@@ -19,6 +19,10 @@ android {
     lintOptions {
         abortOnError true
     }
+    compileOptions {
+        sourceCompatibility JavaVersion.VERSION_1_8
+        targetCompatibility JavaVersion.VERSION_1_8
+    }
 }
 
 buildscript {
diff --git a/inline-youtube-view/src/main/java/com/flipkart/youtubeview/YouTubePlayerView.java b/inline-youtube-view/src/main/java/com/flipkart/youtubeview/YouTubePlayerView.java
index c79c10f15..ba1fe2e5f 100644
--- a/inline-youtube-view/src/main/java/com/flipkart/youtubeview/YouTubePlayerView.java
+++ b/inline-youtube-view/src/main/java/com/flipkart/youtubeview/YouTubePlayerView.java
@@ -29,13 +29,13 @@
 import android.support.annotation.Nullable;
 import android.text.TextUtils;
 import android.util.AttributeSet;
-import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewParent;
 import android.widget.FrameLayout;
 import android.widget.ImageView;
 import android.widget.ProgressBar;
+
 import com.flipkart.youtubeview.fragment.YouTubeBaseFragment;
 import com.flipkart.youtubeview.fragment.YouTubeFragment;
 import com.flipkart.youtubeview.fragment.YouTubeWebViewFragment;
@@ -45,6 +45,8 @@
 import com.flipkart.youtubeview.util.$Precondition$Check;
 import com.flipkart.youtubeview.util.ServiceUtil;
 
+import java.lang.reflect.Field;
+
 public class YouTubePlayerView extends FrameLayout {
 
     public static final String TAG = "YouTubeFragmentTAG";
@@ -94,7 +96,7 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
             lastWidth = newWidth;
             lastHeight = newHeight;
         }
-    
+
         setMeasuredDimension(lastWidth, lastHeight);
 
 //        if (playerContainer != null && playerContainer.getMeasuredHeight() != lastHeight) {
@@ -217,19 +219,21 @@ private void attachPlayer(boolean isNative) {
             if (isNative) {
                 youtubePlayerFragment = YouTubeFragment.newInstance(key, videoId);
             } else {
-                YouTubeWebViewFragment webViewFragment = YouTubeWebViewFragment
-                        .newInstance(webViewUrl, videoId);
+                YouTubeWebViewFragment webViewFragment = YouTubeWebViewFragment.newInstance(webViewUrl, videoId);
                 if (currentYouTubeFragment instanceof YouTubeWebViewFragment) {
-                    webViewFragment
-                            .setWebView(((YouTubeWebViewFragment) currentYouTubeFragment).removeWebView());
+                    webViewFragment.setWebView(((YouTubeWebViewFragment) currentYouTubeFragment).removeWebView());
                 }
                 youtubePlayerFragment = webViewFragment;
             }
-            youtubePlayerFragment.setYouTubeEventListener(listener);
-            this.fragmentManger.beginTransaction()
-                    .add(R.id.youtubeFragmentContainer, (Fragment) youtubePlayerFragment, TAG)
-                    .setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out)
-                    .commit();
+            try {
+                youtubePlayerFragment.setYouTubeEventListener(listener);
+                this.fragmentManger.beginTransaction()
+                        .add(R.id.youtubeFragmentContainer, (Fragment) youtubePlayerFragment, TAG)
+                        .setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out)
+                        .commitAllowingStateLoss();
+            } catch (Exception e) {
+                e.printStackTrace();
+            }
         }
     }
 
@@ -238,6 +242,13 @@ private YouTubeBaseFragment removeCurrentYouTubeFragment() {
         Fragment youTubeFragment = fragmentManager.findFragmentByTag(TAG);
         YouTubeBaseFragment youTubeBaseFragment = null;
         if (youTubeFragment instanceof YouTubeBaseFragment) {
+            try {
+                Field childFragmentManager = Fragment.class.getDeclaredField("mChildFragmentManager");
+                childFragmentManager.setAccessible(true);
+                childFragmentManager.set(youTubeFragment, null);
+            } catch (NoSuchFieldException | IllegalAccessException e) {
+                throw new RuntimeException(e);
+            }
             youTubeBaseFragment = (YouTubeBaseFragment) youTubeFragment;
             View fragmentView = youTubeFragment.getView();
             ViewParent parentView = null != fragmentView ? fragmentView.getParent() : null;
diff --git a/inline-youtube-view/src/main/java/com/flipkart/youtubeview/fragment/YouTubeFragment.java b/inline-youtube-view/src/main/java/com/flipkart/youtubeview/fragment/YouTubeFragment.java
index 068e71290..8f1c86213 100644
--- a/inline-youtube-view/src/main/java/com/flipkart/youtubeview/fragment/YouTubeFragment.java
+++ b/inline-youtube-view/src/main/java/com/flipkart/youtubeview/fragment/YouTubeFragment.java
@@ -18,11 +18,13 @@
  */
 package com.flipkart.youtubeview.fragment;
 
+import android.app.Fragment;
 import android.os.Bundle;
 import android.support.annotation.MainThread;
 import android.support.annotation.NonNull;
 import android.support.annotation.Nullable;
 import android.text.TextUtils;
+
 import com.flipkart.youtubeview.listener.YouTubeEventListener;
 import com.flipkart.youtubeview.models.PlayerStateList;
 import com.flipkart.youtubeview.util.$Precondition$Check;
@@ -30,6 +32,8 @@
 import com.google.android.youtube.player.YouTubePlayer;
 import com.google.android.youtube.player.YouTubePlayerFragment;
 
+import java.lang.reflect.Field;
+
 public class YouTubeFragment extends YouTubePlayerFragment implements YouTubePlayer.OnInitializedListener, YouTubeBaseFragment {
 
     private static final String ARG_VIDEO_ID = "videoId";
@@ -203,6 +207,18 @@ public void onDestroyView() {
         release();
     }
 
+    @Override
+    public void onDetach() {
+        super.onDetach();
+        try {
+            Field childFragmentManager = Fragment.class.getDeclaredField("mChildFragmentManager");
+            childFragmentManager.setAccessible(true);
+            childFragmentManager.set(this, null);
+        } catch (NoSuchFieldException | IllegalAccessException e) {
+            throw new RuntimeException(e);
+        }
+    }
+
     @MainThread
     public void release() {
         if (youTubePlayer != null) {
