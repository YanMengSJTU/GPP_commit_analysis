diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index 133143686..ee20a2150 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -596,6 +596,7 @@ public void onItemClick(final int id) {
                     fragment.setDelegate(new PhotoAlbumPickerActivity.PhotoAlbumPickerActivityDelegate() {
                         @Override
                         public void didSelectPhotos(ArrayList<String> photos, ArrayList<String> captions, ArrayList<MediaController.SearchImage> webPhotos) {
+                           //发送图片的地方. photos 路径  dialog_id 不明 captions size 是1 但是element是null.
                             SendMessagesHelper.prepareSendingPhotos(photos, null, dialog_id, replyingMessageObject, captions);
                             SendMessagesHelper.prepareSendingPhotosSearch(webPhotos, dialog_id, replyingMessageObject);
                             showReplyPanel(false, null, null, null, false, true);
@@ -1581,6 +1582,10 @@ public void onClick(DialogInterface dialogInterface, int i) {
         chatActivityEnterView.setId(id_chat_compose_panel);
         contentView.addView(chatActivityEnterView, LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT, LayoutHelper.WRAP_CONTENT, Gravity.LEFT | Gravity.BOTTOM));
         chatActivityEnterView.setDelegate(new ChatActivityEnterView.ChatActivityEnterViewDelegate() {
+//            @Override
+//            public void onStegoMsgSend(String path){
+//                SendMessagesHelper.prepareSendingPhoto(path, null, dialog_id, replyingMessageObject, null);
+//            }
             @Override
             public void onMessageSend(String message) {
                 moveScrollToLastMessage();
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
index 4d6580a2e..cc16195f8 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
@@ -52,19 +52,23 @@
 import org.telegram.android.AnimationCompat.ObjectAnimatorProxy;
 import org.telegram.android.AnimationCompat.ViewProxy;
 import org.telegram.messenger.ApplicationLoader;
-
+//输入的view
 public class ChatActivityEnterView extends FrameLayoutFixed implements NotificationCenter.NotificationCenterDelegate, SizeNotifierRelativeLayout.SizeNotifierRelativeLayoutDelegate {
 
     public interface ChatActivityEnterViewDelegate {
         void onMessageSend(String message);
+//        void onStegoMsgSend(String msg);
         void needSendTyping();
         void onTextChanged(CharSequence text, boolean bigChange);
         void onAttachButtonHidden();
         void onAttachButtonShow();
         void onWindowSizeChanged(int size);
     }
-
+    private boolean isStego=false;
     private EditText messageEditText;
+    /**
+     * sendbutton 发送消息的按钮.
+     */
     private ImageView sendButton;
     private PopupWindow emojiPopup;
     private ImageView emojiButton;
@@ -524,13 +528,26 @@ public boolean onTouch(View view, MotionEvent motionEvent) {
         sendButton.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
+                if(!isStego)
                 sendMessage();
+                else
+                {
+//                    if (delegate != null) {
+//                        delegate.onStegoMsgSend("/storage/emulated/0/baidu/18f40ad162d9f2d3f07c0bcaaaec8a136327cca2.jpg");
+//                    }
+                    sendStegoMsg();
+                }
             }
         });
 
         checkSendButton(false);
     }
 
+    private void sendStegoMsg() {
+        String path="/storage/emulated/0/baidu/18f40ad162d9f2d3f07c0bcaaaec8a136327cca2.jpg";
+        SendMessagesHelper.prepareSendingPhoto(path, null, dialog_id, replyingMessageObject, null);
+    }
+
     private void setKeyboardTransitionState(int state) {
         if (AndroidUtilities.usingHardwareInput) {
             if (state == 1) {
@@ -775,6 +792,11 @@ private void sendMessage() {
         }
     }
 
+    /**
+     * 发送消息
+     * @param text
+     * @return
+     */
     public boolean processSendingText(String text) {
         text = getTrimmedString(text);
         if (text.length() != 0) {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/PopupNotificationActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/PopupNotificationActivity.java
index d06f17a6d..c9ff37162 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/PopupNotificationActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/PopupNotificationActivity.java
@@ -38,6 +38,7 @@
 import org.telegram.android.MessagesController;
 import org.telegram.PhoneFormat.PhoneFormat;
 import org.telegram.android.NotificationsController;
+import org.telegram.android.SendMessagesHelper;
 import org.telegram.messenger.ApplicationLoader;
 import org.telegram.messenger.ConnectionsManager;
 import org.telegram.messenger.FileLoader;
@@ -209,7 +210,10 @@ public void onMessageSend(String message) {
                 currentMessageObject = null;
                 getNewMessage();
             }
-
+            @Override
+            public void onStegoMsgSend(String path){
+//                SendMessagesHelper.prepareSendingPhoto(path, null, dialog_id, replyingMessageObject, null);
+            }
             @Override
             public void onTextChanged(CharSequence text, boolean big) {
 
