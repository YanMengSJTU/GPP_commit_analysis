diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 84dc35852..4f3607412 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -1,23 +1,18 @@
 apply plugin: 'com.android.application'
 
-repositories {
-    mavenCentral()
-}
-
-dependencies {
-    compile 'com.android.support:support-v4:23.3.0'
-    compile "com.google.android.gms:play-services-gcm:8.4.0"
-    compile "com.google.android.gms:play-services-maps:8.4.0"
-    compile 'net.hockeyapp.android:HockeySDK:4.0.+'
-    compile 'com.googlecode.mp4parser:isoparser:1.0.+'
-}
-
 android {
     compileSdkVersion 23
     buildToolsVersion '23.0.3'
 
+    defaultConfig {
+        applicationId "org.telegram.messenger"
+        minSdkVersion 9
+        targetSdkVersion 23
+        versionCode 803
+        versionName "3.9.0"
+    }
+
     useLibrary 'org.apache.http.legacy'
-    defaultConfig.applicationId = "org.telegram.messenger"
 
     compileOptions {
         sourceCompatibility JavaVersion.VERSION_1_7
@@ -63,8 +58,6 @@ android {
         }
     }
 
-    defaultConfig.versionCode = 803
-
     sourceSets.main {
         jniLibs.srcDir 'libs'
         jni.srcDirs = [] //disable automatic ndk-build call
@@ -110,12 +103,14 @@ android {
         def abiVersion = variant.productFlavors.get(0).versionCode
         variant.mergedFlavor.versionCode = defaultConfig.versionCode * 10 + abiVersion;
     }
+}
 
-    defaultConfig {
-        minSdkVersion 9
-        targetSdkVersion 23
-        versionName "3.9.0"
-    }
+dependencies {
+    compile 'com.android.support:support-v4:23.3.0'
+    compile "com.google.android.gms:play-services-gcm:8.4.0"
+    compile "com.google.android.gms:play-services-maps:8.4.0"
+    compile 'net.hockeyapp.android:HockeySDK:4.0.+'
+    compile 'com.googlecode.mp4parser:isoparser:1.0.+'
 }
 
 apply plugin: 'com.google.gms.google-services'
diff --git a/build.gradle b/build.gradle
index 9b8572c46..c5ebfc5bf 100644
--- a/build.gradle
+++ b/build.gradle
@@ -1,11 +1,21 @@
 // Top-level build file where you can add configuration options common to all sub-projects/modules.
+
 buildscript {
     repositories {
         jcenter()
-        mavenCentral()
     }
     dependencies {
         classpath 'com.android.tools.build:gradle:2.1.2'
         classpath 'com.google.gms:google-services:2.1.0'
     }
-}
\ No newline at end of file
+}
+
+allprojects {
+    repositories {
+        jcenter()
+    }
+}
+
+task clean(type: Delete) {
+    delete rootProject.buildDir
+}
