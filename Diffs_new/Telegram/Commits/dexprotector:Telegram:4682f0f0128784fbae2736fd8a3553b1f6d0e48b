diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index cf9848807..dfda8bb54 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -1,4 +1,6 @@
 apply plugin: 'com.android.application'
+apply plugin: 'dexprotector'
+
 
 repositories {
     mavenCentral()
@@ -14,7 +16,7 @@ dependencies {
 
 android {
     compileSdkVersion 23
-    buildToolsVersion '23.0.3'
+    buildToolsVersion '23.0.1'
 
     useLibrary 'org.apache.http.legacy'
     defaultConfig.applicationId = "org.telegram.messenger"
@@ -54,6 +56,7 @@ android {
             signingConfig signingConfigs.release
             minifyEnabled false
             proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
+            ext.set("dexprotector.configFile", "${projectDir}/dexprotector.xml")
         }
 
         foss {
diff --git a/TMessagesProj/dexprotector.xml b/TMessagesProj/dexprotector.xml
new file mode 100644
index 000000000..940aacb2e
--- /dev/null
+++ b/TMessagesProj/dexprotector.xml
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<dexprotector>
+    <verbose>true</verbose>
+    <optimize>false</optimize>
+    <signMode>release</signMode>
+    <nativeLibraryEncryption>
+        <filters>
+            <filter>*.so</filter>
+        </filters>
+    </nativeLibraryEncryption>
+</dexprotector>
+
diff --git a/build.gradle b/build.gradle
index cc551aed8..de6365b8c 100644
--- a/build.gradle
+++ b/build.gradle
@@ -3,9 +3,13 @@ buildscript {
     repositories {
         jcenter()
         mavenCentral()
+        flatDir dirs: '/Users/developer/DexProtector'
     }
     dependencies {
         classpath 'com.android.tools.build:gradle:2.1.2'
         classpath 'com.google.gms:google-services:2.1.2'
+        classpath ':dexprotector-gradle-plugin'
+        classpath ':dexprotector'
     }
+
 }
\ No newline at end of file
