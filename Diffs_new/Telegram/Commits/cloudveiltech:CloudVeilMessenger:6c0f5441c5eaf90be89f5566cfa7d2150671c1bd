diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 036c71cef..950a89324 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -141,7 +141,7 @@ android {
         }
     }
 
-    defaultConfig.versionCode = 1519
+    defaultConfig.versionCode = 1520
 
     sourceSets.debug {
         manifest.srcFile 'config/debug/AndroidManifest.xml'
diff --git a/TMessagesProj/src/main/java/org/cloudveil/messenger/service/ChannelCheckingService.java b/TMessagesProj/src/main/java/org/cloudveil/messenger/service/ChannelCheckingService.java
index 842ef9808..1e8d965dc 100644
--- a/TMessagesProj/src/main/java/org/cloudveil/messenger/service/ChannelCheckingService.java
+++ b/TMessagesProj/src/main/java/org/cloudveil/messenger/service/ChannelCheckingService.java
@@ -24,6 +24,7 @@
 import org.cloudveil.messenger.api.model.response.SettingsResponse;
 import org.cloudveil.messenger.api.service.holder.ServiceClientHolders;
 import org.telegram.messenger.ApplicationLoader;
+import org.telegram.messenger.ChatObject;
 import org.telegram.messenger.DataQuery;
 import org.telegram.messenger.MessagesController;
 import org.telegram.messenger.NotificationCenter;
@@ -329,7 +330,8 @@ private void addDialogToRequest(long currentDialogId, @NonNull SettingsRequest r
             row.title = chat.title;
             row.userName = chat.username;
 
-            if (chat instanceof TLRPC.TL_channel) {
+            boolean isChannel = ChatObject.isChannel(chat) && !chat.megagroup;
+            if (isChannel) {
                 request.addChannel(row);
             } else {
                 request.addGroup(row);
