diff --git a/TMessagesProj/src/main/java/org/telegram/android/PostsController.java b/TMessagesProj/src/main/java/org/telegram/android/PostsController.java
index c0948d862..a92b286df 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/PostsController.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/PostsController.java
@@ -217,7 +217,7 @@ public void loadPosts(final String idOffset, final int offset, final int count,
 //            return;
 //        }
         loadingPosts = true;
-        Location location = LocationManagerHelper.getInstance().getLastLocation();
+        Location location = LocationManagerHelper.getInstance().getLocation4TimeLine();
         if (location == null) {
             loadingPosts = false; // TODO
             NotificationCenter.getInstance().postNotificationName(NotificationCenter.undefinedLocation);
@@ -317,7 +317,7 @@ public void loadPostsMock(final int offset, final int count, boolean reload) {
             return;
         }
         loadingPosts = true;
-        Location location = LocationManagerHelper.getInstance().getLastLocation();
+        Location location = LocationManagerHelper.getInstance().getLocation4TimeLine();
         if (location == null) {
             loadingPosts = false;
             NotificationCenter.getInstance().postNotificationName(NotificationCenter.undefinedLocation);
@@ -360,7 +360,7 @@ public void processLoadedPosts(PostResponse postResponse, boolean reload) {
 
 
     public void loadCurrentVenue(String loc) {
-        Location location = LocationManagerHelper.getInstance().getLastLocation();
+        Location location = LocationManagerHelper.getInstance().getLocation4TimeLine();
         if (location == null) {
 //            NotificationCenter.getInstance().postNotificationName(NotificationCenter.undefinedLocation);
         }
diff --git a/TMessagesProj/src/main/java/org/telegram/android/location/LocationManagerHelper.java b/TMessagesProj/src/main/java/org/telegram/android/location/LocationManagerHelper.java
index 52b1d6b2c..99eced64f 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/location/LocationManagerHelper.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/location/LocationManagerHelper.java
@@ -29,6 +29,8 @@
 
     private Location lastSavedLocation;
 
+    private Location customLocation;
+
     public static LocationManagerHelper getInstance() {
         LocationManagerHelper localInstance = Instance;
         if (localInstance == null) {
@@ -98,6 +100,13 @@ public Location getLastLocation() {
         return l;
     }
 
+    public Location getLocation4TimeLine() {
+        if(customLocation != null) {
+            return customLocation;
+        }
+        return getLastLocation();
+    }
+
     public boolean isLocationServiceEnabled() {
         LocationManager lm = (LocationManager) ApplicationLoader.applicationContext.getSystemService(Context.LOCATION_SERVICE);
         return (lm.isProviderEnabled(LocationManager.GPS_PROVIDER) && lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER));
@@ -111,6 +120,13 @@ public Location getLastSavedLocation() {
         return lastSavedLocation;
     }
 
+    public Location getLastSavedOrLastLocation() {
+        if(lastSavedLocation != null) {
+            return lastSavedLocation;
+        }
+        return getLastLocation();
+    }
+
 
     public String getAddress(Context context, double longitude, double latitude, String defaultVal) {
         Geocoder geocoder;
@@ -189,4 +205,12 @@ public boolean isGoogleMapsInstalled() {
             return false;
         }
     }
+
+    public Location getCustomLocation() {
+        return customLocation;
+    }
+
+    public void setCustomLocation(Location customLocation) {
+        this.customLocation = customLocation;
+    }
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/PostsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/PostsActivity.java
index fe110505e..2b58b067e 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/PostsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/PostsActivity.java
@@ -651,7 +651,7 @@ public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
                 }
                 //TODO fix it. to often run load posts.
                 if (visibleItemCount > 0) {
-                    if (layoutManager.findLastVisibleItemPosition() == PostsController.getInstance().getPosts().size() - 1 && !mIsScrollingUp) {
+                    if (layoutManager.findLastVisibleItemPosition() == PostsController.getInstance().getPosts().size() - 1 && !mIsScrollingUp && !PostsController.getInstance().getPosts().isEmpty()) {
                         String offset = PostsController.getInstance().getPosts().get(PostsController.getInstance().getPosts().size() - 1).getId(); // TODO When empty list. java.lang.ArrayIndexOutOfBoundsException: length=12; index=-1
                         startRefreshingProgressView();
                         PostsController.getInstance().loadPosts(offset, PostsController.getInstance().getPosts().size(), Constants.POST_COUNT, false, offlineMode);
@@ -1074,37 +1074,21 @@ private void openLocationChooser() {
         fragment.setDelegate(new LocationActivityAragats.LocationActivityDelegate() {
             @Override
             public void didSelectLocation(TLRPC.MessageMedia location) {
-                Location lastSavedLocation = LocationManagerHelper.getInstance().getLastSavedLocation();
-                if (location.isCustomLocation) {
-                    locationItem.setIcon(R.drawable.ic_attach_location_white);
-                } else {
+                //TODO I think i do not need last saved location. I can just put "network" provider into Location isntance
+                Location lastSavedLocation = LocationManagerHelper.getInstance().getLastSavedOrLastLocation();
+                if (!location.isCustomLocation || lastSavedLocation == null) {
                     locationItem.setIcon(R.drawable.ic_attach_location);
+                    LocationManagerHelper.getInstance().setCustomLocation(null);
+                    // TODO save additional request if the same coordinates are chosen ?? But man can move. so current location could change
+                    refreshPosts(true);
+                    return;
                 }
-                Coordinates coordinates = new Coordinates();
-                coordinates.setCoordinates(Arrays.asList(location.geo._long, location.geo.lat));
-                coordinates.setType("Point");
-//                PostCreateActivity.this.userCoordinates = coordinates;
-//                Venue venue = new Venue();
-//                if (location.geoPlace != null) {
-//                    Coordinates placeCoordinates = new Coordinates();
-//                    placeCoordinates.setCoordinates(Arrays.asList(location.geoPlace._long, location.geoPlace.lat));
-//                    placeCoordinates.setType("Point");
-//                    venue.setCoordinates(placeCoordinates);
-//                } else {
-//                    venue.setCoordinates(coordinates);
-//                }
-//                venue.setFoursquareId(location.venue_id);
-//                if (!StringUtils.isEmpty(location.iconUrl)) {
-//                    Image image = new Image();
-//                    image.setUrl(location.iconUrl);
-//                    venue.setIcon(image);
-//                }
-//                venue.setName(location.title);
-//                venue.setAddress(location.address);
-//
-//                PostCreateActivity.this.venue = venue;
-//
-//                updateVenue();
+                Location customLocation = new Location(lastSavedLocation.getProvider());
+                customLocation.setLatitude(location.geo.lat);
+                customLocation.setLongitude(location.geo._long);
+                LocationManagerHelper.getInstance().setCustomLocation(customLocation);
+                locationItem.setIcon(R.drawable.ic_attach_location_white);
+                refreshPosts(true);
             }
         });
         presentFragment(fragment);
diff --git a/TMessagesProj/src/main/java/org/telegram/utils/Constants.java b/TMessagesProj/src/main/java/org/telegram/utils/Constants.java
index 425ca2cb1..8d8be303b 100644
--- a/TMessagesProj/src/main/java/org/telegram/utils/Constants.java
+++ b/TMessagesProj/src/main/java/org/telegram/utils/Constants.java
@@ -53,4 +53,6 @@
     public static String LOCAL_POSTS_FILENAME = "rtree";
 
     public static long TIME_DIFFERENCE = 1 * 24 * 60 * 60 * 1000; // 1 Day.
+
+    public static String POINT = "Point";
 }
\ No newline at end of file
