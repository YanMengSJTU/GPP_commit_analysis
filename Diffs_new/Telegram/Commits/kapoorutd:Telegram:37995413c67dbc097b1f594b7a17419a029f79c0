diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index e12091333..b12a07170 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -6219,7 +6219,7 @@ public void onTransitionAnimationEnd(boolean isOpen, boolean backward) {
                 MessagesController.getInstance().loadFullUser(currentUser, classGuid, false);
             }
             if (Build.VERSION.SDK_INT >= 21) {
-                createChatAttachView();
+           //     createChatAttachView();
             }
         }
     }
@@ -8126,8 +8126,27 @@ public void onClickListnerOnUi(int i) {
         try {
             AndroidUtilities.hideKeyboard(getParentActivity().getCurrentFocus());
             if (i == 1) {
-                showTabsAndmenu();
-                finishFragment();
+
+
+                if (actionBar.isActionModeShowed()) {
+                    for (int a = 1; a >= 0; a--) {
+                        selectedMessagesIds[a].clear();
+                        selectedMessagesCanCopyIds[a].clear();
+                    }
+                    cantDeleteMessagesCount = 0;
+                    if (chatActivityEnterView.isEditingMessage()) {
+                        chatActivityEnterView.setEditingMessageObject(null, false);
+                    } else {
+                        actionBar.hideActionMode();
+                        updatePinnedMessageView(true);
+                    }
+                    updateVisibleRows();
+                } else {
+                    finishFragment();
+                }
+
+                //showTabsAndmenu();
+               // finishFragment();
             } else if (i == 2) {
                 if(parentLayout!=null)
                     parentLayout.openDrawer();
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
index 6c4567125..49fae4a80 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
@@ -799,7 +799,7 @@ public void onClick(View v) {
             notifyButton.setScaleType(ImageView.ScaleType.CENTER);
             notifyButton.setVisibility(canWriteToChannel ? VISIBLE : GONE);
             if (Build.VERSION.SDK_INT >= 21) {
-                notifyButton.setBackgroundDrawable(Theme.createBarSelectorDrawable(Theme.INPUT_FIELD_SELECTOR_COLOR));
+              //  notifyButton.setBackgroundDrawable(Theme.createBarSelectorDrawable(Theme.INPUT_FIELD_SELECTOR_COLOR));
             }
             attachButton.addView(notifyButton, LayoutHelper.createLinear(48, 48));
             notifyButton.setOnClickListener(new OnClickListener() {
@@ -1286,9 +1286,9 @@ private void onWindowSizeChanged() {
     }
 
     private void resizeForTopView(boolean show) {
-        LayoutParams layoutParams = (LayoutParams) textFieldContainer.getLayoutParams();
+        LayoutParams layoutParams = (LayoutParams) textFieldContainerparant.getLayoutParams();
         layoutParams.topMargin = AndroidUtilities.dp(2) + (show ? topView.getLayoutParams().height : 0);
-        textFieldContainer.setLayoutParams(layoutParams);
+        textFieldContainerparant.setLayoutParams(layoutParams);
     }
 
     public void onDestroy() {
@@ -2046,7 +2046,7 @@ public void addToAttachLayout(View view) {
             viewGroup.removeView(view);
         }
         if (Build.VERSION.SDK_INT >= 21) {
-            view.setBackgroundDrawable(Theme.createBarSelectorDrawable(Theme.INPUT_FIELD_SELECTOR_COLOR));
+        //    view.setBackgroundDrawable(Theme.createBarSelectorDrawable(Theme.INPUT_FIELD_SELECTOR_COLOR));
         }
         attachButton.addView(view, LayoutHelper.createLinear(48, 48));
     }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatAvatarContainer.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatAvatarContainer.java
index 6a3d9b574..5af64a9cd 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatAvatarContainer.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatAvatarContainer.java
@@ -96,7 +96,7 @@ public void onClick(View v) {
                         args.putLong("dialog_id", parentFragment.getDialogId());
                     }
                     ProfileActivity fragment = new ProfileActivity(args);
-                 //   fragment.setPlayProfileAnimation(true);
+                    //   fragment.setPlayProfileAnimation(true);
                     parentFragment.presentFragment(fragment);
                 } else if (chat != null) {
                     Bundle args = new Bundle();
@@ -134,7 +134,7 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
     @Override
     protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
         int actionBarHeight = ActionBar.getCurrentActionBarHeight();
-        int viewTop = (actionBarHeight - AndroidUtilities.dp(42)) / 2 + (Build.VERSION.SDK_INT >= 21 ? AndroidUtilities.statusBarHeight : 0);
+        int viewTop = (actionBarHeight - AndroidUtilities.dp(42)) / 2 + 0;///* (Build.VERSION.SDK_INT >= 21 ? AndroidUtilities.statusBarHeight : 0*/);
         avatarImageView.layout(AndroidUtilities.dp(8), viewTop, AndroidUtilities.dp(42 + 8), viewTop + AndroidUtilities.dp(42));
         titleTextView.layout(AndroidUtilities.dp(8 + 54), viewTop + AndroidUtilities.dp(1.3f), AndroidUtilities.dp(8 + 54) + titleTextView.getMeasuredWidth(), viewTop + titleTextView.getTextHeight() + AndroidUtilities.dp(1.3f));
         if (timeItem != null) {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SocialFriendActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/SocialFriendActivity.java
index 51a10652e..4dc7c7790 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SocialFriendActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SocialFriendActivity.java
@@ -211,6 +211,7 @@ public void onItemClick(AdapterView<?> parent, View view,
                     if (u !=null) {
                         args.putInt("user_id", Integer.parseInt(listnew.get(pos).id));
                         args.putString("friendId", listnew.get(pos).getUserId());
+                        args.putString("cCode",listnew.get(pos).getcCode());
                         presentFragment(new UserProfileActivity(args,listnew.get(pos)));
                         ArrayList<CustomHttpParams> params = new ArrayList<>();
                         params.add(new CustomHttpParams("userId", ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE).getString("social_id", "")));
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/UserProfileActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/UserProfileActivity.java
index fc6ab65fb..fecbca42c 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/UserProfileActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/UserProfileActivity.java
@@ -45,6 +45,7 @@
  * Created by ram on 11/6/16.
  */
 public class UserProfileActivity extends BaseFragment implements PhotoViewer.PhotoViewerProvider,View.OnClickListener,OnServerResponse,OnTelegramSync {
+    private final String cCode;
     private BackupImageView avatarImageView;
     private TextView statusTextView,nameTextView;
     private FrameLayout avatarContainer;
@@ -100,6 +101,7 @@ public void onUserSyncFailed() {
     public UserProfileActivity(Bundle args,TLRPC.TelegramUsers telegramUser ) {
         user=telegramUser ;
         friendId  = args.getString("friendId");
+        cCode = args.getString("cCode");
     }
 
 
@@ -154,7 +156,7 @@ public void onItemClick(int id) {
         //   emptyView=(TextView)fragmentView.findViewById(R.id.empty_view);
         checkAndUpdateAvatar();
         SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
-        country_txt.setText(preferences.getString("country","Nepal"));
+        country_txt.setText(cCode);
         adapter = new CustomGridAdapter(mcContext,listnew);
         grid=(GridView)fragmentView.findViewById(R.id.grid);
         emptyView=(TextView)fragmentView.findViewById(R.id.empty_view);
