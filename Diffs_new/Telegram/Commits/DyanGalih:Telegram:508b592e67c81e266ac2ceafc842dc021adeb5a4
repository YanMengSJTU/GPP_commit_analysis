diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 83e476c38..52ec28648 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -47,6 +47,8 @@ dependencies {
     compile('com.crashlytics.sdk.android:crashlytics:2.6.8@aar') {
         transitive = true;
     }
+    compile project(path: ':gtfwm')
+    compile project(path: ':gtfwm')
 }
 
 advancedVersioning {
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/ApplicationLoader.java b/TMessagesProj/src/main/java/org/telegram/messenger/ApplicationLoader.java
index 44daf8088..578fec135 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/ApplicationLoader.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/ApplicationLoader.java
@@ -27,6 +27,8 @@
 import android.util.Base64;
 
 import com.crashlytics.android.Crashlytics;
+import com.gamatechno.gtfwm.Config;
+import com.gamatechno.gtfwm.Gtfw;
 import com.google.android.gms.common.ConnectionResult;
 import com.google.android.gms.common.GooglePlayServicesUtil;
 
@@ -39,7 +41,7 @@
 import java.io.File;
 import java.io.RandomAccessFile;
 
-public class ApplicationLoader extends Application {
+public class ApplicationLoader extends Gtfw {
 
     @SuppressLint("StaticFieldLeak")
     public static volatile Context applicationContext;
@@ -198,8 +200,24 @@ public static void postInitApplication() {
     @Override
     public void onCreate() {
         super.onCreate();
+        gtfw = this;
+
+
+        if (BuildConfig.DEBUG) {
+            Gtfw.getInstance().setDebug(true);
+        } else {
+            Gtfw.getInstance().setDebug(false);
+        }
+
         Fabric.with(this, new Crashlytics());
 
+        this.init();
+
+        //Config.getInstance(this).setLoginClass(LoginActivity.class);
+        Config.getInstance(getApplicationContext()).setConfig("RESULT_KEY", "gtfwResult");
+        Config.getInstance(getApplicationContext()).setConfig("SESSION_COOKIE", "sf");
+        Config.getInstance(getApplicationContext()).setConfig("NEW_HASH", false);
+
         applicationContext = getApplicationContext();
         NativeLoader.initNativeLibs(ApplicationLoader.applicationContext);
         ConnectionsManager.native_setJava(Build.VERSION.SDK_INT == 14 || Build.VERSION.SDK_INT == 15);
diff --git a/gradle.properties b/gradle.properties
index 88d435d8c..3c2865385 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -17,3 +17,4 @@ RELEASE_KEY_PASSWORD=webappid
 RELEASE_KEY_ALIAS=polytron
 RELEASE_STORE_PASSWORD=webappid
 android.useDeprecatedNdk=true
+org.gradle.jvmargs=-Xmx4608M
