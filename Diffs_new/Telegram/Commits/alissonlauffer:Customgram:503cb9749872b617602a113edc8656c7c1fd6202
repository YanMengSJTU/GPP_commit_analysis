diff --git a/.gitignore b/.gitignore
index 1f4151cd4..6355888c3 100644
--- a/.gitignore
+++ b/.gitignore
@@ -4,7 +4,6 @@ build/
 obj/
 *.iml
 local.properties
-*.keystore
 gradle.properties
 
 TMessagesProj/src/main/java/org/telegram/messenger/BuildVars.java
diff --git a/.travis.yml b/.travis.yml
index 0efee4673..2b1368b0e 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -13,13 +13,9 @@ install:
 before_script:
   - export NDK=$ANDROID_HOME/ndk-bundle
   - wget $FIREBASE_URL -O TMessagesProj/google-services.json
-  - echo -e "APP_ID = ${APP_ID}\nAPP_HASH = ${APP_HASH}" > API_KEYS
 script:
   # Build
   - "./gradlew assembleAfatRelease"
 
 after_success:
   - 'find | grep .apk'
-
-after_script:
-  - "rm API_KEYS"
diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 6e68e35d0..6b0c7c40d 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -34,18 +34,6 @@ dependencies {
     implementation 'com.stripe:stripe-android:2.0.2'
 }
 
-//return an api key from a properties file.
-def getAppId(){
-    Properties properties = new Properties()
-    properties.load(new FileInputStream("./API_KEYS"))
-    return properties.get("APP_ID")
-}
-def getAppHash(){
-    Properties properties = new Properties()
-    properties.load(new FileInputStream("./API_KEYS"))
-    return "\"" + properties.get("APP_HASH") + "\""
-}
-
 android {
     compileSdkVersion 28
     buildToolsVersion '28.0.3'
@@ -78,16 +66,16 @@ android {
     signingConfigs {
         debug {
             storeFile file("config/release.keystore")
-            storePassword RELEASE_STORE_PASSWORD
-            keyAlias RELEASE_KEY_ALIAS
-            keyPassword RELEASE_KEY_PASSWORD
+            storePassword System.getenv("RELEASE_STORE_PASSWORD")
+            keyAlias System.getenv("RELEASE_KEY_ALIAS")
+            keyPassword System.getenv("RELEASE_KEY_PASSWORD")
         }
 
         release {
             storeFile file("config/release.keystore")
-            storePassword RELEASE_STORE_PASSWORD
-            keyAlias RELEASE_KEY_ALIAS
-            keyPassword RELEASE_KEY_PASSWORD
+            storePassword System.getenv("RELEASE_STORE_PASSWORD")
+            keyAlias System.getenv("RELEASE_KEY_ALIAS")
+            keyPassword System.getenv("RELEASE_KEY_PASSWORD")
         }
     }
 
@@ -293,8 +281,8 @@ android {
 
         vectorDrawables.generatedDensities = ['mdpi', 'hdpi', 'xhdpi', 'xxhdpi']
         //obtain your own keys at https://core.telegram.org/api/obtaining_api_id
-        buildConfigField 'int', 'APP_ID', getAppId()
-        buildConfigField 'String', 'APP_HASH', getAppHash()
+        buildConfigField 'int', 'APP_ID', System.getenv("APP_ID")
+        buildConfigField 'String', 'APP_HASH', "\"" + System.getenv("APP_HASH") + "\""
 
         externalNativeBuild {
             ndkBuild {
diff --git a/TMessagesProj/config/release.keystore b/TMessagesProj/config/release.keystore
new file mode 100644
index 000000000..e33d73def
Binary files /dev/null and b/TMessagesProj/config/release.keystore differ
