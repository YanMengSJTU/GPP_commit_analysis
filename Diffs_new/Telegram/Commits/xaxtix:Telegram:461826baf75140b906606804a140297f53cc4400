diff --git a/TMessagesProj/jni/gifvideo.cpp b/TMessagesProj/jni/gifvideo.cpp
index 863eef2a2..39c1d6fdd 100644
--- a/TMessagesProj/jni/gifvideo.cpp
+++ b/TMessagesProj/jni/gifvideo.cpp
@@ -260,7 +260,9 @@ enum PARAM_NUM {
     PARAM_NUM_VIDEO_FRAME_SIZE = 6,
     PARAM_NUM_FRAMERATE = 7,
     PARAM_NUM_ROTATION = 8,
-    PARAM_NUM_COUNT = 9
+    PARAM_NUM_AUDIO_SUPPORTED_CODEC = 9,
+    PARAM_NUM_HAS_AUDIO = 10,
+    PARAM_NUM_COUNT = 11,
 };
 
 void Java_org_telegram_ui_Components_AnimatedFileDrawable_getVideoInfo(JNIEnv *env, jclass clazz, jstring src, jintArray data) {
@@ -312,7 +314,12 @@ void Java_org_telegram_ui_Components_AnimatedFileDrawable_getVideoInfo(JNIEnv *e
             if (info->audio_stream != nullptr) {
                 mov = (MOVStreamContext *) info->audio_stream->priv_data;
                 dataArr[PARAM_NUM_AUDIO_FRAME_SIZE] = (jint) mov->data_size;
+                dataArr[PARAM_NUM_AUDIO_SUPPORTED_CODEC] =
+                        info->audio_stream->codecpar->codec_id == AV_CODEC_ID_AAC ||
+                        info->audio_stream->codecpar->codec_id == AV_CODEC_ID_AAC_LATM;
             }
+
+            dataArr[PARAM_NUM_HAS_AUDIO] = info->audio_stream != nullptr;
         }
         dataArr[PARAM_NUM_BITRATE] = (jint) info->video_stream->codecpar->bit_rate;
         dataArr[PARAM_NUM_WIDTH] = info->video_stream->codecpar->width;
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/MediaController.java b/TMessagesProj/src/main/java/org/telegram/messenger/MediaController.java
index 8573ace0b..07a6a367c 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/MediaController.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/MediaController.java
@@ -34,6 +34,7 @@
 import android.media.MediaCodecList;
 import android.media.MediaExtractor;
 import android.media.MediaFormat;
+import android.media.MediaMetadataRetriever;
 import android.media.MediaRecorder;
 import android.net.Uri;
 import android.os.Build;
@@ -90,10 +91,15 @@
 public class MediaController implements AudioManager.OnAudioFocusChangeListener, NotificationCenter.NotificationCenterDelegate, SensorEventListener {
 
     private native int startRecord(String path);
+
     private native int writeFrame(ByteBuffer frame, int len);
+
     private native void stopRecord();
+
     public static native int isOpusFile(String path);
+
     public native byte[] getWaveform(String path);
+
     public native byte[] getWaveform2(short[] array, int length);
 
     private class AudioBuffer {
@@ -337,7 +343,10 @@ public String getPathToAttach() {
     private static final float VOLUME_NORMAL = 1.0f;
     private static final int AUDIO_NO_FOCUS_NO_DUCK = 0;
     private static final int AUDIO_NO_FOCUS_CAN_DUCK = 1;
-    private static final int AUDIO_FOCUSED  = 2;
+    private static final int AUDIO_FOCUSED = 2;
+
+    private static final int MEDIACODEC_TIMEOUT_DEFAULT = 2500;
+    private static final int MEDIACODEC_TIMEOUT_INCREASED = 22000;
 
     private ArrayList<MessageObject> videoConvertQueue = new ArrayList<>();
     private final Object videoQueueSync = new Object();
@@ -3747,7 +3756,11 @@ private void checkConversionCanceled() {
         }
     }
 
-    private boolean convertVideo(final MessageObject messageObject) {
+    private boolean convertVideo(MessageObject messageObject) {
+        return convertVideo(messageObject, MEDIACODEC_TIMEOUT_DEFAULT);
+    }
+
+    private boolean convertVideo(final MessageObject messageObject, int timoutUsec) {
         if (messageObject == null || messageObject.videoEditedInfo == null) {
             return false;
         }
@@ -3768,6 +3781,14 @@ private boolean convertVideo(final MessageObject messageObject) {
             videoPath = "";
         }
 
+        if (framerate == 0) {
+            framerate = 25;
+        } else if (framerate > 59) {
+            framerate = 59;
+        }
+
+        if(bitrate <= 0) bitrate = 921600;
+
         if (Build.VERSION.SDK_INT < 18 && resultHeight > resultWidth && resultWidth != originalWidth && resultHeight != originalHeight) {
             int temp = resultHeight;
             resultHeight = resultWidth;
@@ -3795,7 +3816,8 @@ private boolean convertVideo(final MessageObject messageObject) {
 
         SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("videoconvert", Activity.MODE_PRIVATE);
         File inputFile = new File(videoPath);
-        if (messageObject.getId() != 0) {
+
+        if (messageObject.getId() != 0 && timoutUsec == MEDIACODEC_TIMEOUT_DEFAULT) {
             boolean isPreviousOk = preferences.getBoolean("isPreviousOk", true);
             preferences.edit().putBoolean("isPreviousOk", false).commit();
             if (!inputFile.canRead() || !isPreviousOk) {
@@ -3814,6 +3836,8 @@ private boolean convertVideo(final MessageObject messageObject) {
             MP4Builder mediaMuxer = null;
             MediaExtractor extractor = null;
 
+            boolean repeatWithIncreasedTimeout = false;
+
             try {
                 MediaCodec.BufferInfo info = new MediaCodec.BufferInfo();
                 Mp4Movie movie = new Mp4Movie();
@@ -3929,9 +3953,58 @@ private boolean convertVideo(final MessageObject messageObject) {
 
                             MediaFormat outputFormat = MediaFormat.createVideoFormat(MIME_TYPE, resultWidth, resultHeight);
                             outputFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);
-                            outputFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitrate > 0 ? bitrate : 921600);
-                            outputFormat.setInteger(MediaFormat.KEY_FRAME_RATE, framerate != 0 ? framerate : 25);
+                            outputFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitrate);
+                            outputFormat.setInteger(MediaFormat.KEY_FRAME_RATE, framerate);
                             outputFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 2);
+
+                            if (Build.VERSION.SDK_INT >= 23) {
+                                int profile;
+                                int level;
+
+                                if (Math.min(resultHeight, resultWidth) >= 1080) {
+                                    profile = MediaCodecInfo.CodecProfileLevel.AVCProfileHigh;
+                                    level = MediaCodecInfo.CodecProfileLevel.AVCLevel41;
+                                } else if (Math.min(resultHeight, resultWidth) >= 720) {
+                                    profile = MediaCodecInfo.CodecProfileLevel.AVCProfileHigh;
+                                    level = MediaCodecInfo.CodecProfileLevel.AVCLevel4;
+                                } else if (Math.min(resultHeight, resultWidth) >= 480) {
+                                    profile = MediaCodecInfo.CodecProfileLevel.AVCProfileBaseline;
+                                    level = MediaCodecInfo.CodecProfileLevel.AVCLevel31;
+                                } else {
+                                    profile = MediaCodecInfo.CodecProfileLevel.AVCProfileBaseline;
+                                    level = MediaCodecInfo.CodecProfileLevel.AVCLevel3;
+                                }
+
+                                MediaCodecInfo.CodecCapabilities capabilities = MediaCodecInfo.CodecCapabilities.createFromProfileLevel(MIME_TYPE, profile, level);
+
+                                if(capabilities == null && profile == MediaCodecInfo.CodecProfileLevel.AVCProfileHigh){
+                                    profile = MediaCodecInfo.CodecProfileLevel.AVCProfileBaseline;
+                                    capabilities = MediaCodecInfo.CodecCapabilities.createFromProfileLevel(MIME_TYPE, profile, level);
+                                }
+                                if (capabilities.getEncoderCapabilities() != null) {
+                                    outputFormat.setInteger(MediaFormat.KEY_PROFILE, profile);
+                                    outputFormat.setInteger(MediaFormat.KEY_LEVEL, level);
+
+                                    int maxBitrate = capabilities.getVideoCapabilities().getBitrateRange().getUpper();
+                                    if (bitrate > maxBitrate) {
+                                        bitrate = maxBitrate;
+                                        outputFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitrate);
+                                    }
+
+                                    int maxFramerate = capabilities.getVideoCapabilities().getSupportedFrameRates().getUpper();
+                                    if (framerate > maxFramerate) {
+                                        framerate = maxFramerate;
+                                        outputFormat.setInteger(MediaFormat.KEY_FRAME_RATE, framerate);
+                                    }
+                                }
+                            } else {
+                                if (Math.min(resultHeight, resultWidth) <= 480) {
+                                    if(bitrate < 921600)
+                                    bitrate = 921600;
+                                    outputFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitrate);
+                                }
+                            }
+
                             if (Build.VERSION.SDK_INT < 18) {
                                 outputFormat.setInteger("stride", resultWidth + 32);
                                 outputFormat.setInteger("slice-height", resultHeight);
@@ -3954,7 +4027,6 @@ private boolean convertVideo(final MessageObject messageObject) {
                             decoder.configure(videoFormat, outputSurface.getSurface(), null, 0);
                             decoder.start();
 
-                            final int TIMEOUT_USEC = 2500;
                             ByteBuffer[] decoderInputBuffers = null;
                             ByteBuffer[] encoderOutputBuffers = null;
                             ByteBuffer[] encoderInputBuffers = null;
@@ -3974,7 +4046,7 @@ private boolean convertVideo(final MessageObject messageObject) {
                                     boolean eof = false;
                                     int index = extractor.getSampleTrackIndex();
                                     if (index == videoIndex) {
-                                        int inputBufIndex = decoder.dequeueInputBuffer(TIMEOUT_USEC);
+                                        int inputBufIndex = decoder.dequeueInputBuffer(MEDIACODEC_TIMEOUT_DEFAULT);
                                         if (inputBufIndex >= 0) {
                                             ByteBuffer inputBuf;
                                             if (Build.VERSION.SDK_INT < 21) {
@@ -4016,7 +4088,7 @@ private boolean convertVideo(final MessageObject messageObject) {
                                         eof = true;
                                     }
                                     if (eof) {
-                                        int inputBufIndex = decoder.dequeueInputBuffer(TIMEOUT_USEC);
+                                        int inputBufIndex = decoder.dequeueInputBuffer(MEDIACODEC_TIMEOUT_DEFAULT);
                                         if (inputBufIndex >= 0) {
                                             decoder.queueInputBuffer(inputBufIndex, 0, 0, 0L, MediaCodec.BUFFER_FLAG_END_OF_STREAM);
                                             inputDone = true;
@@ -4028,7 +4100,7 @@ private boolean convertVideo(final MessageObject messageObject) {
                                 boolean encoderOutputAvailable = true;
                                 while (decoderOutputAvailable || encoderOutputAvailable) {
                                     checkConversionCanceled();
-                                    int encoderStatus = encoder.dequeueOutputBuffer(info, TIMEOUT_USEC);
+                                    int encoderStatus = encoder.dequeueOutputBuffer(info, timoutUsec);
                                     if (encoderStatus == MediaCodec.INFO_TRY_AGAIN_LATER) {
                                         encoderOutputAvailable = false;
                                     } else if (encoderStatus == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
@@ -4095,7 +4167,7 @@ private boolean convertVideo(final MessageObject messageObject) {
                                     }
 
                                     if (!decoderDone) {
-                                        int decoderStatus = decoder.dequeueOutputBuffer(info, TIMEOUT_USEC);
+                                        int decoderStatus = decoder.dequeueOutputBuffer(info, MEDIACODEC_TIMEOUT_DEFAULT);
                                         if (decoderStatus == MediaCodec.INFO_TRY_AGAIN_LATER) {
                                             decoderOutputAvailable = false;
                                         } else if (decoderStatus == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
@@ -4145,7 +4217,7 @@ private boolean convertVideo(final MessageObject messageObject) {
                                                         inputSurface.setPresentationTime(info.presentationTimeUs * 1000);
                                                         inputSurface.swapBuffers();
                                                     } else {
-                                                        int inputBufIndex = encoder.dequeueInputBuffer(TIMEOUT_USEC);
+                                                        int inputBufIndex = encoder.dequeueInputBuffer(MEDIACODEC_TIMEOUT_DEFAULT);
                                                         if (inputBufIndex >= 0) {
                                                             outputSurface.drawImage(true);
                                                             ByteBuffer rgbBuf = outputSurface.getFrame();
@@ -4169,7 +4241,7 @@ private boolean convertVideo(final MessageObject messageObject) {
                                                 if (Build.VERSION.SDK_INT >= 18) {
                                                     encoder.signalEndOfInputStream();
                                                 } else {
-                                                    int inputBufIndex = encoder.dequeueInputBuffer(TIMEOUT_USEC);
+                                                    int inputBufIndex = encoder.dequeueInputBuffer(MEDIACODEC_TIMEOUT_DEFAULT);
                                                     if (inputBufIndex >= 0) {
                                                         encoder.queueInputBuffer(inputBufIndex, 0, 1, info.presentationTimeUs, MediaCodec.BUFFER_FLAG_END_OF_STREAM);
                                                     }
@@ -4180,6 +4252,13 @@ private boolean convertVideo(final MessageObject messageObject) {
                                 }
                             }
                         } catch (Exception e) {
+                            // in some case encoder.dequeueOutputBuffer return IllegalStateException
+                            // stable reproduced on xiaomi
+                            // fix it by increasing timeout
+                            if (e instanceof IllegalStateException && timoutUsec != MEDIACODEC_TIMEOUT_INCREASED) {
+                                repeatWithIncreasedTimeout = true;
+                            }
+                            FileLog.e("bitrate: " + bitrate + " framerate: " + framerate + " size: " + resultHeight + "x" + resultWidth);
                             FileLog.e(e);
                             error = true;
                         }
@@ -4208,6 +4287,7 @@ private boolean convertVideo(final MessageObject messageObject) {
                 }
             } catch (Exception e) {
                 error = true;
+                FileLog.e("bitrate: " + bitrate + " framerate: " + framerate + " size: " + resultHeight + "x" + resultWidth);
                 FileLog.e(e);
             } finally {
                 if (extractor != null) {
@@ -4224,6 +4304,12 @@ private boolean convertVideo(final MessageObject messageObject) {
                     FileLog.d("time = " + (System.currentTimeMillis() - time));
                 }
             }
+
+            if (repeatWithIncreasedTimeout) {
+                preferences.edit().putBoolean("isPreviousOk", false).commit();
+                return convertVideo(messageObject, MEDIACODEC_TIMEOUT_INCREASED);
+            }
+
         } else {
             preferences.edit().putBoolean("isPreviousOk", true).commit();
             didWriteData(messageObject, cacheFile, true, 0, true);
@@ -4233,4 +4319,43 @@ private boolean convertVideo(final MessageObject messageObject) {
         didWriteData(messageObject, cacheFile, true, 0, error);
         return true;
     }
+
+    public static int getVideoBitrate(String path) {
+        MediaMetadataRetriever retriever = new MediaMetadataRetriever();
+        int bitrate = 0;
+        try {
+            retriever.setDataSource(path);
+            bitrate = Integer.parseInt(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_BITRATE));
+        } catch (Exception e) {
+            e.printStackTrace();
+            FileLog.e(e);
+        }
+
+        retriever.release();
+        return bitrate;
+    }
+
+    public static int makeVideoBitrate(int originalHeight, int originalWidth, int originalBitrate, int height, int width) {
+        float compressFactor;
+        float minCompressFactor;
+        if (Math.min(height, width) > 1080) {
+            compressFactor = 1f;
+            minCompressFactor = 1f;
+        } else if (Math.min(height, width) > 720) {
+            compressFactor = 0.6f;
+            minCompressFactor = 0.9f;
+        } else {
+            compressFactor = 0.4f;
+            minCompressFactor = 0.7f;
+        }
+        int remeasuredBitrate = (int) (originalBitrate / (originalHeight * originalWidth / (float) (width * height)) * compressFactor);
+        int minBitrate = (int) (getVideoBitrateWithFactor(minCompressFactor) / (1280f * 720f / (width * height)));
+        if (originalBitrate < minBitrate) return remeasuredBitrate;
+        if (remeasuredBitrate < minBitrate) return minBitrate;
+        return remeasuredBitrate;
+    }
+
+    private static int getVideoBitrateWithFactor(float f) {
+        return (int) (f * 2000f * 1000f * 1.13f);
+    }
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/AnimatedFileDrawable.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/AnimatedFileDrawable.java
index 6ae701233..6a3e77b64 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/AnimatedFileDrawable.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/AnimatedFileDrawable.java
@@ -54,7 +54,9 @@
     public final static int PARAM_NUM_VIDEO_FRAME_SIZE = 6;
     public final static int PARAM_NUM_FRAMERATE = 7;
     public final static int PARAM_NUM_ROTATION = 8;
-    public final static int PARAM_NUM_COUNT = 9;
+    public final static int PARAM_NUM_AUDIO_IS_AAC = 9;
+    public final static int PARAM_NUM_HAS_AUDIO = 10;
+    public final static int PARAM_NUM_COUNT = 11;
 
     private long lastFrameTime;
     private int lastTimeStamp;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/PhotoViewer.java b/TMessagesProj/src/main/java/org/telegram/ui/PhotoViewer.java
index 75193be08..7a4f33a77 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/PhotoViewer.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/PhotoViewer.java
@@ -317,7 +317,7 @@ public void run() {
     private boolean firstAnimationDelay;
     private long lastBufferedPositionCheck;
     private View playButtonAccessibilityOverlay;
-    
+
     public final static int SELECT_TYPE_AVATAR = 1;
     public final static int SELECT_TYPE_WALLPAPER = 3;
 
@@ -1657,6 +1657,7 @@ public void didReceivedNotification(int id, int account, Object... args) {
                 loadInitialVideo = false;
                 progressView.setVisibility(View.INVISIBLE);
                 preparePlayer(currentPlayingVideoFile, false, false);
+                videoPlayer.seekTo((long) (videoTimelineView.getLeftProgress() * videoDuration));
             } else if (tryStartRequestPreviewOnFinish) {
                 releasePlayer(false);
                 tryStartRequestPreviewOnFinish = !MediaController.getInstance().scheduleVideoConvert(videoPreviewMessageObject, true);
@@ -2741,15 +2742,12 @@ public boolean onTouch(View v, MotionEvent event) {
         SharedPreferences preferences = MessagesController.getGlobalMainSettings();
         selectedCompression = preferences.getInt("compress_video2", 1);
         if (selectedCompression <= 0) {
-            compressItem.setImageResource(R.drawable.video_240);
-        } else if (selectedCompression == 1) {
-            compressItem.setImageResource(R.drawable.video_360);
+            compressItem.setImageResource(R.drawable.video_quality1);
         } else if (selectedCompression == 2) {
-            compressItem.setImageResource(R.drawable.video_480);
-        } else if (selectedCompression == 3) {
-            compressItem.setImageResource(R.drawable.video_720);
-        } else if (selectedCompression == 4) {
-            compressItem.setImageResource(R.drawable.video_1080);
+            compressItem.setImageResource(R.drawable.video_quality2);
+        } else {
+            selectedCompression = compressionsCount - 1;
+            compressItem.setImageResource(R.drawable.video_quality3);
         }
         itemsLayout.addView(compressItem, LayoutHelper.createLinear(70, 48));
         compressItem.setOnClickListener(v -> {
@@ -2759,7 +2757,7 @@ public boolean onTouch(View v, MotionEvent event) {
             showQualityView(true);
             requestVideoPreview(1);
         });
-        String[] compressionStrings = {"240", "360", "480", "720", "1080"};
+        String[] compressionStrings = {"480", "720", "1080"};
         compressItem.setContentDescription(LocaleController.getString("AccDescrVideoQuality", R.string.AccDescrVideoQuality) + ", " + compressionStrings[Math.max(0, selectedCompression)]);
 
         muteItem = new ImageView(parentActivity);
@@ -3778,7 +3776,7 @@ private VideoEditedInfo getCurrentVideoEditedInfo() {
         videoEditedInfo.estimatedDuration = estimatedDuration;
         videoEditedInfo.framerate = videoFramerate;
 
-        if (!muteVideo && (compressItem.getTag() == null || selectedCompression == compressionsCount - 1)) {
+        if (!muteVideo && (compressItem.getTag() == null || (videoEditedInfo.resultWidth == originalWidth && videoEditedInfo.resultHeight == originalHeight))) {
             videoEditedInfo.resultWidth = originalWidth;
             videoEditedInfo.resultHeight = originalHeight;
             videoEditedInfo.bitrate = muteVideo ? -1 : originalBitrate;
@@ -3803,7 +3801,7 @@ private void closeCaptionEnter(boolean apply) {
         Object object = imagesArrLocals.get(currentIndex);
         if (apply) {
             CharSequence caption = captionEditText.getFieldCharSequence();
-            CharSequence[] result = new CharSequence[] {caption};
+            CharSequence[] result = new CharSequence[]{caption};
 
             ArrayList<TLRPC.MessageEntity> entities = MediaDataController.getInstance(currentAccount).getEntities(result);
             if (object instanceof MediaController.PhotoEntry) {
@@ -7556,6 +7554,8 @@ private void onPhotoClosed(PlaceProviderObject object) {
         placeProvider = null;
         selectedPhotosAdapter.notifyDataSetChanged();
         disableShowCheck = false;
+        videoCutStart = 0;
+        videoCutEnd = 1f;
         if (object != null) {
             object.imageReceiver.setVisible(true, true);
         }
@@ -8300,7 +8300,7 @@ private void onActionClick(boolean download) {
         }
         if (uri == null) {
             if (download) {
-                if (currentMessageObject !=  null) {
+                if (currentMessageObject != null) {
                     if (!FileLoader.getInstance(currentAccount).isLoadingFile(currentFileNames[0])) {
                         FileLoader.getInstance(currentAccount).loadFile(currentMessageObject.getDocument(), currentMessageObject, 1, 0);
                     } else {
@@ -8405,10 +8405,12 @@ public boolean onSingleTapConfirmed(MotionEvent e) {
             }
             toggleActionBar(!isActionBarVisible, true);
         } else if (sendPhotoType == 0 || sendPhotoType == 4) {
-            if (isCurrentVideo) {
-                videoPlayButton.callOnClick();
-            } else {
-                checkImageView.performClick();
+            if(e.getY() < containerView.getHeight() - AndroidUtilities.dp(56)) {
+                if (isCurrentVideo) {
+                    videoPlayButton.callOnClick();
+                } else {
+                    checkImageView.performClick();
+                }
             }
         } else if (currentBotInlineResult != null && (currentBotInlineResult.type.equals("video") || MessageObject.isVideoDocument(currentBotInlineResult.document))) {
             int state = photoProgressViews[0].backgroundState;
@@ -8512,7 +8514,7 @@ public boolean onDoubleTapEvent(MotionEvent e) {
     private int originalBitrate;
     private float videoDuration;
     private int videoFramerate;
-    private boolean videoHasAudio;
+    private boolean videoCompressSupported;
     private long startTime;
     private long endTime;
     private float videoCutStart;
@@ -8547,6 +8549,9 @@ public boolean onDoubleTapEvent(MotionEvent e) {
         private boolean startMoving;
         private float startX;
 
+        private String lowQualityDescription;
+        private String hightQualityDescription;
+
         private int startMovingQuality;
 
         public QualityChooseView(Context context) {
@@ -8554,8 +8559,11 @@ public QualityChooseView(Context context) {
 
             paint = new Paint(Paint.ANTI_ALIAS_FLAG);
             textPaint = new TextPaint(Paint.ANTI_ALIAS_FLAG);
-            textPaint.setTextSize(AndroidUtilities.dp(12));
+            textPaint.setTextSize(AndroidUtilities.dp(14));
             textPaint.setColor(0xffcdcdcd);
+
+            lowQualityDescription = LocaleController.getString("AccDescrVideoCompressLow", R.string.AccDescrVideoCompressLow);
+            hightQualityDescription = LocaleController.getString("AccDescrVideoCompressHigh", R.string.AccDescrVideoCompressHigh);
         }
 
         @Override
@@ -8573,43 +8581,26 @@ public boolean onTouchEvent(MotionEvent event) {
                     }
                 }
             } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
-                if (startMoving) {
-                    if (Math.abs(startX - x) >= AndroidUtilities.getPixelsInCM(0.5f, true)) {
-                        moving = true;
-                        startMoving = false;
-                    }
-                } else if (moving) {
-                    for (int a = 0; a < compressionsCount; a++) {
-                        int cx = sideSide + (lineSize + gapSize * 2 + circleSize) * a + circleSize / 2;
-                        int diff = lineSize / 2 + circleSize / 2 + gapSize;
-                        if (x > cx - diff && x < cx + diff) {
-                            if (selectedCompression != a) {
-                                selectedCompression = a;
-                                didChangedCompressionLevel(false);
-                                invalidate();
-                            }
-                            break;
+
+                for (int a = 0; a < compressionsCount; a++) {
+                    int cx = sideSide + (lineSize + gapSize * 2 + circleSize) * a + circleSize / 2;
+                    int diff = lineSize / 2 + circleSize / 2 + gapSize;
+                    if (x > cx - diff && x < cx + diff) {
+                        if (selectedCompression != a) {
+                            selectedCompression = a;
+                            didChangedCompressionLevel(false);
+                            invalidate();
                         }
+                        break;
                     }
                 }
+
             } else if (event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL) {
-                if (!moving) {
-                    for (int a = 0; a < compressionsCount; a++) {
-                        int cx = sideSide + (lineSize + gapSize * 2 + circleSize) * a + circleSize / 2;
-                        if (x > cx - AndroidUtilities.dp(15) && x < cx + AndroidUtilities.dp(15)) {
-                            if (selectedCompression != a) {
-                                selectedCompression = a;
-                                didChangedCompressionLevel(true);
-                                invalidate();
-                            }
-                            break;
-                        }
-                    }
-                } else {
-                    if (selectedCompression != startMovingQuality) {
-                        requestVideoPreview(1);
-                    }
+
+                if (selectedCompression != startMovingQuality) {
+                    requestVideoPreview(1);
                 }
+
                 startMoving = false;
                 moving = false;
             }
@@ -8619,7 +8610,7 @@ public boolean onTouchEvent(MotionEvent event) {
         @Override
         protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
             super.onMeasure(widthMeasureSpec, heightMeasureSpec);
-            circleSize = AndroidUtilities.dp(12);
+            circleSize = AndroidUtilities.dp(8);
             gapSize = AndroidUtilities.dp(2);
             sideSide = AndroidUtilities.dp(18);
         }
@@ -8627,9 +8618,9 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
         @Override
         protected void onDraw(Canvas canvas) {
             if (compressionsCount != 1) {
-                lineSize = (getMeasuredWidth() - circleSize * compressionsCount - gapSize * 8 - sideSide * 2) / (compressionsCount - 1);
+                lineSize = (getMeasuredWidth() - circleSize * compressionsCount - gapSize * (compressionsCount * 2 - 2) - sideSide * 2) / (compressionsCount - 1);
             } else {
-                lineSize = (getMeasuredWidth() - circleSize * compressionsCount - gapSize * 8 - sideSide * 2);
+                lineSize = (getMeasuredWidth() - circleSize * compressionsCount - gapSize * 2 - sideSide * 2);
             }
             int cy = getMeasuredHeight() / 2 + AndroidUtilities.dp(6);
             for (int a = 0; a < compressionsCount; a++) {
@@ -8639,26 +8630,21 @@ protected void onDraw(Canvas canvas) {
                 } else {
                     paint.setColor(0x66ffffff);
                 }
-                String text;
-                if (a == compressionsCount - 1) {
-                    text = Math.min(originalWidth, originalHeight) + "p";
-                } else if (a == 0) {
-                    text = "240p";
-                } else if (a == 1) {
-                    text = "360p";
-                } else if (a == 2) {
-                    text = "480p";
-                } else {
-                    text = "720p";
-                }
-                float width = textPaint.measureText(text);
-                canvas.drawCircle(cx, cy, a == selectedCompression ? AndroidUtilities.dp(8) : circleSize / 2, paint);
-                canvas.drawText(text, cx - width / 2, cy - AndroidUtilities.dp(16), textPaint);
+
+                canvas.drawCircle(cx, cy, a == selectedCompression ? AndroidUtilities.dp(6) : circleSize / 2, paint);
+
                 if (a != 0) {
                     int x = cx - circleSize / 2 - gapSize - lineSize;
-                    canvas.drawRect(x, cy - AndroidUtilities.dp(1), x + lineSize, cy + AndroidUtilities.dp(2), paint);
+                    float startPadding = a == (selectedCompression + 1) ? AndroidUtilities.dpf2(2) : 0;
+                    float endPadding = a == selectedCompression ? AndroidUtilities.dpf2(2) : 0;
+                    canvas.drawRect(x + startPadding, cy - AndroidUtilities.dp(1),
+                            x + lineSize - endPadding, cy + AndroidUtilities.dp(2), paint);
                 }
             }
+
+            canvas.drawText(lowQualityDescription, sideSide, cy - AndroidUtilities.dp(20), textPaint);
+            float width = textPaint.measureText(hightQualityDescription);
+            canvas.drawText(hightQualityDescription, getMeasuredWidth() - sideSide - width, cy - AndroidUtilities.dp(16), textPaint);
         }
     }
 
@@ -8666,7 +8652,7 @@ public void updateMuteButton() {
         if (videoPlayer != null) {
             videoPlayer.setMute(muteVideo);
         }
-        if (!videoHasAudio) {
+        if (!videoCompressSupported) {
             muteItem.setEnabled(false);
             muteItem.setClickable(false);
             muteItem.setAlpha(0.5f);
@@ -8721,18 +8707,14 @@ private void updateVideoInfo() {
             return;
         }
 
-        if (selectedCompression == 0) {
-            compressItem.setImageResource(R.drawable.video_240);
-        } else if (selectedCompression == 1) {
-            compressItem.setImageResource(R.drawable.video_360);
+        if (selectedCompression < 2) {
+            compressItem.setImageResource(R.drawable.video_quality1);
         } else if (selectedCompression == 2) {
-            compressItem.setImageResource(R.drawable.video_480);
+            compressItem.setImageResource(R.drawable.video_quality2);
         } else if (selectedCompression == 3) {
-            compressItem.setImageResource(R.drawable.video_720);
-        } else if (selectedCompression == 4) {
-            compressItem.setImageResource(R.drawable.video_1080);
+            compressItem.setImageResource(R.drawable.video_quality3);
         }
-        String[] compressionStrings = {"240", "360", "480", "720", "1080"};
+        String[] compressionStrings = {"360", "480", "720", "1080"};
         compressItem.setContentDescription(LocaleController.getString("AccDescrVideoQuality", R.string.AccDescrVideoQuality) + ", " + compressionStrings[Math.max(0, selectedCompression)]);
 
         estimatedDuration = (long) Math.ceil((videoTimelineView.getRightProgress() - videoTimelineView.getLeftProgress()) * videoDuration);
@@ -8740,7 +8722,7 @@ private void updateVideoInfo() {
         int width;
         int height;
 
-        if (compressItem.getTag() == null || selectedCompression == compressionsCount - 1) {
+        if (compressItem.getTag() == null) {
             width = rotationValue == 90 || rotationValue == 270 ? originalHeight : originalWidth;
             height = rotationValue == 90 || rotationValue == 270 ? originalWidth : originalHeight;
             estimatedSize = (int) (originalSize * ((float) estimatedDuration / videoDuration));
@@ -8782,10 +8764,11 @@ private void requestVideoPreview(int request) {
         loadInitialVideo = false;
         progressView.setVisibility(View.INVISIBLE);
         if (request == 1) {
-            if (selectedCompression == compressionsCount - 1) {
+            if (resultHeight == originalHeight && resultWidth == originalWidth) {
                 tryStartRequestPreviewOnFinish = false;
                 if (!wasRequestingPreview) {
                     preparePlayer(currentPlayingVideoFile, false, false);
+                    videoPlayer.seekTo((long) (videoTimelineView.getLeftProgress() * videoDuration));
                 } else {
                     progressView.setVisibility(View.VISIBLE);
                     loadInitialVideo = true;
@@ -8832,6 +8815,7 @@ private void requestVideoPreview(int request) {
             tryStartRequestPreviewOnFinish = false;
             if (request == 2) {
                 preparePlayer(currentPlayingVideoFile, false, false);
+                videoPlayer.seekTo((long) (videoTimelineView.getLeftProgress() * videoDuration));
             }
         }
         containerView.invalidate();
@@ -8844,35 +8828,30 @@ private void updateWidthHeightBitrateForCompression() {
         if (selectedCompression >= compressionsCount) {
             selectedCompression = compressionsCount - 1;
         }
-        if (selectedCompression != compressionsCount - 1) {
-            float maxSize;
-            int targetBitrate;
-            switch (selectedCompression) {
-                case 0:
-                    maxSize = 426.0f;
-                    targetBitrate = 400000;
-                    break;
-                case 1:
-                    maxSize = 640.0f;
-                    targetBitrate = 900000;
-                    break;
-                case 2:
-                    maxSize = 854.0f;
-                    targetBitrate = 1100000;
-                    break;
-                case 3:
-                default:
-                    targetBitrate = 2621440;
-                    maxSize = 1280.0f;
-                    break;
-            }
-            float scale = originalWidth > originalHeight ? maxSize / originalWidth : maxSize / originalHeight;
-            resultWidth = Math.round(originalWidth * scale / 2) * 2;
-            resultHeight = Math.round(originalHeight * scale / 2) * 2;
-            if (bitrate != 0) {
-                bitrate = Math.min(targetBitrate, (int) (originalBitrate / scale));
-                videoFramesSize = (long) (bitrate / 8 * videoDuration / 1000);
-            }
+        float maxSize;
+        switch (selectedCompression) {
+            case 0:
+                maxSize = 480.0f;
+                break;
+            case 1:
+                maxSize = 854.0f;
+                break;
+            case 2:
+                //720
+                maxSize = 1280.0f;
+                break;
+            case 3:
+            default:
+                maxSize = 1920.0f;
+                break;
+        }
+        float scale = originalWidth > originalHeight ? maxSize / originalWidth : maxSize / originalHeight;
+        resultWidth = Math.round(originalWidth * scale / 2) * 2;
+        resultHeight = Math.round(originalHeight * scale / 2) * 2;
+        if (bitrate != 0) {
+            int b = MediaController.makeVideoBitrate(originalHeight, originalWidth, originalBitrate, resultHeight, resultWidth);
+            bitrate = b;
+            videoFramesSize = (long) (bitrate / 8 * videoDuration / 1000);
         }
     }
 
@@ -8944,6 +8923,13 @@ public void onAnimationCancel(Animator animation) {
         qualityChooseViewAnimation.setDuration(200);
         qualityChooseViewAnimation.setInterpolator(new DecelerateInterpolator());
         qualityChooseViewAnimation.start();
+
+        if(cameraItem.getVisibility() == View.VISIBLE) {
+            cameraItem.animate().scaleX(show ? 0.25f : 1f)
+                    .scaleY(show ? 0.25f : 1f)
+                    .alpha(show ? 0 : 1)
+                    .setDuration(200);
+        }
     }
 
     private ByteArrayInputStream cleanBuffer(byte[] data) {
@@ -8991,6 +8977,8 @@ public void run() {
                 if (currentLoadingVideoRunnable != this) {
                     return;
                 }
+                int videoBitrate = MediaController.getVideoBitrate(videoPath);
+
                 int[] params = new int[AnimatedFileDrawable.PARAM_NUM_COUNT];
                 AnimatedFileDrawable.getVideoInfo(videoPath, params);
                 if (currentLoadingVideoRunnable != this) {
@@ -9001,36 +8989,28 @@ public void run() {
                     if (parentActivity == null) {
                         return;
                     }
-                    videoHasAudio = params[AnimatedFileDrawable.PARAM_NUM_IS_AVC] != 0;
+                    boolean hasAudio = params[AnimatedFileDrawable.PARAM_NUM_HAS_AUDIO] != 0;
+                    videoCompressSupported = params[AnimatedFileDrawable.PARAM_NUM_IS_AVC] != 0 &&
+                            (!hasAudio || params[AnimatedFileDrawable.PARAM_NUM_AUDIO_IS_AAC] != 0);
                     audioFramesSize = params[AnimatedFileDrawable.PARAM_NUM_AUDIO_FRAME_SIZE];
-                    videoFramesSize = params[AnimatedFileDrawable.PARAM_NUM_VIDEO_FRAME_SIZE];
                     videoDuration = params[AnimatedFileDrawable.PARAM_NUM_DURATION];
-                    originalBitrate = bitrate = params[AnimatedFileDrawable.PARAM_NUM_BITRATE];
+                    originalBitrate = bitrate = videoBitrate;
                     videoFramerate = params[AnimatedFileDrawable.PARAM_NUM_FRAMERATE];
+                    videoFramesSize = (long) (bitrate / 8 * videoDuration / 1000);
 
-                    if (bitrate > 900000) {
-                        bitrate = 900000;
-                    }
-                    if (videoHasAudio) {
+                    if (videoCompressSupported) {
                         rotationValue = params[AnimatedFileDrawable.PARAM_NUM_ROTATION];
                         resultWidth = originalWidth = params[AnimatedFileDrawable.PARAM_NUM_WIDTH];
                         resultHeight = originalHeight = params[AnimatedFileDrawable.PARAM_NUM_HEIGHT];
 
                         SharedPreferences preferences = MessagesController.getGlobalMainSettings();
                         selectedCompression = preferences.getInt("compress_video2", 1);
-                        if (originalWidth > 1280 || originalHeight > 1280) {
-                            compressionsCount = 5;
-                        } else if (originalWidth > 854 || originalHeight > 854) {
-                            compressionsCount = 4;
-                        } else if (originalWidth > 640 || originalHeight > 640) {
-                            compressionsCount = 3;
-                        } else if (originalWidth > 480 || originalHeight > 480) {
-                            compressionsCount = 2;
-                        } else {
-                            compressionsCount = 1;
-                        }
+
+                        updateCompressionsCount(originalWidth, originalHeight);
                         updateWidthHeightBitrateForCompression();
 
+                        if (selectedCompression > compressionsCount - 1) selectedCompression =  compressionsCount - 1;
+
                         setCompressItemEnabled(compressionsCount > 1, true);
                         if (BuildVars.LOGS_ENABLED) {
                             FileLog.d("compressionsCount = " + compressionsCount + " w = " + originalWidth + " h = " + originalHeight);
@@ -9082,6 +9062,19 @@ public void run() {
         });
     }
 
+    private void updateCompressionsCount(int h, int w) {
+        int maxSize = Math.max(h, w);
+        if (maxSize > 1280) {
+            compressionsCount = 4;
+        } else if (maxSize > 854) {
+            compressionsCount = 3;
+        } else if (maxSize > 640) {
+            compressionsCount = 2;
+        } else {
+            compressionsCount = 1;
+        }
+    }
+
     private void setCompressItemEnabled(boolean enabled, boolean animated) {
         if (compressItem == null) {
             return;
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/ic_masks_msk1.png b/TMessagesProj/src/main/res/drawable-hdpi/ic_masks_msk1.png
index 7ec6e37be..ff92a0fe2 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/ic_masks_msk1.png and b/TMessagesProj/src/main/res/drawable-hdpi/ic_masks_msk1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/ic_masks_recent1.png b/TMessagesProj/src/main/res/drawable-hdpi/ic_masks_recent1.png
index 8bb65fe3c..9b9e8f8f4 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/ic_masks_recent1.png and b/TMessagesProj/src/main/res/drawable-hdpi/ic_masks_recent1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_crop.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_crop.png
index 3a9933867..14a8d5887 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_crop.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_crop.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_outline.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_outline.png
index 8706710a3..3c93891e8 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_outline.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_outline.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_paint.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_paint.png
index 8ad3793a9..ed74c759a 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_paint.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_paint.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_paint_brush.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_paint_brush.png
index 98cb527ff..be01a4646 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_paint_brush.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_paint_brush.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_paint_text.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_paint_text.png
index 4d9f798e3..980c05fc7 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_paint_text.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_paint_text.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_sticker.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_sticker.png
index 4c24f7fb5..9848ad791 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_sticker.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_sticker.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_timer.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_timer.png
index 66020cbe7..a07e40a33 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_timer.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_timer.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_tools.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_tools.png
index 69fcd32ff..699cdded4 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_tools.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_tools.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/photo_undo.png b/TMessagesProj/src/main/res/drawable-hdpi/photo_undo.png
index eb172fb1b..cc1977307 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/photo_undo.png and b/TMessagesProj/src/main/res/drawable-hdpi/photo_undo.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/tool_blur.png b/TMessagesProj/src/main/res/drawable-hdpi/tool_blur.png
index 9e1349591..2037a41f1 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/tool_blur.png and b/TMessagesProj/src/main/res/drawable-hdpi/tool_blur.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/tool_cropfix.png b/TMessagesProj/src/main/res/drawable-hdpi/tool_cropfix.png
index a23720e0d..a5269bc76 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/tool_cropfix.png and b/TMessagesProj/src/main/res/drawable-hdpi/tool_cropfix.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/tool_curve.png b/TMessagesProj/src/main/res/drawable-hdpi/tool_curve.png
index fe3bf8cb2..c591cb27b 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/tool_curve.png and b/TMessagesProj/src/main/res/drawable-hdpi/tool_curve.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/tool_rotate.png b/TMessagesProj/src/main/res/drawable-hdpi/tool_rotate.png
index 5fa5d7231..ce84d89b0 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/tool_rotate.png and b/TMessagesProj/src/main/res/drawable-hdpi/tool_rotate.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/video_1080.png b/TMessagesProj/src/main/res/drawable-hdpi/video_1080.png
deleted file mode 100644
index 26e729b21..000000000
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/video_1080.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/video_240.png b/TMessagesProj/src/main/res/drawable-hdpi/video_240.png
deleted file mode 100644
index ad2995892..000000000
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/video_240.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/video_360.png b/TMessagesProj/src/main/res/drawable-hdpi/video_360.png
deleted file mode 100644
index 000a2aec9..000000000
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/video_360.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/video_480.png b/TMessagesProj/src/main/res/drawable-hdpi/video_480.png
deleted file mode 100644
index 7bbb3c49f..000000000
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/video_480.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/video_720.png b/TMessagesProj/src/main/res/drawable-hdpi/video_720.png
deleted file mode 100644
index fbedd1244..000000000
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/video_720.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/video_quality1.png b/TMessagesProj/src/main/res/drawable-hdpi/video_quality1.png
new file mode 100644
index 000000000..8cdd6664d
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-hdpi/video_quality1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/video_quality2.png b/TMessagesProj/src/main/res/drawable-hdpi/video_quality2.png
new file mode 100644
index 000000000..d43eb70fb
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-hdpi/video_quality2.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/video_quality3.png b/TMessagesProj/src/main/res/drawable-hdpi/video_quality3.png
new file mode 100644
index 000000000..1b3373a6f
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-hdpi/video_quality3.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/volume_off.png b/TMessagesProj/src/main/res/drawable-hdpi/volume_off.png
index 7c1cf4b0b..bc828eec0 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/volume_off.png and b/TMessagesProj/src/main/res/drawable-hdpi/volume_off.png differ
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/volume_on.png b/TMessagesProj/src/main/res/drawable-hdpi/volume_on.png
index 0cdc9c5e1..dae9faf98 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/volume_on.png and b/TMessagesProj/src/main/res/drawable-hdpi/volume_on.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/ic_masks_msk1.png b/TMessagesProj/src/main/res/drawable-mdpi/ic_masks_msk1.png
index 88761765e..a65e2b6bc 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/ic_masks_msk1.png and b/TMessagesProj/src/main/res/drawable-mdpi/ic_masks_msk1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/ic_masks_recent1.png b/TMessagesProj/src/main/res/drawable-mdpi/ic_masks_recent1.png
index 56379a965..8b5965d8e 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/ic_masks_recent1.png and b/TMessagesProj/src/main/res/drawable-mdpi/ic_masks_recent1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_crop.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_crop.png
index c3642da00..7a56300ed 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_crop.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_crop.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_outline.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_outline.png
index ed44c2392..af74a9c9c 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_outline.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_outline.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_paint.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_paint.png
index 348ba9407..cdcd6c705 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_paint.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_paint.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_paint_brush.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_paint_brush.png
index c2c3848db..47a797e31 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_paint_brush.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_paint_brush.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_paint_text.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_paint_text.png
index a17dc5f6c..69c561d85 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_paint_text.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_paint_text.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_sticker.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_sticker.png
index 3b0522508..0e5b498cd 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_sticker.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_sticker.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_timer.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_timer.png
index c37347e51..dcb88f7a4 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_timer.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_timer.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_tools.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_tools.png
index 172789190..cc7d548bc 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_tools.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_tools.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/photo_undo.png b/TMessagesProj/src/main/res/drawable-mdpi/photo_undo.png
index 958fd9744..235b8d8cb 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/photo_undo.png and b/TMessagesProj/src/main/res/drawable-mdpi/photo_undo.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/tool_blur.png b/TMessagesProj/src/main/res/drawable-mdpi/tool_blur.png
index 1d46aed8a..b2550cdf1 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/tool_blur.png and b/TMessagesProj/src/main/res/drawable-mdpi/tool_blur.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/tool_cropfix.png b/TMessagesProj/src/main/res/drawable-mdpi/tool_cropfix.png
index 5753b63d2..38e043e3d 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/tool_cropfix.png and b/TMessagesProj/src/main/res/drawable-mdpi/tool_cropfix.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/tool_curve.png b/TMessagesProj/src/main/res/drawable-mdpi/tool_curve.png
index da5358614..4df20572d 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/tool_curve.png and b/TMessagesProj/src/main/res/drawable-mdpi/tool_curve.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/tool_rotate.png b/TMessagesProj/src/main/res/drawable-mdpi/tool_rotate.png
index 56e6202e3..7a92ae0bc 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/tool_rotate.png and b/TMessagesProj/src/main/res/drawable-mdpi/tool_rotate.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/video_1080.png b/TMessagesProj/src/main/res/drawable-mdpi/video_1080.png
deleted file mode 100755
index 895d00af2..000000000
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/video_1080.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/video_240.png b/TMessagesProj/src/main/res/drawable-mdpi/video_240.png
deleted file mode 100755
index e86ede044..000000000
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/video_240.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/video_360.png b/TMessagesProj/src/main/res/drawable-mdpi/video_360.png
deleted file mode 100755
index d016666c7..000000000
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/video_360.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/video_480.png b/TMessagesProj/src/main/res/drawable-mdpi/video_480.png
deleted file mode 100755
index b81914705..000000000
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/video_480.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/video_720.png b/TMessagesProj/src/main/res/drawable-mdpi/video_720.png
deleted file mode 100755
index 3fba2f8b3..000000000
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/video_720.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/video_quality1.png b/TMessagesProj/src/main/res/drawable-mdpi/video_quality1.png
new file mode 100644
index 000000000..247a2f1bb
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-mdpi/video_quality1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/video_quality2.png b/TMessagesProj/src/main/res/drawable-mdpi/video_quality2.png
new file mode 100644
index 000000000..81dcbca13
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-mdpi/video_quality2.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/video_quality3.png b/TMessagesProj/src/main/res/drawable-mdpi/video_quality3.png
new file mode 100644
index 000000000..eacfd14c0
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-mdpi/video_quality3.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/volume_off.png b/TMessagesProj/src/main/res/drawable-mdpi/volume_off.png
index 877111cdc..6d47590c5 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/volume_off.png and b/TMessagesProj/src/main/res/drawable-mdpi/volume_off.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/volume_on.png b/TMessagesProj/src/main/res/drawable-mdpi/volume_on.png
index 341622b1a..eef250cf9 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/volume_on.png and b/TMessagesProj/src/main/res/drawable-mdpi/volume_on.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/ic_masks_msk1.png b/TMessagesProj/src/main/res/drawable-xhdpi/ic_masks_msk1.png
index 729839e57..bf6abc137 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/ic_masks_msk1.png and b/TMessagesProj/src/main/res/drawable-xhdpi/ic_masks_msk1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/ic_masks_recent1.png b/TMessagesProj/src/main/res/drawable-xhdpi/ic_masks_recent1.png
old mode 100755
new mode 100644
index ebc5ed2f5..13e72a78f
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/ic_masks_recent1.png and b/TMessagesProj/src/main/res/drawable-xhdpi/ic_masks_recent1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_crop.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_crop.png
index 7d9f22dcb..50e943886 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_crop.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_crop.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_outline.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_outline.png
index 19be0c455..891486473 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_outline.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_outline.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint.png
index 3bcdef7b8..e9a4a33e8 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint_brush.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint_brush.png
index 6ccc13170..dc1043a16 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint_brush.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint_brush.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint_text.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint_text.png
index ab9b8b9e1..f55373236 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint_text.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_paint_text.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_sticker.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_sticker.png
index e9a82d8b0..27d257792 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_sticker.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_sticker.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_timer.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_timer.png
index e4baa0c85..83dfeaa3d 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_timer.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_timer.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_tools.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_tools.png
index 650d627fc..ba92d5c7e 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_tools.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_tools.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/photo_undo.png b/TMessagesProj/src/main/res/drawable-xhdpi/photo_undo.png
index 25a590759..0ef97e89e 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/photo_undo.png and b/TMessagesProj/src/main/res/drawable-xhdpi/photo_undo.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/tool_blur.png b/TMessagesProj/src/main/res/drawable-xhdpi/tool_blur.png
index b4b1325d2..08e4df3e3 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/tool_blur.png and b/TMessagesProj/src/main/res/drawable-xhdpi/tool_blur.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/tool_cropfix.png b/TMessagesProj/src/main/res/drawable-xhdpi/tool_cropfix.png
index 6924f2191..c6b27cec3 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/tool_cropfix.png and b/TMessagesProj/src/main/res/drawable-xhdpi/tool_cropfix.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/tool_curve.png b/TMessagesProj/src/main/res/drawable-xhdpi/tool_curve.png
index 7e5570a17..bcb2ef38d 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/tool_curve.png and b/TMessagesProj/src/main/res/drawable-xhdpi/tool_curve.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/tool_rotate.png b/TMessagesProj/src/main/res/drawable-xhdpi/tool_rotate.png
index dfd271d37..478e24fa5 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/tool_rotate.png and b/TMessagesProj/src/main/res/drawable-xhdpi/tool_rotate.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/video_1080.png b/TMessagesProj/src/main/res/drawable-xhdpi/video_1080.png
deleted file mode 100644
index 424d9c3dc..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/video_1080.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/video_240.png b/TMessagesProj/src/main/res/drawable-xhdpi/video_240.png
deleted file mode 100644
index 279ba5ac3..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/video_240.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/video_360.png b/TMessagesProj/src/main/res/drawable-xhdpi/video_360.png
deleted file mode 100644
index f299d3d52..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/video_360.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/video_480.png b/TMessagesProj/src/main/res/drawable-xhdpi/video_480.png
deleted file mode 100644
index dd565104c..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/video_480.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/video_720.png b/TMessagesProj/src/main/res/drawable-xhdpi/video_720.png
deleted file mode 100644
index 326653342..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/video_720.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/video_quality1.png b/TMessagesProj/src/main/res/drawable-xhdpi/video_quality1.png
new file mode 100644
index 000000000..09728acfd
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xhdpi/video_quality1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/video_quality2.png b/TMessagesProj/src/main/res/drawable-xhdpi/video_quality2.png
new file mode 100644
index 000000000..9a8d0b2cf
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xhdpi/video_quality2.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/video_quality3.png b/TMessagesProj/src/main/res/drawable-xhdpi/video_quality3.png
new file mode 100644
index 000000000..004e26b3f
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xhdpi/video_quality3.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/volume_off.png b/TMessagesProj/src/main/res/drawable-xhdpi/volume_off.png
index f26649271..d37f4e3e7 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/volume_off.png and b/TMessagesProj/src/main/res/drawable-xhdpi/volume_off.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/volume_on.png b/TMessagesProj/src/main/res/drawable-xhdpi/volume_on.png
index 06f7a4a2d..b66d0cb66 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/volume_on.png and b/TMessagesProj/src/main/res/drawable-xhdpi/volume_on.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/ic_masks_msk1.png b/TMessagesProj/src/main/res/drawable-xxhdpi/ic_masks_msk1.png
old mode 100755
new mode 100644
index e0e13cc20..78bf8611c
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/ic_masks_msk1.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/ic_masks_msk1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/ic_masks_recent1.png b/TMessagesProj/src/main/res/drawable-xxhdpi/ic_masks_recent1.png
old mode 100755
new mode 100644
index 5b163f771..f3c7edb05
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/ic_masks_recent1.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/ic_masks_recent1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_crop.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_crop.png
index e79ceb2c1..e043a15c2 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_crop.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_crop.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_outline.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_outline.png
index e3f0313e0..d0e5d9aa0 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_outline.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_outline.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint.png
index f564393ad..316d25d81 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint_brush.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint_brush.png
index 5458b15af..cefe9f432 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint_brush.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint_brush.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint_text.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint_text.png
index 97a545904..81e4d5cde 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint_text.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_paint_text.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_sticker.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_sticker.png
index 1f3b1e3a6..2ddebb52f 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_sticker.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_sticker.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_timer.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_timer.png
index c09b537b7..ae5f4d8b3 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_timer.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_timer.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_tools.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_tools.png
index 47270996c..b4c955a4f 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_tools.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_tools.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_undo.png b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_undo.png
index 2ccf7258f..e5ad13262 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/photo_undo.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/photo_undo.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/tool_blur.png b/TMessagesProj/src/main/res/drawable-xxhdpi/tool_blur.png
index a97da43c9..5fedb075f 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/tool_blur.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/tool_blur.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/tool_cropfix.png b/TMessagesProj/src/main/res/drawable-xxhdpi/tool_cropfix.png
index c8453fe37..d78df4a26 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/tool_cropfix.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/tool_cropfix.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/tool_curve.png b/TMessagesProj/src/main/res/drawable-xxhdpi/tool_curve.png
index ec8724080..40381c79e 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/tool_curve.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/tool_curve.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/tool_rotate.png b/TMessagesProj/src/main/res/drawable-xxhdpi/tool_rotate.png
index 071296b30..892d75649 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/tool_rotate.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/tool_rotate.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/video_1080.png b/TMessagesProj/src/main/res/drawable-xxhdpi/video_1080.png
deleted file mode 100644
index e4082c24f..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/video_1080.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/video_240.png b/TMessagesProj/src/main/res/drawable-xxhdpi/video_240.png
deleted file mode 100644
index fff133fca..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/video_240.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/video_360.png b/TMessagesProj/src/main/res/drawable-xxhdpi/video_360.png
deleted file mode 100644
index 03693d262..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/video_360.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/video_480.png b/TMessagesProj/src/main/res/drawable-xxhdpi/video_480.png
deleted file mode 100644
index 89c8d8454..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/video_480.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/video_720.png b/TMessagesProj/src/main/res/drawable-xxhdpi/video_720.png
deleted file mode 100644
index 3951a42bc..000000000
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/video_720.png and /dev/null differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality1.png b/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality1.png
new file mode 100644
index 000000000..03c781552
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality2.png b/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality2.png
new file mode 100644
index 000000000..2524e5429
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality2.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality3.png b/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality3.png
new file mode 100644
index 000000000..1f9354843
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xxhdpi/video_quality3.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/volume_off.png b/TMessagesProj/src/main/res/drawable-xxhdpi/volume_off.png
index 234d9f342..d7c862a12 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/volume_off.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/volume_off.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/volume_on.png b/TMessagesProj/src/main/res/drawable-xxhdpi/volume_on.png
index 5fd3ce8d2..d3f26a399 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/volume_on.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/volume_on.png differ
diff --git a/TMessagesProj/src/main/res/values/strings.xml b/TMessagesProj/src/main/res/values/strings.xml
index cdb45c481..b3395f314 100644
--- a/TMessagesProj/src/main/res/values/strings.xml
+++ b/TMessagesProj/src/main/res/values/strings.xml
@@ -3021,6 +3021,8 @@
 	<string name="AccDescrSearchByUser">Filter by user</string>
     <string name="AccActionTakePicture">Take a picture</string>
     <string name="AccActionRecordVideo">Record video</string>
+    <string name="AccDescrVideoCompressLow">Smaller size</string>
+    <string name="AccDescrVideoCompressHigh">Higher quality</string>
     <!--date formatters-->
     <string name="formatterStats12H">MMM dd yyyy, h:mm a</string>
     <string name="formatterStats24H">MMM dd yyyy, HH:mm</string>
