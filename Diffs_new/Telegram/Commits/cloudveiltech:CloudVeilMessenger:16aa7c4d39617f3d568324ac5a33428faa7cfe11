diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 08628d852..62376f070 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -134,7 +134,7 @@ android {
         }
     }
 
-    defaultConfig.versionCode = 1483
+    defaultConfig.versionCode = 1484
 
     sourceSets.debug {
         manifest.srcFile 'config/debug/AndroidManifest.xml'
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java b/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
index b1c8ed7c4..5c3b0597c 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
@@ -9904,7 +9904,8 @@ public static void openChatOrProfileWith(TLRPC.User user, TLRPC.Chat chat, BaseF
 
         //CloudVeil start
         if(chat != null) {
-            if(!MessagesController.getInstance(fragment.getCurrentAccount()).isDialogIdAllowed(chat.id)) {
+            int dialogId = chat.id > 0 ? -chat.id : chat.id;
+            if(!MessagesController.getInstance(fragment.getCurrentAccount()).isDialogIdAllowed(dialogId)) {
                 ChatActivity.showWarning(fragment, chat, null, null);
                 return;
             }
