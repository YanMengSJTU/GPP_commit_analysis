diff --git a/TMessagesProj/src/main/java/io/bettergram/tools/DialogsObject.java b/TMessagesProj/src/main/java/io/bettergram/tools/DialogsObject.java
index 87637c17e..c9a47445c 100644
--- a/TMessagesProj/src/main/java/io/bettergram/tools/DialogsObject.java
+++ b/TMessagesProj/src/main/java/io/bettergram/tools/DialogsObject.java
@@ -1,5 +1,6 @@
 package io.bettergram.tools;
 
+import io.bettergram.telegram.messenger.ChatObject;
 import io.bettergram.telegram.messenger.DialogObject;
 import io.bettergram.telegram.messenger.MessagesController;
 import io.bettergram.telegram.messenger.UserConfig;
@@ -8,7 +9,7 @@
 public class DialogsObject extends DialogObject {
 
     public static boolean isGroup(TLRPC.TL_dialog d) {
-        return getHigherId(d) != 0;
+        return !isAnnouncement(d) && getHigherId(d) != 0;
     }
 
     public static boolean isDirect(TLRPC.TL_dialog d) {
@@ -16,18 +17,23 @@ public static boolean isDirect(TLRPC.TL_dialog d) {
     }
 
     public static boolean isAnnouncement(TLRPC.TL_dialog d) {
-        if (DialogObject.isChannel(d)) {
+//        if (DialogObject.isChannel(d)) {
+//            MessagesController messagesController = MessagesController.getInstance(UserConfig.selectedAccount);
+//            TLRPC.Chat chat = messagesController.getChat(-getLowerId(d));
+//            return (
+//                    chat != null && (
+//                            chat.megagroup && (
+//                                    chat.admin_rights != null && (
+//                                            chat.admin_rights.post_messages || chat.admin_rights.add_admins
+//                                    )
+//                            ) || chat.creator
+//                    )
+//            );
+//        }
+        if (isChannel(d)) {
             MessagesController messagesController = MessagesController.getInstance(UserConfig.selectedAccount);
             TLRPC.Chat chat = messagesController.getChat(-getLowerId(d));
-            return (
-                    chat != null && (
-                            chat.megagroup && (
-                                    chat.admin_rights != null && (
-                                            chat.admin_rights.post_messages || chat.admin_rights.add_admins
-                                    )
-                            ) || chat.creator
-                    )
-            );
+            return (chat.id < 0 || ChatObject.isChannel(chat) && !chat.megagroup);
         }
         return false;
     }
