diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenuItem.java b/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenuItem.java
index b039d2ece..184132c2c 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenuItem.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenuItem.java
@@ -35,6 +35,8 @@
 import android.widget.LinearLayout;
 import android.widget.TextView;
 
+import androidx.arch.core.util.Function;
+
 import org.telegram.messenger.AndroidUtilities;
 import org.telegram.messenger.LocaleController;
 import org.telegram.messenger.R;
@@ -73,6 +75,8 @@ public boolean forceShowClear() {
     public interface ActionBarMenuItemDelegate {
         void onItemClick(int id);
     }
+    private final Function<Context, ActionBarMenuSubItem> defaultSubItemFactory =
+            context -> new ActionBarMenuSubItem(context);
 
     private ActionBarPopupWindow.ActionBarPopupWindowLayout popupLayout;
     private ActionBarMenu parentMenu;
@@ -239,6 +243,10 @@ private void createPopupLayout() {
         });
     }
 
+    public void setPopupLayoutBackgroundColor(int color) {
+        if (popupLayout != null) popupLayout.setBackgroundColor(color);
+    }
+
     public void addSubItem(View view, int width, int height) {
         createPopupLayout();
         popupLayout.addView(view, new LinearLayout.LayoutParams(width, height));
@@ -308,9 +316,14 @@ public TextView addSubItem(int id, CharSequence text) {
     }
 
     public ActionBarMenuSubItem addSubItem(int id, int icon, CharSequence text) {
+        return addSubItem(id, icon, text, defaultSubItemFactory);
+    }
+
+    public ActionBarMenuSubItem addSubItem(int id, int icon, CharSequence text,
+                                           Function<Context, ActionBarMenuSubItem> subItemFactory) {
         createPopupLayout();
 
-        ActionBarMenuSubItem cell = new ActionBarMenuSubItem(getContext());
+        ActionBarMenuSubItem cell = subItemFactory.apply(getContext());
         cell.setTextAndIcon(text, icon);
         cell.setMinimumWidth(AndroidUtilities.dp(196));
         cell.setTag(id);
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenuSubItem.java b/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenuSubItem.java
index 7e0c0be52..cb6bd5fb9 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenuSubItem.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarMenuSubItem.java
@@ -21,14 +21,20 @@
     private ImageView imageView;
 
     public ActionBarMenuSubItem(Context context) {
+        this(context, Theme.getColor(Theme.key_actionBarDefaultSubmenuItem),
+                Theme.getColor(Theme.key_actionBarDefaultSubmenuItemIcon),
+                Theme.getColor(Theme.key_dialogButtonSelector));
+    }
+
+    public ActionBarMenuSubItem(Context context, int textColor, int iconColor,  int selectorColor) {
         super(context);
 
-        setBackgroundDrawable(Theme.createSelectorDrawable(Theme.getColor(Theme.key_dialogButtonSelector), 2));
+        setBackgroundDrawable(Theme.createSelectorDrawable(selectorColor, 2));
         setPadding(AndroidUtilities.dp(18), 0, AndroidUtilities.dp(18), 0);
 
         imageView = new ImageView(context);
         imageView.setScaleType(ImageView.ScaleType.CENTER);
-        imageView.setColorFilter(new PorterDuffColorFilter(Theme.getColor(Theme.key_actionBarDefaultSubmenuItemIcon), PorterDuff.Mode.MULTIPLY));
+        imageView.setColorFilter(new PorterDuffColorFilter(iconColor, PorterDuff.Mode.MULTIPLY));
         addView(imageView, LayoutHelper.createFrame(LayoutHelper.WRAP_CONTENT, 40, Gravity.CENTER_VERTICAL | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT)));
 
         textView = new TextView(context);
@@ -36,7 +42,7 @@ public ActionBarMenuSubItem(Context context) {
         textView.setSingleLine(true);
         textView.setGravity((LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT) | Gravity.CENTER_VERTICAL);
         textView.setEllipsize(TextUtils.TruncateAt.END);
-        textView.setTextColor(Theme.getColor(Theme.key_actionBarDefaultSubmenuItem));
+        textView.setTextColor(textColor);
         textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);
         addView(textView, LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT, LayoutHelper.MATCH_PARENT, Gravity.NO_GRAVITY));
     }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarPopupWindow.java b/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarPopupWindow.java
index 77f7c0ad7..40f97b40b 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarPopupWindow.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ActionBar/ActionBarPopupWindow.java
@@ -90,7 +90,7 @@ public ActionBarPopupWindowLayout(Context context) {
             super(context);
 
             backgroundDrawable = getResources().getDrawable(R.drawable.popup_fixed_alert2).mutate();
-            backgroundDrawable.setColorFilter(new PorterDuffColorFilter(Theme.getColor(Theme.key_actionBarDefaultSubmenuBackground), PorterDuff.Mode.MULTIPLY));
+            setBackgroundColor(Theme.getColor(Theme.key_actionBarDefaultSubmenuBackground));
 
             setPadding(AndroidUtilities.dp(8), AndroidUtilities.dp(8), AndroidUtilities.dp(8), AndroidUtilities.dp(8));
             setWillNotDraw(false);
@@ -121,6 +121,11 @@ public void setDispatchKeyEventListener(OnDispatchKeyEventListener listener) {
             mOnDispatchKeyEventListener = listener;
         }
 
+        @Override
+        public void setBackgroundColor(int color) {
+            backgroundDrawable.setColorFilter(new PorterDuffColorFilter(color, PorterDuff.Mode.MULTIPLY));
+        }
+
         @Keep
         public void setBackAlpha(int value) {
             backAlpha = value;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/PhotoAlbumPickerActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/PhotoAlbumPickerActivity.java
index e3e8e7176..4d2c1f25c 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/PhotoAlbumPickerActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/PhotoAlbumPickerActivity.java
@@ -33,6 +33,7 @@
 import org.telegram.ui.ActionBar.ActionBar;
 import org.telegram.ui.ActionBar.ActionBarMenu;
 import org.telegram.ui.ActionBar.ActionBarMenuItem;
+import org.telegram.ui.ActionBar.ActionBarMenuSubItem;
 import org.telegram.ui.ActionBar.BaseFragment;
 import org.telegram.ui.ActionBar.Theme;
 import org.telegram.ui.Cells.PhotoPickerAlbumsCell;
@@ -143,7 +144,14 @@ public void onItemClick(int id) {
         ActionBarMenu menu = actionBar.createMenu();
         ActionBarMenuItem item = menu.addItem(0, R.drawable.ic_ab_other);
         item.setContentDescription(LocaleController.getString("AccDescrMoreOptions", R.string.AccDescrMoreOptions));
-        item.addSubItem(1, R.drawable.profile_photos, "Use system gallery");
+        item.addSubItem(1, R.drawable.profile_photos,
+                LocaleController.getString("UseSystemGallery", R.string.UseSystemGallery),
+                ctx -> new ActionBarMenuSubItem(ctx,
+                        Theme.getDefaultColor(Theme.key_actionBarDefaultSubmenuItem),
+                        Theme.getDefaultColor(Theme.key_actionBarDefaultSubmenuItemIcon),
+                        Theme.getDefaultColor(Theme.key_dialogButtonSelector)));
+        item.setPopupLayoutBackgroundColor(Theme.getDefaultColor(
+                Theme.key_actionBarDefaultSubmenuBackground));
 
         fragmentView = new FrameLayout(context);
 
diff --git a/TMessagesProj/src/main/res/values/strings.xml b/TMessagesProj/src/main/res/values/strings.xml
index 3126f3b86..4aab9b273 100644
--- a/TMessagesProj/src/main/res/values/strings.xml
+++ b/TMessagesProj/src/main/res/values/strings.xml
@@ -1833,6 +1833,7 @@
     <string name="ShowInChat">Show in chat</string>
     <string name="StopDownload">Stop downloading</string>
     <string name="SaveToGallery">Save to gallery</string>
+    <string name="UseSystemGallery">Use system gallery</string>
     <string name="Of">%1$d of %2$d</string>
     <string name="Gallery">Gallery</string>
     <string name="AllPhotos">All photos</string>
