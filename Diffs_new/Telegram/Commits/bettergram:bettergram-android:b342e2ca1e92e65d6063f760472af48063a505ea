diff --git a/TMessagesProj/src/main/java/io/bettergram/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/io/bettergram/telegram/ui/ChatActivity.java
index 3640c23bc..a6bb1d733 100644
--- a/TMessagesProj/src/main/java/io/bettergram/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/io/bettergram/telegram/ui/ChatActivity.java
@@ -1233,7 +1233,7 @@ public void onCaptionCleared() {
         headerItem = menu.addItem(0, R.drawable.ic_ab_other);
 
         TLRPC.TL_dialog _dialog = MessagesController.getInstance(currentAccount).dialogs_dict.get(dialog_id);
-        headerItem.addSubItem(pin, _dialog.pinned ? LocaleController.getString("UnpinFromTop", R.string.UnpinFromTop) : LocaleController.getString("PinToTop", R.string.PinToTop));
+        headerItem.addSubItem(pin, _dialog != null && _dialog.pinned ? LocaleController.getString("UnpinFromTop", R.string.UnpinFromTop) : LocaleController.getString("PinToTop", R.string.PinToTop));
 
         if (currentUser != null) {
             headerItem.addSubItem(call, LocaleController.getString("Call", R.string.Call));
@@ -3228,6 +3228,13 @@ public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
             fragmentLocationContextView.setAdditionalContextView(fragmentContextView);
         }
 
+        if (actionBar != null) {
+            ViewGroup parentViewGroup = (ViewGroup) actionBar.getParent();
+            if (parentViewGroup != null) {
+                parentViewGroup.removeAllViews();
+            }
+        }
+
         contentView.addView(actionBar);
 
         overlayView = new View(context);
