diff --git a/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
index 06fcdfa1d..12ccb2478 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
@@ -146,14 +146,6 @@ protected void onCreate(Bundle savedInstanceState) {
             }
         }
 
-        TechranchConfig config = new TechranchConfig(this);
-        if (!config.isCitySelected()) {
-            startActivity(new Intent(this, SelectCity.class));
-            super.onCreate(savedInstanceState);
-            finish();
-            return;
-        }
-
         requestWindowFeature(Window.FEATURE_NO_TITLE);
         setTheme(R.style.Theme_TMessages);
         getWindow().setBackgroundDrawableResource(R.drawable.transparent);
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
index b87dfad0e..4b3c4f50b 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
@@ -59,6 +59,8 @@
 import org.telegram.messenger.FileLog;
 import org.telegram.messenger.LocaleController;
 import org.telegram.messenger.techranch.R;
+import org.telegram.techrunch.TechranchConfig;
+import org.telegram.techrunch.select_city.SelectCity;
 import org.telegram.tgnet.ConnectionsManager;
 import org.telegram.tgnet.RequestDelegate;
 import org.telegram.tgnet.TLObject;
@@ -440,8 +442,14 @@ public void saveSelfArgs(Bundle outState) {
 
     private void needFinishActivity() {
         clearCurrentState();
+
         presentFragment(new DialogsActivity(null), true);
         NotificationCenter.getInstance().postNotificationName(NotificationCenter.mainUserInfoChanged);
+
+        TechranchConfig config = new TechranchConfig(getParentActivity());
+        if (!config.isCitySelected()) {
+            getParentActivity().startActivity(new Intent(getParentActivity(), SelectCity.class));
+        }
     }
 
     private void fillNextCodeParams(Bundle params, TLRPC.TL_auth_sentCode res) {
