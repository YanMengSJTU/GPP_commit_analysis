diff --git a/TMessagesProj/src/main/java/org/telegram/ui/DialogsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/DialogsActivity.java
index 962057b49..6e837a272 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/DialogsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/DialogsActivity.java
@@ -51,12 +51,13 @@
 import android.widget.ImageView;
 import android.widget.TextView;
 
-import androidx.core.view.ViewCompat;
 import androidx.recyclerview.widget.ItemTouchHelper;
 import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.LinearSmoothScrollerMiddle;
 import androidx.recyclerview.widget.RecyclerView;
 
+import com.google.android.exoplayer2.util.Log;
+
 import org.telegram.messenger.AccountInstance;
 import org.telegram.messenger.AndroidUtilities;
 import org.telegram.messenger.ApplicationLoader;
@@ -179,6 +180,8 @@
     private ActionBarMenuSubItem readItem;
 
     private float additionalFloatingTranslation;
+    private float floatingButtonTranslation;
+    private float floatingButtonHideProgress;
 
     //private ImageView unreadFloatingButton;
     //private FrameLayout unreadFloatingButtonContainer;
@@ -1018,7 +1021,9 @@ public void onSearchCollapse() {
                             unreadFloatingButtonContainer.setTranslationY(AndroidUtilities.dp(74));
                         }*/
                         floatingHidden = true;
-                        floatingButtonContainer.setTranslationY(AndroidUtilities.dp(100));
+                        floatingButtonTranslation = AndroidUtilities.dp(100);
+                        floatingButtonHideProgress = 1f;
+                        updateFloatingButtonOffset();
                         hideFloatingButton(false);
                     }
                     if (listView.getAdapter() != dialogsAdapter) {
@@ -2118,7 +2123,7 @@ public void setTranslationY(float translationY) {
                     if (this == undoView[0] && undoView[1].getVisibility() != VISIBLE) {
                         float diff = getMeasuredHeight() + AndroidUtilities.dp(8) - translationY;
                         if (!floatingHidden) {
-                            floatingButtonContainer.setTranslationY(floatingButtonContainer.getTranslationY() + additionalFloatingTranslation - diff);
+                            updateFloatingButtonOffset();
                         }
                         additionalFloatingTranslation = diff;
                     }
@@ -2149,6 +2154,10 @@ protected boolean canUndo() {
         return fragmentView;
     }
 
+    private void updateFloatingButtonOffset() {
+        floatingButtonContainer.setTranslationY(floatingButtonTranslation - additionalFloatingTranslation * (1f - floatingButtonHideProgress));
+    }
+
     @Override
     public void onResume() {
         super.onResume();
@@ -3032,7 +3041,8 @@ public void onConfigurationChanged(Configuration newConfig) {
             floatingButtonContainer.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
                 @Override
                 public void onGlobalLayout() {
-                    floatingButtonContainer.setTranslationY((floatingHidden ? AndroidUtilities.dp(100) : -additionalFloatingTranslation));
+                    floatingButtonTranslation = floatingHidden ? AndroidUtilities.dp(100) : 0;
+                    updateFloatingButtonOffset();
                     //unreadFloatingButtonContainer.setTranslationY(floatingHidden ? AndroidUtilities.dp(74) : 0);
                     floatingButtonContainer.setClickable(!floatingHidden);
                     if (floatingButtonContainer != null) {
@@ -3291,8 +3301,14 @@ private void hideFloatingButton(boolean hide) {
         }
         floatingHidden = hide;
         AnimatorSet animatorSet = new AnimatorSet();
-        animatorSet.playTogether(ObjectAnimator.ofFloat(floatingButtonContainer, View.TRANSLATION_Y, (floatingHidden ? AndroidUtilities.dp(100) : -additionalFloatingTranslation))/*,
-                ObjectAnimator.ofFloat(unreadFloatingButtonContainer, View.TRANSLATION_Y, floatingHidden ? AndroidUtilities.dp(74) : 0)*/);
+        ValueAnimator valueAnimator = ValueAnimator.ofFloat(floatingButtonHideProgress,floatingHidden ? 1f : 0f);
+        valueAnimator.addUpdateListener(animation -> {
+            floatingButtonHideProgress = (float) animation.getAnimatedValue();
+            floatingButtonTranslation = AndroidUtilities.dp(100) * floatingButtonHideProgress;
+            updateFloatingButtonOffset();
+        });
+        animatorSet.playTogether(valueAnimator);/*,
+                ObjectAnimator.ofFloat(unreadFloatingButtonContainer, View.TRANSLATION_Y, floatingHidden ? AndroidUtilities.dp(74) : 0)*/
         animatorSet.setDuration(300);
         animatorSet.setInterpolator(floatingInterpolator);
         floatingButtonContainer.setClickable(!hide);
@@ -3488,6 +3504,9 @@ private void didSelectResult(final long dialog_id, boolean useAlert, final boole
             }
         };
 
+        ThemeDescription.ThemeDescriptionDelegate archivePullDrawableDelegate = () -> {
+            if(archivedPullForegroundDrawable != null) archivedPullForegroundDrawable.updateColors();
+        };
         ArrayList<ThemeDescription> arrayList = new ArrayList<>();
 
         arrayList.add(new ThemeDescription(fragmentView, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, Theme.key_windowBackgroundWhite));
@@ -3770,6 +3789,8 @@ private void didSelectResult(final long dialog_id, boolean useAlert, final boole
         arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_player_placeholderBackground));
         arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_player_button));
         arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_player_buttonActive));
+        arrayList.add(new ThemeDescription(null, 0, null, null, null, archivePullDrawableDelegate, Theme.key_archivePullDownBackground));
+        arrayList.add(new ThemeDescription(null, 0, null, null, null, archivePullDrawableDelegate, Theme.key_archivePullDownBackgroundActive));
 
         return arrayList.toArray(new ThemeDescription[0]);
     }
