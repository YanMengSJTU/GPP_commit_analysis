diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 4abe21c83..3169330f9 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -25,8 +25,8 @@ dependencies {
 }
 
 android {
-    compileSdkVersion 26
-    buildToolsVersion '26.0.2'
+    compileSdkVersion 27
+    buildToolsVersion '27.0.3'
 
 
     useLibrary 'org.apache.http.legacy'
@@ -92,6 +92,7 @@ android {
     }
 
     defaultConfig.versionCode = 1155
+    defaultConfig.multiDexEnabled = true
 
     sourceSets.debug {
         manifest.srcFile 'config/debug/AndroidManifest.xml'
@@ -170,8 +171,8 @@ android {
     }
 
     defaultConfig {
-        minSdkVersion 16
-        targetSdkVersion 25
+        minSdkVersion 21
+        targetSdkVersion 27
         versionName "4.6.0"
 
         externalNativeBuild {
diff --git a/build.gradle b/build.gradle
index dee7a587f..53b96f8c7 100644
--- a/build.gradle
+++ b/build.gradle
@@ -3,9 +3,13 @@ buildscript {
     repositories {
         jcenter()
         mavenCentral()
+        google()
     }
     dependencies {
         classpath 'com.android.tools.build:gradle:3.0.1'
         classpath 'com.google.gms:google-services:3.1.1'
     }
+}
+repositories {
+    google()
 }
\ No newline at end of file
