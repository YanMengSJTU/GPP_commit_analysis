diff --git a/TMessagesProj/src/main/AndroidManifest.xml b/TMessagesProj/src/main/AndroidManifest.xml
index 60ce4b986..5dfad16fd 100644
--- a/TMessagesProj/src/main/AndroidManifest.xml
+++ b/TMessagesProj/src/main/AndroidManifest.xml
@@ -94,6 +94,12 @@
                 <category android:name="android.intent.category.DEFAULT"/>
                 <data android:mimeType="vnd.android.cursor.item/vnd.org.telegram.messenger.android.profile"/>
             </intent-filter>
+            <intent-filter>
+                <action android:name="android.intent.action.SENDTO"/>
+                <category android:name="android.intent.category.DEFAULT"/>
+                <data android:scheme="sms"/>
+                <data android:scheme="smsto"/>
+            </intent-filter>
         </activity>
         <activity
             android:name="org.telegram.ui.LoginActivity"
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ApplicationActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ApplicationActivity.java
index 9c25274ee..18afe6bb5 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ApplicationActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ApplicationActivity.java
@@ -9,11 +9,14 @@
 package org.telegram.ui;
 
 import android.app.Activity;
+import android.app.AlertDialog;
 import android.app.NotificationManager;
 import android.content.Context;
+import android.content.DialogInterface;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.graphics.PixelFormat;
+import android.net.Uri;
 import android.os.Build;
 import android.os.Bundle;
 import android.support.v4.app.FragmentManager;
@@ -118,6 +121,28 @@ public void onClick(View view) {
         videoPath = (String)NotificationCenter.Instance.getFromMemCache(534);
         sendingText = (String)NotificationCenter.Instance.getFromMemCache(535);
 
+        String phone_ntg = (String)NotificationCenter.Instance.getFromMemCache("phone_ntg", null);
+        if( phone_ntg != null){
+            AlertDialog.Builder builder = new AlertDialog.Builder(this);
+            builder.setMessage(ApplicationLoader.applicationContext.getString(R.string.InviteUser));
+            builder.setTitle(ApplicationLoader.applicationContext.getString(R.string.AppName));
+            final String arg1 = phone_ntg;
+            builder.setPositiveButton(ApplicationLoader.applicationContext.getString(R.string.OK), new DialogInterface.OnClickListener() {
+                @Override
+                public void onClick(DialogInterface dialogInterface, int i) {
+                    try {
+                        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.fromParts("sms", arg1, null));
+                        intent.putExtra("sms_body", ApplicationLoader.applicationContext.getString(R.string.InviteText));
+                        startActivity(intent);
+                    } catch (Exception e) {
+                        FileLog.e("tmessages", e);
+                    }
+                }
+            });
+            builder.setNegativeButton(ApplicationLoader.applicationContext.getString(R.string.Cancel), null);
+            builder.show().setCanceledOnTouchOutside(true);
+        }
+
         if (push_user_id != 0) {
             if (push_user_id == UserConfig.clientUserId) {
                 open_settings = 1;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
index 65a32b3a3..b431f16ad 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
@@ -25,6 +25,8 @@
 import org.telegram.messenger.Utilities;
 import org.telegram.ui.Views.PausableActivity;
 
+import java.util.Enumeration;
+
 public class LaunchActivity extends PausableActivity {
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
@@ -118,6 +120,39 @@ protected void onCreate(Bundle savedInstanceState) {
                     } catch (Exception e) {
                         FileLog.e("tmessages", e);
                     }
+                } else if (Intent.ACTION_SENDTO.equals(intent.getAction())) {
+                    String phone = intent.getData().toString();
+                    if(phone.startsWith("smsto:")) {
+                        phone = phone.replace("smsto:","");
+                    } else if (phone.startsWith("sms:")) {
+                        phone = phone.replace("sms:","");
+                    }
+                    if( phone.startsWith("%2B")) { // IF STARTSWITH +
+                        phone = phone.replace("%2B","");
+                    } else {
+                        TLRPC.User user = MessagesController.Instance.users.get(UserConfig.clientUserId);
+                        if (user == null) {
+                            user = UserConfig.currentUser;
+                        }
+                        if(user != null) {
+                            phone = user.phone.substring(0,2) + phone;
+                        }
+                    }
+
+                    int user_id = 0;
+                    Enumeration<TLRPC.User> users = MessagesController.Instance.users.elements();
+                    while (users.hasMoreElements()) {
+                        TLRPC.User u = users.nextElement();
+                        if(u.phone.equals(phone)) {
+                            user_id = u.id;
+                        }
+                    }
+                    if(user_id == 0) {
+                        NotificationCenter.Instance.addToMemCache("phone_ntg",phone);
+                    } else {
+                        NotificationCenter.Instance.postNotificationName(MessagesController.closeChats);
+                        NotificationCenter.Instance.addToMemCache("push_user_id", user_id);
+                    }
                 } else if (intent.getAction().equals("org.telegram.messenger.OPEN_ACCOUNT")) {
                     NotificationCenter.Instance.addToMemCache("open_settings", 1);
                 }
