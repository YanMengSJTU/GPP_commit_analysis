diff --git a/TMessagesProj/src/main/java/org/telegram/ui/DialogsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/DialogsActivity.java
index bcc9901bf..e9fe47747 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/DialogsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/DialogsActivity.java
@@ -867,14 +867,12 @@ public boolean onItemClick(View view, int position, float x, float y) {
                     final boolean hasUnread = dialog.unread_count != 0 || dialog.unread_mark;
 
                     //Mute item
-                    boolean muted = MessagesController.getInstance(currentAccount).isDialogMuted(selectedDialog);
-                    String muteString = "";
-                    if (muted) {
-                        muteString = LocaleController.getString("UnmuteNotifications", R.string.UnmuteNotifications);
-                    } else {
-                        muteString = LocaleController.getString("MuteNotifications", R.string.MuteNotifications);
-                    }
-                    ////
+                    boolean isMuted = MessagesController.getInstance(currentAccount).isDialogMuted(selectedDialog);
+                    String muteString = LocaleController.getString(
+                        isMuted ? "UnmuteNotifications" : "MuteNotifications",
+                        isMuted ? R.string.UnmuteNotifications : R.string.MuteNotifications
+                    );
+                    //
 
                     if (DialogObject.isChannel(dialog)) {
                         final TLRPC.Chat chat = MessagesController.getInstance(currentAccount).getChat(-lower_id);
@@ -882,7 +880,7 @@ public boolean onItemClick(View view, int position, float x, float y) {
                         int icons[] = new int[]{
                                 dialog.pinned ? R.drawable.chats_unpin : R.drawable.chats_pin,
                                 hasUnread ? R.drawable.menu_read : R.drawable.menu_unread,
-                                muted ? R.drawable.notify_members_off : R.drawable.notify_members_on,
+                                isMuted ? R.drawable.notify_members_off : R.drawable.notify_members_on,
                                 R.drawable.chats_clear,
                                 R.drawable.chats_leave
                         };
@@ -949,7 +947,7 @@ public boolean onItemClick(View view, int position, float x, float y) {
                         });
                         BottomSheet sheet = builder.create();
                         showDialog(sheet);
-                        sheet.setItemColor(4, Theme.getColor(Theme.key_dialogTextRed2), Theme.getColor(Theme.key_dialogRedIcon));
+                        sheet.setItemColor(icons.length - 1, Theme.getColor(Theme.key_dialogTextRed2), Theme.getColor(Theme.key_dialogRedIcon));
                     } else {
                         final boolean isChat = lower_id < 0 && high_id != 1;
                         TLRPC.User user;
@@ -965,6 +963,7 @@ public boolean onItemClick(View view, int position, float x, float y) {
                             user = !isChat && lower_id > 0 && high_id != 1 ? MessagesController.getInstance(currentAccount).getUser(lower_id) : null;
                         }
                         final boolean isBot = user != null && user.bot;
+                        int icons[];
 
                         builder.setItems(new CharSequence[]{
                                 dialog.pinned ? LocaleController.getString("UnpinFromTop", R.string.UnpinFromTop) : LocaleController.getString("PinToTop", R.string.PinToTop),
@@ -972,10 +971,10 @@ public boolean onItemClick(View view, int position, float x, float y) {
                                 muteString,
                                 LocaleController.getString("ClearHistory", R.string.ClearHistory),
                                 isChat ? LocaleController.getString("DeleteChat", R.string.DeleteChat) : isBot ? LocaleController.getString("DeleteAndStop", R.string.DeleteAndStop) : LocaleController.getString("Delete", R.string.Delete)
-                        }, new int[]{
+                        }, icons = new int[]{
                                 dialog.pinned ? R.drawable.chats_unpin : R.drawable.chats_pin,
                                 hasUnread ? R.drawable.menu_read : R.drawable.menu_unread,
-                                muted ? R.drawable.notify_members_off : R.drawable.notify_members_on,
+                                isMuted ? R.drawable.notify_members_off : R.drawable.notify_members_on,
                                 R.drawable.chats_clear,
                                 isChat ? R.drawable.chats_leave : R.drawable.chats_delete
                         }, (d, which) -> {
@@ -1025,7 +1024,7 @@ public boolean onItemClick(View view, int position, float x, float y) {
                         });
                         BottomSheet sheet = builder.create();
                         showDialog(sheet);
-                        sheet.setItemColor(4, Theme.getColor(Theme.key_dialogTextRed2), Theme.getColor(Theme.key_dialogRedIcon));
+                        sheet.setItemColor(icons.length - 1, Theme.getColor(Theme.key_dialogTextRed2), Theme.getColor(Theme.key_dialogRedIcon));
                     }
                 }
                 return true;
@@ -1592,14 +1591,13 @@ private void closeSearch() {
     }
 
     private void toggleMute(long dialog_id) {
-        boolean muted = MessagesController.getInstance(currentAccount).isDialogMuted(dialog_id);
-        if (!muted) {
+        boolean isMuted = MessagesController.getInstance(currentAccount).isDialogMuted(dialog_id);
+        if (!isMuted) {
             showDialog(AlertsCreator.createMuteAlert(getParentActivity(), dialog_id));
         } else {
-            SharedPreferences preferences = MessagesController.getNotificationsSettings(currentAccount);
-            SharedPreferences.Editor editor = preferences.edit();
-            editor.putInt("notify2_" + dialog_id, 0);
             org.telegram.messenger.MessagesStorage.getInstance(currentAccount).setDialogFlags(dialog_id, 0);
+            SharedPreferences.Editor editor = MessagesController.getNotificationsSettings(currentAccount).edit();
+            editor.putInt("notify2_" + dialog_id, 0);
             editor.commit();
             TLRPC.TL_dialog dialog = MessagesController.getInstance(currentAccount).dialogs_dict.get(dialog_id);
             if (dialog != null) {
