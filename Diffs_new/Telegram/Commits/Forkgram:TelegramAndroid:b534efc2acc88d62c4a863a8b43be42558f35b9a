diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java b/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
index c78c75a8d..053f5c446 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
@@ -1080,7 +1080,16 @@ public void sendScreenshotMessage(TLRPC.User user, int messageId, TLRPC.Message
         performSendMessageRequest(req, newMsgObj, null, null, null);
     }
 
+    public void sendGifWithCaption(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject, String caption) {
+        if (caption.startsWith("@gif")) caption = "";
+        sendSticker(document, peer, replyingMessageObject, parentObject, caption);
+    }
+
     public void sendSticker(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject) {
+        sendSticker(document, peer, replyingMessageObject, parentObject, null);
+    }
+
+    public void sendSticker(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject, String caption) {
         if (document == null) {
             return;
         }
@@ -1142,7 +1151,7 @@ public void sendSticker(TLRPC.Document document, long peer, MessageObject replyi
             document = newDocument;
         }
         if (document instanceof TLRPC.TL_document) {
-            sendMessage((TLRPC.TL_document) document, null, null, peer, replyingMessageObject, null, null, null, null, 0, parentObject);
+            sendMessage((TLRPC.TL_document) document, null, null, peer, replyingMessageObject, caption, null, null, null, 0, parentObject);
         }
     }
 
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
index 5d6732134..d830a3123 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
@@ -3165,8 +3165,9 @@ public void onGifSelected(TLRPC.Document gif, Object parent) {
                 if (stickersExpanded) {
                     setStickersExpanded(false, true, false);
                 }
-                SendMessagesHelper.getInstance(currentAccount).sendSticker(gif, dialog_id, replyingMessageObject, parent);
+                SendMessagesHelper.getInstance(currentAccount).sendGifWithCaption(gif, dialog_id, replyingMessageObject, parent, messageEditText.getText().toString());
                 DataQuery.getInstance(currentAccount).addRecentGif(gif, (int) (System.currentTimeMillis() / 1000));
+                messageEditText.setText("");
                 if ((int) dialog_id == 0) {
                     MessagesController.getInstance(currentAccount).saveGif(parent, gif);
                 }
