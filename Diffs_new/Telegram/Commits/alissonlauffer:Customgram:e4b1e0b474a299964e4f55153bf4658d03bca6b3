diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMessageCell.java b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMessageCell.java
index b8799f9e9..a9c0bd46f 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMessageCell.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMessageCell.java
@@ -4570,12 +4570,6 @@ protected void onLongPress() {
         if (pressedLink instanceof URLSpanMono) {
             delegate.didPressUrl(this, pressedLink, true);
             return;
-        } else if (pressedLink instanceof URLSpanNoUnderline) {
-            URLSpanNoUnderline url = (URLSpanNoUnderline) pressedLink;
-            if (url.getURL().startsWith("/")) {
-                delegate.didPressUrl(this, pressedLink, true);
-                return;
-            }
         } else if (pressedLink instanceof URLSpan) {
             delegate.didPressUrl(this, pressedLink, true);
             return;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index 1a294b095..8c41e2f34 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -14578,32 +14578,34 @@ public void didPressUrl(ChatMessageCell cell, final CharacterStyle url, boolean
                             String str = ((URLSpanNoUnderline) url).getURL();
                             if (str.startsWith("@")) {
                                 String username = str.substring(1).toLowerCase();
-                                if (currentChat != null && !TextUtils.isEmpty(currentChat.username) && username.equals(currentChat.username.toLowerCase()) ||
-                                        currentUser != null && !TextUtils.isEmpty(currentUser.username) && username.equals(currentUser.username.toLowerCase())) {
-                                    Bundle args = new Bundle();
-                                    if (currentChat != null) {
-                                        args.putInt("chat_id", currentChat.id);
-                                    } else if (currentUser != null) {
-                                        args.putInt("user_id", currentUser.id);
-                                        if (currentEncryptedChat != null) {
-                                            args.putLong("dialog_id", dialog_id);
+                                if (longPress) {
+                                    BottomSheet.Builder builder = new BottomSheet.Builder(getParentActivity());
+                                    builder.setTitle(str);
+                                    builder.setItems(new CharSequence[]{LocaleController.getString("Open", R.string.Open), LocaleController.getString("Copy", R.string.Copy)}, (dialog, which) -> {
+                                        if (which == 0) {
+                                            openUsername(username);
+                                        } else if (which == 1) {
+                                            AndroidUtilities.addToClipboard(str);
                                         }
-                                    }
-                                    ProfileActivity fragment = new ProfileActivity(args);
-                                    fragment.setPlayProfileAnimation(true);
-                                    fragment.setChatInfo(chatInfo);
-                                    fragment.setUserInfo(userInfo);
-                                    presentFragment(fragment);
+                                    });
+                                    showDialog(builder.create());
                                 } else {
                                     getMessagesController().openByUserName(username, ChatActivity.this, 0);
                                 }
                             } else if (str.startsWith("#") || str.startsWith("$")) {
-                                if (ChatObject.isChannel(currentChat)) {
-                                    openSearchWithText(str);
+                                if (longPress) {
+                                    BottomSheet.Builder builder = new BottomSheet.Builder(getParentActivity());
+                                    builder.setTitle(str);
+                                    builder.setItems(new CharSequence[]{LocaleController.getString("Open", R.string.Open), LocaleController.getString("Copy", R.string.Copy)}, (dialog, which) -> {
+                                        if (which == 0) {
+                                            openHashtag(str);
+                                        } else if (which == 1) {
+                                            AndroidUtilities.addToClipboard(str);
+                                        }
+                                    });
+                                    showDialog(builder.create());
                                 } else {
-                                    DialogsActivity fragment = new DialogsActivity(null);
-                                    fragment.setSearchString(str);
-                                    presentFragment(fragment);
+                                    openHashtag(str);
                                 }
                             } else if (str.startsWith("/")) {
                                 if (URLSpanBotCommand.enabled) {
@@ -14673,6 +14675,38 @@ public void didPressUrl(ChatMessageCell cell, final CharacterStyle url, boolean
                         }
                     }
 
+                    private void openUsername(String username) {
+                        if (currentChat != null && !TextUtils.isEmpty(currentChat.username) && username.equals(currentChat.username.toLowerCase()) ||
+                                currentUser != null && !TextUtils.isEmpty(currentUser.username) && username.equals(currentUser.username.toLowerCase())) {
+                            Bundle args = new Bundle();
+                            if (currentChat != null) {
+                                args.putInt("chat_id", currentChat.id);
+                            } else if (currentUser != null) {
+                                args.putInt("user_id", currentUser.id);
+                                if (currentEncryptedChat != null) {
+                                    args.putLong("dialog_id", dialog_id);
+                                }
+                            }
+                            ProfileActivity fragment = new ProfileActivity(args);
+                            fragment.setPlayProfileAnimation(true);
+                            fragment.setChatInfo(chatInfo);
+                            fragment.setUserInfo(userInfo);
+                            presentFragment(fragment);
+                        } else {
+                            MessagesController.getInstance(currentAccount).openByUserName(username, ChatActivity.this, 0);
+                        }
+                    }
+
+                    private void openHashtag(String str) {
+                        if (ChatObject.isChannel(currentChat)) {
+                            openSearchWithText(str);
+                        } else {
+                            DialogsActivity fragment = new DialogsActivity(null);
+                            fragment.setSearchString(str);
+                            presentFragment(fragment);
+                        }
+                    }
+
                     @Override
                     public void needOpenWebView(String url, String title, String description, String originalUrl, int w, int h) {
                         try {
