diff --git a/README.md b/README.md
index 1d23ad435..652876084 100644
--- a/README.md
+++ b/README.md
@@ -10,5 +10,5 @@ It adds some extra features to the official Telegram app:
 - [ ] Show ID
 - [x] Forward without qoute
 - [x] Ignore messages from blocked users [optional]
-- [ ] Use system emoji [optional]
-- [ ] Prefer IPv6 [optional]
+- [x] Use system emoji [optional]
+- [x] Prefer IPv6 [optional]
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java b/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
index d01ca0b5e..f11dc056c 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
@@ -8,6 +8,8 @@
 
 package org.telegram.messenger;
 
+import org.telegram.ui.ActionBar.Theme;
+
 import java.io.File;
 import java.io.InputStream;
 import java.util.ArrayList;
@@ -292,6 +294,18 @@ public void draw(Canvas canvas) {
                 canvas.drawText(EmojiData.data[info.page][info.emojiIndex], getBounds().left, getBounds().bottom, textPaint);
                 return;
             }*/
+            if (SharedConfig.useSystemEmoji) {
+                String emoji = EmojiData.data[info.page][info.emojiIndex];
+                if (EmojiData.emojiToFE0FMap.containsKey(emoji.charAt(0))) {
+                    emoji = emoji.substring(0, 1) + "\uFE0F" + emoji.substring(1);
+                }
+                textPaint.setColor(Theme.getColor(Theme.key_chat_emojiPanelIcon));
+                textPaint.setTextSize(getBounds().width() * 4.0f);
+                textPaint.setTextSize(getBounds().width() * 0.7f * 4.0f * Math.min(0.3f, getBounds().width() / textPaint.measureText(emoji)));
+                textPaint.setTextAlign(Paint.Align.CENTER);
+                canvas.drawText(emoji, getBounds().left + getBounds().width() / 2.0f, getBounds().bottom - getBounds().height() / 5.0f, textPaint);
+                return;
+            }
             if (emojiBmp[info.page][info.page2] == null) {
                 if (loadingEmoji[info.page][info.page2]) {
                     return;
@@ -361,7 +375,7 @@ public static CharSequence replaceEmoji(CharSequence cs, Paint.FontMetricsInt fo
     }
 
     public static CharSequence replaceEmoji(CharSequence cs, Paint.FontMetricsInt fontMetrics, int size, boolean createNew, int[] emojiOnly) {
-        if (SharedConfig.useSystemEmoji || cs == null || cs.length() == 0) {
+        if (cs == null || cs.length() == 0) {
             return cs;
         }
         Spannable s;
@@ -370,6 +384,9 @@ public static CharSequence replaceEmoji(CharSequence cs, Paint.FontMetricsInt fo
         } else {
             s = Spannable.Factory.getInstance().newSpannable(cs.toString());
         }
+        if (SharedConfig.useSystemEmoji) {
+            return s;
+        }
         long buf = 0;
         int emojiCount = 0;
         char c;
diff --git a/TMessagesProj/src/main/java/org/telegram/tgnet/ConnectionsManager.java b/TMessagesProj/src/main/java/org/telegram/tgnet/ConnectionsManager.java
index 411f532e5..1d33b8ea3 100644
--- a/TMessagesProj/src/main/java/org/telegram/tgnet/ConnectionsManager.java
+++ b/TMessagesProj/src/main/java/org/telegram/tgnet/ConnectionsManager.java
@@ -28,6 +28,7 @@
 import org.telegram.messenger.StatsController;
 import org.telegram.messenger.UserConfig;
 import org.telegram.messenger.Utilities;
+import org.zuragram.android.ZuraConfig;
 
 import java.io.ByteArrayOutputStream;
 import java.io.File;
@@ -657,6 +658,9 @@ protected static boolean useIpv6Address() {
         if (Build.VERSION.SDK_INT < 19) {
             return false;
         }
+        if(!ZuraConfig.useIPv6){
+            return false;
+        }
         if (BuildVars.LOGS_ENABLED) {
             try {
                 NetworkInterface networkInterface;
@@ -715,7 +719,7 @@ protected static boolean useIpv6Address() {
                     }
                 }
             }
-            if (!hasIpv4 && hasIpv6) {
+            if (hasIpv6) {
                 return true;
             }
         } catch (Throwable e) {
