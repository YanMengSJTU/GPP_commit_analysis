diff --git a/TMessagesProj/src/main/java/org/telegram/ui/PhotoViewer.java b/TMessagesProj/src/main/java/org/telegram/ui/PhotoViewer.java
index a60ab4dba..db7c5dd60 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/PhotoViewer.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/PhotoViewer.java
@@ -8845,7 +8845,7 @@ private void updateWidthHeightBitrateForCompression() {
                 break;
         }
         float scale = originalWidth > originalHeight ? maxSize / originalWidth : maxSize / originalHeight;
-        if (selectedCompression == compressionsCount - 1 && scale > 1f) {
+        if (selectedCompression == compressionsCount - 1 && scale >= 1f) {
             resultWidth = originalWidth;
             resultHeight = originalHeight;
         } else {
@@ -8853,7 +8853,7 @@ private void updateWidthHeightBitrateForCompression() {
             resultHeight = Math.round(originalHeight * scale / 2) * 2;
         }
         if (bitrate != 0) {
-            if (selectedCompression == compressionsCount - 1) {
+            if (resultWidth == originalWidth && resultHeight == originalHeight) {
                 bitrate = originalBitrate;
             } else {
                 bitrate = MediaController.makeVideoBitrate(originalHeight, originalWidth, originalBitrate, resultHeight, resultWidth);
