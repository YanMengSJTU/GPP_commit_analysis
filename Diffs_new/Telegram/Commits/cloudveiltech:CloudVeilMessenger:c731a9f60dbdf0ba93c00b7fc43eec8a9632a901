diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 06e3ae707..d34d0437e 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -121,7 +121,7 @@ android {
         }
     }
 
-    defaultConfig.versionCode = 961
+    defaultConfig.versionCode = 965
 
     sourceSets.debug {
         manifest.srcFile 'config/debug/AndroidManifest.xml'
@@ -193,7 +193,7 @@ android {
     defaultConfig {
         minSdkVersion 14
         targetSdkVersion 25
-        versionName "4.6.0"
+        versionName "4.6.2"
         multiDexEnabled true
 
         externalNativeBuild {
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java b/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
index 63423e30a..d8e31a2df 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
@@ -9035,6 +9035,9 @@ public void onClick(DialogInterface dialog, int which) {
 
     //CLoudVeil start
     public boolean isUserAllowed(TLRPC.User user) {
+        if(user == null) {
+            return true;
+        }
         if (user.bot) {
             if (GlobalSecuritySettings.LOCK_DISABLE_BOTS) {
                 return false;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Adapters/MentionsAdapter.java b/TMessagesProj/src/main/java/org/telegram/ui/Adapters/MentionsAdapter.java
index 8fcb6fb9c..019de4147 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Adapters/MentionsAdapter.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Adapters/MentionsAdapter.java
@@ -307,6 +307,13 @@ public void onDismiss(DialogInterface dialog) {
             foundContextBot = null;
             inlineMediaEnabled = true;
         }
+
+        //CloudVeil start
+        if(!MessagesController.getInstance().isUserAllowed(foundContextBot)) {
+            foundContextBot = null;
+        }
+        //CloudVeil end
+
         if (foundContextBot == null) {
             noUserName = true;
         } else {
@@ -321,6 +328,12 @@ private void searchForContextBot(final String username, final String query) {
         if (foundContextBot != null && foundContextBot.username != null && foundContextBot.username.equals(username) && searchingContextQuery != null && searchingContextQuery.equals(query)) {
             return;
         }
+        //CloudVeil start
+        if(!MessagesController.getInstance().isUserAllowed(foundContextBot)) {
+            foundContextBot = null;
+        }
+        //CloudVeil end
+
         searchResultBotContext = null;
         searchResultBotContextById = null;
         searchResultBotContextSwitch = null;
