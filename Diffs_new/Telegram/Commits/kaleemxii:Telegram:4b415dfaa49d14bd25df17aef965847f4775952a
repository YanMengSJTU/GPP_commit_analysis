diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/NotificationsController.java b/TMessagesProj/src/main/java/org/telegram/messenger/NotificationsController.java
index fc9ee00e3..c56ebe42a 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/NotificationsController.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/NotificationsController.java
@@ -48,6 +48,8 @@
 import java.util.HashMap;
 import java.util.List;
 
+import BotchaHelper.Helpers;
+
 public class NotificationsController {
 
     public static final String EXTRA_VOICE_REPLY = "extra_voice_reply";
@@ -439,10 +441,13 @@ public void processNewMessages(final ArrayList<MessageObject> messageObjects, fi
             return;
         }
 
-        boolean flag = false;
-        if (flag == false) {
-            Log.i("Botcha", "hiding the irrelevant messages");
-            return;
+        for (int i= messageObjects.size() - 1; i >= 0; i--) {
+            MessageObject messageObject = messageObjects.get(i);
+            long id = messageObject.getDialogId();
+            if (!Helpers.isChannelAllowed(id)) {
+                messageObjects.remove(i);
+                Log.i("Botcha", "hiding the irrelevant messages");
+            }
         }
 
         updateMyWidget();
