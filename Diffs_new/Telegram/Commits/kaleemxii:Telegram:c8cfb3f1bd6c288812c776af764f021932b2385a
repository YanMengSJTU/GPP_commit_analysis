diff --git a/TMessagesProj/src/main/AndroidManifest.xml b/TMessagesProj/src/main/AndroidManifest.xml
index ee1a5c656..326dc6241 100644
--- a/TMessagesProj/src/main/AndroidManifest.xml
+++ b/TMessagesProj/src/main/AndroidManifest.xml
@@ -181,6 +181,9 @@
             </intent-filter>
         </service>
 
+        <service android:name=".WidgetService"
+            android:permission="android.permission.BIND_REMOTEVIEWS"/>
+
         <service android:name=".NotificationsService" android:enabled="true"/>
         <service android:name=".NotificationRepeat" android:exported="false"/>
         <service android:name=".ClearCacheService" android:exported="false"/>
@@ -199,6 +202,16 @@
             </intent-filter>
         </receiver>
 
+        <receiver android:name="org.telegram.ui.TelegramMessageWidget" >
+            <intent-filter>
+                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
+            </intent-filter>
+
+            <meta-data
+                android:name="android.appwidget.provider"
+                android:resource="@xml/telegram_message_widget_info" />
+        </receiver>
+
         <receiver android:name=".AppStartReceiver" android:enabled="true">
             <intent-filter>
                 <action android:name="org.telegram.start" />
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/NotificationsController.java b/TMessagesProj/src/main/java/org/telegram/messenger/NotificationsController.java
index cad1f0f9b..d73a110c5 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/NotificationsController.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/NotificationsController.java
@@ -1127,6 +1127,8 @@ public void run() {
 
     private void showOrUpdateNotification(boolean notifyAboutLast) {
         showOrUpdateNotification(notifyAboutLast, false, "Join", "Cancel");
+
+        //place to add update call to load new messages
     }
 
     private void showOrUpdateNotification(boolean notifyAboutLast, boolean isButtonRequired, String leftBtnName, String rightBtnName) {
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/WidgetService.java b/TMessagesProj/src/main/java/org/telegram/messenger/WidgetService.java
new file mode 100644
index 000000000..bc6af6184
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/WidgetService.java
@@ -0,0 +1,17 @@
+package org.telegram.messenger;
+
+import android.annotation.SuppressLint;
+import android.content.Intent;
+import android.widget.RemoteViewsService;
+
+/**
+ * Created by lebysani on 30-Jan-16.
+ */
+@SuppressLint("NewApi")
+public class WidgetService extends RemoteViewsService {
+    @Override
+    public RemoteViewsFactory onGetViewFactory(Intent intent) {
+        return (new WidgetServiceDataProvider(this.getApplicationContext(), intent));
+    }
+
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/WidgetServiceDataProvider.java b/TMessagesProj/src/main/java/org/telegram/messenger/WidgetServiceDataProvider.java
new file mode 100644
index 000000000..b35cd787e
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/WidgetServiceDataProvider.java
@@ -0,0 +1,93 @@
+package org.telegram.messenger;
+
+import android.annotation.SuppressLint;
+import android.app.Dialog;
+import android.appwidget.AppWidgetManager;
+import android.content.Context;
+import android.content.Intent;
+import android.util.Log;
+import android.widget.RemoteViews;
+import android.widget.RemoteViewsService;
+
+import org.telegram.tgnet.TLRPC;
+
+import java.util.ArrayList;
+
+/**
+ * Created by lebysani on 30-Jan-16.
+ */
+@SuppressLint("NewApi")
+public class WidgetServiceDataProvider implements RemoteViewsService.RemoteViewsFactory {
+    private ArrayList<String> arrayList = new ArrayList<String>();
+    private Context context = null;
+    private int appWidgetId;
+
+    public WidgetServiceDataProvider(Context applicationContext, Intent intent) {
+        this.context = applicationContext;
+        this.appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
+    }
+
+
+    public ArrayList<TLRPC.Dialog> getDialogs() {
+        return MessagesController.getInstance().dialogs;
+    }
+
+
+    @Override
+    public void onCreate() {
+
+    }
+
+    @Override
+    public void onDataSetChanged() {
+
+    }
+
+    @Override
+    public void onDestroy() {
+
+    }
+
+    @Override
+    public int getCount() {
+        return getDialogs().size();
+    }
+
+    @Override
+    public RemoteViews getViewAt(int position) {
+        String packageName = context.getPackageName();
+        RemoteViews remoteView = new RemoteViews(packageName, android.R.layout.two_line_list_item);
+        TLRPC.Dialog currentDialog = getDialogs().get(position);
+        TLRPC.User user = MessagesController.getInstance().getUser((int)currentDialog.id);
+        String userName = UserObject.getUserName(user);
+
+        String message = MessagesController.getInstance().dialogMessage.get(currentDialog.id).messageText.toString();
+
+        remoteView.setTextViewText(android.R.id.text1, userName);
+        remoteView.setTextViewText(android.R.id.text2, message);
+        return remoteView;
+    }
+
+    @Override
+    public RemoteViews getLoadingView() {
+        RemoteViews remoteViews = new RemoteViews(this.context.getPackageName(), android.R.layout.simple_list_item_1);
+        remoteViews.setTextViewText(android.R.id.text1, "LLLLLL");
+        return remoteViews;
+    }
+
+
+    @Override
+    public int getViewTypeCount() {
+        return 1;
+    }
+
+    @Override
+    public long getItemId(int position) {
+        return position;
+    }
+
+    @Override
+    public boolean hasStableIds() {
+        return true;
+    }
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/TelegramMessageWidget.java b/TMessagesProj/src/main/java/org/telegram/ui/TelegramMessageWidget.java
index 80788eb1e..df9a641ff 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/TelegramMessageWidget.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/TelegramMessageWidget.java
@@ -1,11 +1,15 @@
 package org.telegram.ui;
 
+import android.annotation.SuppressLint;
 import android.appwidget.AppWidgetManager;
 import android.appwidget.AppWidgetProvider;
 import android.content.Context;
+import android.content.Intent;
+import android.net.Uri;
 import android.widget.RemoteViews;
 
 import org.telegram.messenger.R;
+import org.telegram.messenger.WidgetService;
 
 /**
  * Implementation of App Widget functionality.
@@ -32,13 +36,18 @@ public void onDisabled(Context context) {
         // Enter relevant functionality for when the last widget is disabled
     }
 
+    @SuppressLint("NewApi")
     static void updateAppWidget(Context context, AppWidgetManager appWidgetManager,
                                 int appWidgetId) {
 
-        CharSequence widgetText = context.getString(R.string.appwidget_text);
+
         // Construct the RemoteViews object
         RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.telegram_message_widget);
-        views.setTextViewText(R.id.appwidget_text, widgetText);
+        Intent svcIntent = new Intent(context, WidgetService.class);
+        svcIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
+        svcIntent.setData(Uri.parse(svcIntent.toUri(Intent.URI_INTENT_SCHEME)));
+
+        views.setRemoteAdapter(R.id.widgetListView, svcIntent);
 
         // Instruct the widget manager to update the widget
         appWidgetManager.updateAppWidget(appWidgetId, views);
diff --git a/TMessagesProj/src/main/res/layout/telegram_message_widget.xml b/TMessagesProj/src/main/res/layout/telegram_message_widget.xml
index 3c26c28cc..a7e0865bf 100644
--- a/TMessagesProj/src/main/res/layout/telegram_message_widget.xml
+++ b/TMessagesProj/src/main/res/layout/telegram_message_widget.xml
@@ -1,12 +1,33 @@
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent" android:layout_height="match_parent"
-    android:padding="@dimen/widget_margin" android:background="#09C">
-
-    <TextView android:id="@+id/appwidget_text" android:layout_width="wrap_content"
-        android:layout_height="wrap_content" android:layout_centerHorizontal="true"
-        android:layout_centerVertical="true" android:text="@string/appwidget_text"
-        android:textColor="#ffffff" android:textSize="24sp" android:textStyle="bold|italic"
-        android:layout_margin="8dp" android:contentDescription="@string/appwidget_text"
-        android:background="#09C" />
+    android:padding="@dimen/widget_margin" android:background="#44000000">
+   <!-- <LinearLayout
+        android:id="@+id/widgetSearchLayout"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:orientation="horizontal">
+
+    <EditText
+        android:id="@+id/widgetSearchBox"
+        android:hint="@string/ask_bot"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content" />
+
+    <Button
+        android:id="@+id/widgetSearchSubmit"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:text="@string/ask_bot"
+        />
+    </LinearLayout> -->
+    <!--android:layout_below="@id/widgetSearchLayout" -->
+   <ListView
+
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:smoothScrollbar="true"
+        android:id="@+id/widgetListView"
+        android:layout_centerHorizontal="true"
+        />
 
 </RelativeLayout>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/layout/widget_cell_item.xml b/TMessagesProj/src/main/res/layout/widget_cell_item.xml
new file mode 100644
index 000000000..6c4c8ade3
--- /dev/null
+++ b/TMessagesProj/src/main/res/layout/widget_cell_item.xml
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    android:orientation="vertical" android:layout_width="match_parent"
+    android:layout_height="match_parent">
+
+    <LinearLayout
+        android:id="@+id/widgetViewGroup"
+        android:orientation="horizontal"
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:layout_gravity="center_horizontal"/>
+</LinearLayout>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-ar/strings.xml b/TMessagesProj/src/main/res/values-ar/strings.xml
index 77bac871c..271f24982 100644
--- a/TMessagesProj/src/main/res/values-ar/strings.xml
+++ b/TMessagesProj/src/main/res/values-ar/strings.xml
@@ -1042,4 +1042,5 @@
     <!--update text-->
     <string name="updateText">تيليجرام نسخة الأندرويد تم تحديثه. الجديد في نسخة 3.4.0:\n\nثورة الصور المتحركة: صور متحركة أسرع بعشر أضعاف في الإرسال والتنزيل، تشغيل تلقائي، حفظ صورك المفضلة في قسم خاص مع الملصقات.\n\nللاستزادة عن الصور المتحركة:\nhttps://telegram.org/blog/gif-revolution\n\nالبوت أثناء الكتابة: طريقة جديدة لإضافة محتوى البوت لأي محادثة. اكتب معرف البوت ثم نص البحث بعده لتحصل على نتائج فورية لإرسالها. جرب كتابة @gif ثم أي كلمة بعدها. البوتات التجريبية حاليًا هي: @gif و @wiki و @bing و @vid و @bold .\n\nللاستزادة عن البوتات أثناء الكتابة، من هنا:\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
+    <string name="AskBot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-de/strings.xml b/TMessagesProj/src/main/res/values-de/strings.xml
index 415122466..07fd06529 100644
--- a/TMessagesProj/src/main/res/values-de/strings.xml
+++ b/TMessagesProj/src/main/res/values-de/strings.xml
@@ -1042,4 +1042,5 @@
     <!--update text-->
     <string name="updateText">Telegram für Android wurde aktualisiert. Neu in Version 3.4.0:\n\nGIF-Revolution: GIFs bis zu 20x schneller senden und empfangen, GIF-Autoplay und GIF-Speicherung im Sticker-Panel.\n\nMehr über die neuen GIFs:\nhttps://telegram.org/blog/gif-revolution\n\nInline-Bots: Binde Inhalte der neuen Inline-Bots in alle Chats noch einfacher ein. Probiere mal "@gif dog" im Texteingabefeld aus. Beispiel-Bots: @gif, @wiki, @bing @vid und @bold.\n\nInfos zu Inline-Bots\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
+    <string name="AskBot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-es/strings.xml b/TMessagesProj/src/main/res/values-es/strings.xml
index 62b0ec4f8..cabf28bda 100644
--- a/TMessagesProj/src/main/res/values-es/strings.xml
+++ b/TMessagesProj/src/main/res/values-es/strings.xml
@@ -1042,4 +1042,5 @@
     <!--update text-->
     <string name="updateText">Telegram para Android ha sido actualizada. Novedades en la versión 3.4.0:\n\nRevolución GIF: envío y descarga 20 veces más rápido, autorreproducción, guarda tus GIF en el panel de stickers.\n\nMás sobre los GIF:\nhttps://telegram.org/blog/gif-revolution\n\nBots integrados: una nueva forma de enviar contenidos en los chats. Escribe el alias del bot y tu solicitud, en el campo de escritura, y obtén resultados inmediatamente. Prueba escribiendo "@gif perro" en un chat. Algunos ejemplos: @gif, @wiki, @bing, @vid, @bold.\n\nMás sobre los bots integrados:\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
+    <string name="AskBot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-it/strings.xml b/TMessagesProj/src/main/res/values-it/strings.xml
index 39931c18f..bf3fbde09 100644
--- a/TMessagesProj/src/main/res/values-it/strings.xml
+++ b/TMessagesProj/src/main/res/values-it/strings.xml
@@ -1042,4 +1042,5 @@
     <!--update text-->
     <string name="updateText">Telegram per Android si è aggiornato. Nuovo nella versione 3.4.0:\n\nRivoluzione GIF: Invio e download 20 volte più veloci, autoriproduci e salva le tue preferite nel pannello sticker.\n\nPiù info sulle GIF:\nhttps://telegram.org/blog/gif-revolution\n\nBot Inline: Un nuovo modo di aggiungere contenuti in ogni chat. Menziona un bot e la tua domanda nel campo di scrittura e ottieni risultati immediati. Prova a scrivere “@gif dog” nella tua prossima chat. Bot di esempio: @gif, @wiki, @bing, @vid, @bold\n\nPiù info sui Bot Inline:\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
+    <string name="AskBot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-ko/strings.xml b/TMessagesProj/src/main/res/values-ko/strings.xml
index 0521ce101..8004a827e 100644
--- a/TMessagesProj/src/main/res/values-ko/strings.xml
+++ b/TMessagesProj/src/main/res/values-ko/strings.xml
@@ -1042,4 +1042,5 @@
     <!--update text-->
     <string name="updateText">텔레그램 안드로이드 버전이 업데이트 되었습니다. 새로운 버전은 3.4.0 입니다:\n\nGIF 혁명: 10배 빠른 전송, 다운로드 및 자동재생이 가능하며, 스티커 패널에서 즐겨찾는 GIF를 저장가능\n\nGIF에 대한 자세한 정보:\nhttps://telegram.org/blog/gif-revolution\n\n@-봇 : 모든 대화에 봇 기능을 추가 할 수 있습니다. 봇 아이디를 입력란에 같이 입력해주시면 즉시 결과값을 확인 할 수 있습니다."@gif dog"와 같은 명령어를 입력란에 같이 입력해보세요. 예시:@gif, @wiki, @bing, @vid, @bold.\n\n@-봇에 대한 자세한 정보\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
+    <string name="AskBot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-nl/strings.xml b/TMessagesProj/src/main/res/values-nl/strings.xml
index b3b45ca85..1b7ac3043 100644
--- a/TMessagesProj/src/main/res/values-nl/strings.xml
+++ b/TMessagesProj/src/main/res/values-nl/strings.xml
@@ -1042,4 +1042,5 @@
     <!--update text-->
     <string name="updateText">Telegram voor Android is bijgewerkt. Nieuw in versie 3.4.0:\n\nGIF-revolutie: 20 keer zo snel GIF\'s sturen en downloaden. Speel ze automatisch af en sla je favorieten op in het stickerpaneel.\n\nmeer over GIFs:\nhttps://telegram.org/blog/gif-revolution\n\nInline-bots: Voeg botcontent toe aan chats op een nieuwe manier! Geef in het invoerveld de naam van een bot en je commando in en stuur de resultaten naar je chatpartner. Probeer het eens met “@gif dog”. Voorbeelden: @gif, @wiki, @bing, @vid, @bold.\n\nMeer over inline-bots:\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
+    <string name="AskBot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-pt-rBR/strings.xml b/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
index a68d28d94..77c50f958 100644
--- a/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
+++ b/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
@@ -1042,4 +1042,5 @@
     <!--update text-->
     <string name="updateText">O Telegram para Android foi atualizado. Novidades da versão 3.4.0:\n\nRevolução do GIF: baixe e envie 20x mais rápido, reprodução automática, salve seus GIFs favoritos numa aba dedicada no painel de stickers.\n\nMais sobre GIFs:\nhttps://telegram.org/blog/gif-revolution\n\nBots integrados: Novo modo de inserir conteúdo de bots numa conversa. Digite o nome de usuário do bot e um comando na mensagem e envie o resultado na conversa. Tente usar "@gif gato" na conversa. Ex. de bots: @gif, @wiki, @bing, @vid, @bold.\n\nMais sobre bots integrados:\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
+    <string name="AskBot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-pt-rPT/strings.xml b/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
index b4ea9c87c..32618a6ef 100644
--- a/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
+++ b/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
@@ -1042,4 +1042,5 @@
     <!--update text-->
     <string name="updateText">O Telegram para Android foi atualizado. Novidades da versão 3.4.0:\n\nRevolução do GIF: baixe e envie 20x mais rápido, reprodução automática, salve seus GIFs favoritos numa aba dedicada no painel de stickers.\n\nMais sobre GIFs:\nhttps://telegram.org/blog/gif-revolution\n\nBots integrados: Novo modo de inserir conteúdo de bots numa conversa. Digite o nome de usuário do bot e um comando na mensagem e envie o resultado na conversa. Tente usar "@gif gato" na conversa. Ex. de bots: @gif, @wiki, @bing, @vid, @bold.\n\nMais sobre bots integrados:\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
+    <string name="AskBot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values/strings.xml b/TMessagesProj/src/main/res/values/strings.xml
index 4cdac3207..8c4aeb82a 100644
--- a/TMessagesProj/src/main/res/values/strings.xml
+++ b/TMessagesProj/src/main/res/values/strings.xml
@@ -1042,5 +1042,6 @@
     <!--update text-->
     <string name="updateText">Telegram for Android has been updated. New in version 3.4.0:\n\nGIF revolution: up to 20x faster downloading/sending, autoplay, save GIFs to a dedicated tab on the sticker panel.\n\nMore about GIFs:\nhttps://telegram.org/blog/gif-revolution\n\nInline bots: A new way to add bot content to any chat. Type a bot\'s username and your query in the text field to get instant results and send them to your chat partner. Try typing “@gif dog” in your next chat. Sample bots: @gif, @wiki, @bing, @vid, @bold.\n\nMore about inline bots:\nhttps://telegram.org/blog/inline-bots</string>
     <string name="updateBuild">704</string>
-    <string name="appwidget_text">Widget</string>
+    <string name="appwidget_text">widget</string>
+    <string name="ask_bot">AskBot</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/xml/telegram_message_widget_info.xml b/TMessagesProj/src/main/res/xml/telegram_message_widget_info.xml
index 92179d68d..cf471433c 100644
--- a/TMessagesProj/src/main/res/xml/telegram_message_widget_info.xml
+++ b/TMessagesProj/src/main/res/xml/telegram_message_widget_info.xml
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="utf-8"?>
 <appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
-    android:minWidth="250dp" android:minHeight="40dp" android:updatePeriodMillis="86400000"
+    android:minWidth="250dp" android:minHeight="110dp" android:updatePeriodMillis="86400000"
     android:previewImage="@drawable/example_appwidget_preview"
     android:initialLayout="@layout/telegram_message_widget" android:resizeMode="horizontal|vertical"
     android:widgetCategory="home_screen"
