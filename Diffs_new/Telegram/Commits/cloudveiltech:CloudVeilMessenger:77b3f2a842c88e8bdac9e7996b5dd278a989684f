diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 1233a3196..5fd749fa3 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -141,7 +141,7 @@ android {
         }
     }
 
-    defaultConfig.versionCode = 1517
+    defaultConfig.versionCode = 1518
 
     sourceSets.debug {
         manifest.srcFile 'config/debug/AndroidManifest.xml'
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ImageUpdater.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ImageUpdater.java
index c5c7fccc7..8205a3a4c 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ImageUpdater.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ImageUpdater.java
@@ -25,6 +25,7 @@
 import android.util.TypedValue;
 import android.widget.TextView;
 
+import org.cloudveil.messenger.GlobalSecuritySettings;
 import org.telegram.messenger.AndroidUtilities;
 import org.telegram.messenger.BuildConfig;
 import org.telegram.messenger.ImageLoader;
@@ -91,6 +92,11 @@ public void clear() {
 
     public ImageUpdater() {
         imageReceiver = new ImageReceiver(null);
+        //CloudVeil start
+        if(GlobalSecuritySettings.LOCK_DISABLE_GLOBAL_SEARCH) {
+            setSearchAvailable(false);
+        }
+        //CloudVeil end
     }
 
     public void openMenu(boolean hasAvatar, Runnable onDeleteAvatar) {
@@ -153,6 +159,11 @@ public void openSearch() {
         if (parentFragment == null) {
             return;
         }
+        //CloudVeil start
+        if(GlobalSecuritySettings.LOCK_DISABLE_GLOBAL_SEARCH) {
+            return;
+        }
+        //CloudVeil end
         final HashMap<Object, Object> photos = new HashMap<>();
         final ArrayList<Object> order = new ArrayList<>();
         PhotoPickerActivity fragment = new PhotoPickerActivity(0, null, photos, order, new ArrayList<>(), 1, false, null);
