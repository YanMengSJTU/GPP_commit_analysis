diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ContactsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ContactsActivity.java
index de1f2b398..9d496e5e7 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ContactsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ContactsActivity.java
@@ -236,14 +236,6 @@ public void onSearchExpand() {
             public void onSearchCollapse() {
                 searchListViewAdapter.searchDialogs(null);
                 searching = false;
-                searchWas = false;
-                listView.setAdapter(listViewAdapter);
-                listView.setSectionsType(1);
-                listViewAdapter.notifyDataSetChanged();
-                listView.setFastScrollVisible(true);
-                listView.setVerticalScrollBarEnabled(false);
-                listView.setEmptyView(null);
-                emptyView.setText(LocaleController.getString("NoContacts", R.string.NoContacts));
                 if (floatingButtonContainer != null) {
                     floatingButtonContainer.setVisibility(View.VISIBLE);
                     floatingHidden = true;
@@ -253,6 +245,7 @@ public void onSearchCollapse() {
                 if (sortItem != null) {
                     sortItem.setVisibility(View.VISIBLE);
                 }
+                showContacts();
             }
 
             @Override
@@ -274,8 +267,10 @@ public void onTextChanged(EditText editText) {
                         listView.setEmptyView(emptyView);
                         emptyView.setText(LocaleController.getString("NoResult", R.string.NoResult));
                     }
+                    searchListViewAdapter.searchDialogs(text);
+                } else {
+                    showContacts();
                 }
-                searchListViewAdapter.searchDialogs(text);
             }
         });
         item.setSearchFieldHint(LocaleController.getString("Search", R.string.Search));
@@ -549,6 +544,20 @@ public void getOutline(View view, Outline outline) {
         return fragmentView;
     }
 
+    private void showContacts() {
+        searchListViewAdapter.searchDialogs(null);
+        searchWas = false;
+        if (listView.getAdapter() != listViewAdapter) {
+            listView.setAdapter(listViewAdapter);
+            listView.setSectionsType(1);
+            listViewAdapter.notifyDataSetChanged();
+            listView.setFastScrollVisible(true);
+            listView.setVerticalScrollBarEnabled(false);
+            listView.setEmptyView(null);
+            emptyView.setText(LocaleController.getString("NoContacts", R.string.NoContacts));
+        }
+    }
+
     private void didSelectResult(final TLRPC.User user, boolean useAlert, String param) {
         if (useAlert && selectAlertString != null) {
             if (getParentActivity() == null) {
