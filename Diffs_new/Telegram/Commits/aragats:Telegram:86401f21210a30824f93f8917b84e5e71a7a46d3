diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/PostCreateActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/PostCreateActivityEnterView.java
index 94f1277a2..ecb26573e 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/PostCreateActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/PostCreateActivityEnterView.java
@@ -9,9 +9,8 @@
 package org.telegram.ui.Components;
 
 import android.app.Activity;
-import android.content.Context;
 import android.content.SharedPreferences;
-import android.media.AudioManager;
+import android.graphics.Color;
 import android.os.PowerManager;
 import android.text.Editable;
 import android.text.TextWatcher;
@@ -24,7 +23,6 @@
 import android.view.ViewGroup;
 import android.view.ViewTreeObserver;
 import android.view.WindowManager;
-import android.view.animation.AccelerateDecelerateInterpolator;
 import android.view.inputmethod.EditorInfo;
 import android.widget.EditText;
 import android.widget.FrameLayout;
@@ -40,7 +38,6 @@
 import org.telegram.android.AnimationCompat.ViewProxy;
 import org.telegram.android.Emoji;
 import org.telegram.android.LocaleController;
-import org.telegram.android.MediaController;
 import org.telegram.android.MessageObject;
 import org.telegram.android.MessagesController;
 import org.telegram.android.NotificationCenter;
@@ -73,6 +70,7 @@
     private ImageView emojiButton;
     private EmojiView emojiView;
     private View sizeNotifierLayout;
+    private TextView charCounter;
     private FrameLayout attachButton;
     private LinearLayout textFieldContainer;
     private View topView;
@@ -275,6 +273,8 @@ public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3)
             @Override
             public void onTextChanged(CharSequence charSequence, int start, int before, int count) {
                 String message = getTrimmedString(charSequence.toString());
+                updateCharCounter(message);
+
                 checkSendButton(true);
 
                 if (delegate != null) {
@@ -319,17 +319,29 @@ public void afterTextChanged(Editable editable) {
             }
         });
 
-        if (isChat) {
-            attachButton = new FrameLayout(context);
-            attachButton.setEnabled(false);
-            ViewProxy.setPivotX(attachButton, AndroidUtilities.dp(48));
-            frameLayout.addView(attachButton);
-            layoutParams1 = (LayoutParams) attachButton.getLayoutParams();
-            layoutParams1.width = AndroidUtilities.dp(48);
-            layoutParams1.height = AndroidUtilities.dp(48);
-            layoutParams1.gravity = Gravity.BOTTOM | Gravity.RIGHT;
-            attachButton.setLayoutParams(layoutParams1);
-        }
+//        if (isChat) {
+//            attachButton = new FrameLayout(context);
+//            attachButton.setEnabled(false);
+//            ViewProxy.setPivotX(attachButton, AndroidUtilities.dp(48));
+//            //TODO it change the position of attachButton. Actually I had two frameLayout (frameLayout) in textFieldContainer. They affect on layout
+//            //TODO. I chnaged the frameLayout where to add. from  frameLayout to frameLayout1
+//            frameLayout.addView(attachButton);
+//            layoutParams1 = (LayoutParams) attachButton.getLayoutParams();
+//            layoutParams1.width = AndroidUtilities.dp(48);
+//            layoutParams1.height = AndroidUtilities.dp(48);
+//            layoutParams1.gravity = Gravity.BOTTOM | Gravity.RIGHT;
+//            attachButton.setLayoutParams(layoutParams1);
+//        }
+
+
+        this.charCounter = new TextView(context);
+        frameLayout.addView(charCounter);
+        layoutParams1 = (LayoutParams) charCounter.getLayoutParams();
+        layoutParams1.width = AndroidUtilities.dp(48);
+        layoutParams1.height = AndroidUtilities.dp(48);
+        layoutParams1.gravity = Gravity.BOTTOM | Gravity.RIGHT;
+        charCounter.setLayoutParams(layoutParams1);
+        charCounter.setGravity(Gravity.CENTER);
 
 
 
@@ -362,7 +374,27 @@ public void onClick(View view) {
             }
         });
 
+
+
+        if (isChat) {
+            attachButton = new FrameLayout(context);
+            attachButton.setEnabled(false);
+            ViewProxy.setPivotX(attachButton, AndroidUtilities.dp(48));
+            //TODO it change the position of attachButton. Actually I had two frameLayout (frameLayout) in textFieldContainer. They affect on layout
+            //TODO. I chnaged the frameLayout where to add. from  frameLayout to frameLayout1
+            frameLayout1.addView(attachButton);
+            layoutParams1 = (LayoutParams) attachButton.getLayoutParams();
+            layoutParams1.width = AndroidUtilities.dp(48);
+            layoutParams1.height = AndroidUtilities.dp(48);
+            layoutParams1.gravity = Gravity.BOTTOM | Gravity.RIGHT;
+            attachButton.setLayoutParams(layoutParams1);
+        }
+
+
         checkSendButton(false);
+
+        updateCharCounter(messageEditText.getText().toString());
+
     }
 
     private void setKeyboardTransitionState(int state) {
@@ -592,6 +624,7 @@ private void sendMessage() {
         String message = messageEditText.getText().toString();
         if (processSendingText(message)) {
             messageEditText.setText("");
+            updateCharCounter(messageEditText.getText().toString());
             lastTypingTimeSend = 0;
             if (delegate != null) {
                 delegate.onMessageSend(message);
@@ -630,10 +663,25 @@ private String getTrimmedString(String src) {
         return src;
     }
 
+
+    //TODO-aragats
+    ///TODO change parameter to length instead of message
+    private void updateCharCounter(String message) {
+        //TODO when pass int to setText then you run setText(int) method that search resource with id.
+        this.charCounter.setText("" + (140 - message.length()));
+        if(message.length()>140) {
+            this.charCounter.setTextColor(Color.RED);
+        } else {
+            this.charCounter.setTextColor(Color.parseColor("#b2b2b2"));
+        }
+
+    }
+
+
     private void checkSendButton(final boolean animated) {
         String message = getTrimmedString(messageEditText.getText().toString());
         if (message.length() > 0 || forceShowSendButton) {
-            if (attachButton.getVisibility() == View.VISIBLE) {
+            if (attachButton != null && attachButton.getVisibility() == View.VISIBLE) {
                 if (animated) {
                     if (runningAnimationType == 1) {
                         return;
@@ -665,11 +713,12 @@ public void onAnimationEnd(Object animation) {
                         });
                         runningAnimation2.start();
 
-                        if (messageEditText != null) {
-                            FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) messageEditText.getLayoutParams();
-                            layoutParams.rightMargin = AndroidUtilities.dp(0);
-                            messageEditText.setLayoutParams(layoutParams);
-                        }
+                        //TODO set right margin of text field
+//                        if (messageEditText != null) {
+//                            FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) messageEditText.getLayoutParams();
+//                            layoutParams.rightMargin = AndroidUtilities.dp(0);
+//                            messageEditText.setLayoutParams(layoutParams);
+//                        }
 
                         delegate.onAttachButtonHidden();
                     }
@@ -705,9 +754,10 @@ public void onAnimationEnd(Object animation) {
                         attachButton.setVisibility(View.GONE);
                         attachButton.clearAnimation();
                         delegate.onAttachButtonHidden();
-                        FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) messageEditText.getLayoutParams();
-                        layoutParams.rightMargin = AndroidUtilities.dp(0);
-                        messageEditText.setLayoutParams(layoutParams);
+                        //TODO set right margin of text field
+//                        FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) messageEditText.getLayoutParams();
+//                        layoutParams.rightMargin = AndroidUtilities.dp(0);
+//                        messageEditText.setLayoutParams(layoutParams);
                     }
                 }
             }
@@ -737,11 +787,12 @@ public void onAnimationEnd(Object animation) {
                     runningAnimation2.setDuration(100);
                     runningAnimation2.start();
 
-                    if (messageEditText != null) {
-                        LayoutParams layoutParams = (LayoutParams) messageEditText.getLayoutParams();
-                        layoutParams.rightMargin = AndroidUtilities.dp(50);
-                        messageEditText.setLayoutParams(layoutParams);
-                    }
+                    //TODO set right margin of text field
+//                    if (messageEditText != null) {
+//                        LayoutParams layoutParams = (LayoutParams) messageEditText.getLayoutParams();
+//                        layoutParams.rightMargin = AndroidUtilities.dp(50);
+//                        messageEditText.setLayoutParams(layoutParams);
+//                    }
 
                     delegate.onAttachButtonShow();
                 }
@@ -777,9 +828,10 @@ public void onAnimationEnd(Object animation) {
                 if (attachButton != null) {
                     delegate.onAttachButtonShow();
                     attachButton.setVisibility(View.VISIBLE);
-                    LayoutParams layoutParams = (LayoutParams) messageEditText.getLayoutParams();
-                    layoutParams.rightMargin = AndroidUtilities.dp(50);
-                    messageEditText.setLayoutParams(layoutParams);
+                    //TODO set right margin of text field
+//                    LayoutParams layoutParams = (LayoutParams) messageEditText.getLayoutParams();
+//                    layoutParams.rightMargin = AndroidUtilities.dp(50);
+//                    messageEditText.setLayoutParams(layoutParams);
                 }
             }
         }
@@ -907,6 +959,7 @@ public void setFieldText(String text) {
         if (messageEditText == null) {
             return;
         }
+        updateCharCounter(messageEditText.getText().toString());
         ignoreTextChange = true;
         messageEditText.setText(text);
         messageEditText.setSelection(messageEditText.getText().length());
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/PostCreateActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/PostCreateActivity.java
index 3aecc7e2f..f6b870f33 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/PostCreateActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/PostCreateActivity.java
@@ -1462,7 +1462,7 @@ public void onResume() {
         fixLayout(true);
         SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
 //        String lastMessageText = preferences.getString("dialog_" + dialog_id, null);
-        String lastMessageText = "last printed text";
+        String lastMessageText = "";
         if (lastMessageText != null) {
 //            preferences.edit().remove("dialog_" + dialog_id).commit();
             postCreateActivityEnterView.setFieldText(lastMessageText);
