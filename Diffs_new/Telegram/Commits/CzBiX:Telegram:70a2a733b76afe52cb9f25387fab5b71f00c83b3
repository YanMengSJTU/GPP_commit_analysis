diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java b/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
index d01ca0b5e..bc75114b3 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
@@ -19,6 +19,7 @@
 import android.graphics.Bitmap;
 import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
+import android.graphics.Color;
 import android.graphics.ColorFilter;
 import android.graphics.Paint;
 import android.graphics.PixelFormat;
@@ -287,11 +288,20 @@ public Rect getDrawRect() {
 
         @Override
         public void draw(Canvas canvas) {
-            /*if (MessagesController.getInstance().useSystemEmoji) {
-                //textPaint.setTextSize(getBounds().width());
-                canvas.drawText(EmojiData.data[info.page][info.emojiIndex], getBounds().left, getBounds().bottom, textPaint);
+            Rect b;
+            if (fullSize) {
+                b = getDrawRect();
+            } else {
+                b = getBounds();
+            }
+
+            if (SharedConfig.useSystemEmoji) {
+                final float offset = (fullSize ? bigImgSize : drawImgSize) * -0.2f;
+                textPaint.setTextSize(b.width() * 0.8f);
+                canvas.drawText(EmojiData.data[info.page][info.emojiIndex], b.left, b.bottom + offset, textPaint);
                 return;
-            }*/
+            }
+
             if (emojiBmp[info.page][info.page2] == null) {
                 if (loadingEmoji[info.page][info.page2]) {
                     return;
@@ -305,12 +315,14 @@ public void draw(Canvas canvas) {
                 return;
             }
 
+            /*
             Rect b;
             if (fullSize) {
                 b = getDrawRect();
             } else {
                 b = getBounds();
             }
+            */
 
             //if (!canvas.quickReject(b.left, b.top, b.right, b.bottom, Canvas.EdgeType.AA)) {
                 canvas.drawBitmap(emojiBmp[info.page][info.page2], info.rect, b, paint);
@@ -361,7 +373,7 @@ public static CharSequence replaceEmoji(CharSequence cs, Paint.FontMetricsInt fo
     }
 
     public static CharSequence replaceEmoji(CharSequence cs, Paint.FontMetricsInt fontMetrics, int size, boolean createNew, int[] emojiOnly) {
-        if (SharedConfig.useSystemEmoji || cs == null || cs.length() == 0) {
+        if (cs == null || cs.length() == 0) {
             return cs;
         }
         Spannable s;
@@ -370,6 +382,11 @@ public static CharSequence replaceEmoji(CharSequence cs, Paint.FontMetricsInt fo
         } else {
             s = Spannable.Factory.getInstance().newSpannable(cs.toString());
         }
+
+        if (SharedConfig.useSystemEmoji) {
+            return s;
+        }
+
         long buf = 0;
         int emojiCount = 0;
         char c;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ThemeActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ThemeActivity.java
index d53b16c23..a7c977e66 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ThemeActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ThemeActivity.java
@@ -451,6 +451,7 @@ private void updateRows() {
             raiseToSpeakRow = rowCount++;
             sendByEnterRow = rowCount++;
             saveToGalleryRow = rowCount++;
+            emojiRow = rowCount++;
             settings2Row = rowCount++;
             stickersRow = rowCount++;
             stickersSection2Row = rowCount++;
