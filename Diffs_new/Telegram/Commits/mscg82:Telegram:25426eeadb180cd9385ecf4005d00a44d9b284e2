diff --git a/TMessagesProj/src/main/java/org/telegram/ui/NotificationsSettingsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/NotificationsSettingsActivity.java
index 1f2b0192e..1be787d64 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/NotificationsSettingsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/NotificationsSettingsActivity.java
@@ -99,16 +99,18 @@ public boolean onFragmentCreate() {
         messagePreviewRow = rowCount++;
         messageLedRow = rowCount++;
         messageVibrateRow = rowCount++;
+        messageVibrationSpeedRow = rowCount++;
+        messageVibrationCountRow = rowCount++;
         messagePopupNotificationRow = rowCount++;
         messageSoundRow = rowCount++;
         groupSectionRow2 = rowCount++;
         groupSectionRow = rowCount++;
         groupAlertRow = rowCount++;
         groupPreviewRow = rowCount++;
-        groupVibrationSpeedRow = rowCount++;
-        groupVibrationCountRow = rowCount++;
         groupLedRow = rowCount++;
         groupVibrateRow = rowCount++;
+        groupVibrationSpeedRow = rowCount++;
+        groupVibrationCountRow = rowCount++;
         groupPopupNotificationRow = rowCount++;
         groupSoundRow = rowCount++;
         inappSectionRow2 = rowCount++;
@@ -197,7 +199,6 @@ public void onItemClick(AdapterView<?> adapterView, View view, final int i, long
                     } else if (i == messageVibrateRow || i == groupVibrateRow) {
                         SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
                         SharedPreferences.Editor editor = preferences.edit();
-                        boolean enabled;
                         if (i == messageVibrateRow) {
                             enabled = preferences.getBoolean("EnableVibrateAll", true);
                             editor.putBoolean("EnableVibrateAll", !enabled);
@@ -687,6 +688,10 @@ public View getView(int i, View view, ViewGroup viewGroup) {
                     checkCell.setTextAndCheck(LocaleController.getString("NotificationsService", R.string.NotificationsService), preferences.getBoolean("pushService", true), false);
                 } else if (i == badgeNumberRow) {
                     checkCell.setTextAndCheck(LocaleController.getString("BadgeNumber", R.string.BadgeNumber), preferences.getBoolean("badgeNumber", true), true);
+                } else if (i == messageVibrateRow) {
+                    checkCell.setTextAndCheck(LocaleController.getString("Vibrate", R.string.Vibrate), preferences.getBoolean("EnableVibrateAll", true), true);
+                }  else if (i == groupVibrateRow) {
+                    checkCell.setTextAndCheck(LocaleController.getString("Vibrate", R.string.Vibrate), preferences.getBoolean("EnableVibrateGroup", true), true);
                 }
             } else if (type == 2) {
                 if (view == null) {
@@ -747,23 +752,6 @@ public View getView(int i, View view, ViewGroup viewGroup) {
                         value = LocaleController.getString("AlwaysShowPopup", R.string.AlwaysShowPopup);
                     }
                     textCell.setTextAndValue(LocaleController.getString("PopupNotification", R.string.PopupNotification), value, true);
-                } else if (i == messageVibrateRow || i == groupVibrateRow) {
-                    textCell.setMultilineDetail(false);
-                    int value = 0;
-                    if (i == messageVibrateRow) {
-                        value = preferences.getInt("vibrate_messages", 0);
-                    } else if (i == groupVibrateRow) {
-                        value = preferences.getInt("vibrate_group", 0);
-                    }
-                    if (value == 0) {
-                        textCell.setTextAndValue(LocaleController.getString("Vibrate", R.string.Vibrate), LocaleController.getString("Default", R.string.Default), true);
-                    } else if (value == 1) {
-                        textCell.setTextAndValue(LocaleController.getString("Vibrate", R.string.Vibrate), LocaleController.getString("Short", R.string.Short), true);
-                    } else if (value == 2) {
-                        textCell.setTextAndValue(LocaleController.getString("Vibrate", R.string.Vibrate), LocaleController.getString("Disabled", R.string.Disabled), true);
-                    } else if (value == 3) {
-                        textCell.setTextAndValue(LocaleController.getString("Vibrate", R.string.Vibrate), LocaleController.getString("Long", R.string.Long), true);
-                    }
                 }
             } else if (type == 3) {
                 if (view == null) {
@@ -796,7 +784,8 @@ public int getItemViewType(int i) {
             }  else if (i == messageAlertRow || i == messagePreviewRow || i == groupAlertRow ||
                     i == groupPreviewRow || i == inappSoundRow || i == inappVibrateRow ||
                     i == inappPreviewRow || i == contactJoinedRow || i == pebbleAlertRow ||
-                    i == notificationsServiceRow || i == badgeNumberRow) {
+                    i == notificationsServiceRow || i == badgeNumberRow ||
+                    i == messageVibrateRow || i == groupVibrateRow) {
                 return 1;
             } else if (i == messageLedRow || i == groupLedRow) {
                 return 3;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ProfileActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ProfileActivity.java
index 6e2cadb66..26821c21a 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ProfileActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ProfileActivity.java
@@ -446,6 +446,7 @@ public void onItemClick(AdapterView<?> adapterView, View view, final int i, long
                     } else if (i == settingsNotificationsRow) {
                         Bundle args = new Bundle();
                         if (user_id != 0) {
+                            args.putLong("user_id", user_id);
                             args.putLong("dialog_id", dialog_id == 0 ? user_id : dialog_id);
                         } else if (chat_id != 0) {
                             args.putLong("dialog_id", -chat_id);
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ProfileNotificationsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ProfileNotificationsActivity.java
index 80208b3dd..e9c734c8d 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ProfileNotificationsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ProfileNotificationsActivity.java
@@ -159,10 +159,10 @@ public void onClick(DialogInterface dialog, int which) {
                     } else if (i == settingsVibrationSpeedRow) {
                         final SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
                         final String key;
-                        if ((int)dialog_id < 0) {
-                            key = "VibrationSpeedGroup_" + (-dialog_id);
-                        } else {
+                        if (user_id != 0) {
                             key = "VibrationSpeed_" + (user_id);
+                        } else {
+                            key = "VibrationSpeedGroup_" + Math.abs(dialog_id);
                         }
 
                         VibrationOptions.VibrationSpeed[] vibrationSpeeds = VibrationOptions.VibrationSpeed.values();
@@ -208,10 +208,10 @@ public void onClick(DialogInterface dialog, int which) {
                     } else if (i == settingsVibrationCountRow) {
                         final SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
                         final String key;
-                        if ((int)dialog_id < 0) {
-                            key = "VibrationCountGroup_" + (-dialog_id);
-                        } else {
+                        if (user_id != 0) {
                             key = "VibrationCount_" + (user_id);
+                        } else {
+                            key = "VibrationCountGroup_" + Math.abs(dialog_id);
                         }
 
                         String counts[] = new String[11];
@@ -494,7 +494,6 @@ public View getView(int i, View view, ViewGroup viewGroup) {
                     }
                     textCell.setTextAndValue(LocaleController.getString("Sound", R.string.Sound), value, true);
                 } else if(i == settingsVibrationSpeedRow) {
-                    textCell.setTextAndValue(LocaleController.getString("Notifications", R.string.Notifications), LocaleController.getString("VibrateSpeed", R.string.VibrateSpeed), true);
                     String key;
                     if ((int)dialog_id < 0) {
                         key = "VibrationSpeedGroup_" + (-dialog_id);
@@ -502,15 +501,16 @@ public View getView(int i, View view, ViewGroup viewGroup) {
                         key = "VibrationSpeed_" + (user_id);
                     }
                     int storedValue = preferences.getInt(key, -1);
+                    String value;
                     if(storedValue == -1) {
-                        textCell.setTextAndValue(LocaleController.getString("Notifications", R.string.Notifications), LocaleController.getString("Default", R.string.Default), true);
+                        value = LocaleController.getString("Default", R.string.Default);
                     }
                     else {
                         VibrationOptions.VibrationSpeed speed = VibrationOptions.VibrationSpeed.fromValue(storedValue);
-                        textCell.setTextAndValue(LocaleController.getString("Notifications", R.string.Notifications), LocaleController.getString(speed.getLocaleKey(), speed.getResourceId()), true);
+                        value = LocaleController.getString(speed.getLocaleKey(), speed.getResourceId());
                     }
+                    textCell.setTextAndValue(LocaleController.getString("VibrateSpeed", R.string.VibrateSpeed), value, true);
                 } else if(i == settingsVibrationCountRow) {
-                    textCell.setTextAndValue(LocaleController.getString("Notifications", R.string.Notifications), LocaleController.getString("VibrateCount", R.string.VibrateCount), true);
                     String key;
                     if ((int)dialog_id < 0) {
                         key = "VibrationCountGroup_" + (-dialog_id);
@@ -518,12 +518,14 @@ public View getView(int i, View view, ViewGroup viewGroup) {
                         key = "VibrationCount_" + (user_id);
                     }
                     int storedValue = preferences.getInt(key, -1);
+                    String value;
                     if(storedValue == -1) {
-                        textCell.setTextAndValue(LocaleController.getString("Notifications", R.string.Notifications), LocaleController.getString("Default", R.string.Default), true);
+                        value = LocaleController.getString("Default", R.string.Default);
                     }
                     else {
-                        textCell.setTextAndValue(LocaleController.getString("Notifications", R.string.Notifications), String.valueOf(storedValue), true);
+                        value = String.valueOf(storedValue);
                     }
+                    textCell.setTextAndValue(LocaleController.getString("VibrateCount", R.string.VibrateCount), value, true);
                 }
             } else if (type == 1) {
                 if (view == null) {
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index f703ec03b..300d83320 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,4 +1,4 @@
-#Mon Nov 03 14:19:12 MSK 2014
+#Thu Nov 20 11:54:15 CET 2014
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
