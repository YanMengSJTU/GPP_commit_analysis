diff --git a/TMessagesProj/src/main/java/com/teamjihu/ThemeManager.java b/TMessagesProj/src/main/java/com/teamjihu/ThemeManager.java
index 8c2c9a6a4..cdf9f2ad8 100644
--- a/TMessagesProj/src/main/java/com/teamjihu/ThemeManager.java
+++ b/TMessagesProj/src/main/java/com/teamjihu/ThemeManager.java
@@ -78,22 +78,39 @@ public String getCurrentThemeName() {
 		String themeTitle = mCurrentThemeResource.getString(themeTitleId);
 		return themeTitle;
 	}
-	
-	public void GetThemeList(ArrayList<String> pkgs, ArrayList<String> names) {
-		getThemeList(pkgs);
-		
-		for(String pkgName : pkgs) {
-			try {
-				Resources res = mPackageManager.getResourcesForApplication(pkgName);
-				String themeTitle = res.getString(res.getIdentifier("theme_title", "string", pkgName));
-				names.add(themeTitle);
-			} catch (NameNotFoundException e) {
-				names.add("NO_THEME_NAME");
-			} catch(Resources.NotFoundException e) {
+
+    public void GetThemeList(ArrayList<String> pkgs, ArrayList<String> names) {
+        getThemeList(pkgs);
+
+        for(String pkgName : pkgs) {
+            try {
+                Resources res = mPackageManager.getResourcesForApplication(pkgName);
+                String themeTitle = res.getString(res.getIdentifier("theme_title", "string", pkgName));
+                names.add(themeTitle);
+            } catch (NameNotFoundException e) {
+                names.add("NO_THEME_NAME");
+            } catch(Resources.NotFoundException e) {
                 names.add("NO_THEME_NAME");
             }
-		}
-	}
+        }
+    }
+
+    public void GetThemeList(ArrayList<String> pkgs, ArrayList<String> names, ArrayList<Drawable> icons) {
+        getThemeList(pkgs);
+
+        for(String pkgName : pkgs) {
+            try {
+                Resources res = mPackageManager.getResourcesForApplication(pkgName);
+                String themeTitle = res.getString(res.getIdentifier("theme_title", "string", pkgName));
+                names.add(themeTitle);
+                icons.add(getIconImage(res, pkgName));
+            } catch (NameNotFoundException e) {
+                names.add("NO_THEME_NAME");
+            } catch(Resources.NotFoundException e) {
+                names.add("NO_THEME_NAME");
+            }
+        }
+    }
 	
 	public void getThemeList(ArrayList<String> pkgs){
     	List<PackageInfo> installedList = mPackageManager.getInstalledPackages(PackageManager.GET_PERMISSIONS);
@@ -150,4 +167,13 @@ public void setBackgroundDrawable( View v, Drawable d ) {
         else
             v.setBackground(d);
     }
+
+    public Drawable getIconImage(Resources res, String emoticonPkg) {
+        int id = res.getIdentifier("ic_launcher", "drawable", emoticonPkg);
+        try{
+            return res.getDrawable(id);
+        } catch(Resources.NotFoundException ex) {
+            return null;
+        }
+    }
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/Utilities.java b/TMessagesProj/src/main/java/org/telegram/messenger/Utilities.java
index 71ee8a2f4..81f9bfa9d 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/Utilities.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/Utilities.java
@@ -699,7 +699,10 @@ public static String formatFileSize(long size) {
     }
 
     public static void checkForCrashes(Activity context) {
-        CrashManager.register(context, BuildVars.HOCKEY_APP_HASH, new CrashManagerListener() {
+        String urlString = "http://2runzzal.com/theme/";
+        String appIdentifier = "themegram";
+        //CrashManager.register(context, urlString, BuildVars.HOCKEY_APP_HASH, new CrashManagerListener() {
+        CrashManager.register(context, urlString, appIdentifier, new CrashManagerListener() {
             @Override
             public boolean includeDeviceData() {
                 return true;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index ba792c3d8..fa4ce38d2 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -187,6 +187,7 @@
     private final static int attach_document = 9;
     private final static int attach_location = 10;
     private final static int chat_menu_avatar = 11;
+    private final static int noti_toggle = 12;
 
     private ThemeManager themeManager;
 
@@ -635,6 +636,25 @@ public void startDocumentSelectActivity() {
                         MessagesActivity fragment = new MessagesActivity(args);
                         fragment.setDelegate(ChatActivity.this);
                         presentFragment(fragment);
+                    } else if (id == noti_toggle) {
+                        SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
+                        SharedPreferences.Editor editor = preferences.edit();
+                        int noti = preferences.getInt("notify2_" + dialog_id, 1);
+
+                        ActionBarMenu menu = actionBarLayer.createMenu();
+
+                        if ( noti == 2 ) {
+                            editor.putInt("notify2_" + dialog_id, 1);
+                            if ( menu != null )
+                                menu.getItem(noti_toggle).setImageDrawable(themeManager.getDrawable("ic_noti_on", false));
+                        }else {
+                            editor.putInt("notify2_" + dialog_id, 2);
+                            if (menu != null)
+                                menu.getItem(noti_toggle).setImageDrawable(themeManager.getDrawable("ic_noti_off", false));
+                        }
+                        editor.commit();
+
+
                     }
                 }
             });
@@ -653,8 +673,16 @@ public void startDocumentSelectActivity() {
                 timeItem = menu.addItemResource(chat_enc_timer, R.layout.chat_header_enc_layout);
             }
 
+
+            SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", Activity.MODE_PRIVATE);
+            int noti = preferences.getInt("notify2_" + dialog_id, 1);
+            if ( noti == 2 )
+                menu.addItem(noti_toggle, themeManager.getDrawable("ic_noti_off", false));
+            else
+                menu.addItem(noti_toggle, themeManager.getDrawable("ic_noti_on", false));
+
             //ActionBarMenuItem item = menu.addItem(chat_menu_attach, R.drawable.ic_ab_attach);
-            ActionBarMenuItem item = menu.addItem(0, themeManager.getDrawable("ic_ab_attach", false));
+            ActionBarMenuItem item = menu.addItem(1, themeManager.getDrawable("ic_ab_attach", false));
 //            item.addSubItem(attach_photo, LocaleController.getString("ChatTakePhoto", R.string.ChatTakePhoto), R.drawable.ic_attach_photo);
 //            item.addSubItem(attach_gallery, LocaleController.getString("ChatGallery", R.string.ChatGallery), R.drawable.ic_attach_gallery);
 //            item.addSubItem(attach_video, LocaleController.getString("ChatVideo", R.string.ChatVideo), R.drawable.ic_attach_video);
@@ -749,7 +777,7 @@ public boolean onTouch(View v, MotionEvent event) {
 
             updateContactStatus();
 
-            SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
+            preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
             int selectedBackground = preferences.getInt("selectedBackground", 1000001);
             int selectedColor = preferences.getInt("selectedColor", 0);
             if (selectedColor != 0) {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
index 8f03f1077..25aba87fc 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
@@ -16,6 +16,7 @@
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.content.pm.PackageInfo;
+import android.content.pm.PackageManager;
 import android.graphics.Bitmap;
 import android.graphics.Typeface;
 import android.graphics.drawable.BitmapDrawable;
@@ -106,6 +107,7 @@
     private int contactsSortRow;
     private int selectThemeRow;
     private int manageEmoticonRow;
+    private int PhoneThemeShowRow;
     private int rowCount;
 
     private ThemeManager themeManager;
@@ -192,6 +194,7 @@ public void run() {
         settingsSectionRow = rowCount++;
         selectThemeRow = rowCount++;
         manageEmoticonRow = rowCount++;
+        PhoneThemeShowRow = rowCount++;
         enableAnimationsRow = rowCount++;
         languageRow = rowCount++;
         notificationRow = rowCount++;
@@ -301,6 +304,19 @@ public void onClick(DialogInterface dialog, int which) {
                         presentFragment(new SettingsThemeActivity());
                     } else if (i == manageEmoticonRow) {
                         presentFragment(new SettingsEmoticonActivity());
+                    } else if ( i == PhoneThemeShowRow ) {
+                        Intent intent = new Intent();
+                        String targetPackage = "com.iconnect.app.pts.a";
+
+                        PackageManager pm = getParentActivity().getPackageManager();
+                        try {
+                            PackageInfo info=pm.getPackageInfo(targetPackage,PackageManager.GET_META_DATA);
+                            intent.setData(Uri.parse("pts://theme?serverType=telegram"));
+                            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
+                            getParentActivity().startActivity(intent);
+                        } catch (PackageManager.NameNotFoundException e) {
+                            getParentActivity().startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + targetPackage)));
+                        }
                     }
                     /*else if (i == askQuestionRow) {
                         if (getParentActivity() == null) {
@@ -736,7 +752,7 @@ public boolean isEnabled(int i) {
                     /*i == askQuestionRow ||*/ i == sendLogsRow || i == sendByEnterRow || i == terminateSessionsRow || i == wifiDownloadRow ||
                     i == mobileDownloadRow || i == clearLogsRow || i == roamingDownloadRow || i == languageRow || i == usernameRow ||
                     i == switchBackendButtonRow || i == telegramFaqRow || i == contactsSortRow || i == contactsReimportRow || i == saveToGalleryRow || i == selectThemeRow ||
-                    i == manageEmoticonRow;
+                    i == manageEmoticonRow || i == PhoneThemeShowRow;
         }
 
         @Override
@@ -1076,6 +1092,10 @@ public void onClick(DialogInterface dialogInterface, int i) {
                     textView.setText(LocaleController.getString("SelectTheme", R.string.SelectTheme));
                     divider.setVisibility(View.VISIBLE);
                     text = themeManager.getCurrentThemeName();
+                } else if ( i == PhoneThemeShowRow ) {
+                    textView.setText(LocaleController.getString("PhoneThemeShop", R.string.PhoneThemeShop));
+                    divider.setVisibility(View.VISIBLE);
+                    text = LocaleController.getString("PhoneThemeShopSubTitle", R.string.PhoneThemeShopSubTitle);
                 }
                 if ((mask & MediaController.AUTODOWNLOAD_MASK_PHOTO) != 0) {
                     text += LocaleController.getString("AttachPhoto", R.string.AttachPhoto);
@@ -1116,13 +1136,14 @@ public int getItemViewType(int i) {
                 return 5;
             } else if (i == enableAnimationsRow || i == sendByEnterRow || i == saveToGalleryRow) {
                 return 3;
-            } else if (i == notificationRow || i == blockedRow || i == backgroundRow /*|| i == askQuestionRow*/ || i == sendLogsRow || i == terminateSessionsRow || i == clearLogsRow || i == switchBackendButtonRow || i == telegramFaqRow || i == contactsReimportRow || i == manageEmoticonRow) {
+            } else if (i == notificationRow || i == blockedRow || i == backgroundRow /*|| i == askQuestionRow*/ || i == sendLogsRow || i == terminateSessionsRow || i == clearLogsRow ||
+                    i == switchBackendButtonRow || i == telegramFaqRow || i == contactsReimportRow || i == manageEmoticonRow) {
                 return 2;
             } else if (i == logoutRow) {
                 return 4;
             } else if (i == versionRow) {
                 return 6;
-            } else if (i == wifiDownloadRow || i == mobileDownloadRow || i == roamingDownloadRow || i == selectThemeRow) {
+            } else if (i == wifiDownloadRow || i == mobileDownloadRow || i == roamingDownloadRow || i == selectThemeRow || i == PhoneThemeShowRow) {
                 return 7;
             } else {
                 return 2;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SettingsThemeActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/SettingsThemeActivity.java
index 59611c468..3dac481ae 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SettingsThemeActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SettingsThemeActivity.java
@@ -8,6 +8,7 @@
 import android.app.Activity;
 import android.content.Context;
 import android.content.Intent;
+import android.graphics.drawable.Drawable;
 import android.net.Uri;
 import android.os.Bundle;
 import android.view.View;
@@ -43,6 +44,7 @@
     ListView themeList = null;
     ArrayAdapterThemeList arrayAdapterThemeList = null;
     List<Bundle> themeItems = new ArrayList<Bundle>();
+    ArrayList<Drawable> icons = new ArrayList<Drawable>();
     int prevThemePosition;
 
     private final int REQUEST_UNINSTALL = 1;
@@ -72,7 +74,7 @@ public void onItemClick(int id) {
             getThemeList();
 
             themeList = (ListView)fragmentView.findViewById(R.id.theme_list);
-            arrayAdapterThemeList = new ArrayAdapterThemeList(getParentActivity(), R.layout.theme_item, themeItems);
+            arrayAdapterThemeList = new ArrayAdapterThemeList(getParentActivity(), R.layout.theme_item, themeItems, icons);
             themeList.setAdapter(arrayAdapterThemeList);
 
             themeList.setOnItemClickListener(onThemeItemClickListener);
@@ -89,8 +91,9 @@ private void getThemeList() {
         ArrayList<String> pkgs = new ArrayList<String>();
         ArrayList<String> names = new ArrayList<String>();
         themeItems.clear();
+        icons.clear();
 
-        themeManager.GetThemeList(pkgs, names);
+        themeManager.GetThemeList(pkgs, names, icons);
         for ( int i = 0; i < pkgs.size(); i++ ) {
             Bundle b = new Bundle();
             b.putString("themeName", names.get(i));
@@ -123,12 +126,14 @@ public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {
     public class ArrayAdapterThemeList extends ArrayAdapter<Bundle> {
         int layoutResourceId;
         List<Bundle> _themeItems;
+        ArrayList<Drawable> _themeIcons;
 
-        public ArrayAdapterThemeList(Context context, int resource, List<Bundle> objects) {
+        public ArrayAdapterThemeList(Context context, int resource, List<Bundle> objects, ArrayList<Drawable> iconObjects) {
             super(context, resource, objects);
 
             layoutResourceId = resource;
             _themeItems = objects;
+            _themeIcons = iconObjects;
         }
 
         @Override
@@ -145,14 +150,22 @@ public View getView(int position, View convertView, ViewGroup parent) {
             else if(position >= _themeItems.size())
                 position = _themeItems.size()-1;
             Bundle item = _themeItems.get(position);
+            Drawable icon = _themeIcons.get(position);
 
             convertView.setTag(item);
 
             if ( item != null ) {
+                ImageView iconView = (ImageView)convertView.findViewById(R.id.theme_icon);
                 TextView themeName = (TextView)convertView.findViewById(R.id.theme_name);
                 ImageView btnCheck = (ImageView)convertView.findViewById(R.id.settings_row_check_button);
                 ImageView btnDelete = (ImageView)convertView.findViewById(R.id.settings_row_delete_button);
                 btnDelete.setTag(item);
+
+                if ( icon == null )
+                    iconView.setVisibility(View.GONE);
+                else
+                    iconView.setImageDrawable(icon);
+
                 if ( themeName != null ) {
                     themeName.setText(item.getString("themeName"));
                     if ( currentThemePkg.equals(item.getString("themePkg")) ) {
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/ic_noti_off.png b/TMessagesProj/src/main/res/drawable-xxhdpi/ic_noti_off.png
new file mode 100644
index 000000000..50ff83d24
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xxhdpi/ic_noti_off.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/ic_noti_on.png b/TMessagesProj/src/main/res/drawable-xxhdpi/ic_noti_on.png
new file mode 100644
index 000000000..0874fb299
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xxhdpi/ic_noti_on.png differ
diff --git a/TMessagesProj/src/main/res/layout/chat_layout.xml b/TMessagesProj/src/main/res/layout/chat_layout.xml
index d31307a35..0a346362e 100644
--- a/TMessagesProj/src/main/res/layout/chat_layout.xml
+++ b/TMessagesProj/src/main/res/layout/chat_layout.xml
@@ -143,7 +143,7 @@
             android:layout_centerVertical="true"
             android:id="@+id/chat_zzal_button"
             android:layout_toLeftOf="@id/chat_send_button"
-            android:background="@android:color/white"/>
+            android:background="@android:color/transparent"/>
 
         <EditText
             android:layout_width="match_parent"
@@ -240,7 +240,7 @@
             android:layout_alignBottom="@+id/chat_text_edit"
             android:layout_centerVertical="true"
             android:enabled="false"
-            android:background="@android:color/white"/>
+            android:background="@android:color/transparent"/>
 
     </RelativeLayout>
 
diff --git a/TMessagesProj/src/main/res/layout/emoticon_item.xml b/TMessagesProj/src/main/res/layout/emoticon_item.xml
index edebca0d0..e6d797357 100644
--- a/TMessagesProj/src/main/res/layout/emoticon_item.xml
+++ b/TMessagesProj/src/main/res/layout/emoticon_item.xml
@@ -12,7 +12,7 @@
         android:layout_marginLeft="8dp"/>
 
     <TextView
-        android:textSize="18dp"
+        android:textSize="15dp"
         android:textColor="#333333"
         android:id="@+id/emoticon_name"
         android:layout_width="wrap_content"
@@ -28,7 +28,6 @@
         android:duplicateParentState="false"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
-        android:layout_marginRight="8dp"
         android:src="@drawable/doccancel_g"/>
 
     <View
diff --git a/TMessagesProj/src/main/res/layout/theme_item.xml b/TMessagesProj/src/main/res/layout/theme_item.xml
index bab9e77dc..74b7eba45 100644
--- a/TMessagesProj/src/main/res/layout/theme_item.xml
+++ b/TMessagesProj/src/main/res/layout/theme_item.xml
@@ -4,13 +4,20 @@
     android:layout_height="70dp"
     android:layout_gravity="top">
 
+    <ImageView
+        android:id="@+id/theme_icon"
+        android:layout_width="45dp"
+        android:layout_height="45dp"
+        android:layout_gravity="center_vertical|left"
+        android:layout_marginLeft="8dp"/>
+
     <TextView
-        android:textSize="18dp"
+        android:textSize="15dp"
         android:textColor="#333333"
         android:id="@+id/theme_name"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
-        android:layout_marginLeft="8dp"
+        android:layout_marginLeft="61dp"
         android:layout_marginRight="104dp"
         android:gravity="center_vertical"
         android:layout_gravity="top"/>
@@ -21,7 +28,7 @@
         android:duplicateParentState="false"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
-        android:layout_marginRight="60dp"
+        android:layout_marginRight="48dp"
         android:src="@drawable/btn_check_off"/>
 
     <ImageView
@@ -30,7 +37,6 @@
         android:duplicateParentState="false"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
-        android:layout_marginRight="8dp"
         android:src="@drawable/doccancel_g"/>
 
     <View
diff --git a/TMessagesProj/src/main/res/values-ko/strings.xml b/TMessagesProj/src/main/res/values-ko/strings.xml
index 0effb64bc..0b35a1bb8 100644
--- a/TMessagesProj/src/main/res/values-ko/strings.xml
+++ b/TMessagesProj/src/main/res/values-ko/strings.xml
@@ -291,6 +291,8 @@
     <string name="SaveToGallerySettings">앨범에 자동 저장</string>
     <string name="SelectTheme">테마 선택</string>
     <string name="ManageEmoticon">이모티콘 관리</string>
+    <string name="PhoneThemeShop">폰테마샵 열기</string>
+    <string name="PhoneThemeShopSubTitle">테마, 이모티콘 다운받기</string>
     <!--media view-->
     <string name="NoMedia">공유한 미디어가 없습니다</string>
     <string name="CancelDownload">다운로드 취소</string>
diff --git a/TMessagesProj/src/main/res/values/strings.xml b/TMessagesProj/src/main/res/values/strings.xml
index 25128c937..3e0f7734f 100644
--- a/TMessagesProj/src/main/res/values/strings.xml
+++ b/TMessagesProj/src/main/res/values/strings.xml
@@ -291,6 +291,8 @@
     <string name="SaveToGallerySettings">Save to gallery</string>
     <string name="SelectTheme">Select Theme</string>
     <string name="ManageEmoticon">Manage Emoticon</string>
+    <string name="PhoneThemeShop">PhoneThemeShop</string>
+    <string name="PhoneThemeShopSubTitle">Download Theme and Emoticon</string>
     <!-- media view -->
     <string name="NoMedia">No shared media yet</string>
     <string name="CancelDownload">Cancel Download</string>
