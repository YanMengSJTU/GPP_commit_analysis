diff --git a/build.gradle b/build.gradle
index 8e6986f2..0a99ce5b 100644
--- a/build.gradle
+++ b/build.gradle
@@ -1,27 +1,35 @@
-apply plugin: 'java'
+apply plugin: 'android-library'
 
-sourceCompatibility = 1.6
+dependencies {
+    compile fileTree(dir: 'libs', include: '*.jar')
+    compile project(':NoTils')
+}
 
-jar.baseName = 'activeandroid'
-archivesBaseName = 'activeandroid'
+android {
+    compileSdkVersion 15
+    buildToolsVersion "18.0.1"
 
-sourceSets {
-	main {
-		java {
-			srcDir 'src'
-		}
-	}
-}
+    sourceSets {
+        main {
+            manifest.srcFile 'AndroidManifest.xml'
+            java.srcDirs = ['src']
+            resources.srcDirs = ['src']
+            aidl.srcDirs = ['src']
+            renderscript.srcDirs = ['src']
+            res.srcDirs = ['res']
+            assets.srcDirs = ['assets']
+        }
 
-dependencies {
-	compile fileTree(dir: 'libs', include: '*.jar')
-}
+        // Move the tests to tests/java, tests/res, etc...
+        instrumentTest.setRoot('tests')
 
-task sourcesJar(type: Jar) {
-    classifier = 'sources'
-    from sourceSets.main.allSource
+        // Move the build types to build-types/<type>
+        // For instance, build-types/debug/java, build-types/debug/AndroidManifest.xml, ...
+        // This moves them out of them default location under src/<type>/... which would
+        // conflict with src/ being used by the main source set.
+        // Adding new build types or product flavors should be accompanied
+        // by a similar customization.
+        debug.setRoot('build-types/debug')
+        release.setRoot('build-types/release')
+    }
 }
-
-artifacts {
-    archives sourcesJar
-}
\ No newline at end of file
