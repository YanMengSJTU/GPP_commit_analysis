diff --git a/gradle-plugin/src/main/groovy/de/greenrobot/greendao/plugin/GreenDaoPlugin.groovy b/gradle-plugin/src/main/groovy/de/greenrobot/greendao/plugin/GreenDaoPlugin.groovy
index f775bcc2..0edbfc10 100644
--- a/gradle-plugin/src/main/groovy/de/greenrobot/greendao/plugin/GreenDaoPlugin.groovy
+++ b/gradle-plugin/src/main/groovy/de/greenrobot/greendao/plugin/GreenDaoPlugin.groovy
@@ -17,7 +17,9 @@ public class GreenDaoPlugin implements Plugin<Project> {
     }
 
     project.afterEvaluate {
-      project.compileDebug.dependsOn(generateDaoSources);
+      project.android.applicationVariants.all { variant ->
+          variant.javaCompile.dependsOn(generateDaoSources);
+      }
       project.android.sourceSets.main.java.srcDirs += generateDaoSources.genSrcDir;
     }
   }
