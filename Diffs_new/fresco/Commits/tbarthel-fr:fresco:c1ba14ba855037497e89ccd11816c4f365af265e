diff --git a/imagepipeline/build.gradle b/imagepipeline/build.gradle
index c5af74cdd..64ff7bb79 100644
--- a/imagepipeline/build.gradle
+++ b/imagepipeline/build.gradle
@@ -6,8 +6,11 @@ version = VERSION_NAME
 
 apply plugin: 'robolectric'
 apply plugin: 'de.undercouch.download'
+
+import com.android.build.gradle.LibraryPlugin
 import de.undercouch.gradle.tasks.download.Download
 import com.palominolabs.gradle.task.git.clone.GitCloneTask
+import org.apache.tools.ant.taskdefs.condition.Os
 
 dependencies {
     provided "com.google.code.findbugs:jsr305:${JSR_305_VERSION}"
@@ -126,20 +129,18 @@ task copyLibWebp(dependsOn: cloneWebp, type: Copy) {
 }
 
 def getNdkBuildCommand() {
-    // we allow to provide full path to ndk-build tool
-    if (hasProperty('ndk.command')) {
-        return property('ndk.command')
+    def ndkFolder = ((LibraryPlugin) project.plugins
+            .findPlugin('com.android.library')).getNdkFolder().absolutePath
+
+    if (!ndkFolder.endsWith(File.separator)) {
+        ndkFolder += File.separator
     }
-    // or just a path to the containing directiry
-    if (hasProperty('ndk.path')) {
-        def path = property('ndk.path')
-        if (!path.endsWith(File.separator)) {
-            path += File.separator
-        }
-        return path + 'ndk-build'
+
+    if (Os.isFamily(Os.FAMILY_WINDOWS)) {
+        return ndkFolder + 'ndk-build.cmd'
+    } else {
+        return ndkFolder + 'ndk-build'
     }
-    // if none of above is provided, we assume ndk-build is already in $PATH
-    return 'ndk-build'
 }
 
 def makeNdkTasks(String name) {
@@ -147,6 +148,7 @@ def makeNdkTasks(String name) {
         inputs.file("src/main/jni/$name")
         outputs.dir("$buildDir/$name")
         commandLine getNdkBuildCommand(),
+            "NDK_PROJECT_PATH=$buildDir/$name",
             'NDK_APPLICATION_MK=../Application.mk',
             'NDK_OUT=' + temporaryDir,
             "NDK_LIBS_OUT=$buildDir/$name",
@@ -156,6 +158,7 @@ def makeNdkTasks(String name) {
 
     task "ndk_clean_$name"(type: Exec) {
         commandLine getNdkBuildCommand(),
+            "NDK_PROJECT_PATH=$buildDir/$name",
             'NDK_APPLICATION_MK=../Application.mk',
             'NDK_OUT=' + temporaryDir,
             "NDK_LIBS_OUT=$buildDir/$name",
diff --git a/imagepipeline/src/main/jni/Application.mk b/imagepipeline/src/main/jni/Application.mk
index 04894e74d..10c297a32 100644
--- a/imagepipeline/src/main/jni/Application.mk
+++ b/imagepipeline/src/main/jni/Application.mk
@@ -5,7 +5,7 @@ APP_ABI := armeabi-v7a armeabi x86
 APP_PLATFORM := android-9
 
 APP_MK_DIR := $(dir $(lastword $(MAKEFILE_LIST)))
-NDK_MODULE_PATH := $(APP_MK_DIR):$(APP_MK_DIR)../../../build/nativemerge
+NDK_MODULE_PATH := $(APP_MK_DIR)../../../build/nativemerge
 
 APP_STL := gnustl_shared
 
