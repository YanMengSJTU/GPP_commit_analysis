diff --git a/imagepipeline/src/main/jni/bitmaps/Android.mk b/imagepipeline/src/main/jni/bitmaps/Android.mk
index c9b17d060..c9dbe2e5f 100644
--- a/imagepipeline/src/main/jni/bitmaps/Android.mk
+++ b/imagepipeline/src/main/jni/bitmaps/Android.mk
@@ -16,4 +16,25 @@ LOCAL_CFLAGS += -Wall -Wextra -Werror -std=c11
 LOCAL_CFLAGS += -fvisibility=hidden
 LOCAL_LDLIBS := -ljnigraphics
 
+
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
+
 include $(BUILD_SHARED_LIBRARY)
diff --git a/imagepipeline/src/main/jni/gifimage/Android.mk b/imagepipeline/src/main/jni/gifimage/Android.mk
index 33f905649..f6a6380e4 100644
--- a/imagepipeline/src/main/jni/gifimage/Android.mk
+++ b/imagepipeline/src/main/jni/gifimage/Android.mk
@@ -28,3 +28,24 @@ else
   include $(BUILD_SHARED_LIBRARY)
   $(call import-module, giflib)
 endif
+
+
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
diff --git a/imagepipeline/src/main/jni/imagepipeline/Android.mk b/imagepipeline/src/main/jni/imagepipeline/Android.mk
index 76686ff7d..467200fa3 100644
--- a/imagepipeline/src/main/jni/imagepipeline/Android.mk
+++ b/imagepipeline/src/main/jni/imagepipeline/Android.mk
@@ -50,5 +50,26 @@ else
 endif
 
 
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
+
+
 $(call import-module,libjpeg-turbo-1.3.x)
 $(call import-module,libwebp-0.4.2)
diff --git a/imagepipeline/src/main/jni/memchunk/Android.mk b/imagepipeline/src/main/jni/memchunk/Android.mk
index a8c60cca3..a3e836e0a 100644
--- a/imagepipeline/src/main/jni/memchunk/Android.mk
+++ b/imagepipeline/src/main/jni/memchunk/Android.mk
@@ -11,3 +11,24 @@ LOCAL_CFLAGS += -Wall -Wextra -Werror -std=c11
 LOCAL_CFLAGS += -fvisibility=hidden
 LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)
 include $(BUILD_SHARED_LIBRARY)
+
+
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
diff --git a/imagepipeline/src/main/jni/third-party/giflib/Android.mk b/imagepipeline/src/main/jni/third-party/giflib/Android.mk
index d7be3d702..6accf1668 100755
--- a/imagepipeline/src/main/jni/third-party/giflib/Android.mk
+++ b/imagepipeline/src/main/jni/third-party/giflib/Android.mk
@@ -8,3 +8,24 @@ LOCAL_SRC_FILES := \
 	gifalloc.c 
 LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)
 include $(BUILD_STATIC_LIBRARY)
+
+
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
diff --git a/imagepipeline/src/main/jni/third-party/libjpeg-turbo-1.3.x/Android.mk b/imagepipeline/src/main/jni/third-party/libjpeg-turbo-1.3.x/Android.mk
index 374a9f899..8fbe8e725 100644
--- a/imagepipeline/src/main/jni/third-party/libjpeg-turbo-1.3.x/Android.mk
+++ b/imagepipeline/src/main/jni/third-party/libjpeg-turbo-1.3.x/Android.mk
@@ -23,6 +23,28 @@ else
 JPEGTURBO_SRC_FILES += jsimd_none.c
 endif
 
+
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
+
+
 # fb_jpegturbo module
 include $(CLEAR_VARS)
 LOCAL_MODULE:= fb_jpegturbo
diff --git a/imagepipeline/src/main/jni/third-party/libpng-1.6.10/Android.mk b/imagepipeline/src/main/jni/third-party/libpng-1.6.10/Android.mk
index 75458c4fb..c3ffc4fce 100644
--- a/imagepipeline/src/main/jni/third-party/libpng-1.6.10/Android.mk
+++ b/imagepipeline/src/main/jni/third-party/libpng-1.6.10/Android.mk
@@ -18,6 +18,27 @@ LIBPNG_SRC_FILES:= \
 	pngwutil.c
 
 
+
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
+
 include $(CLEAR_VARS)
 LOCAL_MODULE:= libfb_png
 LOCAL_SRC_FILES:= $(LIBPNG_SRC_FILES)
diff --git a/imagepipeline/src/main/jni/third-party/libwebp-0.4.2/Android.mk b/imagepipeline/src/main/jni/third-party/libwebp-0.4.2/Android.mk
index a841325c0..003a583a7 100644
--- a/imagepipeline/src/main/jni/third-party/libwebp-0.4.2/Android.mk
+++ b/imagepipeline/src/main/jni/third-party/libwebp-0.4.2/Android.mk
@@ -103,6 +103,27 @@ LOCAL_STATIC_LIBRARIES := cpufeatures
 LOCAL_MODULE := webp
 LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/src
 
+
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
+
 include $(BUILD_SHARED_LIBRARY)
 
 $(call import-module,android/cpufeatures)
diff --git a/imagepipeline/src/main/jni/webpimage/Android.mk b/imagepipeline/src/main/jni/webpimage/Android.mk
index bf9303872..0d632285c 100644
--- a/imagepipeline/src/main/jni/webpimage/Android.mk
+++ b/imagepipeline/src/main/jni/webpimage/Android.mk
@@ -24,4 +24,25 @@ LOCAL_CFLAGS += $(BUCK_DEP_CFLAGS)
 LOCAL_LDFLAGS += $(BUCK_DEP_LDFLAGS)
 include $(BUILD_SHARED_LIBRARY)
 
+
+#LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections -fvisibility=hidden
+LOCAL_CFLAGS += -ffunction-sections -fdata-sections
+LOCAL_LDFLAGS += -Wl,--gc-sections
+
+ifeq ($(TARGET_ARCH),mips)
+  LOCAL_LDFLAGS += -Wl,--gc-sections
+else
+  LOCAL_LDFLAGS += -Wl,--gc-sections,--icf=safe
+endif
+
+
+ TARGET_mips_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -funswitch-loops -finline-limit=64
+
+ TARGET_mips_debug_CFLAGS := -O0 -g
+
+ TARGET_CFLAGS += -fstack-protector
+
+TARGET_x86_release_CFLAGS := -Os -g -DNDEBUG -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=64
+
 $(call import-module, libwebp-0.4.2)
