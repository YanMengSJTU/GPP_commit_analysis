diff --git a/imagepipeline/src/main/java/com/facebook/imagepipeline/decoder/ProgressiveJpegParser.java b/imagepipeline/src/main/java/com/facebook/imagepipeline/decoder/ProgressiveJpegParser.java
index 28fce092f..2cdc8238a 100644
--- a/imagepipeline/src/main/java/com/facebook/imagepipeline/decoder/ProgressiveJpegParser.java
+++ b/imagepipeline/src/main/java/com/facebook/imagepipeline/decoder/ProgressiveJpegParser.java
@@ -94,13 +94,16 @@
 
   public ProgressiveJpegParser(ByteArrayPool byteArrayPool) {
     mByteArrayPool = Preconditions.checkNotNull(byteArrayPool);
+    reset();
+  }
+
+  public void reset() {
     mBytesParsed = 0;
     mLastByteRead = 0;
     mNextFullScanNumber = 0;
     mBestScanEndOffset = 0;
     mBestScanNumber = 0;
     mParserState = READ_FIRST_JPEG_BYTE;
-
   }
 
   /**
diff --git a/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/DecodeProducer.java b/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/DecodeProducer.java
index 3fba9c68c..505393cc7 100644
--- a/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/DecodeProducer.java
+++ b/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/DecodeProducer.java
@@ -419,6 +419,10 @@ protected synchronized boolean updateDecodeJob(EncodedImage encodedImage, boolea
       boolean ret = super.updateDecodeJob(encodedImage, isLast);
       if (!isLast && EncodedImage.isValid(encodedImage)) {
         if (!mProgressiveJpegParser.parseMoreData(encodedImage)) {
+          if (!mProgressiveJpegParser.isJpeg() && mLastScheduledScanNumber == 0) {
+            mProgressiveJpegParser.reset();
+            return true;
+          }
           return false;
         }
         int scanNum = mProgressiveJpegParser.getBestScanNumber();
diff --git a/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/MediaVariationsIndexDatabase.java b/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/MediaVariationsIndexDatabase.java
index 5583a5693..b76dc3aa4 100644
--- a/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/MediaVariationsIndexDatabase.java
+++ b/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/MediaVariationsIndexDatabase.java
@@ -35,6 +35,7 @@
 import bolts.Task;
 
 public class MediaVariationsIndexDatabase implements MediaVariationsIndex {
+
   private static final String TAG = MediaVariationsIndexDatabase.class.getSimpleName();
 
   private static final String[] PROJECTION = {
@@ -146,7 +147,7 @@ public void run() {
             contentValues
                 .put(IndexEntry.COLUMN_NAME_RESOURCE_ID, CacheKeyUtil.getFirstResourceId(cacheKey));
 
-          db.replaceOrThrow(IndexEntry.TABLE_NAME, null, contentValues);
+            db.replaceOrThrow(IndexEntry.TABLE_NAME, null, contentValues);
 
             db.setTransactionSuccessful();
           } catch (Exception x) {
@@ -170,6 +171,7 @@ public void run() {
   }
 
   private static class LazyIndexDbOpenHelper {
+
     private final Context mContext;
     private @Nullable IndexDbOpenHelper mIndexDbOpenHelper;
 
@@ -187,6 +189,8 @@ public synchronized SQLiteDatabase getWritableDatabase() {
 
   private static class IndexDbOpenHelper extends SQLiteOpenHelper {
 
+    public static final int DATABASE_VERSION = 1;
+    public static final String DATABASE_NAME = "FrescoMediaVariationsIndex.db";
     private static final String TEXT_TYPE = " TEXT";
     private static final String INTEGER_TYPE = " INTEGER";
     private static final String SQL_CREATE_ENTRIES =
@@ -201,9 +205,6 @@ public synchronized SQLiteDatabase getWritableDatabase() {
         "CREATE INDEX index_media_id ON " + IndexEntry.TABLE_NAME + " (" +
             IndexEntry.COLUMN_NAME_MEDIA_ID + ")";
 
-    public static final int DATABASE_VERSION = 1;
-    public static final String DATABASE_NAME = "FrescoMediaVariationsIndex.db";
-
     public IndexDbOpenHelper(Context context) {
       super(context, DATABASE_NAME, null, DATABASE_VERSION);
     }
