diff --git a/compiler/src/test/java/dagger/internal/codegen/ComponentBuilderTest.java b/compiler/src/test/java/dagger/internal/codegen/ComponentBuilderTest.java
index f7a582d5f..ed564898d 100644
--- a/compiler/src/test/java/dagger/internal/codegen/ComponentBuilderTest.java
+++ b/compiler/src/test/java/dagger/internal/codegen/ComponentBuilderTest.java
@@ -433,6 +433,7 @@ public void testBuilderBindsInstanceNoCreateGenerated() {
                     "",
                     "@Component",
                     "interface SimpleComponent {",
+                    "  Object object();",
                     "  @Component.Builder",
                     "  interface Builder {",
                     "    @BindsInstance Builder object(Object object);",
@@ -445,19 +446,35 @@ public void testBuilderBindsInstanceNoCreateGenerated() {
                     "test.DaggerSimpleComponent",
                     "package test;",
                     "",
+                    "import dagger.internal.InstanceFactory;",
                     "import dagger.internal.Preconditions;",
                     "import javax.annotation.Generated;",
+                    "import javax.inject.Provider;",
                     "",
                     GENERATED_ANNOTATION,
                     "public final class DaggerSimpleComponent implements SimpleComponent {",
+                    "  private Provider<Object> objectProvider;",
+                    "",
                     "  private DaggerSimpleComponent(Builder builder) {",
                     "    assert builder != null;",
+                    "    initialize(builder);",
                     "  }",
                     "",
                     "  public static SimpleComponent.Builder builder() {",
                     "    return new Builder();",
                     "  }",
                     "",
+                    "  @SuppressWarnings(\"unchecked\")",
+                    "  private void initialize(final Builder builder) {",
+                    "",
+                    "    this.objectProvider = InstanceFactory.create(builder.object);",
+                    "  }",
+                    "",
+                    "  @Override",
+                    "  public Object object() {",
+                    "  return objectProvider.get();",
+                    "  }",
+                    "",
                     "  private static final class Builder implements SimpleComponent.Builder {",
                     "    private Object object;",
                     "",
