diff --git a/java/dagger/internal/codegen/KeyVNameFactory.java b/java/dagger/internal/codegen/KeyVNameFactory.java
index e22c7a14a..9849b0a69 100644
--- a/java/dagger/internal/codegen/KeyVNameFactory.java
+++ b/java/dagger/internal/codegen/KeyVNameFactory.java
@@ -84,7 +84,11 @@ public VName visitDeclared(DeclaredType declaredType, Key key) {
       // the *type*? Also, this seems to return null for all boxed primitive types if boxed
       // primitive is not mentioned in the compilation (i.e. if you @Provides int and then request
       // int from a binding, but never java.lang.Integer) - we have to synthesize those
-      VName rawType = kytheGraph.getNode(classSymbol).get().getVName();
+      VName rawType =
+          kytheGraph
+              .getNode(classSymbol)
+              .orElseThrow(() -> new TypeNotPresentException(classSymbol.toString(), null))
+              .getVName();
       if (classSymbol.getTypeParameters().isEmpty()) {
         return rawType;
       }
