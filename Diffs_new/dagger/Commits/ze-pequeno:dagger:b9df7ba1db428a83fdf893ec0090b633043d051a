diff --git a/java/dagger/internal/codegen/ComponentRequirementFields.java b/java/dagger/internal/codegen/ComponentRequirementFields.java
index a98f04b53..7c28dd58d 100644
--- a/java/dagger/internal/codegen/ComponentRequirementFields.java
+++ b/java/dagger/internal/codegen/ComponentRequirementFields.java
@@ -119,10 +119,10 @@ private ComponentRequirementField create(ComponentRequirement requirement) {
       ParameterSpec factoryParameter =
           ParameterSpec.get(graph.factoryMethodParameters().get(requirement));
       return new ComponentParameterField(requirement, componentImplementation, factoryParameter);
-    } else if (graph.componentRequirements().contains(requirement)) {
+    } else if (requirement.kind().equals(ComponentRequirement.Kind.MODULE)) {
       return new ComponentInstantiableField(requirement, componentImplementation);
     } else {
-      throw new AssertionError();
+      throw new AssertionError("cannot create field for " + requirement);
     }
   }
 
