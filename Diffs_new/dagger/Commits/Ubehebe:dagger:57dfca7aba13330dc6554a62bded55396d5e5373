diff --git a/javatests/dagger/android/BUILD b/javatests/dagger/android/BUILD
index 8fa3dc303..7a3e2d6cd 100644
--- a/javatests/dagger/android/BUILD
+++ b/javatests/dagger/android/BUILD
@@ -33,3 +33,18 @@ GenRobolectricTests(
         "@google_bazel_common//third_party/java/truth",
     ],
 )
+
+GenRobolectricTests(
+    name = "android_tests_with_aot",
+    srcs = glob(["*.java"]),
+    javacopts = DOCLINT_HTML_AND_SYNTAX,
+    manifest_values = {"minSdkVersion": "17"},
+    with_aot = True,
+    deps = [
+        "//:dagger_with_compiler",
+        "//java/dagger/android",
+        "@google_bazel_common//third_party/java/guava",
+        "@google_bazel_common//third_party/java/junit",
+        "@google_bazel_common//third_party/java/truth",
+    ],
+)
diff --git a/javatests/dagger/android/functional/BUILD b/javatests/dagger/android/functional/BUILD
index fe80b6d47..f975dede8 100644
--- a/javatests/dagger/android/functional/BUILD
+++ b/javatests/dagger/android/functional/BUILD
@@ -51,3 +51,17 @@ GenRobolectricTests(
         "@google_bazel_common//third_party/java/truth",
     ],
 )
+
+GenRobolectricTests(
+    name = "android_functional_tests_with_aot",
+    srcs = glob(["*Test.java"]),
+    javacopts = DOCLINT_HTML_AND_SYNTAX,
+    with_aot = True,
+    deps = [
+        ":code_under_test",
+        "@google_bazel_common//third_party/java/guava",
+        "@google_bazel_common//third_party/java/guava:testlib",
+        "@google_bazel_common//third_party/java/junit",
+        "@google_bazel_common//third_party/java/truth",
+    ],
+)
diff --git a/javatests/dagger/android/support/BUILD b/javatests/dagger/android/support/BUILD
index 9b87d849b..c51d94fbe 100644
--- a/javatests/dagger/android/support/BUILD
+++ b/javatests/dagger/android/support/BUILD
@@ -35,3 +35,20 @@ GenRobolectricTests(
         "@google_bazel_common//third_party/java/truth",
     ],
 )
+
+GenRobolectricTests(
+    name = "android-support-tests-with-aot",
+    srcs = glob(["*.java"]),
+    javacopts = DOCLINT_HTML_AND_SYNTAX,
+    with_aot = True,
+    deps = [
+        "//:dagger_with_compiler",
+        "//java/dagger/android",
+        "//java/dagger/android/support",
+        "@androidsdk//com.android.support:appcompat-v7-25.0.0",
+        "@androidsdk//com.android.support:support-fragment-25.0.0",
+        "@google_bazel_common//third_party/java/guava",
+        "@google_bazel_common//third_party/java/junit",
+        "@google_bazel_common//third_party/java/truth",
+    ],
+)
diff --git a/javatests/dagger/android/support/functional/BUILD b/javatests/dagger/android/support/functional/BUILD
index 8f899178f..0c1cb7db3 100644
--- a/javatests/dagger/android/support/functional/BUILD
+++ b/javatests/dagger/android/support/functional/BUILD
@@ -51,3 +51,18 @@ GenRobolectricTests(
         "@google_bazel_common//third_party/java/truth",
     ],
 )
+
+GenRobolectricTests(
+    name = "functional_tests_with_aot",
+    srcs = glob(["*Test.java"]),
+    with_aot = True,
+    deps = [
+        ":functional",
+        "//:android",
+        "//:android-support",
+        "//:dagger_with_compiler",
+        "@androidsdk//com.android.support:support-fragment-25.0.0",
+        "@google_bazel_common//third_party/java/junit",
+        "@google_bazel_common//third_party/java/truth",
+    ],
+)
diff --git a/javatests/dagger/functional/BUILD b/javatests/dagger/functional/BUILD
index bf6e066cb..306109bed 100644
--- a/javatests/dagger/functional/BUILD
+++ b/javatests/dagger/functional/BUILD
@@ -49,3 +49,30 @@ GenJavaTests(
         "@google_bazel_common//third_party/java/jsr330_inject",
     ],
 )
+
+GenJavaTests(
+    name = "functional_tests_with_aot",
+    srcs = glob(
+        ["**/*.java"],
+        exclude = [
+            "HjarTest.java",
+        ],
+    ),
+    javacopts = DOCLINT_HTML_AND_SYNTAX,
+    lib_javacopts = SOURCE_7_TARGET_7,
+    # NOTE: This should not depend on Guava or jsr305 to ensure that Dagger can be
+    # used without Guava and jsr305 deps.
+    test_only_deps = [
+        "@google_bazel_common//third_party/java/guava:testlib",
+        "@google_bazel_common//third_party/java/guava",
+        "@google_bazel_common//third_party/java/truth",
+        "@google_bazel_common//third_party/java/junit",
+    ],
+    with_aot = True,
+    deps = [
+        "//:dagger_with_compiler",
+        "@google_bazel_common//third_party/java/auto:factory",
+        "@google_bazel_common//third_party/java/auto:value",
+        "@google_bazel_common//third_party/java/jsr330_inject",
+    ],
+)
diff --git a/javatests/dagger/functional/guava/BUILD b/javatests/dagger/functional/guava/BUILD
index 66492eb74..3dacd5494 100644
--- a/javatests/dagger/functional/guava/BUILD
+++ b/javatests/dagger/functional/guava/BUILD
@@ -34,3 +34,19 @@ GenJavaTests(
         "@google_bazel_common//third_party/java/truth",
     ],
 )
+
+GenJavaTests(
+    name = "guava_tests_with_aot",
+    srcs = glob(["**/*.java"]),
+    javacopts = DOCLINT_HTML_AND_SYNTAX,
+    with_aot = True,
+    deps = [
+        "//:dagger_with_compiler",
+        "@google_bazel_common//third_party/java/auto:value",
+        "@google_bazel_common//third_party/java/guava",
+        "@google_bazel_common//third_party/java/jsr305_annotations",
+        "@google_bazel_common//third_party/java/jsr330_inject",
+        "@google_bazel_common//third_party/java/junit",
+        "@google_bazel_common//third_party/java/truth",
+    ],
+)
diff --git a/javatests/dagger/functional/jdk8/BUILD b/javatests/dagger/functional/jdk8/BUILD
index 6b76ba3a7..bcab113fe 100644
--- a/javatests/dagger/functional/jdk8/BUILD
+++ b/javatests/dagger/functional/jdk8/BUILD
@@ -35,3 +35,20 @@ GenJavaTests(
         "@google_bazel_common//third_party/java/jsr305_annotations",
     ],
 )
+
+GenJavaTests(
+    name = "jdk8_tests_with_aot",
+    srcs = glob(["**/*.java"]),
+    javacopts = DOCLINT_HTML_AND_SYNTAX,
+    test_only_deps = [
+        "@google_bazel_common//third_party/java/guava",
+        "@google_bazel_common//third_party/java/junit",
+        "@google_bazel_common//third_party/java/truth:truth8",
+    ],
+    with_aot = True,
+    deps = [
+        "//:dagger_with_compiler",
+        "@google_bazel_common//third_party/java/auto:value",
+        "@google_bazel_common//third_party/java/jsr305_annotations",
+    ],
+)
diff --git a/javatests/dagger/functional/producers/BUILD b/javatests/dagger/functional/producers/BUILD
index 2b3db633f..3be99c262 100644
--- a/javatests/dagger/functional/producers/BUILD
+++ b/javatests/dagger/functional/producers/BUILD
@@ -41,4 +41,21 @@ GenJavaTests(
     ],
 )
 
+GenJavaTests(
+    name = "producers-functional-tests-with-aot",
+    srcs = glob(["**/*.java"]),
+    javacopts = SOURCE_7_TARGET_7 + DOCLINT_HTML_AND_SYNTAX + DOCLINT_REFERENCES,
+    with_aot = True,
+    deps = [
+        "//:producers_with_compiler",
+        "@google_bazel_common//third_party/java/auto:value",
+        "@google_bazel_common//third_party/java/guava",
+        "@google_bazel_common//third_party/java/jsr305_annotations",
+        "@google_bazel_common//third_party/java/jsr330_inject",
+        "@google_bazel_common//third_party/java/junit",
+        "@google_bazel_common//third_party/java/mockito",
+        "@google_bazel_common//third_party/java/truth",
+    ],
+)
+
 test_suite(name = "AllTests")
diff --git a/javatests/dagger/functional/tck/BUILD b/javatests/dagger/functional/tck/BUILD
index 7526bf097..1d153b608 100644
--- a/javatests/dagger/functional/tck/BUILD
+++ b/javatests/dagger/functional/tck/BUILD
@@ -40,3 +40,21 @@ GenJavaTests(
         "@google_bazel_common//third_party/java/junit",
     ],
 )
+
+GenJavaTests(
+    name = "tck_tests_with_aot",
+    srcs = glob(["*.java"]),
+    javacopts = DOCLINT_HTML_AND_SYNTAX + DOCLINT_REFERENCES,
+    lib_javacopts = [
+        "-Adagger.privateMemberValidation=warning",
+        "-Adagger.staticMemberValidation=warning",
+        "-Adagger.ignorePrivateAndStaticInjectionForComponent=enabled",
+    ],
+    with_aot = True,
+    deps = [
+        "//:dagger_with_compiler",
+        "@google_bazel_common//third_party/java/jsr330_inject",
+        "@google_bazel_common//third_party/java/jsr330_inject:tck",
+        "@google_bazel_common//third_party/java/junit",
+    ],
+)
diff --git a/javatests/dagger/producers/BUILD b/javatests/dagger/producers/BUILD
index 58a8987c0..8056d2352 100644
--- a/javatests/dagger/producers/BUILD
+++ b/javatests/dagger/producers/BUILD
@@ -38,3 +38,18 @@ GenJavaTests(
         "@google_bazel_common//third_party/java/truth",
     ],
 )
+
+GenJavaTests(
+    name = "producers_tests_with_aot",
+    srcs = glob(["**/*.java"]),
+    javacopts = SOURCE_7_TARGET_7 + DOCLINT_REFERENCES + DOCLINT_HTML_AND_SYNTAX,
+    with_aot = True,
+    deps = [
+        "//java/dagger/producers",
+        "@google_bazel_common//third_party/java/guava",
+        "@google_bazel_common//third_party/java/guava:testlib",
+        "@google_bazel_common//third_party/java/junit",
+        "@google_bazel_common//third_party/java/mockito",
+        "@google_bazel_common//third_party/java/truth",
+    ],
+)
diff --git a/test_defs.bzl b/test_defs.bzl
index db13354e4..b78371747 100644
--- a/test_defs.bzl
+++ b/test_defs.bzl
@@ -18,7 +18,13 @@
 BUILD_VARIANTS = {
     "FastInit": ["-Adagger.fastInit=enabled"],
     "ExperimentalAndroidMode2": ["-Adagger.experimentalAndroidMode2=enabled"],
-    "ExperimentalAheadOfTimeSubcomponents": ["-Adagger.experimentalAheadOfTimeSubcomponents=enabled"],
+}
+
+# TODO(b/72748365): Revert cl/215561379 when all functional tests are passing for AOT.
+AOT_BUILD_VARIANTS = {
+    "ExperimentalAheadOfTimeSubcomponents": [
+        "-Adagger.experimentalAheadOfTimeSubcomponents=enabled",
+    ],
     "FastInitAndAheadOfTimeSubcomponents": [
         "-Adagger.fastInit=enabled",
         "-Adagger.experimentalAheadOfTimeSubcomponents=enabled",
@@ -36,13 +42,15 @@ def GenJavaTests(
         javacopts = None,
         lib_javacopts = None,
         test_javacopts = None,
-        functional = True):
+        functional = True,
+        with_aot = False):
     _GenTests(
         native.java_library,
         native.java_test,
         name,
         srcs,
         deps,
+        with_aot,
         test_only_deps,
         plugins,
         javacopts,
@@ -60,7 +68,8 @@ def GenRobolectricTests(
         javacopts = None,
         lib_javacopts = None,
         test_javacopts = None,
-        manifest_values = None):
+        manifest_values = None,
+        with_aot = False):
     # TODO(ronshapiro): enable these with these instructions:
     # https://docs.bazel.build/versions/master/be/android.html#android_local_test_examples
     # We probably want to import all of Robolectric's dependencies into bazel-common because there
@@ -73,6 +82,7 @@ def _GenTests(
         name,
         srcs,
         deps,
+        with_aot,
         test_only_deps = None,
         plugins = None,
         javacopts = None,
@@ -80,22 +90,24 @@ def _GenTests(
         test_javacopts = None,
         functional = True,
         test_kwargs = {}):
-    _gen_tests(
-        library_rule_type,
-        test_rule_type,
-        name,
-        srcs,
-        deps,
-        test_only_deps,
-        plugins,
-        javacopts,
-        lib_javacopts,
-        test_javacopts,
-        test_kwargs = test_kwargs,
-    )
+    if not with_aot:
+        _gen_tests(
+            library_rule_type,
+            test_rule_type,
+            name,
+            srcs,
+            deps,
+            test_only_deps,
+            plugins,
+            javacopts,
+            lib_javacopts,
+            test_javacopts,
+            test_kwargs = test_kwargs,
+        )
 
     if functional:
-        for (variant_name, extra_javacopts) in BUILD_VARIANTS.items():
+        build_variants = AOT_BUILD_VARIANTS if with_aot else BUILD_VARIANTS
+        for (variant_name, extra_javacopts) in build_variants.items():
             variant_javacopts = (javacopts or []) + extra_javacopts
             _gen_tests(
                 library_rule_type,
