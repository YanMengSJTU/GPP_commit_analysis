diff --git a/facebook-core/src/main/java/com/facebook/appevents/codeless/internal/ViewHierarchy.java b/facebook-core/src/main/java/com/facebook/appevents/codeless/internal/ViewHierarchy.java
index 32113a55d..b17d52e25 100644
--- a/facebook-core/src/main/java/com/facebook/appevents/codeless/internal/ViewHierarchy.java
+++ b/facebook-core/src/main/java/com/facebook/appevents/codeless/internal/ViewHierarchy.java
@@ -20,6 +20,12 @@
 
 package com.facebook.appevents.codeless.internal;
 
+import com.facebook.internal.Utility;
+
+import org.json.JSONArray;
+import org.json.JSONException;
+import org.json.JSONObject;
+
 import android.graphics.Bitmap;
 import android.graphics.Typeface;
 import android.graphics.drawable.BitmapDrawable;
@@ -45,12 +51,6 @@
 import android.widget.TextView;
 import android.widget.TimePicker;
 
-import com.facebook.internal.Utility;
-
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-
 import java.io.ByteArrayOutputStream;
 import java.lang.reflect.Field;
 import java.lang.reflect.InvocationTargetException;
@@ -178,11 +178,13 @@ public static JSONObject setAppearanceOfView(View view, JSONObject json, float d
                     if (view.getHeight() / displayDensity <= ICON_MAX_EDGE_LENGTH &&
                             view.getWidth() / displayDensity <= ICON_MAX_EDGE_LENGTH) {
                         Bitmap bitmap = ((BitmapDrawable) drawable).getBitmap();
-                        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
-                        bitmap.compress(Bitmap.CompressFormat.PNG, 100, byteArrayOutputStream);
-                        byte[] byteArray = byteArrayOutputStream.toByteArray();
-                        String encoded = Base64.encodeToString(byteArray, Base64.DEFAULT);
-                        json.put(ICON_BITMAP, encoded);
+                        if (bitmap != null) {
+                            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
+                            bitmap.compress(Bitmap.CompressFormat.PNG, 100, byteArrayOutputStream);
+                            byte[] byteArray = byteArrayOutputStream.toByteArray();
+                            String encoded = Base64.encodeToString(byteArray, Base64.DEFAULT);
+                            json.put(ICON_BITMAP, encoded);
+                        }
                     }
                 }
             }
diff --git a/facebook/build.gradle b/facebook/build.gradle
index 9c9fc8083..61cf913bb 100644
--- a/facebook/build.gradle
+++ b/facebook/build.gradle
@@ -9,14 +9,23 @@ project.ext.url = 'https://github.com/facebook/facebook-android-sdk'
 
 dependencies {
     // Facebook Dependencies
-    api project(':facebook-core')
-    api project(':facebook-common')
-    api project(':facebook-login')
-    api project(":facebook-share")
-    api project(":facebook-places")
-    api project(":facebook-applinks")
-    api project(":facebook-messenger")
-    api project(":facebook-marketing")
+    //    api project(':facebook-core')
+//    api project(':facebook-common')
+//    api project(':facebook-login')
+//    api project(":facebook-share")
+//    api project(":facebook-places")
+//    api project(":facebook-applinks")
+//    api project(":facebook-messenger")
+//    api project(":facebook-marketing")
+
+    implementation 'com.facebook.android:facebook-core:4.38.1'
+    implementation 'com.facebook.android:facebook-common:4.38.1'
+    implementation 'com.facebook.android:facebook-login:4.38.1'
+    implementation 'com.facebook.android:facebook-share:4.38.1'
+    implementation 'com.facebook.android:facebook-places:4.38.1'
+    implementation 'com.facebook.android:facebook-messenger:4.38.1'
+    implementation 'com.facebook.android:facebook-applinks:4.38.1'
+    implementation 'com.facebook.android:facebook-marketing:4.38.1'
 
     // Unit Tests
     testImplementation 'junit:junit:4.12'
diff --git a/samples/LoginSample/build.gradle b/samples/LoginSample/build.gradle
index e910d348b..7d86c42ae 100644
--- a/samples/LoginSample/build.gradle
+++ b/samples/LoginSample/build.gradle
@@ -41,7 +41,8 @@ android {
 dependencies {
     implementation fileTree(dir: 'libs', include: ['*.jar'])
     implementation project(':facebook-login')
-    implementation project(':accountkitsdk')
+    //    implementation project(':accountkitsdk')
+    implementation 'com.facebook.android:account-kit-sdk:4.+'
     implementation "com.android.support:appcompat-v7:${project.ext.supportLibraryVersion}"
     implementation 'com.google.android.gms:play-services-base:11.8.0'
 
