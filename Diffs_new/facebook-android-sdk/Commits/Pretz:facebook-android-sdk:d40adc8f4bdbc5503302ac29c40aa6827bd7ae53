diff --git a/examples/simple/src/com/facebook/android/Example.java b/examples/simple/src/com/facebook/android/Example.java
index 516bde3fb..bac6183d9 100644
--- a/examples/simple/src/com/facebook/android/Example.java
+++ b/examples/simple/src/com/facebook/android/Example.java
@@ -16,15 +16,8 @@
 
 package com.facebook.android;
 
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import com.facebook.android.BaseRequestListener;
-import com.facebook.android.BaseDialogListener;
-import com.facebook.android.SessionEvents.AuthListener;
-import com.facebook.android.SessionEvents.LogoutListener;
-
 import android.app.Activity;
+import android.app.Dialog;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
@@ -32,14 +25,20 @@
 import android.widget.Button;
 import android.widget.TextView;
 
+import org.json.JSONException;
+import org.json.JSONObject;
+
+import com.facebook.android.Facebook.DialogListener;
+import com.facebook.android.SessionEvents.AuthListener;
+import com.facebook.android.SessionEvents.LogoutListener;
+
 import java.io.IOException;
 import java.io.InputStream;
 import java.net.HttpURLConnection;
 import java.net.MalformedURLException;
 import java.net.URL;
 
-
-public class Example extends Activity {
+public class Example extends Activity implements LoginButton.LoginButtonListener {
     
     // Your Facebook Application ID must be set before running this example
     // See http://www.facebook.com/developers/createapp.php
@@ -47,6 +46,8 @@
     
     private static final String[] PERMISSIONS =
         new String[] {"publish_stream", "read_stream", "offline_access"};
+    private static final int LOGIN_DIALOG_ID = 42;
+    private static final int PUBLISH_DIALOG_ID = 43; 
     private LoginButton mLoginButton;
     private TextView mText;
     private Button mRequestButton;
@@ -81,7 +82,7 @@ public void onCreate(Bundle savedInstanceState) {
         SessionStore.restore(mFacebook, this);
         SessionEvents.addAuthListener(new SampleAuthListener());
         SessionEvents.addLogoutListener(new SampleLogoutListener());
-        mLoginButton.init(mFacebook, PERMISSIONS);
+        mLoginButton.init(mFacebook, this);
         
         mRequestButton.setOnClickListener(new OnClickListener() {
             public void onClick(View v) {
@@ -129,8 +130,7 @@ public void onClick(View v) {
         
         mPostButton.setOnClickListener(new OnClickListener() {
             public void onClick(View v) {
-                mFacebook.dialog(Example.this, "stream.publish", 
-                        new SampleDialogListener());          
+            	showDialog(PUBLISH_DIALOG_ID);
             }
         });
         mPostButton.setVisibility(mFacebook.isSessionValid() ?
@@ -165,6 +165,22 @@ public void onLogoutFinish() {
         }
     }
     
+    @Override
+    public Dialog onCreateDialog(int dialogId) {
+    	switch (dialogId) {
+    	case LOGIN_DIALOG_ID:
+        	return mFacebook.createAuthDialog(this, Example.APP_ID, PERMISSIONS, new LoginDialogListener());
+    	case PUBLISH_DIALOG_ID:
+    		return mFacebook.getDialog(this, "stream.publish", new Bundle(), new SampleDialogListener());
+   		default:
+   			return super.onCreateDialog(dialogId);
+    	}
+    }
+    
+    public void showLoginDialog() {
+    	showDialog(LOGIN_DIALOG_ID);
+    }
+    
     public class SampleRequestListener extends BaseRequestListener {
 
         public void onComplete(final String response) {
@@ -258,6 +274,7 @@ public void run() {
     public class SampleDialogListener extends BaseDialogListener {
 
         public void onComplete(Bundle values) {
+        	removeDialog(PUBLISH_DIALOG_ID);
             final String postId = values.getString("post_id");
             if (postId != null) {
                 Log.d("Facebook-Example", "Dialog Success! post_id=" + postId);
@@ -273,6 +290,43 @@ public void onClick(View v) {
                 Log.d("Facebook-Example", "No wall post made");
             }
         }
+        
+        public void onFacebookError(FacebookError e) {
+            super.onFacebookError(e);
+            removeDialog(PUBLISH_DIALOG_ID);   
+        }
+
+        public void onError(DialogError e) {
+        	super.onError(e);
+        	 removeDialog(PUBLISH_DIALOG_ID);     
+        }
+
+        public void onCancel() {
+        	super.onCancel();
+        	 removeDialog(PUBLISH_DIALOG_ID);
+        }
+    }
+    
+    private final class LoginDialogListener implements DialogListener {
+        public void onComplete(Bundle values) {
+        	removeDialog(LOGIN_DIALOG_ID);
+            SessionEvents.onLoginSuccess();
+        }
+
+        public void onFacebookError(FacebookError error) {
+        	removeDialog(LOGIN_DIALOG_ID);
+            SessionEvents.onLoginError(error.getMessage());
+        }
+        
+        public void onError(DialogError error) {
+        	removeDialog(LOGIN_DIALOG_ID);
+            SessionEvents.onLoginError(error.getMessage());
+        }
+
+        public void onCancel() {
+        	removeDialog(LOGIN_DIALOG_ID);
+            SessionEvents.onLoginError("Action Canceled");
+        }
     }
     
 }
\ No newline at end of file
diff --git a/examples/simple/src/com/facebook/android/LoginButton.java b/examples/simple/src/com/facebook/android/LoginButton.java
index dbfc52f43..c0c926cb4 100644
--- a/examples/simple/src/com/facebook/android/LoginButton.java
+++ b/examples/simple/src/com/facebook/android/LoginButton.java
@@ -16,25 +16,26 @@
 
 package com.facebook.android;
 
-import com.facebook.android.BaseRequestListener;
-import com.facebook.android.SessionEvents.AuthListener;
-import com.facebook.android.SessionEvents.LogoutListener;
-import com.facebook.android.Facebook.DialogListener;
-
 import android.content.Context;
 import android.graphics.Color;
-import android.os.Bundle;
 import android.os.Handler;
 import android.util.AttributeSet;
 import android.view.View;
 import android.widget.ImageButton;
 
+import com.facebook.android.SessionEvents.AuthListener;
+import com.facebook.android.SessionEvents.LogoutListener;
+
 public class LoginButton extends ImageButton {
     
     private Facebook mFb;
     private Handler mHandler;
     private SessionListener mSessionListener = new SessionListener();
-    private String[] mPermissions;
+    private LoginButtonListener mListener;
+    
+    public interface LoginButtonListener {
+    	public void showLoginDialog();
+    }
     
     public LoginButton(Context context) {
         super(context);
@@ -48,10 +49,10 @@ public LoginButton(Context context, AttributeSet attrs, int defStyle) {
         super(context, attrs, defStyle);
     }
     
-    public void init(final Facebook fb, final String[] permissions) {
+    public void init(final Facebook fb, LoginButtonListener listener) {
         mFb = fb;
-        mPermissions = permissions;
         mHandler = new Handler();
+        mListener = listener;
         
         setBackgroundColor(Color.TRANSPARENT);
         setAdjustViewBounds(true);
@@ -73,29 +74,10 @@ public void onClick(View arg0) {
                 AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(mFb);
                 asyncRunner.logout(getContext(), new LogoutRequestListener());
             } else {
-                mFb.authorize(getContext(), Example.APP_ID, mPermissions,
-                        new LoginDialogListener());
+            	mListener.showLoginDialog();
             }
         }
     }
-
-    private final class LoginDialogListener implements DialogListener {
-        public void onComplete(Bundle values) {
-            SessionEvents.onLoginSuccess();
-        }
-
-        public void onFacebookError(FacebookError error) {
-            SessionEvents.onLoginError(error.getMessage());
-        }
-        
-        public void onError(DialogError error) {
-            SessionEvents.onLoginError(error.getMessage());
-        }
-
-        public void onCancel() {
-            SessionEvents.onLoginError("Action Canceled");
-        }
-    }
     
     private class LogoutRequestListener extends BaseRequestListener {
         public void onComplete(String response) {
diff --git a/tests/default.properties b/tests/default.properties
index 1af14f6b5..6d3f02d2c 100644
--- a/tests/default.properties
+++ b/tests/default.properties
@@ -7,6 +7,6 @@
 # "build.properties", and override values to adapt the script to your
 # project structure.
 
-android.library.reference.1=../b5/facebook-android-sdk/facebook/
+android.library.reference.1=../facebook/
 # Project target.
 target=android-3
