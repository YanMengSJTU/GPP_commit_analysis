diff --git a/build.gradle b/build.gradle
index 31235da..a29140a 100644
--- a/build.gradle
+++ b/build.gradle
@@ -7,7 +7,7 @@ buildscript {
     }
 
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.3.3'
+        classpath 'com.android.tools.build:gradle:3.0.1'
     }
 }
 
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index cd0aa28..41263b0 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
-#Sat Apr 08 11:44:39 MDT 2017
-distributionBase=GRADLE_USER_HOME
-distributionPath=wrapper/dists
-zipStoreBase=GRADLE_USER_HOME
-zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-3.4.1-all.zip
+#Tue Dec 12 08:18:22 EST 2017
+distributionBase=GRADLE_USER_HOME
+distributionPath=wrapper/dists
+zipStoreBase=GRADLE_USER_HOME
+zipStorePath=wrapper/dists
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.1-all.zip
diff --git a/settings.gradle b/settings.gradle
index 8b363d8..1e13ce3 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -1 +1 @@
-include "core", "zxing", "zxing-sample", "zbar", "zbar-sample"
+include "core", "zxing", "zxing-sample"
\ No newline at end of file
diff --git a/zbar-sample/build.gradle b/zbar-sample/build.gradle
deleted file mode 100644
index c5e0ed3..0000000
--- a/zbar-sample/build.gradle
+++ /dev/null
@@ -1,15 +0,0 @@
-apply plugin: 'com.android.application'
-
-dependencies {
-    //compile project(":zbar")
-    compile libraries.barcodescanner_zbar
-    compile libraries.support_v4
-    compile libraries.appcompat_v7
-    compile libraries.design_support
-}
-
-android {
-    defaultConfig {
-        applicationId "${project.group}.zbar.sample"
-    }
-}
diff --git a/zbar-sample/src/main/AndroidManifest.xml b/zbar-sample/src/main/AndroidManifest.xml
deleted file mode 100644
index 1b5a9c0..0000000
--- a/zbar-sample/src/main/AndroidManifest.xml
+++ /dev/null
@@ -1,44 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="me.dm7.barcodescanner.zbar.sample">
-  <uses-permission android:name="android.permission.CAMERA" />
-
-  <application android:allowBackup="true"
-        android:label="@string/app_name"
-        android:icon="@drawable/ic_launcher">
-        <activity android:name=".MainActivity"
-                  android:theme="@style/AppTheme"
-                  android:label="@string/app_name">
-            <intent-filter>
-                <action android:name="android.intent.action.MAIN" />
-                <category android:name="android.intent.category.LAUNCHER" />
-            </intent-filter>
-        </activity>
-
-        <activity android:name=".FullScannerActivity"
-                  android:theme="@style/AppOverlayTheme"
-                  android:uiOptions="splitActionBarWhenNarrow"
-                  android:label="@string/scanner_activity">
-            <meta-data android:name="android.support.UI_OPTIONS"
-                       android:value="splitActionBarWhenNarrow" />
-        </activity>
-
-        <activity android:name=".FullScannerFragmentActivity"
-                  android:theme="@style/AppOverlayTheme"
-                  android:uiOptions="splitActionBarWhenNarrow"
-                  android:label="@string/scanner_fragment_activity">
-            <meta-data android:name="android.support.UI_OPTIONS"
-                       android:value="splitActionBarWhenNarrow" />
-        </activity>
-
-        <activity android:name=".SimpleScannerActivity"
-                android:theme="@style/AppOverlayTheme"
-                android:label="@string/simple_scanner_activity">
-        </activity>
-
-        <activity android:name=".SimpleScannerFragmentActivity"
-                android:theme="@style/AppOverlayTheme"
-                android:label="@string/simple_scanner_fragment_activity">
-        </activity>
-    </application>
-</manifest>
\ No newline at end of file
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/BaseScannerActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/BaseScannerActivity.java
deleted file mode 100644
index 0655793..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/BaseScannerActivity.java
+++ /dev/null
@@ -1,28 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.support.v7.app.ActionBar;
-import android.support.v7.app.AppCompatActivity;
-import android.support.v7.widget.Toolbar;
-import android.view.MenuItem;
-
-public class BaseScannerActivity extends AppCompatActivity {
-    public void setupToolbar() {
-        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
-        setSupportActionBar(toolbar);
-        final ActionBar ab = getSupportActionBar();
-        if(ab != null) {
-            ab.setDisplayHomeAsUpEnabled(true);
-        }
-    }
-
-    @Override
-    public boolean onOptionsItemSelected(MenuItem item) {
-        switch (item.getItemId()) {
-            // Respond to the action bar's Up/Home button
-            case android.R.id.home:
-                finish();
-                return true;
-        }
-        return super.onOptionsItemSelected(item);
-    }
-}
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java
deleted file mode 100644
index 7ad6cdf..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java
+++ /dev/null
@@ -1,87 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.app.AlertDialog;
-import android.app.Dialog;
-import android.content.DialogInterface;
-import android.hardware.Camera;
-import android.os.Bundle;
-import android.support.v4.app.DialogFragment;
-
-public class CameraSelectorDialogFragment extends DialogFragment {
-    public interface CameraSelectorDialogListener {
-        public void onCameraSelected(int cameraId);
-    }
-
-    private int mCameraId;
-    private CameraSelectorDialogListener mListener;
-
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        setRetainInstance(true);
-    }
-
-    public static CameraSelectorDialogFragment newInstance(CameraSelectorDialogListener listener, int cameraId) {
-        CameraSelectorDialogFragment fragment = new CameraSelectorDialogFragment();
-        fragment.mCameraId = cameraId;
-        fragment.mListener = listener;
-        return fragment;
-    }
-
-    @Override
-    public Dialog onCreateDialog(Bundle savedInstanceState) {
-        if(mListener == null) {
-            dismiss();
-            return null;
-        }
-
-        int numberOfCameras = Camera.getNumberOfCameras();
-        String[] cameraNames = new String[numberOfCameras];
-        int checkedIndex = 0;
-
-        for (int i = 0; i < numberOfCameras; i++) {
-            Camera.CameraInfo info = new Camera.CameraInfo();
-            Camera.getCameraInfo(i, info);
-            if(info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
-                cameraNames[i] = "Front Facing";
-            } else if(info.facing == Camera.CameraInfo.CAMERA_FACING_BACK) {
-                cameraNames[i] = "Rear Facing";
-            } else {
-                cameraNames[i] = "Camera ID: " + i;
-            }
-            if(i == mCameraId) {
-                checkedIndex = i;
-            }
-        }
-
-        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
-        // Set the dialog title
-        builder.setTitle(R.string.select_camera)
-                // Specify the list array, the items to be selected by default (null for none),
-                // and the listener through which to receive callbacks when items are selected
-                .setSingleChoiceItems(cameraNames, checkedIndex,
-                        new DialogInterface.OnClickListener() {
-                            @Override
-                            public void onClick(DialogInterface dialog, int which) {
-                                mCameraId = which;
-                            }
-                        })
-                        // Set the action buttons
-                .setPositiveButton(R.string.ok_button, new DialogInterface.OnClickListener() {
-                    @Override
-                    public void onClick(DialogInterface dialog, int id) {
-                        // User clicked OK, so save the mSelectedIndices results somewhere
-                        // or return them to the component that opened the dialog
-                        if (mListener != null) {
-                            mListener.onCameraSelected(mCameraId);
-                        }
-                    }
-                })
-                .setNegativeButton(R.string.cancel_button, new DialogInterface.OnClickListener() {
-                    @Override
-                    public void onClick(DialogInterface dialog, int id) {
-                    }
-                });
-
-        return builder.create();
-    }
-}
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java
deleted file mode 100644
index 49bd587..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java
+++ /dev/null
@@ -1,94 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.app.AlertDialog;
-import android.app.Dialog;
-import android.content.DialogInterface;
-import android.os.Bundle;
-import android.support.v4.app.DialogFragment;
-
-import java.util.ArrayList;
-
-import me.dm7.barcodescanner.zbar.BarcodeFormat;
-import me.dm7.barcodescanner.zbar.ZBarScannerView;
-
-public class FormatSelectorDialogFragment extends DialogFragment {
-    public interface FormatSelectorDialogListener {
-        public void onFormatsSaved(ArrayList<Integer> selectedIndices);
-    }
-
-    private ArrayList<Integer> mSelectedIndices;
-    private FormatSelectorDialogListener mListener;
-
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        setRetainInstance(true);
-    }
-
-    public static FormatSelectorDialogFragment newInstance(FormatSelectorDialogListener listener, ArrayList<Integer> selectedIndices) {
-        FormatSelectorDialogFragment fragment = new FormatSelectorDialogFragment();
-        if(selectedIndices == null) {
-            selectedIndices = new ArrayList<Integer>();
-        }
-        fragment.mSelectedIndices = new ArrayList<Integer>(selectedIndices);
-        fragment.mListener = listener;
-        return fragment;
-    }
-
-    @Override
-    public Dialog onCreateDialog(Bundle savedInstanceState) {
-        if(mSelectedIndices == null || mListener == null) {
-            dismiss();
-            return null;
-        }
-
-        String[] formats = new String[BarcodeFormat.ALL_FORMATS.size()];
-        boolean[] checkedIndices = new boolean[BarcodeFormat.ALL_FORMATS.size()];
-        int i = 0;
-        for(BarcodeFormat format : BarcodeFormat.ALL_FORMATS) {
-            formats[i] = format.getName();
-            if(mSelectedIndices.contains(i)) {
-                checkedIndices[i] = true;
-            } else {
-                checkedIndices[i] = false;
-            }
-            i++;
-        }
-
-        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
-        // Set the dialog title
-        builder.setTitle(R.string.choose_formats)
-                // Specify the list array, the items to be selected by default (null for none),
-                // and the listener through which to receive callbacks when items are selected
-                .setMultiChoiceItems(formats, checkedIndices,
-                        new DialogInterface.OnMultiChoiceClickListener() {
-                            @Override
-                            public void onClick(DialogInterface dialog, int which, boolean isChecked) {
-                                if (isChecked) {
-                                    // If the user checked the item, add it to the selected items
-                                    mSelectedIndices.add(which);
-                                } else if (mSelectedIndices.contains(which)) {
-                                    // Else, if the item is already in the array, remove it
-                                    mSelectedIndices.remove(mSelectedIndices.indexOf(which));
-                                }
-                            }
-                        })
-                        // Set the action buttons
-                .setPositiveButton(R.string.ok_button, new DialogInterface.OnClickListener() {
-                    @Override
-                    public void onClick(DialogInterface dialog, int id) {
-                        // User clicked OK, so save the mSelectedIndices results somewhere
-                        // or return them to the component that opened the dialog
-                        if (mListener != null) {
-                            mListener.onFormatsSaved(mSelectedIndices);
-                        }
-                    }
-                })
-                .setNegativeButton(R.string.cancel_button, new DialogInterface.OnClickListener() {
-                    @Override
-                    public void onClick(DialogInterface dialog, int id) {
-                    }
-                });
-
-        return builder.create();
-    }
-}
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerActivity.java
deleted file mode 100644
index a3db043..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerActivity.java
+++ /dev/null
@@ -1,216 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.media.Ringtone;
-import android.media.RingtoneManager;
-import android.net.Uri;
-import android.os.Bundle;
-import android.support.v4.app.DialogFragment;
-import android.support.v4.app.FragmentManager;
-import android.support.v4.view.MenuItemCompat;
-import android.support.v7.app.AppCompatActivity;
-import android.view.Menu;
-import android.view.MenuItem;
-import android.view.ViewGroup;
-
-import java.util.ArrayList;
-import java.util.List;
-
-import me.dm7.barcodescanner.zbar.BarcodeFormat;
-import me.dm7.barcodescanner.zbar.Result;
-import me.dm7.barcodescanner.zbar.ZBarScannerView;
-
-public class FullScannerActivity extends BaseScannerActivity implements MessageDialogFragment.MessageDialogListener,
-        ZBarScannerView.ResultHandler, FormatSelectorDialogFragment.FormatSelectorDialogListener,
-        CameraSelectorDialogFragment.CameraSelectorDialogListener {
-    private static final String FLASH_STATE = "FLASH_STATE";
-    private static final String AUTO_FOCUS_STATE = "AUTO_FOCUS_STATE";
-    private static final String SELECTED_FORMATS = "SELECTED_FORMATS";
-    private static final String CAMERA_ID = "CAMERA_ID";
-    private ZBarScannerView mScannerView;
-    private boolean mFlash;
-    private boolean mAutoFocus;
-    private ArrayList<Integer> mSelectedIndices;
-    private int mCameraId = -1;
-
-    @Override
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        if(state != null) {
-            mFlash = state.getBoolean(FLASH_STATE, false);
-            mAutoFocus = state.getBoolean(AUTO_FOCUS_STATE, true);
-            mSelectedIndices = state.getIntegerArrayList(SELECTED_FORMATS);
-            mCameraId = state.getInt(CAMERA_ID, -1);
-        } else {
-            mFlash = false;
-            mAutoFocus = true;
-            mSelectedIndices = null;
-            mCameraId = -1;
-        }
-
-        setContentView(R.layout.activity_full_scanner);
-        setupToolbar();
-        ViewGroup contentFrame = (ViewGroup) findViewById(R.id.content_frame);
-        mScannerView = new ZBarScannerView(this);
-        setupFormats();
-        contentFrame.addView(mScannerView);
-    }
-
-    @Override
-    public void onResume() {
-        super.onResume();
-        mScannerView.setResultHandler(this);
-        mScannerView.startCamera(mCameraId);
-        mScannerView.setFlash(mFlash);
-        mScannerView.setAutoFocus(mAutoFocus);
-    }
-
-    @Override
-    public void onSaveInstanceState(Bundle outState) {
-        super.onSaveInstanceState(outState);
-        outState.putBoolean(FLASH_STATE, mFlash);
-        outState.putBoolean(AUTO_FOCUS_STATE, mAutoFocus);
-        outState.putIntegerArrayList(SELECTED_FORMATS, mSelectedIndices);
-        outState.putInt(CAMERA_ID, mCameraId);
-    }
-
-    @Override
-    public boolean onCreateOptionsMenu(Menu menu) {
-        MenuItem menuItem;
-
-        if(mFlash) {
-            menuItem = menu.add(Menu.NONE, R.id.menu_flash, 0, R.string.flash_on);
-        } else {
-            menuItem = menu.add(Menu.NONE, R.id.menu_flash, 0, R.string.flash_off);
-        }
-        MenuItemCompat.setShowAsAction(menuItem, MenuItem.SHOW_AS_ACTION_NEVER);
-
-
-        if(mAutoFocus) {
-            menuItem = menu.add(Menu.NONE, R.id.menu_auto_focus, 0, R.string.auto_focus_on);
-        } else {
-            menuItem = menu.add(Menu.NONE, R.id.menu_auto_focus, 0, R.string.auto_focus_off);
-        }
-        MenuItemCompat.setShowAsAction(menuItem, MenuItem.SHOW_AS_ACTION_NEVER);
-
-        menuItem = menu.add(Menu.NONE, R.id.menu_formats, 0, R.string.formats);
-        MenuItemCompat.setShowAsAction(menuItem, MenuItem.SHOW_AS_ACTION_NEVER);
-
-        menuItem = menu.add(Menu.NONE, R.id.menu_camera_selector, 0, R.string.select_camera);
-        MenuItemCompat.setShowAsAction(menuItem, MenuItem.SHOW_AS_ACTION_NEVER);
-
-        return super.onCreateOptionsMenu(menu);
-    }
-
-    @Override
-    public boolean onOptionsItemSelected(MenuItem item) {
-        // Handle presses on the action bar items
-        switch (item.getItemId()) {
-            case R.id.menu_flash:
-                mFlash = !mFlash;
-                if(mFlash) {
-                    item.setTitle(R.string.flash_on);
-                } else {
-                    item.setTitle(R.string.flash_off);
-                }
-                mScannerView.setFlash(mFlash);
-                return true;
-            case R.id.menu_auto_focus:
-                mAutoFocus = !mAutoFocus;
-                if(mAutoFocus) {
-                    item.setTitle(R.string.auto_focus_on);
-                } else {
-                    item.setTitle(R.string.auto_focus_off);
-                }
-                mScannerView.setAutoFocus(mAutoFocus);
-                return true;
-            case R.id.menu_formats:
-                DialogFragment fragment = FormatSelectorDialogFragment.newInstance(this, mSelectedIndices);
-                fragment.show(getSupportFragmentManager(), "format_selector");
-                return true;
-            case R.id.menu_camera_selector:
-                mScannerView.stopCamera();
-                DialogFragment cFragment = CameraSelectorDialogFragment.newInstance(this, mCameraId);
-                cFragment.show(getSupportFragmentManager(), "camera_selector");
-                return true;
-            default:
-                return super.onOptionsItemSelected(item);
-        }
-    }
-
-    @Override
-    public void handleResult(Result rawResult) {
-        try {
-            Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
-            Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
-            r.play();
-        } catch (Exception e) {}
-        showMessageDialog("Contents = " + rawResult.getContents() + ", Format = " + rawResult.getBarcodeFormat().getName());
-    }
-
-    public void showMessageDialog(String message) {
-        DialogFragment fragment = MessageDialogFragment.newInstance("Scan Results", message, this);
-        fragment.show(getSupportFragmentManager(), "scan_results");
-    }
-
-    public void closeMessageDialog() {
-        closeDialog("scan_results");
-    }
-
-    public void closeFormatsDialog() {
-        closeDialog("format_selector");
-    }
-
-    public void closeDialog(String dialogName) {
-        FragmentManager fragmentManager = getSupportFragmentManager();
-        DialogFragment fragment = (DialogFragment) fragmentManager.findFragmentByTag(dialogName);
-        if(fragment != null) {
-            fragment.dismiss();
-        }
-    }
-
-    @Override
-    public void onDialogPositiveClick(DialogFragment dialog) {
-        // Resume the camera
-        mScannerView.resumeCameraPreview(this);
-    }
-
-    @Override
-    public void onFormatsSaved(ArrayList<Integer> selectedIndices) {
-        mSelectedIndices = selectedIndices;
-        setupFormats();
-    }
-
-    @Override
-    public void onCameraSelected(int cameraId) {
-        mCameraId = cameraId;
-        mScannerView.startCamera(mCameraId);
-        mScannerView.setFlash(mFlash);
-        mScannerView.setAutoFocus(mAutoFocus);
-    }
-
-
-    public void setupFormats() {
-        List<BarcodeFormat> formats = new ArrayList<BarcodeFormat>();
-        if(mSelectedIndices == null || mSelectedIndices.isEmpty()) {
-            mSelectedIndices = new ArrayList<Integer>();
-            for(int i = 0; i < BarcodeFormat.ALL_FORMATS.size(); i++) {
-                mSelectedIndices.add(i);
-            }
-        }
-
-        for(int index : mSelectedIndices) {
-            formats.add(BarcodeFormat.ALL_FORMATS.get(index));
-        }
-        if(mScannerView != null) {
-            mScannerView.setFormats(formats);
-        }
-    }
-
-    @Override
-    public void onPause() {
-        super.onPause();
-        mScannerView.stopCamera();
-        closeMessageDialog();
-        closeFormatsDialog();
-    }
-}
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerFragment.java
deleted file mode 100644
index f64f8f6..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerFragment.java
+++ /dev/null
@@ -1,218 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.media.Ringtone;
-import android.media.RingtoneManager;
-import android.net.Uri;
-import android.os.Bundle;
-import android.support.v4.app.DialogFragment;
-import android.support.v4.app.Fragment;
-import android.support.v4.app.FragmentManager;
-import android.support.v4.view.MenuItemCompat;
-import android.view.LayoutInflater;
-import android.view.Menu;
-import android.view.MenuInflater;
-import android.view.MenuItem;
-import android.view.View;
-import android.view.ViewGroup;
-
-import java.util.ArrayList;
-import java.util.List;
-
-import me.dm7.barcodescanner.zbar.BarcodeFormat;
-import me.dm7.barcodescanner.zbar.Result;
-import me.dm7.barcodescanner.zbar.ZBarScannerView;
-
-public class FullScannerFragment extends Fragment implements MessageDialogFragment.MessageDialogListener,
-        ZBarScannerView.ResultHandler, FormatSelectorDialogFragment.FormatSelectorDialogListener,
-        CameraSelectorDialogFragment.CameraSelectorDialogListener {
-    private static final String FLASH_STATE = "FLASH_STATE";
-    private static final String AUTO_FOCUS_STATE = "AUTO_FOCUS_STATE";
-    private static final String SELECTED_FORMATS = "SELECTED_FORMATS";
-    private static final String CAMERA_ID = "CAMERA_ID";
-    private ZBarScannerView mScannerView;
-    private boolean mFlash;
-    private boolean mAutoFocus;
-    private ArrayList<Integer> mSelectedIndices;
-    private int mCameraId = -1;
-
-    @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle state) {
-        mScannerView = new ZBarScannerView(getActivity());
-        if(state != null) {
-            mFlash = state.getBoolean(FLASH_STATE, false);
-            mAutoFocus = state.getBoolean(AUTO_FOCUS_STATE, true);
-            mSelectedIndices = state.getIntegerArrayList(SELECTED_FORMATS);
-            mCameraId = state.getInt(CAMERA_ID, -1);
-        } else {
-            mFlash = false;
-            mAutoFocus = true;
-            mSelectedIndices = null;
-            mCameraId = -1;
-        }
-        setupFormats();
-        return mScannerView;
-    }
-
-    @Override
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        setHasOptionsMenu(true);
-    }
-
-    public void onCreateOptionsMenu (Menu menu, MenuInflater inflater) {
-        super.onCreateOptionsMenu(menu, inflater);
-
-        MenuItem menuItem;
-
-        if(mFlash) {
-            menuItem = menu.add(Menu.NONE, R.id.menu_flash, 0, R.string.flash_on);
-        } else {
-            menuItem = menu.add(Menu.NONE, R.id.menu_flash, 0, R.string.flash_off);
-        }
-        MenuItemCompat.setShowAsAction(menuItem, MenuItem.SHOW_AS_ACTION_NEVER);
-
-
-        if(mAutoFocus) {
-            menuItem = menu.add(Menu.NONE, R.id.menu_auto_focus, 0, R.string.auto_focus_on);
-        } else {
-            menuItem = menu.add(Menu.NONE, R.id.menu_auto_focus, 0, R.string.auto_focus_off);
-        }
-        MenuItemCompat.setShowAsAction(menuItem, MenuItem.SHOW_AS_ACTION_NEVER);
-
-        menuItem = menu.add(Menu.NONE, R.id.menu_formats, 0, R.string.formats);
-        MenuItemCompat.setShowAsAction(menuItem, MenuItem.SHOW_AS_ACTION_NEVER);
-
-        menuItem = menu.add(Menu.NONE, R.id.menu_camera_selector, 0, R.string.select_camera);
-        MenuItemCompat.setShowAsAction(menuItem, MenuItem.SHOW_AS_ACTION_NEVER);
-    }
-
-    @Override
-    public boolean onOptionsItemSelected(MenuItem item) {
-        // Handle presses on the action bar items
-        switch (item.getItemId()) {
-            case R.id.menu_flash:
-                mFlash = !mFlash;
-                if(mFlash) {
-                    item.setTitle(R.string.flash_on);
-                } else {
-                    item.setTitle(R.string.flash_off);
-                }
-                mScannerView.setFlash(mFlash);
-                return true;
-            case R.id.menu_auto_focus:
-                mAutoFocus = !mAutoFocus;
-                if(mAutoFocus) {
-                    item.setTitle(R.string.auto_focus_on);
-                } else {
-                    item.setTitle(R.string.auto_focus_off);
-                }
-                mScannerView.setAutoFocus(mAutoFocus);
-                return true;
-            case R.id.menu_formats:
-                DialogFragment fragment = FormatSelectorDialogFragment.newInstance(this, mSelectedIndices);
-                fragment.show(getActivity().getSupportFragmentManager(), "format_selector");
-                return true;
-            case R.id.menu_camera_selector:
-                mScannerView.stopCamera();
-                DialogFragment cFragment = CameraSelectorDialogFragment.newInstance(this, mCameraId);
-                cFragment.show(getActivity().getSupportFragmentManager(), "camera_selector");
-                return true;
-            default:
-                return super.onOptionsItemSelected(item);
-        }
-    }
-
-    @Override
-    public void onResume() {
-        super.onResume();
-        mScannerView.setResultHandler(this);
-        mScannerView.startCamera(mCameraId);
-        mScannerView.setFlash(mFlash);
-        mScannerView.setAutoFocus(mAutoFocus);
-    }
-
-    @Override
-    public void onSaveInstanceState(Bundle outState) {
-        super.onSaveInstanceState(outState);
-        outState.putBoolean(FLASH_STATE, mFlash);
-        outState.putBoolean(AUTO_FOCUS_STATE, mAutoFocus);
-        outState.putIntegerArrayList(SELECTED_FORMATS, mSelectedIndices);
-        outState.putInt(CAMERA_ID, mCameraId);
-    }
-
-    @Override
-    public void handleResult(Result rawResult) {
-        try {
-            Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
-            Ringtone r = RingtoneManager.getRingtone(getActivity().getApplicationContext(), notification);
-            r.play();
-        } catch (Exception e) {}
-        showMessageDialog("Contents = " + rawResult.getContents() + ", Format = " + rawResult.getBarcodeFormat().getName());
-    }
-
-    public void showMessageDialog(String message) {
-        DialogFragment fragment = MessageDialogFragment.newInstance("Scan Results", message, this);
-        fragment.show(getActivity().getSupportFragmentManager(), "scan_results");
-    }
-
-    public void closeMessageDialog() {
-        closeDialog("scan_results");
-    }
-
-    public void closeFormatsDialog() {
-        closeDialog("format_selector");
-    }
-
-    public void closeDialog(String dialogName) {
-        FragmentManager fragmentManager = getActivity().getSupportFragmentManager();
-        DialogFragment fragment = (DialogFragment) fragmentManager.findFragmentByTag(dialogName);
-        if(fragment != null) {
-            fragment.dismiss();
-        }
-    }
-
-    @Override
-    public void onDialogPositiveClick(DialogFragment dialog) {
-        // Resume the camera
-        mScannerView.resumeCameraPreview(this);
-    }
-
-    @Override
-    public void onFormatsSaved(ArrayList<Integer> selectedIndices) {
-        mSelectedIndices = selectedIndices;
-        setupFormats();
-    }
-
-    @Override
-    public void onCameraSelected(int cameraId) {
-        mCameraId = cameraId;
-        mScannerView.startCamera(mCameraId);
-        mScannerView.setFlash(mFlash);
-        mScannerView.setAutoFocus(mAutoFocus);
-    }
-
-    public void setupFormats() {
-        List<BarcodeFormat> formats = new ArrayList<BarcodeFormat>();
-        if(mSelectedIndices == null || mSelectedIndices.isEmpty()) {
-            mSelectedIndices = new ArrayList<Integer>();
-            for(int i = 0; i < BarcodeFormat.ALL_FORMATS.size(); i++) {
-                mSelectedIndices.add(i);
-            }
-        }
-
-        for(int index : mSelectedIndices) {
-            formats.add(BarcodeFormat.ALL_FORMATS.get(index));
-        }
-        if(mScannerView != null) {
-            mScannerView.setFormats(formats);
-        }
-    }
-
-    @Override
-    public void onPause() {
-        super.onPause();
-        mScannerView.stopCamera();
-        closeMessageDialog();
-        closeFormatsDialog();
-    }
-}
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerFragmentActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerFragmentActivity.java
deleted file mode 100644
index 352d722..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FullScannerFragmentActivity.java
+++ /dev/null
@@ -1,12 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.os.Bundle;
-
-public class FullScannerFragmentActivity extends BaseScannerActivity {
-    @Override
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        setContentView(R.layout.activity_full_scanner_fragment);
-        setupToolbar();
-    }
-}
\ No newline at end of file
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java
deleted file mode 100644
index a8cb01a..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java
+++ /dev/null
@@ -1,73 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.Manifest;
-import android.content.Intent;
-import android.content.pm.PackageManager;
-import android.os.Bundle;
-import android.support.v4.app.ActivityCompat;
-import android.support.v4.content.ContextCompat;
-import android.support.v7.app.AppCompatActivity;
-import android.support.v7.widget.Toolbar;
-import android.view.View;
-import android.widget.Toast;
-
-public class MainActivity extends AppCompatActivity {
-    private static final int ZBAR_CAMERA_PERMISSION = 1;
-    private Class<?> mClss;
-
-    @Override
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        setContentView(R.layout.activity_main);
-        setupToolbar();
-    }
-
-    public void setupToolbar() {
-        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
-        setSupportActionBar(toolbar);
-    }
-
-    public void launchSimpleActivity(View v) {
-        launchActivity(SimpleScannerActivity.class);
-    }
-
-    public void launchSimpleFragmentActivity(View v) {
-        launchActivity(SimpleScannerFragmentActivity.class);
-    }
-
-    public void launchFullActivity(View v) {
-        launchActivity(FullScannerActivity.class);
-    }
-
-    public void launchFullFragmentActivity(View v) {
-        launchActivity(FullScannerFragmentActivity.class);
-    }
-
-    public void launchActivity(Class<?> clss) {
-        if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA)
-                != PackageManager.PERMISSION_GRANTED) {
-            mClss = clss;
-            ActivityCompat.requestPermissions(this,
-                    new String[]{Manifest.permission.CAMERA}, ZBAR_CAMERA_PERMISSION);
-        } else {
-            Intent intent = new Intent(this, clss);
-            startActivity(intent);
-        }
-    }
-
-    @Override
-    public void onRequestPermissionsResult(int requestCode,  String permissions[], int[] grantResults) {
-        switch (requestCode) {
-            case ZBAR_CAMERA_PERMISSION:
-                if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
-                    if(mClss != null) {
-                        Intent intent = new Intent(this, mClss);
-                        startActivity(intent);
-                    }
-                } else {
-                    Toast.makeText(this, "Please grant camera permission to use the QR Scanner", Toast.LENGTH_SHORT).show();
-                }
-                return;
-        }
-    }
-}
\ No newline at end of file
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java
deleted file mode 100644
index 114aeed..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java
+++ /dev/null
@@ -1,47 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.app.AlertDialog;
-import android.app.Dialog;
-import android.content.DialogInterface;
-import android.os.Bundle;
-import android.support.v4.app.DialogFragment;
-
-public class MessageDialogFragment extends DialogFragment {
-    public interface MessageDialogListener {
-        public void onDialogPositiveClick(DialogFragment dialog);
-    }
-
-    private String mTitle;
-    private String mMessage;
-    private MessageDialogListener mListener;
-
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        setRetainInstance(true);
-    }
-
-    public static MessageDialogFragment newInstance(String title, String message, MessageDialogListener listener) {
-        MessageDialogFragment fragment = new MessageDialogFragment();
-        fragment.mTitle = title;
-        fragment.mMessage = message;
-        fragment.mListener = listener;
-        return fragment;
-    }
-
-    @Override
-    public Dialog onCreateDialog(Bundle savedInstanceState) {
-        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
-        builder.setMessage(mMessage)
-                .setTitle(mTitle);
-
-        builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
-            public void onClick(DialogInterface dialog, int id) {
-                if(mListener != null) {
-                    mListener.onDialogPositiveClick(MessageDialogFragment.this);
-                }
-            }
-        });
-
-        return builder.create();
-    }
-}
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java
deleted file mode 100644
index fb40235..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java
+++ /dev/null
@@ -1,53 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.os.Bundle;
-import android.os.Handler;
-import android.view.ViewGroup;
-import android.widget.Toast;
-
-import me.dm7.barcodescanner.zbar.Result;
-import me.dm7.barcodescanner.zbar.ZBarScannerView;
-
-public class SimpleScannerActivity extends BaseScannerActivity implements ZBarScannerView.ResultHandler {
-    private ZBarScannerView mScannerView;
-
-    @Override
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        setContentView(R.layout.activity_simple_scanner);
-        setupToolbar();
-        ViewGroup contentFrame = (ViewGroup) findViewById(R.id.content_frame);
-        mScannerView = new ZBarScannerView(this);
-        contentFrame.addView(mScannerView);
-    }
-
-    @Override
-    public void onResume() {
-        super.onResume();
-        mScannerView.setResultHandler(this);
-        mScannerView.startCamera();
-    }
-
-    @Override
-    public void onPause() {
-        super.onPause();
-        mScannerView.stopCamera();
-    }
-
-    @Override
-    public void handleResult(Result rawResult) {
-        Toast.makeText(this, "Contents = " + rawResult.getContents() +
-                ", Format = " + rawResult.getBarcodeFormat().getName(), Toast.LENGTH_SHORT).show();
-        // Note:
-        // * Wait 2 seconds to resume the preview.
-        // * On older devices continuously stopping and resuming camera preview can result in freezing the app.
-        // * I don't know why this is the case but I don't have the time to figure out.
-        Handler handler = new Handler();
-        handler.postDelayed(new Runnable() {
-            @Override
-            public void run() {
-                mScannerView.resumeCameraPreview(SimpleScannerActivity.this);
-            }
-        }, 2000);
-    }
-}
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragment.java
deleted file mode 100644
index 82a10b8..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragment.java
+++ /dev/null
@@ -1,52 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.os.Bundle;
-import android.os.Handler;
-import android.support.v4.app.Fragment;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.Toast;
-
-import me.dm7.barcodescanner.zbar.Result;
-import me.dm7.barcodescanner.zbar.ZBarScannerView;
-
-public class SimpleScannerFragment extends Fragment implements ZBarScannerView.ResultHandler {
-    private ZBarScannerView mScannerView;
-
-    @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
-        mScannerView = new ZBarScannerView(getActivity());
-        return mScannerView;
-    }
-
-    @Override
-    public void onResume() {
-        super.onResume();
-        mScannerView.setResultHandler(this);
-        mScannerView.startCamera();
-    }
-
-    @Override
-    public void handleResult(Result rawResult) {
-        Toast.makeText(getActivity(), "Contents = " + rawResult.getContents() +
-                ", Format = " + rawResult.getBarcodeFormat().getName(), Toast.LENGTH_SHORT).show();
-        // Note:
-        // * Wait 2 seconds to resume the preview.
-        // * On older devices continuously stopping and resuming camera preview can result in freezing the app.
-        // * I don't know why this is the case but I don't have the time to figure out.
-        Handler handler = new Handler();
-        handler.postDelayed(new Runnable() {
-            @Override
-            public void run() {
-                mScannerView.resumeCameraPreview(SimpleScannerFragment.this);
-            }
-        }, 2000);
-    }
-
-    @Override
-    public void onPause() {
-        super.onPause();
-        mScannerView.stopCamera();
-    }
-}
diff --git a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java
deleted file mode 100644
index e737c64..0000000
--- a/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java
+++ /dev/null
@@ -1,12 +0,0 @@
-package me.dm7.barcodescanner.zbar.sample;
-
-import android.os.Bundle;
-
-public class SimpleScannerFragmentActivity extends BaseScannerActivity {
-    @Override
-    public void onCreate(Bundle state) {
-        super.onCreate(state);
-        setContentView(R.layout.activity_simple_scanner_fragment);
-        setupToolbar();
-    }
-}
\ No newline at end of file
diff --git a/zbar-sample/src/main/res/drawable-hdpi/ic_launcher.png b/zbar-sample/src/main/res/drawable-hdpi/ic_launcher.png
deleted file mode 100644
index 96a442e..0000000
Binary files a/zbar-sample/src/main/res/drawable-hdpi/ic_launcher.png and /dev/null differ
diff --git a/zbar-sample/src/main/res/drawable-mdpi/ic_launcher.png b/zbar-sample/src/main/res/drawable-mdpi/ic_launcher.png
deleted file mode 100644
index 359047d..0000000
Binary files a/zbar-sample/src/main/res/drawable-mdpi/ic_launcher.png and /dev/null differ
diff --git a/zbar-sample/src/main/res/drawable-xhdpi/ic_launcher.png b/zbar-sample/src/main/res/drawable-xhdpi/ic_launcher.png
deleted file mode 100644
index 71c6d76..0000000
Binary files a/zbar-sample/src/main/res/drawable-xhdpi/ic_launcher.png and /dev/null differ
diff --git a/zbar-sample/src/main/res/drawable-xxhdpi/ic_launcher.png b/zbar-sample/src/main/res/drawable-xxhdpi/ic_launcher.png
deleted file mode 100644
index 4df1894..0000000
Binary files a/zbar-sample/src/main/res/drawable-xxhdpi/ic_launcher.png and /dev/null differ
diff --git a/zbar-sample/src/main/res/layout/activity_full_scanner.xml b/zbar-sample/src/main/res/layout/activity_full_scanner.xml
deleted file mode 100644
index eb66dd7..0000000
--- a/zbar-sample/src/main/res/layout/activity_full_scanner.xml
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<FrameLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent">
-
-    <FrameLayout
-        android:id="@+id/content_frame"
-        android:layout_width="match_parent"
-        android:layout_height="match_parent" />
-
-    <android.support.v7.widget.Toolbar
-        android:id="@+id/toolbar"
-        android:layout_gravity="top"
-        android:minHeight="?attr/actionBarSize"
-        android:background="@color/actionbar_opacity"
-        app:theme="@style/TransparentToolbar"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"/>
-</FrameLayout>
\ No newline at end of file
diff --git a/zbar-sample/src/main/res/layout/activity_full_scanner_fragment.xml b/zbar-sample/src/main/res/layout/activity_full_scanner_fragment.xml
deleted file mode 100644
index 64f0559..0000000
--- a/zbar-sample/src/main/res/layout/activity_full_scanner_fragment.xml
+++ /dev/null
@@ -1,23 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<FrameLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent">
-
-    <fragment android:name="me.dm7.barcodescanner.zbar.sample.FullScannerFragment"
-              android:id="@+id/scanner_fragment"
-              android:layout_weight="1"
-              android:layout_width="match_parent"
-              android:layout_height="match_parent" />
-
-    <android.support.v7.widget.Toolbar
-        android:id="@+id/toolbar"
-        android:layout_gravity="top"
-        android:minHeight="?attr/actionBarSize"
-        android:background="@color/actionbar_opacity"
-        app:theme="@style/TransparentToolbar"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"/>
-</FrameLayout>
\ No newline at end of file
diff --git a/zbar-sample/src/main/res/layout/activity_main.xml b/zbar-sample/src/main/res/layout/activity_main.xml
deleted file mode 100644
index f23aea0..0000000
--- a/zbar-sample/src/main/res/layout/activity_main.xml
+++ /dev/null
@@ -1,42 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<LinearLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:orientation="vertical"
-    android:layout_width="fill_parent"
-    android:layout_height="fill_parent">
-    <android.support.design.widget.AppBarLayout
-        app:popupTheme="@style/ThemeOverlay.AppCompat.Light"
-        app:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content">
-        <android.support.v7.widget.Toolbar
-            android:id="@+id/toolbar"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"/>
-    </android.support.design.widget.AppBarLayout>
-
-    <LinearLayout
-        android:orientation="vertical"
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:gravity="center">
-        <Button android:layout_height="wrap_content"
-                android:layout_width="match_parent"
-                android:text="@string/simple_activity_sample"
-                android:onClick="launchSimpleActivity" />
-        <Button android:layout_height="wrap_content"
-                android:layout_width="match_parent"
-                android:text="@string/simple_fragment_sample"
-                android:onClick="launchSimpleFragmentActivity" />
-        <Button android:layout_height="wrap_content"
-                android:layout_width="match_parent"
-                android:text="@string/activity_sample"
-                android:onClick="launchFullActivity" />
-        <Button android:layout_height="wrap_content"
-                android:layout_width="match_parent"
-                android:text="@string/fragment_sample"
-                android:onClick="launchFullFragmentActivity" />
-    </LinearLayout>
-</LinearLayout>
\ No newline at end of file
diff --git a/zbar-sample/src/main/res/layout/activity_simple_scanner.xml b/zbar-sample/src/main/res/layout/activity_simple_scanner.xml
deleted file mode 100644
index eb66dd7..0000000
--- a/zbar-sample/src/main/res/layout/activity_simple_scanner.xml
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<FrameLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent">
-
-    <FrameLayout
-        android:id="@+id/content_frame"
-        android:layout_width="match_parent"
-        android:layout_height="match_parent" />
-
-    <android.support.v7.widget.Toolbar
-        android:id="@+id/toolbar"
-        android:layout_gravity="top"
-        android:minHeight="?attr/actionBarSize"
-        android:background="@color/actionbar_opacity"
-        app:theme="@style/TransparentToolbar"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"/>
-</FrameLayout>
\ No newline at end of file
diff --git a/zbar-sample/src/main/res/layout/activity_simple_scanner_fragment.xml b/zbar-sample/src/main/res/layout/activity_simple_scanner_fragment.xml
deleted file mode 100644
index 321c8f0..0000000
--- a/zbar-sample/src/main/res/layout/activity_simple_scanner_fragment.xml
+++ /dev/null
@@ -1,23 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<FrameLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent">
-
-    <fragment android:name="me.dm7.barcodescanner.zbar.sample.SimpleScannerFragment"
-              android:id="@+id/scanner_fragment"
-              android:layout_weight="1"
-              android:layout_width="match_parent"
-              android:layout_height="match_parent" />
-
-    <android.support.v7.widget.Toolbar
-        android:id="@+id/toolbar"
-        android:layout_gravity="top"
-        android:minHeight="?attr/actionBarSize"
-        android:background="@color/actionbar_opacity"
-        app:theme="@style/TransparentToolbar"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"/>
-</FrameLayout>
\ No newline at end of file
diff --git a/zbar-sample/src/main/res/values/colors.xml b/zbar-sample/src/main/res/values/colors.xml
deleted file mode 100644
index 1a64799..0000000
--- a/zbar-sample/src/main/res/values/colors.xml
+++ /dev/null
@@ -1,12 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<resources>
-    <color name="actionbar_opacity">#33000000</color>
-    <color name="primary">#3F51B5</color>
-    <color name="primary_dark">#303F9F</color>
-    <color name="primary_light">#C5CAE9</color>
-    <color name="accent">#E040FB</color>
-    <color name="primary_text">#212121</color>
-    <color name="secondary_text">#727272</color>
-    <color name="icons">#FFFFFF</color>
-    <color name="divider">#B6B6B6</color>
-</resources>
\ No newline at end of file
diff --git a/zbar-sample/src/main/res/values/ids.xml b/zbar-sample/src/main/res/values/ids.xml
deleted file mode 100644
index 1b582b6..0000000
--- a/zbar-sample/src/main/res/values/ids.xml
+++ /dev/null
@@ -1,7 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<resources>
-    <item type="id" name="menu_flash" />
-    <item type="id" name="menu_auto_focus" />
-    <item type="id" name="menu_formats" />
-    <item type="id" name="menu_camera_selector" />
-</resources>
\ No newline at end of file
diff --git a/zbar-sample/src/main/res/values/strings.xml b/zbar-sample/src/main/res/values/strings.xml
deleted file mode 100644
index 6099584..0000000
--- a/zbar-sample/src/main/res/values/strings.xml
+++ /dev/null
@@ -1,21 +0,0 @@
-<resources>
-    <string name="app_name">ZBar Scanner Sample</string>
-    <string name="scanner_activity">ZBar Scanner - Full Activity</string>
-    <string name="scanner_fragment_activity">ZBar Scanner - Full Fragment Activity</string>
-    <string name="simple_scanner_activity">ZBar Scanner - Simple Activity</string>
-    <string name="simple_scanner_fragment_activity">ZBar Scanner - Simple Fragment Activity</string>
-    <string name="simple_activity_sample">Simple Activity Sample</string>
-    <string name="simple_fragment_sample">Simple Fragment Sample</string>
-    <string name="activity_sample">Full Activity Sample</string>
-    <string name="fragment_sample">Full Fragment Sample</string>
-    <string name="toggle_flash">Flash</string>
-    <string name="flash_on">Flash [ON]</string>
-    <string name="flash_off">Flash [OFF]</string>
-    <string name="auto_focus_on">Auto Focus [ON]</string>
-    <string name="auto_focus_off">Auto Focus [OFF]</string>
-    <string name="formats">Formats</string>
-    <string name="choose_formats">Choose Formats</string>
-    <string name="select_camera">Select a Camera</string>
-    <string name="ok_button">OK</string>
-    <string name="cancel_button">Cancel</string>
-</resources>
diff --git a/zbar-sample/src/main/res/values/styles.xml b/zbar-sample/src/main/res/values/styles.xml
deleted file mode 100644
index abab8ed..0000000
--- a/zbar-sample/src/main/res/values/styles.xml
+++ /dev/null
@@ -1,36 +0,0 @@
-<resources>
-    <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
-        <item name="colorPrimary">@color/primary</item>
-        <!-- darker variant for the status bar and contextual app bars -->
-        <item name="colorPrimaryDark">@color/primary_dark</item>
-        <!--   theme UI controls like checkboxes and text fields e.g. FloatActionButton -->
-        <item name="colorAccent">@color/accent</item>
-        <!-- Title Text Color -->
-        <item name="android:textColorPrimary">@color/primary_text</item>
-        <!-- color of the menu overflow icon (three vertical dots) -->
-        <item name="android:textColorSecondary">@color/secondary_text</item>
-    </style>
-
-    <style name="AppOverlayTheme" parent="@style/Theme.AppCompat.Light">
-        <item name="windowNoTitle">true</item>
-        <item name="windowActionBar">false</item>
-        <item name="android:windowFullscreen">true</item>
-        <item name="android:windowContentOverlay">@null</item>
-
-        <item name="colorPrimary">@color/primary</item>
-        <!-- darker variant for the status bar and contextual app bars -->
-        <item name="colorPrimaryDark">@color/primary_dark</item>
-        <!--   theme UI controls like checkboxes and text fields e.g. FloatActionButton -->
-        <item name="colorAccent">@color/accent</item>
-        <!-- Title Text Color -->
-        <item name="android:textColorPrimary">@color/primary_text</item>
-        <!-- color of the menu overflow icon (three vertical dots) -->
-        <item name="android:textColorSecondary">@color/secondary_text</item>
-    </style>
-
-    <style name="TransparentToolbar" parent="@style/ThemeOverlay.AppCompat.Dark.ActionBar">
-        <item name="android:windowActionBarOverlay">true</item>
-        <!-- Support Library compability -->
-        <item name="windowActionBarOverlay">true</item>
-    </style>
-</resources>
diff --git a/zbar/build.gradle b/zbar/build.gradle
deleted file mode 100644
index ee1c61e..0000000
--- a/zbar/build.gradle
+++ /dev/null
@@ -1,15 +0,0 @@
-apply plugin: 'com.android.library'
-
-ext {
-    isLibrary = true
-    pomPackaging = "aar"
-    pomArtifactId = "zbar"
-    pomName = "ZBar Scanner View"
-    pomDescription = 'An android library project which contains the zbar barcode scanner view'
-}
-
-dependencies {
-    //compile project(":core")
-    compile libraries.barcodescanner_core
-    compile fileTree(dir: 'libs', include: '*.jar')
-}
diff --git a/zbar/libs/zbar.jar b/zbar/libs/zbar.jar
deleted file mode 100644
index 1c6d51e..0000000
Binary files a/zbar/libs/zbar.jar and /dev/null differ
diff --git a/zbar/src/main/AndroidManifest.xml b/zbar/src/main/AndroidManifest.xml
deleted file mode 100644
index 06cf595..0000000
--- a/zbar/src/main/AndroidManifest.xml
+++ /dev/null
@@ -1,5 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="me.dm7.barcodescanner.zbar">
-    <application></application>
-</manifest>
diff --git a/zbar/src/main/java/me/dm7/barcodescanner/zbar/BarcodeFormat.java b/zbar/src/main/java/me/dm7/barcodescanner/zbar/BarcodeFormat.java
deleted file mode 100644
index bba2798..0000000
--- a/zbar/src/main/java/me/dm7/barcodescanner/zbar/BarcodeFormat.java
+++ /dev/null
@@ -1,72 +0,0 @@
-package me.dm7.barcodescanner.zbar;
-
-import net.sourceforge.zbar.Symbol;
-
-import java.util.List;
-import java.util.ArrayList;
-
-public class BarcodeFormat {
-    private int mId;
-    private String mName;
-
-    public static final BarcodeFormat NONE = new BarcodeFormat(Symbol.NONE, "NONE");
-    public static final BarcodeFormat PARTIAL = new BarcodeFormat(Symbol.PARTIAL, "PARTIAL");
-    public static final BarcodeFormat EAN8 = new BarcodeFormat(Symbol.EAN8, "EAN8");
-    public static final BarcodeFormat UPCE = new BarcodeFormat(Symbol.UPCE, "UPCE");
-    public static final BarcodeFormat ISBN10 = new BarcodeFormat(Symbol.ISBN10, "ISBN10");
-    public static final BarcodeFormat UPCA = new BarcodeFormat(Symbol.UPCA, "UPCA");
-    public static final BarcodeFormat EAN13 = new BarcodeFormat(Symbol.EAN13, "EAN13");
-    public static final BarcodeFormat ISBN13 = new BarcodeFormat(Symbol.ISBN13, "ISBN13");
-    public static final BarcodeFormat I25 = new BarcodeFormat(Symbol.I25, "I25");
-    public static final BarcodeFormat DATABAR = new BarcodeFormat(Symbol.DATABAR, "DATABAR");
-    public static final BarcodeFormat DATABAR_EXP = new BarcodeFormat(Symbol.DATABAR_EXP, "DATABAR_EXP");
-    public static final BarcodeFormat CODABAR = new BarcodeFormat(Symbol.CODABAR, "CODABAR");
-    public static final BarcodeFormat CODE39 = new BarcodeFormat(Symbol.CODE39, "CODE39");
-    public static final BarcodeFormat PDF417 = new BarcodeFormat(Symbol.PDF417, "PDF417");
-    public static final BarcodeFormat QRCODE = new BarcodeFormat(Symbol.QRCODE, "QRCODE");
-    public static final BarcodeFormat CODE93 = new BarcodeFormat(Symbol.CODE93, "CODE93");
-    public static final BarcodeFormat CODE128 = new BarcodeFormat(Symbol.CODE128, "CODE128");
-
-    public static final List<BarcodeFormat> ALL_FORMATS = new ArrayList<BarcodeFormat>();
-
-    static {
-        ALL_FORMATS.add(BarcodeFormat.PARTIAL);
-        ALL_FORMATS.add(BarcodeFormat.EAN8);
-        ALL_FORMATS.add(BarcodeFormat.UPCE);
-        ALL_FORMATS.add(BarcodeFormat.ISBN10);
-        ALL_FORMATS.add(BarcodeFormat.UPCA);
-        ALL_FORMATS.add(BarcodeFormat.EAN13);
-        ALL_FORMATS.add(BarcodeFormat.ISBN13);
-        ALL_FORMATS.add(BarcodeFormat.I25);
-        ALL_FORMATS.add(BarcodeFormat.DATABAR);
-        ALL_FORMATS.add(BarcodeFormat.DATABAR_EXP);
-        ALL_FORMATS.add(BarcodeFormat.CODABAR);
-        ALL_FORMATS.add(BarcodeFormat.CODE39);
-        ALL_FORMATS.add(BarcodeFormat.PDF417);
-        ALL_FORMATS.add(BarcodeFormat.QRCODE);
-        ALL_FORMATS.add(BarcodeFormat.CODE93);
-        ALL_FORMATS.add(BarcodeFormat.CODE128);
-    }
-
-    public BarcodeFormat(int id, String name) {
-        mId = id;
-        mName = name;
-    }
-
-    public int getId() {
-        return mId;
-    }
-
-    public String getName() {
-        return mName;
-    }
-
-    public static BarcodeFormat getFormatById(int id) {
-        for(BarcodeFormat format : ALL_FORMATS) {
-            if(format.getId() == id) {
-                return format;
-            }
-        }
-        return BarcodeFormat.NONE;
-    }
-}
\ No newline at end of file
diff --git a/zbar/src/main/java/me/dm7/barcodescanner/zbar/Result.java b/zbar/src/main/java/me/dm7/barcodescanner/zbar/Result.java
deleted file mode 100644
index 6e5fda7..0000000
--- a/zbar/src/main/java/me/dm7/barcodescanner/zbar/Result.java
+++ /dev/null
@@ -1,22 +0,0 @@
-package me.dm7.barcodescanner.zbar;
-
-public class Result {
-    private String mContents;
-    private BarcodeFormat mBarcodeFormat;
-
-    public void setContents(String contents) {
-        mContents = contents;
-    }
-
-    public void setBarcodeFormat(BarcodeFormat format) {
-        mBarcodeFormat = format;
-    }
-
-    public BarcodeFormat getBarcodeFormat() {
-        return mBarcodeFormat;
-    }
-
-    public String getContents() {
-        return mContents;
-    }
-}
\ No newline at end of file
diff --git a/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java b/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
deleted file mode 100644
index 439bac6..0000000
--- a/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
+++ /dev/null
@@ -1,157 +0,0 @@
-package me.dm7.barcodescanner.zbar;
-
-import android.content.Context;
-import android.content.res.Configuration;
-import android.graphics.Rect;
-import android.hardware.Camera;
-import android.os.Handler;
-import android.os.Looper;
-import android.text.TextUtils;
-import android.util.AttributeSet;
-import android.util.Log;
-
-import net.sourceforge.zbar.Config;
-import net.sourceforge.zbar.Image;
-import net.sourceforge.zbar.ImageScanner;
-import net.sourceforge.zbar.Symbol;
-import net.sourceforge.zbar.SymbolSet;
-
-import java.nio.charset.StandardCharsets;
-import java.util.Collection;
-import java.util.List;
-
-import me.dm7.barcodescanner.core.BarcodeScannerView;
-import me.dm7.barcodescanner.core.DisplayUtils;
-
-public class ZBarScannerView extends BarcodeScannerView {
-    private static final String TAG = "ZBarScannerView";
-
-    public interface ResultHandler {
-        public void handleResult(Result rawResult);
-    }
-
-    static {
-        System.loadLibrary("iconv");
-    }
-
-    private ImageScanner mScanner;
-    private List<BarcodeFormat> mFormats;
-    private ResultHandler mResultHandler;
-
-    public ZBarScannerView(Context context) {
-        super(context);
-        setupScanner();
-    }
-
-    public ZBarScannerView(Context context, AttributeSet attributeSet) {
-        super(context, attributeSet);
-        setupScanner();
-    }
-
-    public void setFormats(List<BarcodeFormat> formats) {
-        mFormats = formats;
-        setupScanner();
-    }
-
-    public void setResultHandler(ResultHandler resultHandler) {
-        mResultHandler = resultHandler;
-    }
-
-    public Collection<BarcodeFormat> getFormats() {
-        if(mFormats == null) {
-            return BarcodeFormat.ALL_FORMATS;
-        }
-        return mFormats;
-    }
-
-    public void setupScanner() {
-        mScanner = new ImageScanner();
-        mScanner.setConfig(0, Config.X_DENSITY, 3);
-        mScanner.setConfig(0, Config.Y_DENSITY, 3);
-
-        mScanner.setConfig(Symbol.NONE, Config.ENABLE, 0);
-        for(BarcodeFormat format : getFormats()) {
-            mScanner.setConfig(format.getId(), Config.ENABLE, 1);
-        }
-    }
-
-    @Override
-    public void onPreviewFrame(byte[] data, Camera camera) {
-        if(mResultHandler == null) {
-            return;
-        }
-
-        try {
-            Camera.Parameters parameters = camera.getParameters();
-            Camera.Size size = parameters.getPreviewSize();
-            int width = size.width;
-            int height = size.height;
-
-            if (DisplayUtils.getScreenOrientation(getContext()) == Configuration.ORIENTATION_PORTRAIT) {
-                int rotationCount = getRotationCount();
-                if (rotationCount == 1 || rotationCount == 3) {
-                    int tmp = width;
-                    width = height;
-                    height = tmp;
-                }
-                data = getRotatedData(data, camera);
-            }
-
-            Rect rect = getFramingRectInPreview(width, height);
-            Image barcode = new Image(width, height, "Y800");
-            barcode.setData(data);
-            barcode.setCrop(rect.left, rect.top, rect.width(), rect.height());
-
-            int result = mScanner.scanImage(barcode);
-
-            if (result != 0) {
-                SymbolSet syms = mScanner.getResults();
-                final Result rawResult = new Result();
-                for (Symbol sym : syms) {
-                    // In order to retreive QR codes containing null bytes we need to
-                    // use getDataBytes() rather than getData() which uses C strings.
-                    // Weirdly ZBar transforms all data to UTF-8, even the data returned
-                    // by getDataBytes() so we have to decode it as UTF-8.
-                    String symData;
-                    if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.KITKAT) {
-                        symData = new String(sym.getDataBytes(), StandardCharsets.UTF_8);
-                    } else {
-                        symData = sym.getData();
-                    }
-                    if (!TextUtils.isEmpty(symData)) {
-                        rawResult.setContents(symData);
-                        rawResult.setBarcodeFormat(BarcodeFormat.getFormatById(sym.getType()));
-                        break;
-                    }
-                }
-
-                Handler handler = new Handler(Looper.getMainLooper());
-                handler.post(new Runnable() {
-                    @Override
-                    public void run() {
-                        // Stopping the preview can take a little long.
-                        // So we want to set result handler to null to discard subsequent calls to
-                        // onPreviewFrame.
-                        ResultHandler tmpResultHandler = mResultHandler;
-                        mResultHandler = null;
-                        
-                        stopCameraPreview();
-                        if (tmpResultHandler != null) {
-                            tmpResultHandler.handleResult(rawResult);
-                        }
-                    }
-                });
-            } else {
-                camera.setOneShotPreviewCallback(this);
-            }
-        } catch(RuntimeException e) {
-            // TODO: Terrible hack. It is possible that this method is invoked after camera is released.
-            Log.e(TAG, e.toString(), e);
-        }
-    }
-
-    public void resumeCameraPreview(ResultHandler resultHandler) {
-        mResultHandler = resultHandler;
-        super.resumeCameraPreview();
-    }
-}
diff --git a/zbar/src/main/jniLibs/arm64-v8a/libiconv.so b/zbar/src/main/jniLibs/arm64-v8a/libiconv.so
deleted file mode 100755
index 68d6e19..0000000
Binary files a/zbar/src/main/jniLibs/arm64-v8a/libiconv.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/arm64-v8a/libzbarjni.so b/zbar/src/main/jniLibs/arm64-v8a/libzbarjni.so
deleted file mode 100755
index a2c4bed..0000000
Binary files a/zbar/src/main/jniLibs/arm64-v8a/libzbarjni.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/armeabi-v7a/libiconv.so b/zbar/src/main/jniLibs/armeabi-v7a/libiconv.so
deleted file mode 100755
index 08c76d2..0000000
Binary files a/zbar/src/main/jniLibs/armeabi-v7a/libiconv.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/armeabi-v7a/libzbarjni.so b/zbar/src/main/jniLibs/armeabi-v7a/libzbarjni.so
deleted file mode 100755
index ca099e6..0000000
Binary files a/zbar/src/main/jniLibs/armeabi-v7a/libzbarjni.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/armeabi/libiconv.so b/zbar/src/main/jniLibs/armeabi/libiconv.so
deleted file mode 100755
index 709c9e5..0000000
Binary files a/zbar/src/main/jniLibs/armeabi/libiconv.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/armeabi/libzbarjni.so b/zbar/src/main/jniLibs/armeabi/libzbarjni.so
deleted file mode 100755
index 362922d..0000000
Binary files a/zbar/src/main/jniLibs/armeabi/libzbarjni.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/mips/libiconv.so b/zbar/src/main/jniLibs/mips/libiconv.so
deleted file mode 100755
index 095368a..0000000
Binary files a/zbar/src/main/jniLibs/mips/libiconv.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/mips/libzbarjni.so b/zbar/src/main/jniLibs/mips/libzbarjni.so
deleted file mode 100755
index 5d60d2b..0000000
Binary files a/zbar/src/main/jniLibs/mips/libzbarjni.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/mips64/libiconv.so b/zbar/src/main/jniLibs/mips64/libiconv.so
deleted file mode 100755
index 96aeff3..0000000
Binary files a/zbar/src/main/jniLibs/mips64/libiconv.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/mips64/libzbarjni.so b/zbar/src/main/jniLibs/mips64/libzbarjni.so
deleted file mode 100755
index 033d40f..0000000
Binary files a/zbar/src/main/jniLibs/mips64/libzbarjni.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/x86/libiconv.so b/zbar/src/main/jniLibs/x86/libiconv.so
deleted file mode 100755
index 42c5abd..0000000
Binary files a/zbar/src/main/jniLibs/x86/libiconv.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/x86/libzbarjni.so b/zbar/src/main/jniLibs/x86/libzbarjni.so
deleted file mode 100755
index 025395d..0000000
Binary files a/zbar/src/main/jniLibs/x86/libzbarjni.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/x86_64/libiconv.so b/zbar/src/main/jniLibs/x86_64/libiconv.so
deleted file mode 100755
index d551524..0000000
Binary files a/zbar/src/main/jniLibs/x86_64/libiconv.so and /dev/null differ
diff --git a/zbar/src/main/jniLibs/x86_64/libzbarjni.so b/zbar/src/main/jniLibs/x86_64/libzbarjni.so
deleted file mode 100755
index ca14ac2..0000000
Binary files a/zbar/src/main/jniLibs/x86_64/libzbarjni.so and /dev/null differ
