diff --git a/build.gradle b/build.gradle
index 31235da..df62499 100644
--- a/build.gradle
+++ b/build.gradle
@@ -4,22 +4,26 @@ buildscript {
     repositories {
         mavenCentral()
         jcenter()
+        google()
     }
 
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.3.3'
+        classpath 'com.android.tools.build:gradle:3.2.0'
+        classpath 'digital.wup:android-maven-publish:3.4.0'
     }
 }
 
 allprojects {
     group = 'me.dm7.barcodescanner'
-    version = '1.9.8'
+    version = '1.9.9-leafclick'
 
     repositories {
+        jcenter()
         mavenCentral()
         maven {
             url 'https://oss.sonatype.org/content/groups/public'
         }
+        google()
     }
 
     ext {
@@ -44,67 +48,8 @@ subprojects {
                 defaultConfig {
                     minSdkVersion versions.min_sdk
                     targetSdkVersion versions.target_sdk
-                    versionCode 198
-                    versionName "1.9.8"
-                }
-            }
-        }
-        if(project.isLibrary && rootProject.hasProperty('sonatypeUsername') && rootProject.hasProperty('sonatypePassword')) {
-            configure(project) {
-                apply plugin: 'maven'
-                apply plugin: 'signing'
-
-                signing {
-                    required { gradle.taskGraph.hasTask("uploadArchives") }
-                    sign configurations.archives
-                }
-
-                uploadArchives {
-                    repositories.mavenDeployer {
-                        beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }
-
-                        repository(url: sonatypeRepo) {
-                            authentication(userName: sonatypeUsername , password: sonatypePassword)
-                            releases(updatePolicy: 'always')
-                        }
-
-                        snapshotRepository(url: sonatypeSnapshotRepo) {
-                            authentication(userName: sonatypeUsername , password: sonatypePassword)
-                            snapshots(updatePolicy: 'always')
-                        }
-
-                        pom.project {
-                            name project.pomName
-                            version project.version
-                            groupId project.group
-                            packaging project.pomPackaging
-                            artifactId project.pomArtifactId
-                            description project.pomDescription
-                            url 'https://github.com/dm77/barcodescanner'
-
-                            scm {
-                                url 'scm:git@github.com:dm77/barcodescanner.git'
-                                connection 'scm:git@github.com:dm77/barcodescanner.git'
-                                developerConnection 'scm:git@github.com:dm77/barcodescanner.git'
-                            }
-
-                            licenses {
-                                license {
-                                    name 'The Apache Software License, Version 2.0'
-                                    url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
-                                    distribution 'repo'
-                                }
-                            }
-
-                            developers {
-                                developer {
-                                    id 'dm77'
-                                    name 'Dushyanth Maguluru'
-                                    email 'dushyanth.maguluru@gmail.com'
-                                }
-                            }
-                        }
-                    }
+                    versionCode 199
+                    versionName "1.9.9-leafclick"
                 }
             }
         }
@@ -112,5 +57,5 @@ subprojects {
 }
 
 task wrapper(type: Wrapper) {
-    gradleVersion = '3.4.1'
+    gradleVersion = '4.6'
 }
diff --git a/core/build.gradle b/core/build.gradle
index cc4dabe..f1c7fc1 100644
--- a/core/build.gradle
+++ b/core/build.gradle
@@ -1,4 +1,5 @@
 apply plugin: 'com.android.library'
+apply plugin: 'digital.wup.android-maven-publish'
 
 ext {
     isLibrary = true
@@ -9,5 +10,17 @@ ext {
 }
 
 dependencies {
-    compile libraries.support_v4
+    implementation libraries.support_v4
+}
+
+publishing {
+    publications {
+        mavenAar(MavenPublication) {
+            from components.android
+        }
+    }
+}
+
+android {
+    buildToolsVersion = '28.0.2'
 }
diff --git a/dependencies.gradle b/dependencies.gradle
index 075b1dd..7083aa5 100644
--- a/dependencies.gradle
+++ b/dependencies.gradle
@@ -1,11 +1,11 @@
 ext.versions = [
-        compile_sdk   : 25,
-        min_sdk       : 9,
-        target_sdk    : 25,
-        build_tools   : "25.0.2",
-        support_lib   : "25.3.1",
-        zxing         : "3.3.0",
-        barcodescanner: "1.9.8"
+        compile_sdk   : 28,
+        min_sdk       : 14,
+        target_sdk    : 28,
+        build_tools   : "28.0.2",
+        support_lib   : "28.0.0",
+        zxing         : "3.3.3",
+        barcodescanner: "1.9.9-leafclick"
 ]
 
 ext.libraries = [
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index cd0aa28..20ba5a1 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
-#Sat Apr 08 11:44:39 MDT 2017
+#Fri Sep 28 16:37:46 CEST 2018
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-3.4.1-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.6-all.zip
diff --git a/settings.gradle b/settings.gradle
index 8b363d8..8459ddb 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -1 +1,2 @@
 include "core", "zxing", "zxing-sample", "zbar", "zbar-sample"
+//include "core", "zxing", "zxing-sample", "zbar"
diff --git a/zbar-sample/build.gradle b/zbar-sample/build.gradle
index c5e0ed3..ab16fb9 100644
--- a/zbar-sample/build.gradle
+++ b/zbar-sample/build.gradle
@@ -1,15 +1,16 @@
 apply plugin: 'com.android.application'
 
 dependencies {
-    //compile project(":zbar")
-    compile libraries.barcodescanner_zbar
-    compile libraries.support_v4
-    compile libraries.appcompat_v7
-    compile libraries.design_support
+    implementation libraries.support_v4
+    implementation libraries.appcompat_v7
+    implementation libraries.design_support
+    implementation project(":core")
+    implementation project(":zbar")
 }
 
 android {
     defaultConfig {
         applicationId "${project.group}.zbar.sample"
     }
+    buildToolsVersion = '28.0.2'
 }
diff --git a/zbar/build.gradle b/zbar/build.gradle
index ee1c61e..db33726 100644
--- a/zbar/build.gradle
+++ b/zbar/build.gradle
@@ -1,4 +1,5 @@
 apply plugin: 'com.android.library'
+apply plugin: 'digital.wup.android-maven-publish'
 
 ext {
     isLibrary = true
@@ -9,7 +10,18 @@ ext {
 }
 
 dependencies {
-    //compile project(":core")
-    compile libraries.barcodescanner_core
-    compile fileTree(dir: 'libs', include: '*.jar')
+    implementation project(":core")
+    implementation fileTree(dir: 'libs', include: '*.jar')
+}
+
+publishing {
+    publications {
+        mavenAar(MavenPublication) {
+            from components.android
+        }
+    }
+}
+
+android {
+    buildToolsVersion = '28.0.2'
 }
diff --git a/zxing-sample/build.gradle b/zxing-sample/build.gradle
index fb6b9ff..5b3e756 100644
--- a/zxing-sample/build.gradle
+++ b/zxing-sample/build.gradle
@@ -1,15 +1,17 @@
 apply plugin: 'com.android.application'
 
 dependencies {
-    //compile project(":zxing")
-    compile libraries.barcodescanner_zxing
-    compile libraries.support_v4
-    compile libraries.appcompat_v7
-    compile libraries.design_support
+    implementation libraries.support_v4
+    implementation libraries.appcompat_v7
+    implementation libraries.design_support
+    implementation libraries.zxing_core
+    implementation project(":core")
+    implementation project(":zxing")
 }
 
 android {
     defaultConfig {
         applicationId "${project.group}.zxing.sample"
     }
+    buildToolsVersion = '28.0.2'
 }
diff --git a/zxing/build.gradle b/zxing/build.gradle
index 0496a8e..9f1b513 100644
--- a/zxing/build.gradle
+++ b/zxing/build.gradle
@@ -1,4 +1,5 @@
 apply plugin: 'com.android.library'
+apply plugin: 'digital.wup.android-maven-publish'
 
 ext {
     isLibrary = true
@@ -9,7 +10,18 @@ ext {
 }
 
 dependencies {
-    //compile project(":core")
-    compile libraries.barcodescanner_core
-    compile libraries.zxing_core
+    implementation libraries.zxing_core
+    implementation project(":core")
+}
+
+publishing {
+    publications {
+        mavenAar(MavenPublication) {
+            from components.android
+        }
+    }
+}
+
+android {
+    buildToolsVersion = '28.0.2'
 }
