diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java b/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java
index d9ef317..636f808 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java
+++ b/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java
@@ -9,13 +9,16 @@
 import android.support.v4.app.FragmentManager;
 import android.support.v4.view.MenuItemCompat;
 import android.support.v7.app.ActionBarActivity;
+import android.util.Log;
 import android.util.Patterns;
 import android.view.Menu;
 import android.view.MenuItem;
 
 import java.io.BufferedInputStream;
+import java.io.BufferedReader;
 import java.io.IOException;
 import java.io.InputStream;
+import java.io.InputStreamReader;
 import java.io.UnsupportedEncodingException;
 import java.net.HttpURLConnection;
 import java.net.URL;
@@ -166,19 +169,46 @@ public void handleResult(Result rawResult) {
 
     }
 
-    public InputStream checkURL(String arg) throws IOException {
-        InputStream result;
-        String query = URLEncoder.encode(arg, "utf-8");
-        String request = "https://sb-ssl.google.com/safebrowsing/api/lookup?client=InfoSec&key=AIzaSyCCn9EpFwEk0rnnrxgQue9H40iGI_z2rBw&appver=1.5.2&pver=3.1&url=" + query;
+    public String checkURL(String arg) throws IOException {
+        String result;
+        StringBuffer sb = new StringBuffer();
+        InputStream is = null;
 
-        URL url = new URL(request);
+        String baseURL="https://sb-ssl.google.com/safebrowsing/api/lookup";
 
-        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
+        String arguments = "";
+        arguments += URLEncoder.encode("client", "UTF-8") + "=" + URLEncoder.encode("InfoSec", "UTF-8") + "&";
+        arguments += URLEncoder.encode("key", "UTF-8") + "=" + URLEncoder.encode("AIzaSyCCn9EpFwEk0rnnrxgQue9H40iGI_z2rBw", "UTF-8") + "&";
+        arguments += URLEncoder.encode("appver", "UTF-8") + "=" + URLEncoder.encode("1.5.2", "UTF-8") + "&";
+        arguments += URLEncoder.encode("pver", "UTF-8") + "=" + URLEncoder.encode("3.1", "UTF-8") + "&";
+        arguments += URLEncoder.encode("url", "UTF-8") + "=" + URLEncoder.encode(arg, "UTF-8");
+
+        // Construct the url object representing cgi script
+        URL url = new URL(baseURL + "?" + arguments);
+
+        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
         try {
-            result = new BufferedInputStream(urlConnection.getInputStream());
+            is = new BufferedInputStream(connection.getInputStream());
+            BufferedReader br = new BufferedReader(new InputStreamReader(is));
+            String inputLine = "";
+            while ((inputLine = br.readLine()) != null) {
+                sb.append(inputLine);
+            }
+            result = sb.toString();
+        }
+        catch (Exception e) {
+            //Log.i(TAG, "Error reading InputStream");
+            result = null;
         }
-        finally{
-            urlConnection.disconnect();
+        finally {
+            if (is != null) {
+                try {
+                    is.close();
+                }
+                catch (IOException e) {
+                    //Log.i(TAG, "Error closing InputStream");
+                }
+            }
         }
         return result;
     }
