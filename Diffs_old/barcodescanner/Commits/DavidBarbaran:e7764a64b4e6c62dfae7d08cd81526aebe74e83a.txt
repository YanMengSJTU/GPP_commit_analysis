diff --git a/core/src/main/java/me/dm7/barcodescanner/core/CameraPreview.kt b/core/src/main/java/me/dm7/barcodescanner/core/CameraPreview.kt
index 59d6096..6df94e9 100644
--- a/core/src/main/java/me/dm7/barcodescanner/core/CameraPreview.kt
+++ b/core/src/main/java/me/dm7/barcodescanner/core/CameraPreview.kt
@@ -261,7 +261,7 @@ class CameraPreview : SurfaceView, SurfaceHolder.Callback {
 
         // Try to find an size match aspect ratio and size
         for (size in sizes) {
-            val ratio = (size.width / size.height).toDouble()
+            val ratio = size.width.toDouble() / size.height
             if (Math.abs(ratio - targetRatio) > mAspectTolerance) continue
             if (Math.abs(size.height - targetHeight) < minDiff) {
                 optimalSize = size
diff --git a/core/src/main/java/me/dm7/barcodescanner/core/CameraUtils.kt b/core/src/main/java/me/dm7/barcodescanner/core/CameraUtils.kt
index 71194b1..cea07e8 100644
--- a/core/src/main/java/me/dm7/barcodescanner/core/CameraUtils.kt
+++ b/core/src/main/java/me/dm7/barcodescanner/core/CameraUtils.kt
@@ -27,7 +27,7 @@ object CameraUtils {
         val numberOfCameras = Camera.getNumberOfCameras()
         val cameraInfo = Camera.CameraInfo()
         var defaultCameraId = -1
-        for (i in 0..numberOfCameras) {
+        for (i in 0 until numberOfCameras) {
             defaultCameraId = i
             Camera.getCameraInfo(i, cameraInfo)
             if (cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_BACK) {
diff --git a/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MyScannerActivity.kt b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MyScannerActivity.kt
index 07775ea..eb2867d 100644
--- a/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MyScannerActivity.kt
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MyScannerActivity.kt
@@ -3,7 +3,6 @@ package me.dm7.barcodescanner.zxing.sample
 import android.support.v7.app.AppCompatActivity
 import android.os.Bundle
 import android.os.Handler
-import android.view.ViewGroup
 import android.widget.Toast
 import com.google.zxing.Result
 import kotlinx.android.synthetic.main.activity_my_scanner.*
@@ -11,34 +10,27 @@ import me.dm7.barcodescanner.zxing.ZXingScannerView
 
 class MyScannerActivity : AppCompatActivity(), ZXingScannerView.ResultHandler {
 
-    var scanner : ZXingScannerView? = null
-
     override fun handleResult(rawResult: Result) {
         Toast.makeText(this, "Contents = " + rawResult.getText() +
                 ", Format = " + rawResult.getBarcodeFormat().toString(), Toast.LENGTH_SHORT).show()
 
         val handler = Handler()
-        handler.postDelayed({ scanner?.resumeCameraPreview(this@MyScannerActivity) }, 2000)
+        handler.postDelayed({ scanner.resumeCameraPreview(this@MyScannerActivity) }, 2000)
     }
 
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
         setContentView(R.layout.activity_my_scanner)
-        contentScanner
-
-        val contentFrame : ViewGroup = findViewById(R.id.contentScanner) as ViewGroup
-        scanner = ZXingScannerView(this)
-        contentFrame.addView(scanner)
     }
 
     override fun onResume() {
         super.onResume()
-        scanner?.setResultHandler(this)
-        scanner?.startCamera()
+        scanner.setResultHandler(this)
+        scanner.startCamera()
     }
 
     override fun onPause() {
         super.onPause()
-        scanner?.stopCamera()
+        scanner.stopCamera()
     }
 }
diff --git a/zxing-sample/src/main/res/layout/activity_my_scanner.xml b/zxing-sample/src/main/res/layout/activity_my_scanner.xml
index 48fd94c..13776ee 100644
--- a/zxing-sample/src/main/res/layout/activity_my_scanner.xml
+++ b/zxing-sample/src/main/res/layout/activity_my_scanner.xml
@@ -1,12 +1,11 @@
 <?xml version="1.0" encoding="utf-8"?>
-<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     tools:context=".MyScannerActivity">
 
-    <!--
     <me.dm7.barcodescanner.zxing.ZXingScannerView
         android:id="@+id/scanner"
         android:layout_width="match_parent"
@@ -17,11 +16,4 @@
         app:roundedCorner="false"
         app:squaredFinder="true" />
 
-    -->
-
-    <FrameLayout
-        android:id="@+id/contentScanner"
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"/>
-
-</FrameLayout>
\ No newline at end of file
+</LinearLayout>
\ No newline at end of file
