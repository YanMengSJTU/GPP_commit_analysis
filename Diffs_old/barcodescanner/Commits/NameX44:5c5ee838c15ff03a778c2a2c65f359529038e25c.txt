diff --git a/core/build.gradle b/core/build.gradle
index 3414884..dc2b71d 100644
--- a/core/build.gradle
+++ b/core/build.gradle
@@ -1,6 +1,7 @@
 apply plugin: 'android-library'
 
 ext {
+        supportLibraryDependency = 'com.android.support:support-v4:21.0.3'
     isLibrary = true
     pomPackaging = "aar"
     pomArtifactId = "core"
@@ -9,7 +10,7 @@ ext {
 }
 
 dependencies {
-    compile supportLibraryDependency
+    compile 'com.android.support:support-v4:21.0.3'
 }
 
 android {
@@ -17,3 +18,11 @@ android {
         //applicationId "${project.group}.core"
     }
 }
+
+android.libraryVariants.all { variant ->
+    def name = variant.buildType.name
+    def task = project.tasks.create "jar${name.capitalize()}", Jar
+    task.dependsOn variant.javaCompile
+    task.from variant.javaCompile.destinationDir
+    artifacts.add('archives', task);
+}
diff --git a/core/src/main/java/me/dm7/barcodescanner/core/BarcodeScannerView.java b/core/src/main/java/me/dm7/barcodescanner/core/BarcodeScannerView.java
index b2574c8..a7792c0 100644
--- a/core/src/main/java/me/dm7/barcodescanner/core/BarcodeScannerView.java
+++ b/core/src/main/java/me/dm7/barcodescanner/core/BarcodeScannerView.java
@@ -4,7 +4,6 @@
 import android.graphics.Point;
 import android.graphics.Rect;
 import android.hardware.Camera;
-import android.os.AsyncTask;
 import android.util.AttributeSet;
 import android.widget.FrameLayout;
 
@@ -68,7 +67,6 @@ public synchronized Rect getFramingRectInPreview(int width, int height) {
             rect.right = rect.right * cameraResolution.x / screenResolution.x;
             rect.top = rect.top * cameraResolution.y / screenResolution.y;
             rect.bottom = rect.bottom * cameraResolution.y / screenResolution.y;
-
             mFramingRectInPreview = rect;
         }
         return mFramingRectInPreview;
diff --git a/core/src/main/java/me/dm7/barcodescanner/core/ViewFinderView.java b/core/src/main/java/me/dm7/barcodescanner/core/ViewFinderView.java
index 9b44f81..4a03725 100644
--- a/core/src/main/java/me/dm7/barcodescanner/core/ViewFinderView.java
+++ b/core/src/main/java/me/dm7/barcodescanner/core/ViewFinderView.java
@@ -56,9 +56,9 @@ public void onDraw(Canvas canvas) {
             return;
         }
 
-        drawViewFinderMask(canvas);
-        drawViewFinderBorder(canvas);
-        drawLaser(canvas);
+        //drawViewFinderMask(canvas);
+        //drawViewFinderBorder(canvas);
+        //drawLaser(canvas);
     }
 
     public void drawViewFinderMask(Canvas canvas) {
@@ -136,9 +136,9 @@ public synchronized void updateFramingRect() {
             height = findDesiredDimensionInRange(PORTRAIT_HEIGHT_RATIO, viewResolution.y, MIN_FRAME_HEIGHT, PORTRAIT_MAX_FRAME_HEIGHT);
         }
 
-        int leftOffset = (viewResolution.x - width) / 2;
-        int topOffset = (viewResolution.y - height) / 2;
-        mFramingRect = new Rect(leftOffset, topOffset, leftOffset + width, topOffset + height);
+        //int leftOffset = (viewResolution.x - width) / 2;
+        //int topOffset = (viewResolution.y - height) / 2;
+        mFramingRect = new Rect(0, 0, width, height / 2);
     }
 
     private static int findDesiredDimensionInRange(float ratio, int resolution, int hardMin, int hardMax) {
diff --git a/zbar/zbar/build.gradle b/zbar/zbar/build.gradle
index 8874562..82237d2 100644
--- a/zbar/zbar/build.gradle
+++ b/zbar/zbar/build.gradle
@@ -18,4 +18,13 @@ android {
     defaultConfig {
         //applicationId "${project.group}.zbar"
     }
+
+    sourceSets {
+        main  {
+            java {
+                srcDir 'java'
+            }
+        }
+    }
 }
+
diff --git a/zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java b/zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
index e4640e9..c762a83 100644
--- a/zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
+++ b/zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
@@ -2,7 +2,6 @@
 
 import android.content.Context;
 import android.content.res.Configuration;
-import android.graphics.Rect;
 import android.hardware.Camera;
 import android.text.TextUtils;
 import android.util.AttributeSet;
@@ -13,11 +12,8 @@
 import net.sourceforge.zbar.Symbol;
 import net.sourceforge.zbar.SymbolSet;
 
-import java.util.ArrayList;
 import java.util.Collection;
-import java.util.EnumMap;
 import java.util.List;
-import java.util.Map;
 
 import me.dm7.barcodescanner.core.BarcodeScannerView;
 import me.dm7.barcodescanner.core.DisplayUtils;
@@ -27,9 +23,9 @@
         public void handleResult(Result rawResult);
     }
 
-    static {
+   /* static {
         System.loadLibrary("iconv");
-    }
+    }*/
 
     private ImageScanner mScanner;
     private List<BarcodeFormat> mFormats;
@@ -77,7 +73,7 @@ public void onPreviewFrame(byte[] data, Camera camera) {
         Camera.Parameters parameters = camera.getParameters();
         Camera.Size size = parameters.getPreviewSize();
         int width = size.width;
-        int height = size.height;
+        int height = size.height / 2;
 
         if(DisplayUtils.getScreenOrientation(getContext()) == Configuration.ORIENTATION_PORTRAIT) {
             byte[] rotatedData = new byte[data.length];
