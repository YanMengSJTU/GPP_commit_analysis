diff --git a/timeattendance/build.gradle b/timeattendance/build.gradle
index 191827a..fd54223 100644
--- a/timeattendance/build.gradle
+++ b/timeattendance/build.gradle
@@ -22,5 +22,6 @@ android {
 dependencies {
     compile fileTree(dir: 'libs', include: ['*.jar'])
     compile 'com.android.support:appcompat-v7:22.0.0'
-    compile project(":zbar:zbar")
+    compile project(':zbar:zbar')
+    compile 'mysql:mysql-connector-java:5.1.34'
 }
diff --git a/timeattendance/src/main/AndroidManifest.xml b/timeattendance/src/main/AndroidManifest.xml
index 083c461..e71ff20 100644
--- a/timeattendance/src/main/AndroidManifest.xml
+++ b/timeattendance/src/main/AndroidManifest.xml
@@ -23,8 +23,9 @@
             </intent-filter>
         </activity>
         <activity android:name=".MainActivity" android:label="@string/app_name"/>
-        <activity android:name=".SettingActivity" android:label="@string/app_name"/>
+        <activity android:name=".SettingActivity" android:screenOrientation="portrait" android:label="@string/app_name"/>
         <activity android:name=".SimpleScannerActivity" android:screenOrientation="portrait" android:label="@string/app_name" />
+        <activity android:name=".CaptureActivity" android:screenOrientation="portrait" android:label="@string/app_name" />
     </application>
 
 </manifest>
diff --git a/timeattendance/src/main/java/com/coresolutions/timeattendance/MainActivity.java b/timeattendance/src/main/java/com/coresolutions/timeattendance/MainActivity.java
index d56e15d..913f20a 100644
--- a/timeattendance/src/main/java/com/coresolutions/timeattendance/MainActivity.java
+++ b/timeattendance/src/main/java/com/coresolutions/timeattendance/MainActivity.java
@@ -14,11 +14,19 @@
 import android.util.Log;
 import android.view.Menu;
 import android.view.MenuItem;
+import android.view.View;
+import android.widget.Button;
 import android.widget.EditText;
 import android.widget.TextView;
 import android.widget.Toast;
+import android.os.NetworkOnMainThreadException;
+import org.json.JSONObject;
 
+import java.io.BufferedReader;
+import java.io.DataOutputStream;
 import java.io.IOException;
+import java.io.InputStream;
+import java.io.InputStreamReader;
 import java.net.HttpURLConnection;
 import java.net.InetSocketAddress;
 import java.net.MalformedURLException;
@@ -26,6 +34,9 @@
 import java.net.SocketAddress;
 import java.net.URL;
 import java.net.URLConnection;
+import java.sql.Connection;
+import java.sql.DriverManager;
+import java.util.ArrayList;
 import java.util.Locale;
 
 
@@ -39,6 +50,8 @@ protected void onCreate(Bundle savedInstanceState) {
 
         checkLocale();
 
+        Button b1 = (Button) findViewById(R.id.button_start);
+        b1.setOnClickListener(myhandler);
         TextView status = (TextView) findViewById(R.id.txt_status);
         if (checkSetting() == true) {
             if (checkOnline() == true) {
@@ -60,7 +73,40 @@ protected void onCreate(Bundle savedInstanceState) {
         //editor.putInt("flag", val+1);
         //editor.commit();
     }
+    View.OnClickListener myhandler = new View.OnClickListener() {
+        public void onClick(View v) {
 
+            try{ // Loading the MySQL Connector/J driver
+                Class.forName("com.mysql.jdbc.Driver");
+                System.out.println("com.mysql.jdbc.Driver");
+            }catch(ClassNotFoundException e){
+                System.out.println("Error while loading the Driver: " + e.getMessage());
+            }
+            System.out.println("MySQL Connect Example.");
+            Connection conn = null;
+            String url = "jdbc:mysql://157.179.24.77:3306/";
+            String dbName = "game";
+            String driver = "com.mysql.jdbc.Driver";
+            String userName = "root";
+            String password = "root";
+            try {
+                Class.forName(driver).newInstance();
+                conn = DriverManager.getConnection(url+dbName,userName,password);
+                Toast.makeText(getBaseContext(),
+                        "Connected to the database.", Toast.LENGTH_LONG)
+                        .show();
+                conn.close();
+                Toast.makeText(getBaseContext(),
+                        "Disconnected form the database.", Toast.LENGTH_LONG)
+                        .show();
+            } catch (Exception e) {
+                Toast.makeText(getBaseContext(),
+                        "Exception e = " , Toast.LENGTH_LONG)
+                        .show();
+                e.printStackTrace();
+            }
+        }
+    };
     @Override
     public void onResume() {
         super.onResume();
@@ -116,10 +162,24 @@ public boolean checkOnline() {
         SharedPreferences settings = getSharedPreferences("ConfigFile", 0);
         String ipAddress = settings.getString("ipaddress", "");
 
-        if (isConnectedToServer(ipAddress) == true) {
+        return true;
+    }
+    public boolean isOnline() {
+        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
+        NetworkInfo netInfo = cm.getActiveNetworkInfo();
+        if (netInfo != null && netInfo.isConnected()) {
             return true;
-        } else {
+        }
+        return false;
+    }
+    private boolean isOnTheInternet() {
+        try {
+            URLConnection urlConnection = new URL("http://157.179.24.77").openConnection();
+            urlConnection.setConnectTimeout(400);
+            urlConnection.connect();
             return true;
+        } catch (Exception e) {
+            return false;
         }
     }
 
@@ -158,23 +218,27 @@ public boolean isConnectedToServer(String url) {
 
     public static boolean isHostReachable(String serverAddress, int serverTCPport, int timeoutMS){
         boolean connected = false;
-        Socket socket;
+        String sentence = "TCP Test #1n";
+        String modifiedSentence;
         try {
-            socket = new Socket();
-            SocketAddress socketAddress = new InetSocketAddress(serverAddress, serverTCPport);
-            socket.connect(socketAddress, timeoutMS);
-            if (socket.isConnected()) {
-                connected = true;
-                socket.close();
-            }
-        } catch (IOException e) {
-            e.printStackTrace();
-        } finally {
-            socket = null;
+
+            Socket clientSocket = new Socket("192.168.18.116", 8080);
+            DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
+            BufferedReader inFromServer = new BufferedReader(new
+                    InputStreamReader(clientSocket.getInputStream()));
+            outToServer.writeBytes(sentence + 'n');
+            connected = true;
+            clientSocket.close();
+
+        } catch (Exception e) {
+           // printScr("TCP Error: " + e.toString());
         }
+
         return connected;
     }
 
+
+
     public  void checkLocale(){
         //check locale
         SharedPreferences settings = getSharedPreferences("ConfigFile", 0);
diff --git a/timeattendance/src/main/java/com/coresolutions/timeattendance/SettingActivity.java b/timeattendance/src/main/java/com/coresolutions/timeattendance/SettingActivity.java
index 8a07fb9..b05ea13 100644
--- a/timeattendance/src/main/java/com/coresolutions/timeattendance/SettingActivity.java
+++ b/timeattendance/src/main/java/com/coresolutions/timeattendance/SettingActivity.java
@@ -44,6 +44,7 @@ protected void onCreate(Bundle savedInstanceState) {
         adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
         language.setAdapter(adapter);
         String tmp_language= getLanguageDesc(settings.getString("language", "en"));
+        //Toast.makeText(this, "language = "+settings.getString("language", "en")+" | "+tmp_language, Toast.LENGTH_SHORT).show();
         if (!tmp_language.equals(null)) {
             spinnerPostion = adapter.getPosition(tmp_language);
             language.setSelection(spinnerPostion);
@@ -56,8 +57,9 @@ protected void onCreate(Bundle savedInstanceState) {
         adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
         scanner.setAdapter(adapter1);
         String tmp_scanner= getCameraDesc(settings.getInt("scanner", 0));
+        //Toast.makeText(this, "language = "+settings.getInt("scanner", 0)+" | "+tmp_scanner, Toast.LENGTH_SHORT).show();
         if (!tmp_scanner.equals(null)) {
-            spinnerPostion = adapter.getPosition(tmp_scanner);
+            spinnerPostion = adapter1.getPosition(tmp_scanner);
             scanner.setSelection(spinnerPostion);
             spinnerPostion = 0;
         }
@@ -69,7 +71,7 @@ protected void onCreate(Bundle savedInstanceState) {
         capture.setAdapter(adapter2);
         String tmp_capture= getCameraDesc(settings.getInt("capture", 0));
         if (!tmp_capture.equals(null)) {
-            spinnerPostion = adapter.getPosition(tmp_capture);
+            spinnerPostion = adapter2.getPosition(tmp_capture);
             capture.setSelection(spinnerPostion);
             spinnerPostion = 0;
         }
@@ -98,6 +100,7 @@ public boolean onOptionsItemSelected(MenuItem item) {
             editor.putString("ipaddress", ipaddress.getText().toString());
             editor.putInt("port", Integer.valueOf(port.getText().toString()));
             editor.putString("language", getLanguageCode(language.getSelectedItem().toString()));
+            //Toast.makeText(this, "scanner = "+getCameraType(scanner.getSelectedItem().toString()), Toast.LENGTH_SHORT).show();
             editor.putInt("scanner", getCameraType(scanner.getSelectedItem().toString()));;      // 0 = back camera | 1 = front camera
             editor.putInt("capture", getCameraType(capture.getSelectedItem().toString()));  // 0 = back camera | 1 = front camera
             editor.commit();
@@ -111,9 +114,9 @@ public boolean onOptionsItemSelected(MenuItem item) {
 
     public String getLanguageCode(String language){
         String[] language_array = getResources().getStringArray(R.array.language_array);
-        if(language==language_array[0]) {
+        if(language.equals(language_array[0])) {
             return "en";
-        }else if(language==language_array[1]) {
+        }else if(language.equals(language_array[1])) {
             return "th";
         }else{
             return "en";
@@ -122,9 +125,9 @@ public String getLanguageCode(String language){
     }
     public String getLanguageDesc(String language){
         String[] language_array = getResources().getStringArray(R.array.language_array);
-        if(language=="en") {
+        if(language.equals("en")) {
             return language_array[0];
-        }else if(language=="th") {
+        }else if(language.equals("th")) {
             return language_array[1];
         }else{
             return language_array[0];
@@ -133,9 +136,9 @@ public String getLanguageDesc(String language){
     }
     public int getCameraType(String camera){
         String[] camera_array = getResources().getStringArray(R.array.camera_array);
-        if(camera==camera_array[0]) {
+        if(camera.equals(camera_array[0])) {
             return 0;
-        }else if(camera==camera_array[1]) {
+        }else if(camera.equals(camera_array[1])) {
             return 1;
         }else{
             return 0;
@@ -144,9 +147,10 @@ public int getCameraType(String camera){
     }
     public String getCameraDesc(int camera){
         String[] camera_array = getResources().getStringArray(R.array.camera_array);
-        if(camera==0) {
+        //Toast.makeText(this, "camera = "+camera+" | "+camera_array[0]+" | "+camera_array[1], Toast.LENGTH_SHORT).show();
+        if(camera == 0) {
             return camera_array[0];
-        }else if(camera==1) {
+        }else if(camera == 1) {
             return camera_array[1];
         }else{
             return camera_array[0];
diff --git a/timeattendance/src/main/res/layout/activity_main.xml b/timeattendance/src/main/res/layout/activity_main.xml
index 1ad9849..51947c6 100644
--- a/timeattendance/src/main/res/layout/activity_main.xml
+++ b/timeattendance/src/main/res/layout/activity_main.xml
@@ -17,7 +17,7 @@
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="Start"
-        android:id="@+id/button"
+        android:id="@+id/button_start"
         android:layout_alignParentTop="false"
         android:layout_alignWithParentIfMissing="false"
         android:layout_alignParentRight="false"
