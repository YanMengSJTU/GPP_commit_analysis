diff --git a/build.gradle b/build.gradle
index be189dc..f6730c7 100644
--- a/build.gradle
+++ b/build.gradle
@@ -4,7 +4,7 @@ buildscript {
     }
 
     dependencies {
-        classpath 'com.android.tools.build:gradle:1.1.0'
+        classpath 'com.android.tools.build:gradle:1.3.1'
     }
 }
 
@@ -20,7 +20,8 @@ allprojects {
     }
 
     ext {
-        supportLibraryDependency = 'com.android.support:support-v4:21.0.3'
+        supportLibraryDependency = 'com.android.support:support-v4:23.0.1'
+        supportLibraryDependency = 'com.android.support:appcompat-v7:23.0.1'
         isLibrary = false
     }
 }
@@ -30,8 +31,8 @@ subprojects {
         ext.pluginContainer = project.getPlugins()
         if(ext.pluginContainer.hasPlugin("com.android.application") || ext.pluginContainer.hasPlugin("com.android.library")) {
             android {
-                compileSdkVersion 22
-                buildToolsVersion '22.0.1'
+                compileSdkVersion 23
+                buildToolsVersion '23.0.1'
 
                 android {
                     lintOptions {
@@ -41,7 +42,7 @@ subprojects {
 
                 defaultConfig {
                     minSdkVersion 9
-                    targetSdkVersion 22
+                    targetSdkVersion 23
                     versionCode 182
                     versionName "1.8.2"
                 }
diff --git a/core/build.gradle b/core/build.gradle
index e9897ae..0f77e4b 100644
--- a/core/build.gradle
+++ b/core/build.gradle
@@ -9,7 +9,6 @@ ext {
 }
 
 dependencies {
-    compile supportLibraryDependency
 }
 
 android {
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 0573dea..63e8e5d 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -3,4 +3,4 @@ distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-2.2-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-2.6-all.zip
diff --git a/settings.gradle b/settings.gradle
index a70b2f9..e32ddc3 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -1 +1 @@
-include "core", "zxing:zxing", "zxing:sample", "zbar:zbar", "zbar:sample"
\ No newline at end of file
+include ":", "core", ":zxing", ":zxing-sample", ":zbar", ":zbar-sample"
diff --git a/zbar/sample/build.gradle b/zbar-sample/build.gradle
similarity index 68%
rename from zbar/sample/build.gradle
rename to zbar-sample/build.gradle
index e1d94a1..f21a218 100644
--- a/zbar/sample/build.gradle
+++ b/zbar-sample/build.gradle
@@ -3,8 +3,8 @@ apply plugin: 'com.android.application'
 dependencies {
     //compile project(":zbar:zbar")
     compile 'me.dm7.barcodescanner:zbar:1.8.2'
-    compile supportLibraryDependency
-    compile 'com.android.support:appcompat-v7:21.0.3'
+    compile 'com.android.support:appcompat-v7:23.0.1'
+    compile 'com.android.support:support-v4:23.0.1'
 }
 
 android {
diff --git a/zbar/sample/src/main/AndroidManifest.xml b/zbar-sample/src/main/AndroidManifest.xml
similarity index 97%
rename from zbar/sample/src/main/AndroidManifest.xml
rename to zbar-sample/src/main/AndroidManifest.xml
index 84bb944..302b419 100644
--- a/zbar/sample/src/main/AndroidManifest.xml
+++ b/zbar-sample/src/main/AndroidManifest.xml
@@ -5,7 +5,7 @@
 
   <application android:allowBackup="true"
         android:label="@string/app_name"
-        android:icon="@drawable/ic_launcher">
+        android:icon="@mipmap/ic_launcher">
         <activity android:name=".MainActivity"
                   android:theme="@style/AppTheme"
                   android:label="@string/app_name">
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java
similarity index 98%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java
index 7ad6cdf..e3481c2 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java
+++ b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/CameraSelectorDialogFragment.java
@@ -9,7 +9,7 @@
 
 public class CameraSelectorDialogFragment extends DialogFragment {
     public interface CameraSelectorDialogListener {
-        public void onCameraSelected(int cameraId);
+        void onCameraSelected(int cameraId);
     }
 
     private int mCameraId;
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java
similarity index 98%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java
index 49bd587..7d7715e 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java
+++ b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/FormatSelectorDialogFragment.java
@@ -13,7 +13,7 @@
 
 public class FormatSelectorDialogFragment extends DialogFragment {
     public interface FormatSelectorDialogListener {
-        public void onFormatsSaved(ArrayList<Integer> selectedIndices);
+        void onFormatsSaved(ArrayList<Integer> selectedIndices);
     }
 
     private ArrayList<Integer> mSelectedIndices;
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java
similarity index 89%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java
index 1d3b3fd..f70ff61 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java
+++ b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MainActivity.java
@@ -2,10 +2,10 @@
 
 import android.content.Intent;
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 import android.view.View;
 
-public class MainActivity extends ActionBarActivity {
+public class MainActivity extends AppCompatActivity {
     @Override
     public void onCreate(Bundle state) {
         super.onCreate(state);
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java
similarity index 95%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java
index 114aeed..8f0df63 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java
+++ b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/MessageDialogFragment.java
@@ -8,7 +8,7 @@
 
 public class MessageDialogFragment extends DialogFragment {
     public interface MessageDialogListener {
-        public void onDialogPositiveClick(DialogFragment dialog);
+        void onDialogPositiveClick(DialogFragment dialog);
     }
 
     private String mTitle;
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java
similarity index 98%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java
index ef683a2..226480a 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java
+++ b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerActivity.java
@@ -7,7 +7,7 @@
 import android.support.v4.app.DialogFragment;
 import android.support.v4.app.FragmentManager;
 import android.support.v4.view.MenuItemCompat;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 import android.view.Menu;
 import android.view.MenuItem;
 
@@ -18,7 +18,7 @@
 import me.dm7.barcodescanner.zbar.Result;
 import me.dm7.barcodescanner.zbar.ZBarScannerView;
 
-public class ScannerActivity extends ActionBarActivity implements MessageDialogFragment.MessageDialogListener,
+public class ScannerActivity extends AppCompatActivity implements MessageDialogFragment.MessageDialogListener,
         ZBarScannerView.ResultHandler, FormatSelectorDialogFragment.FormatSelectorDialogListener,
         CameraSelectorDialogFragment.CameraSelectorDialogListener {
     private static final String FLASH_STATE = "FLASH_STATE";
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragment.java
similarity index 100%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragment.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragment.java
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragmentActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragmentActivity.java
similarity index 66%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragmentActivity.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragmentActivity.java
index 282ae6e..a89b710 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragmentActivity.java
+++ b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/ScannerFragmentActivity.java
@@ -1,9 +1,9 @@
 package me.dm7.barcodescanner.zbar.sample;
 
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 
-public class ScannerFragmentActivity extends ActionBarActivity {
+public class ScannerFragmentActivity extends AppCompatActivity {
     @Override
     public void onCreate(Bundle state) {
         super.onCreate(state);
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java
similarity index 89%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java
index 1a2be6e..b59847d 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java
+++ b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerActivity.java
@@ -1,13 +1,13 @@
 package me.dm7.barcodescanner.zbar.sample;
 
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 import android.widget.Toast;
 
 import me.dm7.barcodescanner.zbar.Result;
 import me.dm7.barcodescanner.zbar.ZBarScannerView;
 
-public class SimpleScannerActivity extends ActionBarActivity implements ZBarScannerView.ResultHandler {
+public class SimpleScannerActivity extends AppCompatActivity implements ZBarScannerView.ResultHandler {
     private ZBarScannerView mScannerView;
 
     @Override
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragment.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragment.java
similarity index 100%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragment.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragment.java
diff --git a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java
similarity index 67%
rename from zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java
rename to zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java
index 7f3b553..5615e07 100644
--- a/zbar/sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java
+++ b/zbar-sample/src/main/java/me/dm7/barcodescanner/zbar/sample/SimpleScannerFragmentActivity.java
@@ -1,9 +1,9 @@
 package me.dm7.barcodescanner.zbar.sample;
 
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 
-public class SimpleScannerFragmentActivity extends ActionBarActivity {
+public class SimpleScannerFragmentActivity extends AppCompatActivity {
     @Override
     public void onCreate(Bundle state) {
         super.onCreate(state);
diff --git a/zbar/sample/src/main/res/layout/activity_main.xml b/zbar-sample/src/main/res/layout/activity_main.xml
similarity index 100%
rename from zbar/sample/src/main/res/layout/activity_main.xml
rename to zbar-sample/src/main/res/layout/activity_main.xml
diff --git a/zbar/sample/src/main/res/layout/activity_scanner_fragment.xml b/zbar-sample/src/main/res/layout/activity_scanner_fragment.xml
similarity index 100%
rename from zbar/sample/src/main/res/layout/activity_scanner_fragment.xml
rename to zbar-sample/src/main/res/layout/activity_scanner_fragment.xml
diff --git a/zbar/sample/src/main/res/layout/activity_simple_scanner_fragment.xml b/zbar-sample/src/main/res/layout/activity_simple_scanner_fragment.xml
similarity index 100%
rename from zbar/sample/src/main/res/layout/activity_simple_scanner_fragment.xml
rename to zbar-sample/src/main/res/layout/activity_simple_scanner_fragment.xml
diff --git a/zbar-sample/src/main/res/mipmap-hdpi/ic_launcher.png b/zbar-sample/src/main/res/mipmap-hdpi/ic_launcher.png
new file mode 100644
index 0000000..cde69bc
Binary files /dev/null and b/zbar-sample/src/main/res/mipmap-hdpi/ic_launcher.png differ
diff --git a/zbar-sample/src/main/res/mipmap-mdpi/ic_launcher.png b/zbar-sample/src/main/res/mipmap-mdpi/ic_launcher.png
new file mode 100644
index 0000000..c133a0c
Binary files /dev/null and b/zbar-sample/src/main/res/mipmap-mdpi/ic_launcher.png differ
diff --git a/zbar-sample/src/main/res/mipmap-xhdpi/ic_launcher.png b/zbar-sample/src/main/res/mipmap-xhdpi/ic_launcher.png
new file mode 100644
index 0000000..bfa42f0
Binary files /dev/null and b/zbar-sample/src/main/res/mipmap-xhdpi/ic_launcher.png differ
diff --git a/zbar-sample/src/main/res/mipmap-xxhdpi/ic_launcher.png b/zbar-sample/src/main/res/mipmap-xxhdpi/ic_launcher.png
new file mode 100644
index 0000000..324e72c
Binary files /dev/null and b/zbar-sample/src/main/res/mipmap-xxhdpi/ic_launcher.png differ
diff --git a/zbar/sample/src/main/res/values/colors.xml b/zbar-sample/src/main/res/values/colors.xml
similarity index 100%
rename from zbar/sample/src/main/res/values/colors.xml
rename to zbar-sample/src/main/res/values/colors.xml
diff --git a/zbar/sample/src/main/res/values/ids.xml b/zbar-sample/src/main/res/values/ids.xml
similarity index 100%
rename from zbar/sample/src/main/res/values/ids.xml
rename to zbar-sample/src/main/res/values/ids.xml
diff --git a/zbar/sample/src/main/res/values/strings.xml b/zbar-sample/src/main/res/values/strings.xml
similarity index 100%
rename from zbar/sample/src/main/res/values/strings.xml
rename to zbar-sample/src/main/res/values/strings.xml
diff --git a/zbar/sample/src/main/res/values/styles.xml b/zbar-sample/src/main/res/values/styles.xml
similarity index 100%
rename from zbar/sample/src/main/res/values/styles.xml
rename to zbar-sample/src/main/res/values/styles.xml
diff --git a/zbar/zbar/build.gradle b/zbar/build.gradle
similarity index 100%
rename from zbar/zbar/build.gradle
rename to zbar/build.gradle
diff --git a/zbar/zbar/libs/zbar.jar b/zbar/libs/zbar.jar
similarity index 100%
rename from zbar/zbar/libs/zbar.jar
rename to zbar/libs/zbar.jar
diff --git a/zbar/sample/src/main/res/drawable-hdpi/ic_launcher.png b/zbar/sample/src/main/res/drawable-hdpi/ic_launcher.png
deleted file mode 100644
index 96a442e..0000000
Binary files a/zbar/sample/src/main/res/drawable-hdpi/ic_launcher.png and /dev/null differ
diff --git a/zbar/sample/src/main/res/drawable-mdpi/ic_launcher.png b/zbar/sample/src/main/res/drawable-mdpi/ic_launcher.png
deleted file mode 100644
index 359047d..0000000
Binary files a/zbar/sample/src/main/res/drawable-mdpi/ic_launcher.png and /dev/null differ
diff --git a/zbar/sample/src/main/res/drawable-xhdpi/ic_launcher.png b/zbar/sample/src/main/res/drawable-xhdpi/ic_launcher.png
deleted file mode 100644
index 71c6d76..0000000
Binary files a/zbar/sample/src/main/res/drawable-xhdpi/ic_launcher.png and /dev/null differ
diff --git a/zbar/sample/src/main/res/drawable-xxhdpi/ic_launcher.png b/zbar/sample/src/main/res/drawable-xxhdpi/ic_launcher.png
deleted file mode 100644
index 4df1894..0000000
Binary files a/zbar/sample/src/main/res/drawable-xxhdpi/ic_launcher.png and /dev/null differ
diff --git a/zbar/zbar/src/main/AndroidManifest.xml b/zbar/src/main/AndroidManifest.xml
similarity index 100%
rename from zbar/zbar/src/main/AndroidManifest.xml
rename to zbar/src/main/AndroidManifest.xml
diff --git a/zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/BarcodeFormat.java b/zbar/src/main/java/me/dm7/barcodescanner/zbar/BarcodeFormat.java
similarity index 100%
rename from zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/BarcodeFormat.java
rename to zbar/src/main/java/me/dm7/barcodescanner/zbar/BarcodeFormat.java
diff --git a/zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/Result.java b/zbar/src/main/java/me/dm7/barcodescanner/zbar/Result.java
similarity index 100%
rename from zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/Result.java
rename to zbar/src/main/java/me/dm7/barcodescanner/zbar/Result.java
diff --git a/zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java b/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
similarity index 98%
rename from zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
rename to zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
index e4640e9..b59abbc 100644
--- a/zbar/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
+++ b/zbar/src/main/java/me/dm7/barcodescanner/zbar/ZBarScannerView.java
@@ -24,7 +24,7 @@
 
 public class ZBarScannerView extends BarcodeScannerView {
     public interface ResultHandler {
-        public void handleResult(Result rawResult);
+        void handleResult(Result rawResult);
     }
 
     static {
diff --git a/zbar/zbar/src/main/jniLibs/armeabi-v7a/libiconv.so b/zbar/src/main/jniLibs/armeabi-v7a/libiconv.so
similarity index 100%
rename from zbar/zbar/src/main/jniLibs/armeabi-v7a/libiconv.so
rename to zbar/src/main/jniLibs/armeabi-v7a/libiconv.so
diff --git a/zbar/zbar/src/main/jniLibs/armeabi-v7a/libzbarjni.so b/zbar/src/main/jniLibs/armeabi-v7a/libzbarjni.so
similarity index 100%
rename from zbar/zbar/src/main/jniLibs/armeabi-v7a/libzbarjni.so
rename to zbar/src/main/jniLibs/armeabi-v7a/libzbarjni.so
diff --git a/zbar/zbar/src/main/jniLibs/armeabi/libiconv.so b/zbar/src/main/jniLibs/armeabi/libiconv.so
similarity index 100%
rename from zbar/zbar/src/main/jniLibs/armeabi/libiconv.so
rename to zbar/src/main/jniLibs/armeabi/libiconv.so
diff --git a/zbar/zbar/src/main/jniLibs/armeabi/libzbarjni.so b/zbar/src/main/jniLibs/armeabi/libzbarjni.so
similarity index 100%
rename from zbar/zbar/src/main/jniLibs/armeabi/libzbarjni.so
rename to zbar/src/main/jniLibs/armeabi/libzbarjni.so
diff --git a/zbar/zbar/src/main/jniLibs/x86/libiconv.so b/zbar/src/main/jniLibs/x86/libiconv.so
similarity index 100%
rename from zbar/zbar/src/main/jniLibs/x86/libiconv.so
rename to zbar/src/main/jniLibs/x86/libiconv.so
diff --git a/zbar/zbar/src/main/jniLibs/x86/libzbarjni.so b/zbar/src/main/jniLibs/x86/libzbarjni.so
similarity index 100%
rename from zbar/zbar/src/main/jniLibs/x86/libzbarjni.so
rename to zbar/src/main/jniLibs/x86/libzbarjni.so
diff --git a/zxing/sample/build.gradle b/zxing-sample/build.gradle
similarity index 69%
rename from zxing/sample/build.gradle
rename to zxing-sample/build.gradle
index b28bf00..f2e63f3 100644
--- a/zxing/sample/build.gradle
+++ b/zxing-sample/build.gradle
@@ -3,8 +3,8 @@ apply plugin: 'com.android.application'
 dependencies {
     //compile project(":zxing:zxing")
     compile 'me.dm7.barcodescanner:zxing:1.8.2'
-    compile supportLibraryDependency
-    compile 'com.android.support:appcompat-v7:21.0.3'
+    compile 'com.android.support:appcompat-v7:23.0.1'
+    compile 'com.android.support:support-v4:23.0.1'
 }
 
 android {
diff --git a/zxing/sample/src/main/AndroidManifest.xml b/zxing-sample/src/main/AndroidManifest.xml
similarity index 97%
rename from zxing/sample/src/main/AndroidManifest.xml
rename to zxing-sample/src/main/AndroidManifest.xml
index 269e607..4d6ba62 100644
--- a/zxing/sample/src/main/AndroidManifest.xml
+++ b/zxing-sample/src/main/AndroidManifest.xml
@@ -5,7 +5,7 @@
 
   <application android:allowBackup="true"
         android:label="@string/app_name"
-        android:icon="@drawable/ic_launcher">
+        android:icon="@mipmap/ic_launcher">
         <activity android:name=".MainActivity"
                   android:theme="@style/AppTheme"
                   android:label="@string/app_name">
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/CameraSelectorDialogFragment.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/CameraSelectorDialogFragment.java
similarity index 98%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/CameraSelectorDialogFragment.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/CameraSelectorDialogFragment.java
index f67c9ca..4abd920 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/CameraSelectorDialogFragment.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/CameraSelectorDialogFragment.java
@@ -9,7 +9,7 @@
 
 public class CameraSelectorDialogFragment extends DialogFragment {
     public interface CameraSelectorDialogListener {
-        public void onCameraSelected(int cameraId);
+        void onCameraSelected(int cameraId);
     }
 
     private int mCameraId;
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FormatSelectorDialogFragment.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FormatSelectorDialogFragment.java
similarity index 98%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FormatSelectorDialogFragment.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FormatSelectorDialogFragment.java
index fbc12cc..35a7abd 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FormatSelectorDialogFragment.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FormatSelectorDialogFragment.java
@@ -14,7 +14,7 @@
 
 public class FormatSelectorDialogFragment extends DialogFragment {
     public interface FormatSelectorDialogListener {
-        public void onFormatsSaved(ArrayList<Integer> selectedIndices);
+        void onFormatsSaved(ArrayList<Integer> selectedIndices);
     }
 
     private ArrayList<Integer> mSelectedIndices;
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FullScreenScannerFragmentActivity.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FullScreenScannerFragmentActivity.java
similarity index 68%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FullScreenScannerFragmentActivity.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FullScreenScannerFragmentActivity.java
index 82c5e67..886e38e 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FullScreenScannerFragmentActivity.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/FullScreenScannerFragmentActivity.java
@@ -2,9 +2,9 @@
 
 
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 
-public class FullScreenScannerFragmentActivity extends ActionBarActivity {
+public class FullScreenScannerFragmentActivity extends AppCompatActivity {
     @Override
     public void onCreate(Bundle state) {
         super.onCreate(state);
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MainActivity.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MainActivity.java
similarity index 91%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MainActivity.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MainActivity.java
index ffe6fca..3fd689b 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MainActivity.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MainActivity.java
@@ -2,10 +2,10 @@
 
 import android.content.Intent;
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 import android.view.View;
 
-public class MainActivity extends ActionBarActivity {
+public class MainActivity extends AppCompatActivity {
     @Override
     public void onCreate(Bundle state) {
         super.onCreate(state);
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MessageDialogFragment.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MessageDialogFragment.java
similarity index 95%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MessageDialogFragment.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MessageDialogFragment.java
index 8a50982..2965dd3 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MessageDialogFragment.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/MessageDialogFragment.java
@@ -8,7 +8,7 @@
 
 public class MessageDialogFragment extends DialogFragment {
     public interface MessageDialogListener {
-        public void onDialogPositiveClick(DialogFragment dialog);
+        void onDialogPositiveClick(DialogFragment dialog);
     }
 
     private String mTitle;
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerActivity.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerActivity.java
similarity index 98%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerActivity.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerActivity.java
index e656d1f..dbe1667 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerActivity.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerActivity.java
@@ -7,7 +7,7 @@
 import android.support.v4.app.DialogFragment;
 import android.support.v4.app.FragmentManager;
 import android.support.v4.view.MenuItemCompat;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 import android.view.Menu;
 import android.view.MenuItem;
 
@@ -19,7 +19,7 @@
 
 import me.dm7.barcodescanner.zxing.ZXingScannerView;
 
-public class ScannerActivity extends ActionBarActivity implements MessageDialogFragment.MessageDialogListener,
+public class ScannerActivity extends AppCompatActivity implements MessageDialogFragment.MessageDialogListener,
         ZXingScannerView.ResultHandler, FormatSelectorDialogFragment.FormatSelectorDialogListener,
         CameraSelectorDialogFragment.CameraSelectorDialogListener {
     private static final String FLASH_STATE = "FLASH_STATE";
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragment.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragment.java
similarity index 100%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragment.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragment.java
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragmentActivity.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragmentActivity.java
similarity index 66%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragmentActivity.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragmentActivity.java
index 92317b9..77b42d8 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragmentActivity.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/ScannerFragmentActivity.java
@@ -1,9 +1,9 @@
 package me.dm7.barcodescanner.zxing.sample;
 
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 
-public class ScannerFragmentActivity extends ActionBarActivity {
+public class ScannerFragmentActivity extends AppCompatActivity {
     @Override
     public void onCreate(Bundle state) {
         super.onCreate(state);
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerActivity.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerActivity.java
similarity index 96%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerActivity.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerActivity.java
index 079898e..5362b80 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerActivity.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerActivity.java
@@ -6,7 +6,7 @@
 import android.graphics.Paint;
 import android.graphics.Rect;
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 import android.util.AttributeSet;
 import android.util.TypedValue;
 import android.widget.Toast;
@@ -17,7 +17,7 @@
 import me.dm7.barcodescanner.core.ViewFinderView;
 import me.dm7.barcodescanner.zxing.ZXingScannerView;
 
-public class SimpleScannerActivity extends ActionBarActivity implements ZXingScannerView.ResultHandler {
+public class SimpleScannerActivity extends AppCompatActivity implements ZXingScannerView.ResultHandler {
     private ZXingScannerView mScannerView;
 
     @Override
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragment.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragment.java
similarity index 100%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragment.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragment.java
diff --git a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragmentActivity.java b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragmentActivity.java
similarity index 67%
rename from zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragmentActivity.java
rename to zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragmentActivity.java
index d182e22..9ba58ce 100644
--- a/zxing/sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragmentActivity.java
+++ b/zxing-sample/src/main/java/me/dm7/barcodescanner/zxing/sample/SimpleScannerFragmentActivity.java
@@ -1,9 +1,9 @@
 package me.dm7.barcodescanner.zxing.sample;
 
 import android.os.Bundle;
-import android.support.v7.app.ActionBarActivity;
+import android.support.v7.app.AppCompatActivity;
 
-public class SimpleScannerFragmentActivity extends ActionBarActivity {
+public class SimpleScannerFragmentActivity extends AppCompatActivity {
     @Override
     public void onCreate(Bundle state) {
         super.onCreate(state);
diff --git a/zxing/sample/src/main/res/layout/activity_full_screen_scanner_fragment.xml b/zxing-sample/src/main/res/layout/activity_full_screen_scanner_fragment.xml
similarity index 93%
rename from zxing/sample/src/main/res/layout/activity_full_screen_scanner_fragment.xml
rename to zxing-sample/src/main/res/layout/activity_full_screen_scanner_fragment.xml
index a852e5f..b587d6a 100644
--- a/zxing/sample/src/main/res/layout/activity_full_screen_scanner_fragment.xml
+++ b/zxing-sample/src/main/res/layout/activity_full_screen_scanner_fragment.xml
@@ -11,7 +11,7 @@
         android:layout_height="match_parent" />
 
     <ImageView
-        android:src="@drawable/ic_launcher"
+        android:src="@mipmap/ic_launcher"
         android:layout_gravity="top"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"/>
diff --git a/zxing/sample/src/main/res/layout/activity_main.xml b/zxing-sample/src/main/res/layout/activity_main.xml
similarity index 100%
rename from zxing/sample/src/main/res/layout/activity_main.xml
rename to zxing-sample/src/main/res/layout/activity_main.xml
diff --git a/zxing/sample/src/main/res/layout/activity_scanner_fragment.xml b/zxing-sample/src/main/res/layout/activity_scanner_fragment.xml
similarity index 100%
rename from zxing/sample/src/main/res/layout/activity_scanner_fragment.xml
rename to zxing-sample/src/main/res/layout/activity_scanner_fragment.xml
diff --git a/zxing/sample/src/main/res/layout/activity_simple_scanner_fragment.xml b/zxing-sample/src/main/res/layout/activity_simple_scanner_fragment.xml
similarity index 100%
rename from zxing/sample/src/main/res/layout/activity_simple_scanner_fragment.xml
rename to zxing-sample/src/main/res/layout/activity_simple_scanner_fragment.xml
diff --git a/zxing-sample/src/main/res/mipmap-hdpi/ic_launcher.png b/zxing-sample/src/main/res/mipmap-hdpi/ic_launcher.png
new file mode 100644
index 0000000..cde69bc
Binary files /dev/null and b/zxing-sample/src/main/res/mipmap-hdpi/ic_launcher.png differ
diff --git a/zxing-sample/src/main/res/mipmap-mdpi/ic_launcher.png b/zxing-sample/src/main/res/mipmap-mdpi/ic_launcher.png
new file mode 100644
index 0000000..c133a0c
Binary files /dev/null and b/zxing-sample/src/main/res/mipmap-mdpi/ic_launcher.png differ
diff --git a/zxing-sample/src/main/res/mipmap-xhdpi/ic_launcher.png b/zxing-sample/src/main/res/mipmap-xhdpi/ic_launcher.png
new file mode 100644
index 0000000..bfa42f0
Binary files /dev/null and b/zxing-sample/src/main/res/mipmap-xhdpi/ic_launcher.png differ
diff --git a/zxing-sample/src/main/res/mipmap-xxhdpi/ic_launcher.png b/zxing-sample/src/main/res/mipmap-xxhdpi/ic_launcher.png
new file mode 100644
index 0000000..324e72c
Binary files /dev/null and b/zxing-sample/src/main/res/mipmap-xxhdpi/ic_launcher.png differ
diff --git a/zxing/sample/src/main/res/values/colors.xml b/zxing-sample/src/main/res/values/colors.xml
similarity index 100%
rename from zxing/sample/src/main/res/values/colors.xml
rename to zxing-sample/src/main/res/values/colors.xml
diff --git a/zxing/sample/src/main/res/values/ids.xml b/zxing-sample/src/main/res/values/ids.xml
similarity index 100%
rename from zxing/sample/src/main/res/values/ids.xml
rename to zxing-sample/src/main/res/values/ids.xml
diff --git a/zxing/sample/src/main/res/values/strings.xml b/zxing-sample/src/main/res/values/strings.xml
similarity index 100%
rename from zxing/sample/src/main/res/values/strings.xml
rename to zxing-sample/src/main/res/values/strings.xml
diff --git a/zxing/sample/src/main/res/values/styles.xml b/zxing-sample/src/main/res/values/styles.xml
similarity index 100%
rename from zxing/sample/src/main/res/values/styles.xml
rename to zxing-sample/src/main/res/values/styles.xml
diff --git a/zxing/.gitignore b/zxing/.gitignore
new file mode 100644
index 0000000..796b96d
--- /dev/null
+++ b/zxing/.gitignore
@@ -0,0 +1 @@
+/build
diff --git a/zxing/zxing/build.gradle b/zxing/build.gradle
similarity index 91%
rename from zxing/zxing/build.gradle
rename to zxing/build.gradle
index df6f1a5..a343c78 100644
--- a/zxing/zxing/build.gradle
+++ b/zxing/build.gradle
@@ -11,7 +11,7 @@ ext {
 dependencies {
     //compile project(":core")
     compile 'me.dm7.barcodescanner:core:1.8.2'
-    compile 'com.google.zxing:core:3.2.0'
+    compile 'com.google.zxing:core:3.2.1'
 }
 
 android {
diff --git a/zxing/sample/src/main/res/drawable-hdpi/ic_launcher.png b/zxing/sample/src/main/res/drawable-hdpi/ic_launcher.png
deleted file mode 100644
index 96a442e..0000000
Binary files a/zxing/sample/src/main/res/drawable-hdpi/ic_launcher.png and /dev/null differ
diff --git a/zxing/sample/src/main/res/drawable-mdpi/ic_launcher.png b/zxing/sample/src/main/res/drawable-mdpi/ic_launcher.png
deleted file mode 100644
index 359047d..0000000
Binary files a/zxing/sample/src/main/res/drawable-mdpi/ic_launcher.png and /dev/null differ
diff --git a/zxing/sample/src/main/res/drawable-xhdpi/ic_launcher.png b/zxing/sample/src/main/res/drawable-xhdpi/ic_launcher.png
deleted file mode 100644
index 71c6d76..0000000
Binary files a/zxing/sample/src/main/res/drawable-xhdpi/ic_launcher.png and /dev/null differ
diff --git a/zxing/sample/src/main/res/drawable-xxhdpi/ic_launcher.png b/zxing/sample/src/main/res/drawable-xxhdpi/ic_launcher.png
deleted file mode 100644
index 4df1894..0000000
Binary files a/zxing/sample/src/main/res/drawable-xxhdpi/ic_launcher.png and /dev/null differ
diff --git a/zxing/zxing/src/main/AndroidManifest.xml b/zxing/src/main/AndroidManifest.xml
similarity index 100%
rename from zxing/zxing/src/main/AndroidManifest.xml
rename to zxing/src/main/AndroidManifest.xml
diff --git a/zxing/zxing/src/main/java/me/dm7/barcodescanner/zxing/ZXingScannerView.java b/zxing/src/main/java/me/dm7/barcodescanner/zxing/ZXingScannerView.java
similarity index 98%
rename from zxing/zxing/src/main/java/me/dm7/barcodescanner/zxing/ZXingScannerView.java
rename to zxing/src/main/java/me/dm7/barcodescanner/zxing/ZXingScannerView.java
index fc1933d..d4e192b 100644
--- a/zxing/zxing/src/main/java/me/dm7/barcodescanner/zxing/ZXingScannerView.java
+++ b/zxing/src/main/java/me/dm7/barcodescanner/zxing/ZXingScannerView.java
@@ -26,7 +26,7 @@
 
 public class ZXingScannerView extends BarcodeScannerView {
     public interface ResultHandler {
-        public void handleResult(Result rawResult);
+        void handleResult(Result rawResult);
     }
 
     private MultiFormatReader mMultiFormatReader;
