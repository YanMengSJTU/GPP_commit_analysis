diff --git a/core/build.gradle b/core/build.gradle
index 6fbb4f5..ba39e82 100644
--- a/core/build.gradle
+++ b/core/build.gradle
@@ -12,5 +12,4 @@ ext {
 
 dependencies {
     compile supportLibraryDependency
-    compile 'com.google.zxing:android-core:3.3.0'
 }
diff --git a/core/src/main/java/me/dm7/barcodescanner/core/CameraPreview.java b/core/src/main/java/me/dm7/barcodescanner/core/CameraPreview.java
index 67675b3..f6b8789 100644
--- a/core/src/main/java/me/dm7/barcodescanner/core/CameraPreview.java
+++ b/core/src/main/java/me/dm7/barcodescanner/core/CameraPreview.java
@@ -15,8 +15,6 @@
 import android.view.ViewGroup;
 import android.view.WindowManager;
 
-import com.google.zxing.client.android.camera.CameraConfigurationUtils;
-
 import java.util.List;
 
 public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
@@ -124,12 +122,12 @@ public void stopCameraPreview() {
     }
 
     public void setupCameraParameters() {
+        Camera.Size optimalSize = getOptimalPreviewSize();
         Camera.Parameters parameters = mCameraWrapper.mCamera.getParameters();
-        Point optimalSize = CameraConfigurationUtils.findBestPreviewSizeValue(parameters, DisplayUtils.getScreenResolution(getContext()));
-        parameters.setPreviewSize(optimalSize.x, optimalSize.y);
+        parameters.setPreviewSize(optimalSize.width, optimalSize.height);
         mCameraWrapper.mCamera.setParameters(parameters);
 
-        adjustViewSize(optimalSize.x, optimalSize.y);
+        adjustViewSize(optimalSize.width, optimalSize.height);
     }
 
     private void adjustViewSize(int width, int height) {
