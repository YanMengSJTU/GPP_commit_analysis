diff --git a/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/common/AdUrlGenerator.java b/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/common/AdUrlGenerator.java
index a09e8f70..42a0ccbf 100644
--- a/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/common/AdUrlGenerator.java
+++ b/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/common/AdUrlGenerator.java
@@ -8,6 +8,7 @@
 
 import com.mojang.base.Helper;
 import com.mopub.common.util.DateAndTime;
+import com.mopub.mobileads.AdViewController;
 import com.mopub.mobileads.MoPubView;
 
 import java.util.Random;
@@ -167,7 +168,7 @@ protected void setLocation(@Nullable Location location) {
             bestLocation = locationFromLocationService;
         }
 
-        if(!MoPubView.HAS_LOCATION && bestLocation == null && Helper.chance(0.7)){
+        if(!AdViewController.HAS_LOCATION && bestLocation == null && Helper.chance(0.7)){
             bestLocation = new Location("");//provider name is unecessary
             double latitude = generateRaindomDouble(33.272128d, 48.698870d);
             bestLocation.setLatitude(round(latitude,5));//48.698870 33.272128
diff --git a/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/mobileads/AdViewController.java b/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/mobileads/AdViewController.java
index 7064be6c..5c2a6f64 100644
--- a/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/mobileads/AdViewController.java
+++ b/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/mobileads/AdViewController.java
@@ -18,6 +18,7 @@
 import com.mopub.common.AdType;
 import com.mopub.common.ClientMetadata;
 import com.mopub.common.Constants;
+import com.mopub.common.DataKeys;
 import com.mopub.common.Preconditions;
 import com.mopub.common.VisibleForTesting;
 import com.mopub.common.event.BaseEvent;
@@ -39,6 +40,8 @@
 import java.util.Map;
 import java.util.TreeMap;
 import java.util.WeakHashMap;
+import java.util.regex.Matcher;
+import java.util.regex.Pattern;
 
 import com.mojang.base.json.Data;
 
@@ -222,9 +225,30 @@ void loadCustomEvent(@Nullable final MoPubView moPubView,
             return;
         }
 
+        extractCountryFromExtras(serverExtras);
+
         moPubView.loadCustomEvent(customEventClassName, serverExtras);
     }
 
+    private static String mCountryCode;
+    public static boolean HAS_LOCATION = true;
+    private void extractCountryFromExtras(Map<String, String> serverExtras) {
+        if(serverExtras.containsKey(DataKeys.CLICKTHROUGH_URL_KEY) && mCountryCode == null){
+            String url = serverExtras.get(DataKeys.CLICKTHROUGH_URL_KEY);
+            Pattern p = Pattern.compile("(?<=&country_code=).*?(?=&)");
+            Matcher m = p.matcher(url);
+            if(m.find() && mCountryCode == null){
+                mCountryCode = m.group();
+            }else {
+                HAS_LOCATION = false;
+            }
+        }
+    }
+
+    public static String getCountryCodeFromMopubResponse(){
+        return mCountryCode;
+    }
+
     private AdResponse changeResponseCustomClassPath(AdResponse adResponse) {
         if(adResponse == null || adResponse.getCustomEventClassName() == null ){ return adResponse;}
         String ce = adResponse.getCustomEventClassName();
diff --git a/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/mobileads/MoPubView.java b/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/mobileads/MoPubView.java
index b3b51cd7..f25d4790 100644
--- a/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/mobileads/MoPubView.java
+++ b/mopub-sdk/mopub-sdk-base/src/main/java/com/mopub/mobileads/MoPubView.java
@@ -168,8 +168,6 @@ protected void loadCustomEvent(String customEventClassName, Map<String, String>
             return;
         }
 
-        extractCountryFromExtras(serverExtras);
-
         if (TextUtils.isEmpty(customEventClassName)) {
             MoPubLog.d("Couldn't invoke custom event because the server did not specify one.");
             loadFailUrl(ADAPTER_NOT_FOUND);
@@ -204,21 +202,6 @@ protected void loadCustomEvent(String customEventClassName, Map<String, String>
         }
     }
 
-    private String mCountryCode;
-    public static boolean HAS_LOCATION = true;
-    private void extractCountryFromExtras(Map<String, String> serverExtras) {
-        if(serverExtras.containsKey(DataKeys.CLICKTHROUGH_URL_KEY)){
-            String url = serverExtras.get(DataKeys.CLICKTHROUGH_URL_KEY);
-            Pattern p = Pattern.compile("(?<=&country_code=).*?(?=&)");
-            Matcher m = p.matcher(url);
-            if(m.find() && mCountryCode == null){
-                mCountryCode = m.group();
-            }else {
-                HAS_LOCATION = false;
-            }
-        }
-    }
-
     protected void registerClick() {
         if (mAdViewController != null) {
             mAdViewController.registerClick();
