diff --git a/ion/src/com/koushikdutta/ion/conscrypt/ConscryptMiddleware.java b/ion/src/com/koushikdutta/ion/conscrypt/ConscryptMiddleware.java
index 3a7e5131..44dd21b3 100644
--- a/ion/src/com/koushikdutta/ion/conscrypt/ConscryptMiddleware.java
+++ b/ion/src/com/koushikdutta/ion/conscrypt/ConscryptMiddleware.java
@@ -7,6 +7,7 @@
 import com.koushikdutta.async.http.AsyncSSLSocketMiddleware;
 import com.koushikdutta.async.http.SimpleMiddleware;
 
+import java.lang.reflect.Method;
 import java.security.Provider;
 import java.security.Security;
 
@@ -46,12 +47,19 @@ public static void initialize(Context context) {
 
                 SSLContext originalDefaultContext = SSLContext.getDefault();
                 SSLSocketFactory originalDefaultSSLSocketFactory = HttpsURLConnection.getDefaultSSLSocketFactory();
-                Context gms = context.createPackageContext("com.google.android.gms", Context.CONTEXT_INCLUDE_CODE | Context.CONTEXT_IGNORE_SECURITY);
-                gms
-                .getClassLoader()
-                .loadClass("com.google.android.gms.common.security.ProviderInstallerImpl")
-                .getMethod("insertProvider", Context.class)
-                .invoke(null, context);
+                try {
+                    Class<?> providerInstaller = Class.forName("com.google.android.gms.security.ProviderInstaller");
+                    Method mInsertProvider = providerInstaller.getDeclaredMethod("installIfNeeded", Context.class);
+                    mInsertProvider.invoke(null, context);
+
+                } catch (Throwable ignored) {
+                    Context gms = context.createPackageContext("com.google.android.gms", Context.CONTEXT_INCLUDE_CODE | Context.CONTEXT_IGNORE_SECURITY);
+                    gms
+                    .getClassLoader()
+                    .loadClass("com.google.android.gms.common.security.ProviderInstallerImpl")
+                    .getMethod("insertProvider", Context.class)
+                    .invoke(null, context);
+                }
 
                 Provider[] providers = Security.getProviders();
                 Provider provider = Security.getProvider(GMS_PROVIDER);
