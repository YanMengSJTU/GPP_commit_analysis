diff --git a/build.gradle b/build.gradle
index ecc0a83e..474ff0be 100644
--- a/build.gradle
+++ b/build.gradle
@@ -3,9 +3,10 @@
 buildscript {
     repositories {
         jcenter()
+        google()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.0.0-beta6'
+        classpath 'com.android.tools.build:gradle:3.1.4'
     }
 }
 
@@ -13,6 +14,7 @@ allprojects {
     repositories {
         jcenter()
         maven { url("https://oss.sonatype.org/content/repositories/snapshots/") }
+        google()
     }
     tasks.withType(JavaCompile) {
         options.encoding = 'UTF-8'
diff --git a/gradle.properties b/gradle.properties
index 6cb104fd..9041f07c 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -2,10 +2,10 @@ VERSION_NAME=1.4.0
 VERSION_CODE=9
 GROUP=jp.co.cyberagent.android.gpuimage
 
-COMPILE_SDK_VERSION=23
-BUILD_TOOLS_VERSION=23.0.2
-TARGET_SDK_VERSION=23
-MIN_SDK_VERSION=8
+COMPILE_SDK_VERSION=28
+BUILD_TOOLS_VERSION=28.0.2
+TARGET_SDK_VERSION=28
+MIN_SDK_VERSION=19
 
 POM_DESCRIPTION=Image filters for Android with OpenGL (based on GPUImage for iOS)
 POM_URL=https://github.com/cyberagent/android-gpuimage
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 6c0732ab..43c22d75 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
-#Sat Dec 06 18:27:05 JST 2014
-distributionBase=GRADLE_USER_HOME
-distributionPath=wrapper/dists
-zipStoreBase=GRADLE_USER_HOME
-zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-2.11-all.zip
+#Fri Sep 07 14:40:29 CST 2018
+distributionBase=GRADLE_USER_HOME
+distributionPath=wrapper/dists
+zipStoreBase=GRADLE_USER_HOME
+zipStorePath=wrapper/dists
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.4-all.zip
diff --git a/library/.gitignore b/library/.gitignore
index 85e23b43..8cb50db9 100644
--- a/library/.gitignore
+++ b/library/.gitignore
@@ -30,3 +30,6 @@ proguard.cfg
 
 #OSX
 .DS_Store
+
+# CMake
+.externalNativeBuild
diff --git a/library/CMakeLists.txt b/library/CMakeLists.txt
new file mode 100644
index 00000000..4f345e91
--- /dev/null
+++ b/library/CMakeLists.txt
@@ -0,0 +1,20 @@
+# Sets the minimum version of CMake required to build your native library.
+# This ensures that a certain set of CMake features is available to
+# your build.
+
+cmake_minimum_required(VERSION 3.4.1)
+
+# Specifies a library name, specifies whether the library is STATIC or
+# SHARED, and provides relative paths to the source code. You can
+# define multiple libraries by adding multiple add.library() commands,
+# and CMake builds them for you. When you build your app, Gradle
+# automatically packages shared libraries with your APK.
+
+add_library( # Specifies the name of the library.
+             gpuimage-library
+
+             # Sets the library as a shared library.
+             SHARED
+
+             # Provides a relative path to your source file(s).
+             jni/yuv-decoder.c )
\ No newline at end of file
diff --git a/library/build.gradle b/library/build.gradle
index 3cd5e8c4..38bbed28 100644
--- a/library/build.gradle
+++ b/library/build.gradle
@@ -10,13 +10,6 @@ android {
 
         versionCode = VERSION_CODE
         versionName = VERSION_NAME
-
-        ndk {
-            moduleName "gpuimage-library"
-            stl "gnustl_shared"
-            abiFilters "all"
-            ldLibs "log"
-        }
     }
 
     sourceSets {
@@ -30,8 +23,6 @@ android {
             assets.srcDirs = ['assets']
             jni.srcDirs = ['jni']
         }
-
-        instrumentTest.setRoot('tests')
     }
 
     lintOptions {
@@ -55,6 +46,17 @@ android {
             from tasks["javadoc${variant.name.capitalize()}"]
         }
     }
+
+    // Encapsulates your external native build configurations.
+    externalNativeBuild {
+
+        // Encapsulates your CMake build configurations.
+        cmake {
+
+            // Provides a relative path to your CMake build script.
+            path "CMakeLists.txt"
+        }
+    }
 }
 
 apply from: 'android-artifacts.gradle'
diff --git a/sample/build.gradle b/sample/build.gradle
index 878f820f..84d54ef9 100644
--- a/sample/build.gradle
+++ b/sample/build.gradle
@@ -19,8 +19,6 @@ android {
             res.srcDirs = ['res']
             assets.srcDirs = ['assets']
         }
-
-        instrumentTest.setRoot('tests')
     }
 
     lintOptions {
@@ -33,7 +31,7 @@ repositories {
 }
 
 dependencies {
-    compile project(':library')
+    implementation project(':library')
 //    compile 'jp.co.cyberagent.android.gpuimage:gpuimage-library:+@aar'
-    compile 'com.android.support:support-v4:23.1.1'
+    implementation 'com.android.support:support-v4:27.1.1'
 }
\ No newline at end of file
