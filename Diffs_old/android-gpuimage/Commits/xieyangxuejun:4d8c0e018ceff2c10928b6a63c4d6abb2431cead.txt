diff --git a/.gitignore b/.gitignore
index f99652d1..7908a3ac 100644
--- a/.gitignore
+++ b/.gitignore
@@ -21,3 +21,5 @@ local.properties
 
 # Proguard folder generated by Eclipse
 proguard/
+
+library/.externalNativeBuild
diff --git a/build.gradle b/build.gradle
index 8a29e6b0..c058643b 100644
--- a/build.gradle
+++ b/build.gradle
@@ -3,17 +3,19 @@
 buildscript {
     repositories {
         jcenter()
+        google()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.0.0-beta6'
-        classpath 'com.novoda:bintray-release:0.3.4'
+        classpath 'com.android.tools.build:gradle:3.0.0'
+//        classpath 'com.novoda:bintray-release:0.3.4'
     }
 }
 
 allprojects {
     repositories {
         jcenter()
-        maven { url("https://oss.sonatype.org/content/repositories/snapshots/") }
+//        maven { url("https://oss.sonatype.org/content/repositories/snapshots/") }
+        google()
     }
     tasks.withType(JavaCompile) {
         options.encoding = 'UTF-8'
diff --git a/gradle.properties b/gradle.properties
index 40c44d7f..7afdcbb5 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -2,21 +2,21 @@ VERSION_NAME=1.4.1
 GROUP=jp.co.cyberagent.android.gpuimage
 ARTIFACT_ID=gpuimage-library
 
-COMPILE_SDK_VERSION=23
-BUILD_TOOLS_VERSION=23.0.2
-TARGET_SDK_VERSION=23
-MIN_SDK_VERSION=8
+COMPILE_SDK_VERSION=26
+BUILD_TOOLS_VERSION=26.0.2
+TARGET_SDK_VERSION=26
+MIN_SDK_VERSION=14
 
 POM_DESCRIPTION=Image filters for Android with OpenGL (based on GPUImage for iOS)
-POM_URL=https://github.com/cyberagent/android-gpuimage
-POM_SCM_URL=scm:git@github.com:CyberAgent/android-gpuimage.git
-POM_SCM_CONNECTION=scm:git@github.com:CyberAgent/android-gpuimage.git
-POM_SCM_DEV_CONNECTION=scm:git@github.com:CyberAgent/android-gpuimage.git
+POM_URL=https://github.com/xieyangxuejun/android-gpuimage
+POM_SCM_URL=scm:git@github.com:xieyangxuejun/android-gpuimage.git
+POM_SCM_CONNECTION=scm:git@github.com:xieyangxuejun/android-gpuimage.git
+POM_SCM_DEV_CONNECTION=scm:git@github.com:xieyangxuejun/android-gpuimage.git
 POM_LICENCE_NAME=The Apache Software License, Version 2.0
 POM_LICENCE_URL=http://www.apache.org/licenses/LICENSE-2.0.txt
 POM_LICENCE_DIST=repo
-POM_DEVELOPER_ID=cyberagent
-POM_DEVELOPER_NAME=CyberAgent, Inc.
-ISSUE_URL=https://github.com/CyberAgent/android-gpuimage/issues
+POM_DEVELOPER_ID=xieyangxuejun
+POM_DEVELOPER_NAME=xieyangxuejun, Inc.
+ISSUE_URL=https://github.com/xieyangxuejun/android-gpuimage/issues
 
-android.useDeprecatedNdk=true
+# android.useDeprecatedNdk=true
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 6c0732ab..92172edf 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -3,4 +3,4 @@ distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-2.11-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.1-all.zip
diff --git a/library/CMakeLists.txt b/library/CMakeLists.txt
new file mode 100644
index 00000000..9e794a7d
--- /dev/null
+++ b/library/CMakeLists.txt
@@ -0,0 +1,19 @@
+cmake_minimum_required(VERSION 3.4.1)
+
+set(CMAKE_VERBOSE_MAKEFILE on)
+set(CMAKE_ANDROID_STL_TYPE ${CMAKE_ANDROID_STL_TYPE} stlport_static)
+
+set(JNI_DIR src/main/jni)
+aux_source_directory(${JNI_DIR} JNI_SRC_LIST)
+
+add_library(gpuimage-library
+            SHARED
+            ${JNI_SRC_LIST})
+
+set(LIBS)
+list(APPEND LIBS
+	jnigraphics
+	log
+)
+
+target_link_libraries(gpuimage-library ${LIBS})
\ No newline at end of file
diff --git a/library/build.gradle b/library/build.gradle
index 4e0ded68..74e74aca 100644
--- a/library/build.gradle
+++ b/library/build.gradle
@@ -1,5 +1,5 @@
 apply plugin: 'com.android.library'
-apply plugin: 'com.novoda.bintray-release'
+//apply plugin: 'com.novoda.bintray-release'
 
 android {
     compileSdkVersion COMPILE_SDK_VERSION as int
@@ -14,12 +14,18 @@ android {
 
         consumerProguardFiles 'proguard-rules.txt'
 
-        ndk {
-            moduleName "gpuimage-library"
-            stl "gnustl_shared"
-            abiFilters "all"
-            ldLibs "log"
+        externalNativeBuild {
+            cmake {
+                cppFlags "-std=c++11 -frtti -fexceptions"
+            }
         }
+
+//        ndk {
+//            moduleName "gpuimage-library"
+//            stl "gnustl_shared"
+//            abiFilters "armeabi-v7a"
+//            ldLibs "log"
+//        }
     }
 
     sourceSets {
@@ -37,6 +43,12 @@ android {
         instrumentTest.setRoot('tests')
     }
 
+    externalNativeBuild {
+        cmake {
+            path "CMakeLists.txt"
+        }
+    }
+
     lintOptions {
         abortOnError false
     }
@@ -62,11 +74,11 @@ artifacts {
     archives androidJavadocsJar
 }
 
-publish {
-    userOrg = POM_DEVELOPER_ID
-    groupId = GROUP
-    artifactId = ARTIFACT_ID
-    publishVersion = VERSION_NAME
-    desc = POM_DESCRIPTION
-    website = POM_URL
-}
+//publish {
+//    userOrg = POM_DEVELOPER_ID
+//    groupId = GROUP
+//    artifactId = ARTIFACT_ID
+//    publishVersion = VERSION_NAME
+//    desc = POM_DESCRIPTION
+//    website = POM_URL
+//}
diff --git a/library/jni/yuv-decoder.c b/library/jni/yuv-decoder.c
index fed6281e..1ef34891 100644
--- a/library/jni/yuv-decoder.c
+++ b/library/jni/yuv-decoder.c
@@ -2,7 +2,12 @@
 #include <android/log.h>
 
 
-JNIEXPORT void JNICALL Java_jp_co_cyberagent_android_gpuimage_GPUImageNativeLibrary_YUVtoRBGA(JNIEnv * env, jobject obj, jbyteArray yuv420sp, jint width, jint height, jintArray rgbOut)
+JNIEXPORT void JNICALL
+Java_jp_co_cyberagent_android_gpuimage_GPUImageNativeLibrary_YUVtoRBGA(
+JNIEnv * env, jobject obj,
+jbyteArray yuv420sp,
+jint width, jint height,
+jintArray rgbOut)
 {
     int             sz;
     int             i;
@@ -58,7 +63,12 @@ JNIEXPORT void JNICALL Java_jp_co_cyberagent_android_gpuimage_GPUImageNativeLibr
     (*env)->ReleasePrimitiveArrayCritical(env, yuv420sp, yuv, 0);
 }
 
-JNIEXPORT void JNICALL Java_jp_co_cyberagent_android_gpuimage_GPUImageNativeLibrary_YUVtoARBG(JNIEnv * env, jobject obj, jbyteArray yuv420sp, jint width, jint height, jintArray rgbOut)
+JNIEXPORT void JNICALL
+Java_jp_co_cyberagent_android_gpuimage_GPUImageNativeLibrary_YUVtoARBG(
+JNIEnv * env, jobject obj,
+jbyteArray yuv420sp,
+jint width, jint height,
+jintArray rgbOut)
 {
     int             sz;
     int             i;
diff --git a/library/project.properties b/library/project.properties
index 93c8c3c0..29b0a772 100644
--- a/library/project.properties
+++ b/library/project.properties
@@ -10,6 +10,4 @@
 # To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
 #proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt
 
-# Project target.
-target=android-21
-android.library=true
+# Project target.
\ No newline at end of file
diff --git a/sample/build.gradle b/sample/build.gradle
index f64f4a42..5eb3d470 100644
--- a/sample/build.gradle
+++ b/sample/build.gradle
@@ -33,7 +33,8 @@ repositories {
 }
 
 dependencies {
+    implementation 'com.android.support:appcompat-v7:26.1.0'
     compile project(':library')
-//    compile 'jp.co.cyberagent.android.gpuimage:gpuimage-library:1.4.1'
-    compile 'com.android.support:support-v4:23.1.1'
+    //    compile 'jp.co.cyberagent.android.gpuimage:gpuimage-library:1.4.1'
+    //    compile 'com.android.support:support-v7:26.1.0'
 }
\ No newline at end of file
diff --git a/sample/project.properties b/sample/project.properties
index 24e0cbf3..29b0a772 100644
--- a/sample/project.properties
+++ b/sample/project.properties
@@ -10,7 +10,4 @@
 # To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
 #proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt
 
-# Project target.
-target=android-16
-proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt
-android.library.reference.1=../library
\ No newline at end of file
+# Project target.
\ No newline at end of file
