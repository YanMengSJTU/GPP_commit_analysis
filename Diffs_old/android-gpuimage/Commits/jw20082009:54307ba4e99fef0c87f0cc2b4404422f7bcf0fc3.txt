diff --git a/.gitignore b/.gitignore
index a026429f..bd9c5ba2 100644
--- a/.gitignore
+++ b/.gitignore
@@ -9,3 +9,42 @@ target/
 build/
 .gradle/
 local.properties
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/.ninja_deps
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/.ninja_log
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/android_gradle_build.json
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/build.ninja
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/cmake_build_command.txt
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/cmake_build_output.txt
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/cmake_install.cmake
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeCache.txt
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/rules.ninja
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/cmake.check_cache
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/CMakeOutput.log
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/feature_tests.bin
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/feature_tests.c
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/feature_tests.cxx
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/TargetDirectories.txt
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeCCompiler.cmake
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeCXXCompiler.cmake
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeDetermineCompilerABI_C.bin
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeDetermineCompilerABI_CXX.bin
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeSystem.cmake
+library/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/gpuimage-library.dir/jni/yuv-decoder.c.o
+library/.externalNativeBuild/cmake/release/armeabi-v7a/android_gradle_build.json
+library/.externalNativeBuild/cmake/release/armeabi-v7a/build.ninja
+library/.externalNativeBuild/cmake/release/armeabi-v7a/cmake_build_command.txt
+library/.externalNativeBuild/cmake/release/armeabi-v7a/cmake_build_output.txt
+library/.externalNativeBuild/cmake/release/armeabi-v7a/cmake_install.cmake
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeCache.txt
+library/.externalNativeBuild/cmake/release/armeabi-v7a/rules.ninja
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/cmake.check_cache
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/CMakeOutput.log
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/feature_tests.bin
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/feature_tests.c
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/feature_tests.cxx
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/TargetDirectories.txt
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeCCompiler.cmake
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeCXXCompiler.cmake
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeDetermineCompilerABI_C.bin
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeDetermineCompilerABI_CXX.bin
+library/.externalNativeBuild/cmake/release/armeabi-v7a/CMakeFiles/3.6.0-rc2/CMakeSystem.cmake
diff --git a/build.gradle b/build.gradle
index ecc0a83e..e6bf480d 100644
--- a/build.gradle
+++ b/build.gradle
@@ -5,7 +5,8 @@ buildscript {
         jcenter()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.0.0-beta6'
+       classpath 'com.android.tools.build:gradle:3.0.1'
+        classpath 'com.novoda:bintray-release:0.5.0'
     }
 }
 
diff --git a/gradle.properties b/gradle.properties
index 6cb104fd..46d842c5 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -2,8 +2,8 @@ VERSION_NAME=1.4.0
 VERSION_CODE=9
 GROUP=jp.co.cyberagent.android.gpuimage
 
-COMPILE_SDK_VERSION=23
-BUILD_TOOLS_VERSION=23.0.2
+COMPILE_SDK_VERSION=26
+BUILD_TOOLS_VERSION=27.0.3
 TARGET_SDK_VERSION=23
 MIN_SDK_VERSION=8
 
@@ -17,5 +17,3 @@ POM_LICENCE_URL=http://www.apache.org/licenses/LICENSE-2.0.txt
 POM_LICENCE_DIST=repo
 POM_DEVELOPER_ID=pboos
 POM_DEVELOPER_NAME=Patrick Boos
-
-android.useDeprecatedNdk=true
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 6c0732ab..462b217f 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
-#Sat Dec 06 18:27:05 JST 2014
+#Sat Jul 28 17:37:09 CST 2018
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-2.11-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.1-all.zip
diff --git a/library/CMakeLists.txt b/library/CMakeLists.txt
new file mode 100644
index 00000000..0dd4ad1c
--- /dev/null
+++ b/library/CMakeLists.txt
@@ -0,0 +1,26 @@
+cmake_minimum_required(VERSION 3.4.1)
+
+file(GLOB decoder_src jni/*.c)
+
+
+add_library(gpuimage-library SHARED
+            ${decoder_src}
+            )
+
+#支持-std=gnu++11
+#set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=gnu++11")
+
+#判断编译器类型,如果是gcc编译器,则在编译选项中加入c++11支持
+#if(CMAKE_COMPILER_IS_GNUCXX)
+#   set(CMAKE_CXX_FLAGS "-std=c++11 ${CMAKE_CXX_FLAGS}")
+#    message(STATUS "optional:-std=c++11")
+#endif(CMAKE_COMPILER_IS_GNUCXX)
+
+find_library(ndk-lib
+             log
+             )
+
+target_link_libraries(gpuimage-library
+                     android
+					 ${ndk-lib}
+					  )
\ No newline at end of file
diff --git a/library/build.gradle b/library/build.gradle
index 3cd5e8c4..6670109d 100644
--- a/library/build.gradle
+++ b/library/build.gradle
@@ -11,14 +11,23 @@ android {
         versionCode = VERSION_CODE
         versionName = VERSION_NAME
 
-        ndk {
-            moduleName "gpuimage-library"
-            stl "gnustl_shared"
-            abiFilters "all"
-            ldLibs "log"
+    }
+
+    defaultConfig {
+        externalNativeBuild {
+            cmake {
+                cppFlags ""
+                abiFilters 'armeabi-v7a'
+                arguments '-DANDROID_STL=gnustl_shared'
+            }
         }
     }
+    externalNativeBuild {
+        cmake {
+            path 'CMakeLists.txt'
 
+        }
+    }
     sourceSets {
         main {
             manifest.srcFile 'AndroidManifest.xml'
@@ -58,4 +67,4 @@ android {
 }
 
 apply from: 'android-artifacts.gradle'
-apply from: 'central-publish.gradle'
\ No newline at end of file
+apply from: 'central-publish.gradle'
