diff --git a/sample/src/jp/co/cyberagent/android/gpuimage/sample/activity/ActivityMain.java b/sample/src/jp/co/cyberagent/android/gpuimage/sample/activity/ActivityMain.java
index f9dbe4f8..5367d6e4 100644
--- a/sample/src/jp/co/cyberagent/android/gpuimage/sample/activity/ActivityMain.java
+++ b/sample/src/jp/co/cyberagent/android/gpuimage/sample/activity/ActivityMain.java
@@ -38,9 +38,13 @@
     }
 
     @Override public void onClick(final View v) {
-        if (PermissionChecker.checkSelfPermission(this, Manifest.permission.CAMERA)
-            == PackageManager.PERMISSION_DENIED) {
-            ActivityCompat.requestPermissions(this, new String[] { Manifest.permission.CAMERA },
+        if (
+                PermissionChecker.checkSelfPermission(this, Manifest.permission.CAMERA)
+                    == PackageManager.PERMISSION_DENIED ||
+                PermissionChecker.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE)
+                    == PackageManager.PERMISSION_DENIED) {
+            ActivityCompat.requestPermissions(this, new String[]
+                    { Manifest.permission.CAMERA, Manifest.permission.WRITE_EXTERNAL_STORAGE },
                 v.getId());
         } else {
             startActivity(v.getId());
@@ -49,7 +53,9 @@
 
     @Override public void onRequestPermissionsResult(int requestCode, String[] permissions,
         int[] grantResults) {
-        if (grantResults.length != 1 || grantResults[0] == PackageManager.PERMISSION_GRANTED) {
+        if (
+                grantResults[0] == PackageManager.PERMISSION_GRANTED &&
+                grantResults[1] == PackageManager.PERMISSION_GRANTED) {
             startActivity(requestCode);
         } else {
             super.onRequestPermissionsResult(requestCode, permissions, grantResults);
