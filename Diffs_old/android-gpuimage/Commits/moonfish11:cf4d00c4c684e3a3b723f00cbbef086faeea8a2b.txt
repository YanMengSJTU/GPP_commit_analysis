diff --git a/build.gradle b/build.gradle
index 8a29e6b0..88ed0005 100644
--- a/build.gradle
+++ b/build.gradle
@@ -3,9 +3,13 @@
 buildscript {
     repositories {
         jcenter()
+        maven {
+            url 'https://maven.google.com/'
+            name 'Google'
+        }
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.0.0-beta6'
+        classpath 'com.android.tools.build:gradle:2.3.3'
         classpath 'com.novoda:bintray-release:0.3.4'
     }
 }
@@ -14,6 +18,10 @@ allprojects {
     repositories {
         jcenter()
         maven { url("https://oss.sonatype.org/content/repositories/snapshots/") }
+        maven {
+            url 'https://maven.google.com/'
+            name 'Google'
+        }
     }
     tasks.withType(JavaCompile) {
         options.encoding = 'UTF-8'
diff --git a/gradle.properties b/gradle.properties
index 40c44d7f..7c9c6b63 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -2,10 +2,10 @@ VERSION_NAME=1.4.1
 GROUP=jp.co.cyberagent.android.gpuimage
 ARTIFACT_ID=gpuimage-library
 
-COMPILE_SDK_VERSION=23
-BUILD_TOOLS_VERSION=23.0.2
-TARGET_SDK_VERSION=23
-MIN_SDK_VERSION=8
+COMPILE_SDK_VERSION=25
+BUILD_TOOLS_VERSION=25.0.3
+TARGET_SDK_VERSION=22
+MIN_SDK_VERSION=17
 
 POM_DESCRIPTION=Image filters for Android with OpenGL (based on GPUImage for iOS)
 POM_URL=https://github.com/cyberagent/android-gpuimage
@@ -19,4 +19,3 @@ POM_DEVELOPER_ID=cyberagent
 POM_DEVELOPER_NAME=CyberAgent, Inc.
 ISSUE_URL=https://github.com/CyberAgent/android-gpuimage/issues
 
-android.useDeprecatedNdk=true
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 6c0732ab..c8155671 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -3,4 +3,4 @@ distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-2.11-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-3.3-all.zip
diff --git a/library/CMakeLists.txt b/library/CMakeLists.txt
new file mode 100644
index 00000000..8cc814bb
--- /dev/null
+++ b/library/CMakeLists.txt
@@ -0,0 +1,44 @@
+# For more information about using CMake with Android Studio, read the
+# documentation: https://d.android.com/studio/projects/add-native-code.html
+
+# Sets the minimum version of CMake required to build the native library.
+
+cmake_minimum_required(VERSION 3.4.1)
+
+# Creates and names a library, sets it as either STATIC
+# or SHARED, and provides the relative paths to its source code.
+# You can define multiple libraries, and CMake builds them for you.
+# Gradle automatically packages shared libraries with your APK.
+
+add_library( # Sets the name of the library.
+             gpuimage-library
+
+             # Sets the library as a shared library.
+             SHARED
+
+             # Provides a relative path to your source file(s).
+             jni/yuv-decoder.c )
+
+# Searches for a specified prebuilt library and stores the path as a
+# variable. Because CMake includes system libraries in the search path by
+# default, you only need to specify the name of the public NDK library
+# you want to add. CMake verifies that the library exists before
+# completing its build.
+
+find_library( # Sets the name of the path variable.
+              log-lib
+
+              # Specifies the name of the NDK library that
+              # you want CMake to locate.
+              log )
+
+# Specifies libraries CMake should link to your target library. You
+# can link multiple libraries, such as libraries you define in this
+# build script, prebuilt third-party libraries, or system libraries.
+
+target_link_libraries( # Specifies the target library.
+                       gpuimage-library
+
+                       # Links the target library to the log library
+                       # included in the NDK.
+                       ${log-lib} )
\ No newline at end of file
diff --git a/library/build.gradle b/library/build.gradle
index 4e0ded68..640774cb 100644
--- a/library/build.gradle
+++ b/library/build.gradle
@@ -14,11 +14,23 @@ android {
 
         consumerProguardFiles 'proguard-rules.txt'
 
-        ndk {
-            moduleName "gpuimage-library"
-            stl "gnustl_shared"
-            abiFilters "all"
-            ldLibs "log"
+//        ndk {
+//            moduleName "gpuimage-library"
+//            stl "gnustl_shared"
+//            abiFilters "all"
+//            ldLibs "log"
+//        }
+
+        externalNativeBuild {
+            cmake {
+                cppFlags ""
+            }
+        }
+    }
+
+    externalNativeBuild {
+        cmake {
+            path "CMakeLists.txt"
         }
     }
 
