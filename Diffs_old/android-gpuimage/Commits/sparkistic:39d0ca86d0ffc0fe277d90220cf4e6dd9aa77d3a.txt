diff --git a/gradle.properties b/gradle.properties
index 6cb104fd..e6a78e6a 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -2,9 +2,9 @@ VERSION_NAME=1.4.0
 VERSION_CODE=9
 GROUP=jp.co.cyberagent.android.gpuimage
 
-COMPILE_SDK_VERSION=23
-BUILD_TOOLS_VERSION=23.0.2
-TARGET_SDK_VERSION=23
+COMPILE_SDK_VERSION=26
+BUILD_TOOLS_VERSION=26.0.2
+TARGET_SDK_VERSION=26
 MIN_SDK_VERSION=8
 
 POM_DESCRIPTION=Image filters for Android with OpenGL (based on GPUImage for iOS)
diff --git a/library/Android.mk b/library/Android.mk
new file mode 100644
index 00000000..89d87f9f
--- /dev/null
+++ b/library/Android.mk
@@ -0,0 +1,14 @@
+LOCAL_PATH := $(call my-dir)
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := gpuimage-library
+LOCAL_LDFLAGS := -Wl,--build-id
+LOCAL_LDLIBS := \
+	-llog \
+
+LOCAL_SRC_FILES := jni/yuv-decoder.c \
+
+LOCAL_C_INCLUDES += jni
+LOCAL_C_INCLUDES += src/debug/jni
+
+include $(BUILD_SHARED_LIBRARY)
diff --git a/library/build.gradle b/library/build.gradle
index 3cd5e8c4..65da392c 100644
--- a/library/build.gradle
+++ b/library/build.gradle
@@ -14,7 +14,7 @@ android {
         ndk {
             moduleName "gpuimage-library"
             stl "gnustl_shared"
-            abiFilters "all"
+//            abiFilters "all"
             ldLibs "log"
         }
     }
@@ -55,6 +55,11 @@ android {
             from tasks["javadoc${variant.name.capitalize()}"]
         }
     }
+    externalNativeBuild {
+        ndkBuild {
+            path 'Android.mk'
+        }
+    }
 }
 
 apply from: 'android-artifacts.gradle'
