diff --git a/sample/src/main/java/com/example/sqlbrite/todo/controler/LoginViewControler.java b/sample/src/main/java/com/example/sqlbrite/todo/controler/LoginViewControler.java
index ca41c5d..ecd767c 100644
--- a/sample/src/main/java/com/example/sqlbrite/todo/controler/LoginViewControler.java
+++ b/sample/src/main/java/com/example/sqlbrite/todo/controler/LoginViewControler.java
@@ -1,5 +1,6 @@
 package com.example.sqlbrite.todo.controler;
 
+import com.example.sqlbrite.todo.model.local.preferences.AppPrefs;
 import com.example.sqlbrite.todo.model.users.UserManager;
 import com.example.sqlbrite.todo.model.users.UserSession;
 import com.example.sqlbrite.todo.schedulers.SchedulerProvider;
@@ -23,14 +24,17 @@
 public class LoginViewControler {
 
     private final UserManager mUserManager;
+    private final AppPrefs mAppPrefs;
     private final SchedulerProvider mSchedulerProvider;
 
     private UserSession mUserSession = null;
 
     @Inject
     public LoginViewControler(UserManager userManager,
+                              AppPrefs appPrefs,
                               SchedulerProvider schedulerProvider) {
         mUserManager = userManager;
+        mAppPrefs = appPrefs;
         mSchedulerProvider = schedulerProvider;
     }
 
@@ -52,6 +56,7 @@ public LoginViewControler(UserManager userManager,
                     @Override
                     public void accept(UserSession userSession) throws Exception {
                         mUserSession = userSession;
+                        mAppPrefs.lastLoginUserId().set(userSession.user().id());
                     }
                 });
     }
diff --git a/sample/src/main/java/com/example/sqlbrite/todo/di/AppScopeModule.java b/sample/src/main/java/com/example/sqlbrite/todo/di/AppScopeModule.java
index 2578b61..b875cd1 100644
--- a/sample/src/main/java/com/example/sqlbrite/todo/di/AppScopeModule.java
+++ b/sample/src/main/java/com/example/sqlbrite/todo/di/AppScopeModule.java
@@ -22,6 +22,7 @@
 import com.example.sqlbrite.todo.controler.LoginViewControler;
 import com.example.sqlbrite.todo.di.model.AppScopeModelModule;
 import com.example.sqlbrite.todo.di.schedulers.SchedulerModule;
+import com.example.sqlbrite.todo.model.local.preferences.AppPrefs;
 import com.example.sqlbrite.todo.model.users.UserManager;
 import com.example.sqlbrite.todo.schedulers.SchedulerProvider;
 
@@ -64,7 +65,7 @@ public Context provideContext() {
 
     @Provides
     @Singleton
-    public LoginViewControler provideLoginViewModel(UserManager userManager, SchedulerProvider schedulerProvider) {
-        return new LoginViewControler(userManager, schedulerProvider);
+    public LoginViewControler provideLoginViewControler(UserManager userManager, AppPrefs appPrefs, SchedulerProvider schedulerProvider) {
+        return new LoginViewControler(userManager, appPrefs, schedulerProvider);
     }
 }
diff --git a/sample/src/main/java/com/example/sqlbrite/todo/di/model/AppScopeModelModule.java b/sample/src/main/java/com/example/sqlbrite/todo/di/model/AppScopeModelModule.java
index 48dbcea..c67d7e6 100644
--- a/sample/src/main/java/com/example/sqlbrite/todo/di/model/AppScopeModelModule.java
+++ b/sample/src/main/java/com/example/sqlbrite/todo/di/model/AppScopeModelModule.java
@@ -18,7 +18,6 @@
 import com.example.sqlbrite.todo.di.model.local.preferences.AppScopePreferencesModule;
 import com.example.sqlbrite.todo.di.model.remote.NetModule;
 import com.example.sqlbrite.todo.di.model.remote.TodoApiModule.GitHubApiInterface;
-import com.example.sqlbrite.todo.model.local.preferences.AppPrefs;
 import com.example.sqlbrite.todo.model.users.LoginManager;
 import com.example.sqlbrite.todo.model.users.UserManager;
 import com.example.sqlbrite.todo.schedulers.SchedulerProvider;
@@ -38,8 +37,8 @@
 
     @Provides
     @Singleton
-    public LoginManager provideLoginManager(GitHubApiInterface gitHubApiInterface, AppPrefs appPrefs, SchedulerProvider schedulerProvider) {
-        return new LoginManager.LoginManagerImpl(gitHubApiInterface, appPrefs, schedulerProvider);
+    public LoginManager provideLoginManager(GitHubApiInterface gitHubApiInterface, SchedulerProvider schedulerProvider) {
+        return new LoginManager.LoginManagerImpl(gitHubApiInterface, schedulerProvider);
     }
 
     @Provides
diff --git a/sample/src/main/java/com/example/sqlbrite/todo/model/local/preferences/AppPrefs.java b/sample/src/main/java/com/example/sqlbrite/todo/model/local/preferences/AppPrefs.java
index a6c1731..5d8f8d2 100644
--- a/sample/src/main/java/com/example/sqlbrite/todo/model/local/preferences/AppPrefs.java
+++ b/sample/src/main/java/com/example/sqlbrite/todo/model/local/preferences/AppPrefs.java
@@ -4,7 +4,7 @@
 import com.f2prateek.rx.preferences2.RxSharedPreferences;
 
 /**
- * @author Administrator
+ * @author Guang1234567
  * @date 2018/3/21 12:35
  */
 
diff --git a/sample/src/main/java/com/example/sqlbrite/todo/model/local/preferences/UserPrefs.java b/sample/src/main/java/com/example/sqlbrite/todo/model/local/preferences/UserPrefs.java
index 644fc6a..05e4a4d 100644
--- a/sample/src/main/java/com/example/sqlbrite/todo/model/local/preferences/UserPrefs.java
+++ b/sample/src/main/java/com/example/sqlbrite/todo/model/local/preferences/UserPrefs.java
@@ -4,7 +4,7 @@
 import com.f2prateek.rx.preferences2.RxSharedPreferences;
 
 /**
- * @author Administrator
+ * @author Guang1234567
  * @date 2018/3/21 12:36
  */
 
diff --git a/sample/src/main/java/com/example/sqlbrite/todo/model/users/LoginManager.java b/sample/src/main/java/com/example/sqlbrite/todo/model/users/LoginManager.java
index 57f8a32..9f1af8a 100644
--- a/sample/src/main/java/com/example/sqlbrite/todo/model/users/LoginManager.java
+++ b/sample/src/main/java/com/example/sqlbrite/todo/model/users/LoginManager.java
@@ -1,7 +1,6 @@
 package com.example.sqlbrite.todo.model.users;
 
 import com.example.sqlbrite.todo.di.model.remote.TodoApiModule.GitHubApiInterface;
-import com.example.sqlbrite.todo.model.local.preferences.AppPrefs;
 import com.example.sqlbrite.todo.schedulers.SchedulerProvider;
 
 import java.util.Date;
@@ -10,7 +9,6 @@
 
 import io.reactivex.Completable;
 import io.reactivex.Single;
-import io.reactivex.functions.Consumer;
 
 /**
  * @author Guang1234567
@@ -26,15 +24,12 @@
     class LoginManagerImpl implements LoginManager {
 
         private final GitHubApiInterface mGitHubApiInterface;
-        private final AppPrefs mAppPrefs;
         private final SchedulerProvider mSchedulerProvider;
 
         @Inject
         public LoginManagerImpl(GitHubApiInterface gitHubApiInterface,
-                                AppPrefs appPrefs,
                                 SchedulerProvider schedulerProvider) {
             mGitHubApiInterface = gitHubApiInterface;
-            mAppPrefs = appPrefs;
             mSchedulerProvider = schedulerProvider;
         }
 
@@ -48,12 +43,7 @@ public LoginManagerImpl(GitHubApiInterface gitHubApiInterface,
                                     .name("伪造的人")
                                     .timestamp(new Date())
                                     .build()
-                    ).doOnSuccess(new Consumer<User>() {
-                        @Override
-                        public void accept(User user) throws Exception {
-                            mAppPrefs.lastLoginUserId().set(user.id());
-                        }
-                    });
+                    );
         }
 
         @Override
