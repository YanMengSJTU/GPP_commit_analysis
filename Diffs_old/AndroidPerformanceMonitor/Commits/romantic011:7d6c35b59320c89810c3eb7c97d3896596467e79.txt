diff --git a/blockcanary-analyzer/build.gradle b/blockcanary-analyzer/build.gradle
index 83af379..1030e7f 100644
--- a/blockcanary-analyzer/build.gradle
+++ b/blockcanary-analyzer/build.gradle
@@ -5,7 +5,7 @@ android {
     compileSdkVersion LIBRARY_COMPILE_SDK_VERSION
     buildToolsVersion LIBRARY_BUILD_TOOLS_VERSION
 
-    defaultConfig {
+  defaultConfig {
         minSdkVersion LIBRARY_MIN_SDK_VERSION
         targetSdkVersion LIBRARY_TARGET_SDK_VERSION
         versionCode 1
@@ -20,5 +20,5 @@ android {
 }
 
 dependencies {
-    compile fileTree(dir: 'libs', include: ['*.jar'])
+    implementation fileTree(dir: 'libs', include: ['*.jar'])
 }
diff --git a/blockcanary-android-no-op/build.gradle b/blockcanary-android-no-op/build.gradle
index 83af379..e8054dc 100644
--- a/blockcanary-android-no-op/build.gradle
+++ b/blockcanary-android-no-op/build.gradle
@@ -20,5 +20,5 @@ android {
 }
 
 dependencies {
-    compile fileTree(dir: 'libs', include: ['*.jar'])
+    implementation fileTree(dir: 'libs', include: ['*.jar'])
 }
diff --git a/blockcanary-android/build.gradle b/blockcanary-android/build.gradle
index ebe613e..dccc3b6 100644
--- a/blockcanary-android/build.gradle
+++ b/blockcanary-android/build.gradle
@@ -20,7 +20,7 @@ android {
 }
 
 dependencies {
-    compile fileTree(include: ['*.jar'], dir: 'libs')
+    implementation fileTree(include: ['*.jar'], dir: 'libs')
 //    compile project(':blockcanary-analyzer')
-    compile 'com.github.markzhai:blockcanary-analyzer:1.5.0'
+    api 'com.github.markzhai:blockcanary-analyzer:1.5.0'
 }
diff --git a/blockcanary-sample/build.gradle b/blockcanary-sample/build.gradle
index 32d69b8..ab198f3 100644
--- a/blockcanary-sample/build.gradle
+++ b/blockcanary-sample/build.gradle
@@ -20,10 +20,10 @@ android {
 }
 
 dependencies {
-    compile fileTree(dir: 'libs', include: ['*.jar'])
-    debugCompile project(':blockcanary-android')
-    releaseCompile project(':blockcanary-android-no-op')
+    implementation fileTree(dir: 'libs', include: ['*.jar'])
+    debugImplementation project(':blockcanary-android')
+    releaseImplementation project(':blockcanary-android-no-op')
 
-    compile 'com.android.support:appcompat-v7:24.2.0'
-    compile 'com.android.support:design:24.2.0'
+    implementation 'com.android.support:appcompat-v7:24.2.0'
+    implementation 'com.android.support:design:24.2.0'
 }
diff --git a/build.gradle b/build.gradle
index 2e498be..54401c9 100644
--- a/build.gradle
+++ b/build.gradle
@@ -4,9 +4,10 @@ buildscript {
     repositories {
         mavenCentral()
         jcenter()
+        google()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.2.2'
+        classpath 'com.android.tools.build:gradle:3.1.1'
     }
 }
 
@@ -14,10 +15,11 @@ allprojects {
     repositories {
         mavenCentral()
         jcenter()
+        google()
     }
     ext {
         LIBRARY_COMPILE_SDK_VERSION = 23
-        LIBRARY_BUILD_TOOLS_VERSION = "23.0.3"
+        LIBRARY_BUILD_TOOLS_VERSION = "27.0.3"
         LIBRARY_MIN_SDK_VERSION = 9
         LIBRARY_TARGET_SDK_VERSION = 22
     }
diff --git a/gradle.properties b/gradle.properties
index d4b7bce..8243494 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -18,4 +18,9 @@ org.gradle.jvmargs=-Xmx8192M
 org.gradle.daemon=true
 org.gradle.configureondemand=true
 org.gradle.parallel=true
-android.useDeprecatedNdk=true
\ No newline at end of file
+android.useDeprecatedNdk=true
+#
+#systemProp.https.proxyPort=1087
+#systemProp.http.proxyHost=127.0.0.1
+#systemProp.https.proxyHost=127.0.0.1
+#systemProp.http.proxyPort=1087
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 586936a..bee2a2a 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -3,4 +3,4 @@ distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-2.14.1-all.zip
+distributionUrl=file\:/Users/lyl/developer/software/android/gradle/gradle-4.7-all.zip
