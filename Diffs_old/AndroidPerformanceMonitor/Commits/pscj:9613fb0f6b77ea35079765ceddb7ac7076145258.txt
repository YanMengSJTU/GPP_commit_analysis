diff --git a/blockcanary-analyzer/src/main/AndroidManifest.xml b/blockcanary-analyzer/src/main/AndroidManifest.xml
index 36f52b2..0809f95 100644
--- a/blockcanary-analyzer/src/main/AndroidManifest.xml
+++ b/blockcanary-analyzer/src/main/AndroidManifest.xml
@@ -3,8 +3,12 @@
     xmlns:android="http://schemas.android.com/apk/res/android">
 
     <!-- To store the heap dumps and leak analysis results. -->
-    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
-    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
+    <uses-permission
+        android:name="android.permission.WRITE_EXTERNAL_STORAGE"
+        android:maxSdkVersion="18" />
+    <uses-permission
+        android:name="android.permission.READ_PHONE_STATE"
+        android:maxSdkVersion="18" />
 
     <application/>
 
diff --git a/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/BlockCanaryInternals.java b/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/BlockCanaryInternals.java
index 895d0d6..195383f 100644
--- a/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/BlockCanaryInternals.java
+++ b/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/BlockCanaryInternals.java
@@ -15,6 +15,7 @@
  */
 package com.github.moduth.blockcanary;
 
+import android.os.Build;
 import android.os.Environment;
 import android.os.Looper;
 
@@ -120,9 +121,15 @@ static String getPath() {
         String logPath = BlockCanaryInternals.getContext()
                 == null ? "" : BlockCanaryInternals.getContext().providePath();
 
-        if (Environment.MEDIA_MOUNTED.equals(state)
-                && Environment.getExternalStorageDirectory().canWrite()) {
-            return Environment.getExternalStorageDirectory().getPath() + logPath;
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
+            if (Environment.MEDIA_MOUNTED.equals(state) ) {
+                return  BlockCanaryInternals.getContext().provideContext().getExternalFilesDir(logPath).getPath();
+            }
+        }else{
+            if (Environment.MEDIA_MOUNTED.equals(state)
+                    && Environment.getExternalStorageDirectory().canWrite()) {
+                return Environment.getExternalStorageDirectory().getPath() + logPath;
+            }
         }
         return getContext().provideContext().getFilesDir() + BlockCanaryInternals.getContext().providePath();
     }
diff --git a/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/internal/BlockInfo.java b/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/internal/BlockInfo.java
index 1b07edd..1cf6650 100644
--- a/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/internal/BlockInfo.java
+++ b/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/internal/BlockInfo.java
@@ -46,7 +46,6 @@
     public static final String KEY_QUA = "qua";
     public static final String KEY_MODEL = "model";
     public static final String KEY_API = "api-level";
-    public static final String KEY_IMEI = "imei";
     public static final String KEY_UID = "uid";
     public static final String KEY_CPU_CORE = "cpu-core";
     public static final String KEY_CPU_BUSY = "cpu-busy";
@@ -70,13 +69,11 @@
      * The International Mobile Equipment Identity or IMEI /aɪˈmiː/ is a number,
      * usually unique, to identify 3GPP and iDEN mobile phones
      */
-    public static String sImei = "";
     public static int sCpuCoreNum = -1;
 
     public String qualifier;
     public String model;
     public String apiLevel = "";
-    public String imei = "";
     public int cpuCoreNum = -1;
 
     // Per Block Info fields
@@ -106,16 +103,6 @@
         sModel = Build.MODEL;
         sApiLevel = Build.VERSION.SDK_INT + " " + VERSION.RELEASE;
         sQualifier = BlockCanaryInternals.getContext().provideQualifier();
-        try {
-            TelephonyManager telephonyManager = (TelephonyManager) BlockCanaryInternals
-                    .getContext()
-                    .provideContext()
-                    .getSystemService(Context.TELEPHONY_SERVICE);
-            sImei = telephonyManager.getDeviceId();
-        } catch (Exception exception) {
-            Log.e(TAG, NEW_INSTANCE_METHOD, exception);
-            sImei = EMPTY_IMEI;
-        }
     }
 
     public BlockInfo() {
@@ -138,7 +125,6 @@ public static BlockInfo newInstance() {
         blockInfo.model = sModel;
         blockInfo.apiLevel = sApiLevel;
         blockInfo.qualifier = sQualifier;
-        blockInfo.imei = sImei;
         blockInfo.uid = BlockCanaryInternals.getContext().provideUid();
         blockInfo.processName = ProcessUtils.myProcessName();
         blockInfo.network = BlockCanaryInternals.getContext().provideNetworkType();
@@ -176,7 +162,6 @@ public BlockInfo flushString() {
         basicSb.append(KEY_QUA).append(KV).append(qualifier).append(separator);
         basicSb.append(KEY_VERSION_NAME).append(KV).append(versionName).append(separator);
         basicSb.append(KEY_VERSION_CODE).append(KV).append(versionCode).append(separator);
-        basicSb.append(KEY_IMEI).append(KV).append(imei).append(separator);
         basicSb.append(KEY_UID).append(KV).append(uid).append(separator);
         basicSb.append(KEY_NETWORK).append(KV).append(network).append(separator);
         basicSb.append(KEY_MODEL).append(KV).append(model).append(separator);
diff --git a/blockcanary-android/build.gradle b/blockcanary-android/build.gradle
index ebe613e..3e8ccc1 100644
--- a/blockcanary-android/build.gradle
+++ b/blockcanary-android/build.gradle
@@ -21,6 +21,6 @@ android {
 
 dependencies {
     compile fileTree(include: ['*.jar'], dir: 'libs')
-//    compile project(':blockcanary-analyzer')
-    compile 'com.github.markzhai:blockcanary-analyzer:1.5.0'
+    compile project(':blockcanary-analyzer')
+    //compile 'com.github.markzhai:blockcanary-analyzer:1.5.0'
 }
diff --git a/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/BlockInfoEx.java b/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/BlockInfoEx.java
index 4733b69..fa6b93a 100644
--- a/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/BlockInfoEx.java
+++ b/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/BlockInfoEx.java
@@ -38,8 +38,6 @@ public static BlockInfoEx newInstance(File file) {
                     blockInfo.model = line.split(KV)[1];
                 } else if (line.startsWith(KEY_API)) {
                     blockInfo.apiLevel = line.split(KV)[1];
-                } else if (line.startsWith(KEY_IMEI)) {
-                    blockInfo.imei = line.split(KV)[1];
                 } else if (line.startsWith(KEY_CPU_CORE)) {
                     blockInfo.cpuCoreNum = Integer.valueOf(line.split(KV)[1]);
                 } else if (line.startsWith(KEY_UID)) {
