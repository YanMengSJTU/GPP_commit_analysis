diff --git a/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/AbstractSampler.java b/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/AbstractSampler.java
index 311f7ba..862116b 100644
--- a/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/AbstractSampler.java
+++ b/blockcanary-analyzer/src/main/java/com/github/moduth/blockcanary/AbstractSampler.java
@@ -53,8 +53,7 @@ public void start() {
         mShouldSample.set(true);
 
         HandlerThreadFactory.getTimerThreadHandler().removeCallbacks(mRunnable);
-        HandlerThreadFactory.getTimerThreadHandler().postDelayed(mRunnable,
-                BlockCanaryInternals.getInstance().getSampleDelay());
+        HandlerThreadFactory.getTimerThreadHandler().postDelayed(mRunnable, BlockCanaryInternals.getInstance().getSampleDelay());
     }
 
     public void stop() {
diff --git a/blockcanary-android/build.gradle b/blockcanary-android/build.gradle
index 3a53b5e..32d0bf9 100644
--- a/blockcanary-android/build.gradle
+++ b/blockcanary-android/build.gradle
@@ -21,6 +21,6 @@ android {
 
 dependencies {
     implementation fileTree(include: ['*.jar'], dir: 'libs')
-//    compile project(':blockcanary-analyzer')
-    implementation 'com.github.markzhai:blockcanary-analyzer:1.5.0'
+    api project(':blockcanary-analyzer')
+//    implementation 'com.github.markzhai:blockcanary-analyzer:1.5.0'
 }
diff --git a/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/DetailAdapter.java b/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/DetailAdapter.java
index c1599c3..d8ab34d 100644
--- a/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/DetailAdapter.java
+++ b/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/DetailAdapter.java
@@ -47,15 +47,13 @@ public View getView(int position, View convertView, ViewGroup parent) {
         Context context = parent.getContext();
         if (getItemViewType(position) == TOP_ROW) {
             if (convertView == null) {
-                convertView =
-                        LayoutInflater.from(context).inflate(R.layout.block_canary_ref_top_row, parent, false);
+                convertView = LayoutInflater.from(context).inflate(R.layout.block_canary_ref_top_row, parent, false);
             }
             TextView textView = findById(convertView, R.id.__leak_canary_row_text);
             textView.setText(context.getPackageName());
         } else {
             if (convertView == null) {
-                convertView =
-                        LayoutInflater.from(context).inflate(R.layout.block_canary_ref_row, parent, false);
+                convertView = LayoutInflater.from(context).inflate(R.layout.block_canary_ref_row, parent, false);
             }
             TextView textView = findById(convertView, R.id.__leak_canary_row_text);
 
@@ -78,9 +76,8 @@ public View getView(int position, View convertView, ViewGroup parent) {
     }
 
     private DisplayConnectorView.Type connectorViewType(int position) {
-        return (position == 1) ? DisplayConnectorView.Type.START : (
-                (position == getCount() - 1) ? DisplayConnectorView.Type.END :
-                        DisplayConnectorView.Type.NODE);
+        return (position == 1) ? DisplayConnectorView.Type.START : ((position == getCount() - 1)
+                ? DisplayConnectorView.Type.END : DisplayConnectorView.Type.NODE);
     }
 
     private String elementToHtmlString(String element, int position, boolean folding) {
@@ -128,7 +125,6 @@ private String elementToHtmlString(String element, int position, boolean folding
 
     public void update(BlockInfo blockInfo) {
         if (mBlockInfo != null && blockInfo.timeStart.equals(mBlockInfo.timeStart)) {
-            // Same data, nothing to change.
             return;
         }
         mBlockInfo = blockInfo;
diff --git a/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/DisplayActivity.java b/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/DisplayActivity.java
index cdd30b8..b0b69ff 100644
--- a/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/DisplayActivity.java
+++ b/blockcanary-android/src/main/java/com/github/moduth/blockcanary/ui/DisplayActivity.java
@@ -23,25 +23,14 @@
 import android.content.DialogInterface;
 import android.content.Intent;
 import android.net.Uri;
-import android.os.Build;
 import android.os.Bundle;
 import android.os.Handler;
 import android.os.Looper;
 import android.text.TextUtils;
 import android.text.format.DateUtils;
 import android.util.Log;
-import android.view.LayoutInflater;
-import android.view.Menu;
-import android.view.MenuItem;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.AdapterView;
-import android.widget.BaseAdapter;
-import android.widget.Button;
-import android.widget.ListAdapter;
-import android.widget.ListView;
-import android.widget.TextView;
-
+import android.view.*;
+import android.widget.*;
 import com.github.moduth.blockcanary.BlockCanaryContext;
 import com.github.moduth.blockcanary.BlockCanaryInternals;
 import com.github.moduth.blockcanary.LogWriter;
@@ -101,16 +90,15 @@ protected void onCreate(Bundle savedInstanceState) {
 
         setContentView(R.layout.block_canary_display_leak);
 
-        mListView = (ListView) findViewById(R.id.__leak_canary_display_leak_list);
-        mFailureView = (TextView) findViewById(R.id.__leak_canary_display_leak_failure);
-        mActionButton = (Button) findViewById(R.id.__leak_canary_action);
+        mListView = findViewById(R.id.__leak_canary_display_leak_list);
+        mFailureView = findViewById(R.id.__leak_canary_display_leak_failure);
+        mActionButton = findViewById(R.id.__leak_canary_action);
 
         mMaxStoredBlockCount = getResources().getInteger(R.integer.block_canary_max_stored_count);
 
         updateUi();
     }
 
-    // No, it's not deprecated. Android lies.
     @Override
     public Object onRetainNonConfigurationInstance() {
         return mBlockInfoEntries;
@@ -199,10 +187,7 @@ private void shareBlock(BlockInfoEx blockInfo) {
 
     private void shareHeapDump(BlockInfoEx blockInfo) {
         File heapDumpFile = blockInfo.logFile;
-
-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
-            heapDumpFile.setReadable(true, false);
-        }
+        heapDumpFile.setReadable(true, false);
         Intent intent = new Intent(Intent.ACTION_SEND);
         intent.setType("application/octet-stream");
         intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(heapDumpFile));
@@ -240,12 +225,10 @@ public void onItemClick(AdapterView<?> parent, View view, int position, long id)
                     updateUi();
                 }
             });
-            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
-                invalidateOptionsMenu();
-                ActionBar actionBar = getActionBar();
-                if (actionBar != null) {
-                    actionBar.setDisplayHomeAsUpEnabled(false);
-                }
+            invalidateOptionsMenu();
+            ActionBar actionBar = getActionBar();
+            if (actionBar != null) {
+                actionBar.setDisplayHomeAsUpEnabled(false);
             }
             setTitle(getString(R.string.block_canary_block_list_title, getPackageName()));
             mActionButton.setText(R.string.block_canary_delete_all);
@@ -287,12 +270,10 @@ public void onItemClick(AdapterView<?> parent, View view, int position, long id)
                     adapter.toggleRow(position);
                 }
             });
-            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
-                invalidateOptionsMenu();
-                ActionBar actionBar = getActionBar();
-                if (actionBar != null) {
-                    actionBar.setDisplayHomeAsUpEnabled(true);
-                }
+            invalidateOptionsMenu();
+            ActionBar actionBar = getActionBar();
+            if (actionBar != null) {
+                actionBar.setDisplayHomeAsUpEnabled(true);
             }
             mActionButton.setVisibility(VISIBLE);
             mActionButton.setText(R.string.block_canary_delete);
@@ -317,7 +298,7 @@ private BlockInfoEx getBlock(String startTime) {
             return null;
         }
         for (BlockInfoEx blockInfo : mBlockInfoEntries) {
-            if (blockInfo.timeStart != null && startTime.equals(blockInfo.timeStart)) {
+            if (startTime.equals(blockInfo.timeStart)) {
                 return blockInfo;
             }
         }
@@ -347,8 +328,8 @@ public View getView(int position, View convertView, ViewGroup parent) {
                 convertView = LayoutInflater.from(DisplayActivity.this)
                         .inflate(R.layout.block_canary_block_row, parent, false);
             }
-            TextView titleView = (TextView) convertView.findViewById(R.id.__leak_canary_row_text);
-            TextView timeView = (TextView) convertView.findViewById(R.id.__leak_canary_row_time);
+            TextView titleView = convertView.findViewById(R.id.__leak_canary_row_text);
+            TextView timeView = convertView.findViewById(R.id.__leak_canary_row_time);
             BlockInfoEx blockInfo = getItem(position);
 
             String index;
diff --git a/blockcanary-sample/src/main/java/com/example/blockcanary/AppContext.java b/blockcanary-sample/src/main/java/com/example/blockcanary/AppContext.java
index 612df72..c645d8c 100644
--- a/blockcanary-sample/src/main/java/com/example/blockcanary/AppContext.java
+++ b/blockcanary-sample/src/main/java/com/example/blockcanary/AppContext.java
@@ -18,7 +18,6 @@
 import android.content.pm.PackageInfo;
 import android.content.pm.PackageManager;
 import android.util.Log;
-
 import com.github.moduth.blockcanary.BlockCanaryContext;
 
 import java.util.List;
diff --git a/build.gradle b/build.gradle
index 5843ee8..5a1da05 100644
--- a/build.gradle
+++ b/build.gradle
@@ -8,6 +8,7 @@ buildscript {
     }
     dependencies {
         classpath 'com.android.tools.build:gradle:3.1.3'
+        classpath 'com.github.dcendents:android-maven-gradle-plugin:2.1'
     }
 }
 
