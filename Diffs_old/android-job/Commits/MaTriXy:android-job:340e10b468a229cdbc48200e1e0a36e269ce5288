diff --git a/library/src/androidTest/res/values/integers.xml b/library/src/androidTest/res/values/integers.xml
deleted file mode 100644
index 3da3d41..0000000
--- a/library/src/androidTest/res/values/integers.xml
+++ /dev/null
@@ -1,5 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<resources>
-    <!-- required to make test project compile with provided dependency -->
-    <integer name="google_play_services_version">9683000</integer>
-</resources>
\ No newline at end of file
diff --git a/library/src/androidTest/java/com/evernote/android/job/DatabaseUpgradeTest.java b/library/src/test/java/com/evernote/android/job/DatabaseUpgradeTest.java
similarity index 91%
rename from library/src/androidTest/java/com/evernote/android/job/DatabaseUpgradeTest.java
rename to library/src/test/java/com/evernote/android/job/DatabaseUpgradeTest.java
index 10e3975..5381a89 100644
--- a/library/src/androidTest/java/com/evernote/android/job/DatabaseUpgradeTest.java
+++ b/library/src/test/java/com/evernote/android/job/DatabaseUpgradeTest.java
@@ -4,16 +4,15 @@
 import android.content.Context;
 import android.database.sqlite.SQLiteDatabase;
 import android.database.sqlite.SQLiteOpenHelper;
-import android.support.test.InstrumentationRegistry;
-import android.support.test.filters.LargeTest;
-import android.support.test.runner.AndroidJUnit4;
 
+import com.evernote.android.job.test.JobRobolectricTestRunner;
 import com.evernote.android.job.util.support.PersistableBundleCompat;
-import com.facebook.stetho.Stetho;
 
-import org.junit.BeforeClass;
+import org.junit.FixMethodOrder;
 import org.junit.Test;
 import org.junit.runner.RunWith;
+import org.junit.runners.MethodSorters;
+import org.robolectric.RuntimeEnvironment;
 
 import java.util.concurrent.TimeUnit;
 
@@ -36,23 +35,18 @@
 import static com.evernote.android.job.JobStorage.COLUMN_TRANSIENT;
 import static com.evernote.android.job.JobStorage.DATABASE_NAME;
 import static com.evernote.android.job.JobStorage.JOB_TABLE_NAME;
-import static org.assertj.core.api.Assertions.assertThat;
+import static org.assertj.core.api.Java6Assertions.assertThat;
 
 /**
  * @author rwondratschek
  */
-@RunWith(AndroidJUnit4.class)
-@LargeTest
+@RunWith(JobRobolectricTestRunner.class)
+@FixMethodOrder(MethodSorters.JVM)
 public class DatabaseUpgradeTest {
 
-    @BeforeClass
-    public static void beforeClass() {
-        Stetho.initializeWithDefaults(InstrumentationRegistry.getContext());
-    }
-
     @Test
     public void testDatabaseUpgrade1to3() {
-        Context context = InstrumentationRegistry.getContext();
+        Context context = RuntimeEnvironment.application;
         context.deleteDatabase(DATABASE_NAME);
 
         JobOpenHelper1 openHelper = new JobOpenHelper1(context);
@@ -64,7 +58,7 @@ public void testDatabaseUpgrade1to3() {
 
     @Test
     public void testDatabaseUpgrade2to3() {
-        Context context = InstrumentationRegistry.getContext();
+        Context context = RuntimeEnvironment.application;
         context.deleteDatabase(DATABASE_NAME);
 
         JobOpenHelper2 openHelper = new JobOpenHelper2(context);
@@ -76,7 +70,7 @@ public void testDatabaseUpgrade2to3() {
 
     @Test
     public void testDatabaseUpgrade1to2to3() {
-        Context context = InstrumentationRegistry.getContext();
+        Context context = RuntimeEnvironment.application;
         context.deleteDatabase(DATABASE_NAME);
 
         JobOpenHelper1 openHelper = new JobOpenHelper1(context);
@@ -167,12 +161,12 @@ public Job create(String tag) {
         JobManager.instance().destroy();
     }
 
-    private abstract class UpgradeAbleJobOpenHelper extends SQLiteOpenHelper {
+    private abstract static class UpgradeAbleJobOpenHelper extends SQLiteOpenHelper {
 
         private boolean mDatabaseCreated;
         private boolean mDatabaseUpgraded;
 
-        public UpgradeAbleJobOpenHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
+        UpgradeAbleJobOpenHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
             super(context, name, factory, version);
         }
 
@@ -222,9 +216,9 @@ protected ContentValues createBaseContentValues(int id) {
         }
     }
 
-    private class JobOpenHelper1 extends UpgradeAbleJobOpenHelper {
+    private static final class JobOpenHelper1 extends UpgradeAbleJobOpenHelper {
 
-        public JobOpenHelper1(Context context) {
+        JobOpenHelper1(Context context) {
             super(context, DATABASE_NAME, null, 1);
         }
 
@@ -259,9 +253,9 @@ private void createJobTable(SQLiteDatabase db) {
         }
     }
 
-    private class JobOpenHelper2 extends UpgradeAbleJobOpenHelper {
+    private static final class JobOpenHelper2 extends UpgradeAbleJobOpenHelper {
 
-        public JobOpenHelper2(Context context) {
+        JobOpenHelper2(Context context) {
             super(context, DATABASE_NAME, null, 2);
         }
 
