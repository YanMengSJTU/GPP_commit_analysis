diff --git a/.gitignore b/.gitignore
index 4a8da3bc..2956cca9 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1 +1,7 @@
-.gradle
\ No newline at end of file
+.gradle
+/buildSrc/build/
+/buildSrc/GreenDaoPlugin/build/
+/buildSrc/.nb-gradle/profiles/private/
+/DaoExampleGenerator/.nb-gradle/profiles/private/
+/buildSrc/DaoGenerator/.nb-gradle/profiles/private/
+/buildSrc/GreenDaoPlugin/.nb-gradle/profiles/private/
\ No newline at end of file
diff --git a/DaoExampleGenerator/build.gradle b/DaoExampleGenerator/build.gradle
index c5c53706..6ca6303a 100644
--- a/DaoExampleGenerator/build.gradle
+++ b/DaoExampleGenerator/build.gradle
@@ -1,27 +1,31 @@
-apply plugin: 'java'
-apply plugin: 'maven'
-apply plugin:'application'
+//apply plugin: 'java'
+//apply plugin: 'application'
+apply plugin: 'greendao'
 
-mainClassName = "de.greenrobot.daogenerator.gentest.ExampleDaoGenerator"
+//mainClassName = "de.greenrobot.daogenerator.gentest.ExampleDaoGenerator"
 
-repositories {
-    mavenLocal()
-    mavenCentral()
-}
+//dependencies {
+//    compile project(':DaoGenerator')
+//}
 
-dependencies {
-    compile project(':DaoGenerator')
-}
+//sourceSets {
+//    main {
+//        java {
+//            srcDir 'src'
+//            srcDir 'src-gen'
+//        }
+//    }
+//}
 
-sourceSets {
-    main {
-        java {
-            srcDir 'src'
-            srcDir 'src-gen'
-        }
-    }
-}
+//artifacts {
+//    archives jar
+//}
 
-artifacts {
-    archives jar
+compileGenerator {
+  source = fileTree('src')
+  sourceCompatibility = 1.5
+  targetCompatibility = 1.5
+  classpath = files('../buildSrc/DaoGenerator/build/classes/main')
+  destinationDir = file('build/myClasses')
+  dependencyCacheDir = file('build/myCache')
 }
diff --git a/DaoTest/build.gradle b/DaoTest/build.gradle
index 5f1f2092..6bc2f98d 100644
--- a/DaoTest/build.gradle
+++ b/DaoTest/build.gradle
@@ -1,13 +1,3 @@
-buildscript {
-    repositories {
-        mavenCentral()
-    }
-
-    dependencies {
-        classpath 'com.android.tools.build:gradle:0.3'
-    }
-}
-
 apply plugin: 'android'
 
 
diff --git a/build.gradle b/build.gradle
index e86ae69c..920d365f 100644
--- a/build.gradle
+++ b/build.gradle
@@ -1,5 +1,11 @@
-subprojects {
+allprojects {
+    apply plugin: 'idea'
+    apply plugin: 'maven'
+    
     group = 'de.greenrobot'
     version = '1.3.1'
+}
+
+subprojects {
     ext.sourceCompatibility = 1.6
 }
diff --git a/DaoGenerator/.classpath b/buildSrc/DaoGenerator/.classpath
similarity index 100%
rename from DaoGenerator/.classpath
rename to buildSrc/DaoGenerator/.classpath
diff --git a/DaoGenerator/.freemarker-ide.xml b/buildSrc/DaoGenerator/.freemarker-ide.xml
similarity index 100%
rename from DaoGenerator/.freemarker-ide.xml
rename to buildSrc/DaoGenerator/.freemarker-ide.xml
diff --git a/DaoGenerator/.gitignore b/buildSrc/DaoGenerator/.gitignore
similarity index 100%
rename from DaoGenerator/.gitignore
rename to buildSrc/DaoGenerator/.gitignore
diff --git a/DaoGenerator/.project b/buildSrc/DaoGenerator/.project
similarity index 100%
rename from DaoGenerator/.project
rename to buildSrc/DaoGenerator/.project
diff --git a/DaoGenerator/.settings/gradle/org.springsource.ide.eclipse.gradle.core.prefs b/buildSrc/DaoGenerator/.settings/gradle/org.springsource.ide.eclipse.gradle.core.prefs
similarity index 100%
rename from DaoGenerator/.settings/gradle/org.springsource.ide.eclipse.gradle.core.prefs
rename to buildSrc/DaoGenerator/.settings/gradle/org.springsource.ide.eclipse.gradle.core.prefs
diff --git a/DaoGenerator/.settings/gradle/org.springsource.ide.eclipse.gradle.refresh.prefs b/buildSrc/DaoGenerator/.settings/gradle/org.springsource.ide.eclipse.gradle.refresh.prefs
similarity index 100%
rename from DaoGenerator/.settings/gradle/org.springsource.ide.eclipse.gradle.refresh.prefs
rename to buildSrc/DaoGenerator/.settings/gradle/org.springsource.ide.eclipse.gradle.refresh.prefs
diff --git a/DaoGenerator/.settings/org.eclipse.core.resources.prefs b/buildSrc/DaoGenerator/.settings/org.eclipse.core.resources.prefs
similarity index 100%
rename from DaoGenerator/.settings/org.eclipse.core.resources.prefs
rename to buildSrc/DaoGenerator/.settings/org.eclipse.core.resources.prefs
diff --git a/DaoGenerator/.settings/org.eclipse.jdt.core.prefs b/buildSrc/DaoGenerator/.settings/org.eclipse.jdt.core.prefs
similarity index 100%
rename from DaoGenerator/.settings/org.eclipse.jdt.core.prefs
rename to buildSrc/DaoGenerator/.settings/org.eclipse.jdt.core.prefs
diff --git a/DaoGenerator/.settings/org.eclipse.jdt.groovy.core.prefs b/buildSrc/DaoGenerator/.settings/org.eclipse.jdt.groovy.core.prefs
similarity index 100%
rename from DaoGenerator/.settings/org.eclipse.jdt.groovy.core.prefs
rename to buildSrc/DaoGenerator/.settings/org.eclipse.jdt.groovy.core.prefs
diff --git a/DaoGenerator/build.gradle b/buildSrc/DaoGenerator/build.gradle
similarity index 96%
rename from DaoGenerator/build.gradle
rename to buildSrc/DaoGenerator/build.gradle
index 5577271c..b72846cd 100644
--- a/DaoGenerator/build.gradle
+++ b/buildSrc/DaoGenerator/build.gradle
@@ -1,21 +1,16 @@
 apply plugin: 'java'
-apply plugin: 'maven'
 apply plugin: 'signing'
 
 def isSnapshot = version.endsWith('-SNAPSHOT')
 def sonatypeRepositoryUrl
-if(isSnapshot) {
+if (isSnapshot) {
     sonatypeRepositoryUrl = "https://oss.sonatype.org/content/repositories/snapshots/"
 } else {
     sonatypeRepositoryUrl = "https://oss.sonatype.org/service/local/staging/deploy/maven2/"
 }
 
-repositories {
-    mavenCentral()
-}
-
 dependencies {
-    compile ('org.freemarker:freemarker:2.3.19')
+    compile 'org.freemarker:freemarker:2.3.19'
     testCompile 'junit:junit:4.11'
 }
 
diff --git a/DaoGenerator/java-formater.xml b/buildSrc/DaoGenerator/java-formater.xml
similarity index 100%
rename from DaoGenerator/java-formater.xml
rename to buildSrc/DaoGenerator/java-formater.xml
diff --git a/DaoGenerator/mybuild.xml b/buildSrc/DaoGenerator/mybuild.xml
similarity index 100%
rename from DaoGenerator/mybuild.xml
rename to buildSrc/DaoGenerator/mybuild.xml
diff --git a/DaoGenerator/performance/galaxy-nexus.xlsx b/buildSrc/DaoGenerator/performance/galaxy-nexus.xlsx
similarity index 100%
rename from DaoGenerator/performance/galaxy-nexus.xlsx
rename to buildSrc/DaoGenerator/performance/galaxy-nexus.xlsx
diff --git a/DaoGenerator/performance/performance-data.xlsx b/buildSrc/DaoGenerator/performance/performance-data.xlsx
similarity index 100%
rename from DaoGenerator/performance/performance-data.xlsx
rename to buildSrc/DaoGenerator/performance/performance-data.xlsx
diff --git a/DaoGenerator/settings.gradle b/buildSrc/DaoGenerator/settings.gradle
similarity index 100%
rename from DaoGenerator/settings.gradle
rename to buildSrc/DaoGenerator/settings.gradle
diff --git a/DaoGenerator/src-generator-testentities/de/greenrobot/daogenerator/gentest/TestDaoGenerator.java b/buildSrc/DaoGenerator/src-generator-testentities/de/greenrobot/daogenerator/gentest/TestDaoGenerator.java
similarity index 100%
rename from DaoGenerator/src-generator-testentities/de/greenrobot/daogenerator/gentest/TestDaoGenerator.java
rename to buildSrc/DaoGenerator/src-generator-testentities/de/greenrobot/daogenerator/gentest/TestDaoGenerator.java
diff --git a/DaoGenerator/src-template/dao-deep.ftl b/buildSrc/DaoGenerator/src-template/dao-deep.ftl
similarity index 100%
rename from DaoGenerator/src-template/dao-deep.ftl
rename to buildSrc/DaoGenerator/src-template/dao-deep.ftl
diff --git a/DaoGenerator/src-template/dao-master.ftl b/buildSrc/DaoGenerator/src-template/dao-master.ftl
similarity index 100%
rename from DaoGenerator/src-template/dao-master.ftl
rename to buildSrc/DaoGenerator/src-template/dao-master.ftl
diff --git a/DaoGenerator/src-template/dao-session.ftl b/buildSrc/DaoGenerator/src-template/dao-session.ftl
similarity index 100%
rename from DaoGenerator/src-template/dao-session.ftl
rename to buildSrc/DaoGenerator/src-template/dao-session.ftl
diff --git a/DaoGenerator/src-template/dao-unit-test.ftl b/buildSrc/DaoGenerator/src-template/dao-unit-test.ftl
similarity index 100%
rename from DaoGenerator/src-template/dao-unit-test.ftl
rename to buildSrc/DaoGenerator/src-template/dao-unit-test.ftl
diff --git a/DaoGenerator/src-template/dao.ftl b/buildSrc/DaoGenerator/src-template/dao.ftl
similarity index 100%
rename from DaoGenerator/src-template/dao.ftl
rename to buildSrc/DaoGenerator/src-template/dao.ftl
diff --git a/DaoGenerator/src-template/entity.ftl b/buildSrc/DaoGenerator/src-template/entity.ftl
similarity index 100%
rename from DaoGenerator/src-template/entity.ftl
rename to buildSrc/DaoGenerator/src-template/entity.ftl
diff --git a/DaoGenerator/src-test/de/greenrobot/daogenerator/test/SimpleDaoGeneratorTest.java b/buildSrc/DaoGenerator/src-test/de/greenrobot/daogenerator/test/SimpleDaoGeneratorTest.java
similarity index 100%
rename from DaoGenerator/src-test/de/greenrobot/daogenerator/test/SimpleDaoGeneratorTest.java
rename to buildSrc/DaoGenerator/src-test/de/greenrobot/daogenerator/test/SimpleDaoGeneratorTest.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/DaoGenerator.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/DaoGenerator.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/DaoGenerator.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/DaoGenerator.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/DaoUtil.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/DaoUtil.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/DaoUtil.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/DaoUtil.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/Entity.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Entity.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/Entity.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Entity.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/Index.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Index.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/Index.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Index.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/Property.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Property.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/Property.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Property.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/PropertyOrderList.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/PropertyOrderList.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/PropertyOrderList.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/PropertyOrderList.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/PropertyType.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/PropertyType.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/PropertyType.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/PropertyType.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/Query.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Query.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/Query.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Query.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/QueryParam.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/QueryParam.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/QueryParam.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/QueryParam.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/Schema.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Schema.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/Schema.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/Schema.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/ToMany.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/ToMany.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/ToMany.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/ToMany.java
diff --git a/DaoGenerator/src/de/greenrobot/daogenerator/ToOne.java b/buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/ToOne.java
similarity index 100%
rename from DaoGenerator/src/de/greenrobot/daogenerator/ToOne.java
rename to buildSrc/DaoGenerator/src/de/greenrobot/daogenerator/ToOne.java
diff --git a/buildSrc/GreenDaoPlugin/build.gradle b/buildSrc/GreenDaoPlugin/build.gradle
new file mode 100644
index 00000000..ca850735
--- /dev/null
+++ b/buildSrc/GreenDaoPlugin/build.gradle
@@ -0,0 +1,11 @@
+apply plugin: 'groovy'
+
+dependencies {
+    compile gradleApi()
+    compile localGroovy()
+    compile project(':DaoGenerator')
+}
+
+rootProject.dependencies {
+    runtime project(path)
+}
diff --git a/buildSrc/GreenDaoPlugin/settings.gradle b/buildSrc/GreenDaoPlugin/settings.gradle
new file mode 100644
index 00000000..5ef2c699
--- /dev/null
+++ b/buildSrc/GreenDaoPlugin/settings.gradle
@@ -0,0 +1 @@
+rootProject.name = 'greendao-plugin'
\ No newline at end of file
diff --git a/buildSrc/GreenDaoPlugin/src/main/groovy/de/greenrobot/greendao/plugin/GreenDaoPlugin.groovy b/buildSrc/GreenDaoPlugin/src/main/groovy/de/greenrobot/greendao/plugin/GreenDaoPlugin.groovy
new file mode 100644
index 00000000..8aeab638
--- /dev/null
+++ b/buildSrc/GreenDaoPlugin/src/main/groovy/de/greenrobot/greendao/plugin/GreenDaoPlugin.groovy
@@ -0,0 +1,26 @@
+package de.greenrobot.greendao.plugin;
+
+import de.greenrobot.greendao.task.GenerateDaoSources;
+import org.gradle.api.Plugin;
+import org.gradle.api.Project;
+import org.gradle.api.tasks.compile.JavaCompile;
+
+public class GreenDaoPlugin implements Plugin<Project> {
+
+  @Override
+  public void apply(Project project) {
+    project.task('compileGenerator', type: JavaCompile) << {
+      //source = project.files("src-in")
+      source.each({file -> print file.name})
+    }
+    
+    project.task('generateDaoSources', type: GenerateDaoSources) {
+      inputDir = project.file('input')
+      outputDir = project.file('output')
+      
+    }
+    
+    project.task('build').dependsOn('compileGenerator')
+  }
+  
+}
diff --git a/buildSrc/GreenDaoPlugin/src/main/groovy/de/greenrobot/greendao/task/GenerateDaoSources.groovy b/buildSrc/GreenDaoPlugin/src/main/groovy/de/greenrobot/greendao/task/GenerateDaoSources.groovy
new file mode 100644
index 00000000..a35313de
--- /dev/null
+++ b/buildSrc/GreenDaoPlugin/src/main/groovy/de/greenrobot/greendao/task/GenerateDaoSources.groovy
@@ -0,0 +1,17 @@
+package de.greenrobot.greendao.task
+
+import java.io.File
+import org.gradle.api.DefaultTask
+import org.gradle.api.tasks.TaskAction
+
+public class GenerateDaoSources extends DefaultTask {
+  
+  def File inputDir
+  def File outputDir
+  
+  @TaskAction
+  def void generateSources() {
+    println "Generates DAO sources."
+  }
+  
+}
diff --git a/buildSrc/GreenDaoPlugin/src/main/resources/META-INF/gradle-plugins/greendao.properties b/buildSrc/GreenDaoPlugin/src/main/resources/META-INF/gradle-plugins/greendao.properties
new file mode 100644
index 00000000..a3195272
--- /dev/null
+++ b/buildSrc/GreenDaoPlugin/src/main/resources/META-INF/gradle-plugins/greendao.properties
@@ -0,0 +1 @@
+implementation-class=de.greenrobot.greendao.plugin.GreenDaoPlugin
\ No newline at end of file
diff --git a/buildSrc/build.gradle b/buildSrc/build.gradle
new file mode 100644
index 00000000..a02c1430
--- /dev/null
+++ b/buildSrc/build.gradle
@@ -0,0 +1,23 @@
+apply plugin: 'groovy'
+
+dependencies {
+  compile gradleApi()
+  compile localGroovy()
+}
+
+allprojects {
+  apply plugin: 'idea'
+  apply plugin: 'maven'
+  
+  group = 'de.greenrobot'
+  version = '1.3.1'
+  
+  repositories {
+    mavenCentral()
+    mavenLocal()
+  }
+}
+
+subprojects {
+  ext.sourceCompatibility = 1.6
+}
diff --git a/buildSrc/settings.gradle b/buildSrc/settings.gradle
new file mode 100644
index 00000000..6e35f462
--- /dev/null
+++ b/buildSrc/settings.gradle
@@ -0,0 +1 @@
+include 'GreenDaoPlugin', 'DaoGenerator'
\ No newline at end of file
diff --git a/settings.gradle b/settings.gradle
index 68de0b49..5999081b 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -1 +1 @@
-include 'DaoCore', 'DaoGenerator', 'DaoExampleGenerator'
\ No newline at end of file
+include 'DaoCore', 'DaoExampleGenerator'
\ No newline at end of file
