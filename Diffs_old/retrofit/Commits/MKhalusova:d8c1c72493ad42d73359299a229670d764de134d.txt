diff --git a/samples/src/main/java/com/example/retrofit/JsonQueryParameters.java b/samples/src/main/java/com/example/retrofit/JsonQueryParameters.java
index bc29f8355..3b3f28376 100644
--- a/samples/src/main/java/com/example/retrofit/JsonQueryParameters.java
+++ b/samples/src/main/java/com/example/retrofit/JsonQueryParameters.java
@@ -15,10 +15,6 @@
  */
 package com.example.retrofit;
 
-import java.io.IOException;
-import java.lang.annotation.Annotation;
-import java.lang.annotation.Retention;
-import java.lang.reflect.Type;
 import okhttp3.RequestBody;
 import okhttp3.ResponseBody;
 import okhttp3.mockwebserver.MockResponse;
@@ -33,6 +29,11 @@
 import retrofit2.http.GET;
 import retrofit2.http.Query;
 
+import java.io.IOException;
+import java.lang.annotation.Annotation;
+import java.lang.annotation.Retention;
+import java.lang.reflect.Type;
+
 import static java.lang.annotation.RetentionPolicy.RUNTIME;
 
 public final class JsonQueryParameters {
@@ -95,11 +96,7 @@ public static void main(String... args) throws IOException, InterruptedException
     server.start();
     server.enqueue(new MockResponse());
 
-    Retrofit retrofit = new Retrofit.Builder()
-        .baseUrl(server.url("/"))
-        .addConverterFactory(new JsonStringConverterFactory(GsonConverterFactory.create()))
-        .build();
-    Service service = retrofit.create(Service.class);
+    Service service = getService(server);
 
     Call<ResponseBody> call = service.example(new Filter("123"));
     Response<ResponseBody> response = call.execute();
@@ -111,4 +108,12 @@ public static void main(String... args) throws IOException, InterruptedException
 
     server.shutdown();
   }
+
+  private static Service getService(MockWebServer server) {
+    Retrofit retrofit = new Retrofit.Builder()
+        .baseUrl(server.url("/"))
+        .addConverterFactory(new JsonStringConverterFactory(GsonConverterFactory.create()))
+        .build();
+    return retrofit.create(Service.class);
+  }
 }
