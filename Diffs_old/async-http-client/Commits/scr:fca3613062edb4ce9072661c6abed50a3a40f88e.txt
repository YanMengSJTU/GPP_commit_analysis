diff --git a/api/src/main/java/org/asynchttpclient/util/ProxyUtils.java b/api/src/main/java/org/asynchttpclient/util/ProxyUtils.java
index b48f7c753..9174778bd 100644
--- a/api/src/main/java/org/asynchttpclient/util/ProxyUtils.java
+++ b/api/src/main/java/org/asynchttpclient/util/ProxyUtils.java
@@ -113,7 +113,8 @@ public static boolean avoidProxy(final ProxyServer proxyServer, final Request re
      */
     public static boolean avoidProxy(final ProxyServer proxyServer, final String target) {
         if (proxyServer != null) {
-            final String targetHost = target.toLowerCase(Locale.ENGLISH);
+            final String targetHost = (target != null) ?
+                target.toLowerCase(Locale.ENGLISH) : "";
 
             List<String> nonProxyHosts = proxyServer.getNonProxyHosts();
 
diff --git a/api/src/test/java/org/asynchttpclient/util/ProxyUtilsTest.java b/api/src/test/java/org/asynchttpclient/util/ProxyUtilsTest.java
index fdcb8884b..19db97cfa 100644
--- a/api/src/test/java/org/asynchttpclient/util/ProxyUtilsTest.java
+++ b/api/src/test/java/org/asynchttpclient/util/ProxyUtilsTest.java
@@ -44,5 +44,11 @@ public void testBasics() {
         proxyServer = new ProxyServer("foo", 1234);
         proxyServer.addNonProxyHost("*.somewhere.org");
         assertFalse(ProxyUtils.avoidProxy(proxyServer, req));
+
+        // shouldn't crash
+        req = new RequestBuilder("GET").setUrl("http:///badhost/foo").build();
+        proxyServer = new ProxyServer("foo", 1234);
+        proxyServer.addNonProxyHost("*.somewhere.org");
+        assertFalse(ProxyUtils.avoidProxy(proxyServer, req));
     }
 }
