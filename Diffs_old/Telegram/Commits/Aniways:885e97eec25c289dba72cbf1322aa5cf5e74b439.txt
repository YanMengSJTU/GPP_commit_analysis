diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 8b1b35111..ccdafa8b5 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -33,6 +33,7 @@ dependencies {
     compile 'net.hockeyapp.android:HockeySDK:3.5.+'
     compile 'com.googlecode.mp4parser:isoparser:1.0.+'
     compile project(':Android-SDK')
+    compile 'com.android.support:multidex:1.0.0'
     compile ('io.intercom.android:intercom-sdk:0.9.3@aar') {
         transitive = true
     }
@@ -138,5 +139,10 @@ android {
         renderscriptSupportModeEnabled true
         versionCode 259
         versionName "1.7.9"
+        multiDexEnabled true
+    }
+
+    dexOptions {
+        javaMaxHeapSize "4g"
     }
 }
diff --git a/TMessagesProj/src/main/AndroidManifest.xml b/TMessagesProj/src/main/AndroidManifest.xml
index 1db656932..c571993c3 100644
--- a/TMessagesProj/src/main/AndroidManifest.xml
+++ b/TMessagesProj/src/main/AndroidManifest.xml
@@ -46,7 +46,7 @@
         android:hardwareAccelerated="@bool/useHardwareAcceleration"
         android:icon="@drawable/ic_launcher"
         android:label="@string/AppName"
-        android:largeHeap="true"
+        android:largeHeap="true">
         android:theme="@style/Theme.TMessages.Start">
 
         <meta-data android:name="com.google.android.gms.version"
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/ApplicationLoader.java b/TMessagesProj/src/main/java/org/telegram/messenger/ApplicationLoader.java
index 0b7a4a3a4..b60a807c6 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/ApplicationLoader.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/ApplicationLoader.java
@@ -24,6 +24,7 @@
 import android.os.Build;
 import android.os.Handler;
 import android.os.PowerManager;
+import android.support.multidex.MultiDex;
 
 import com.aniways.Aniways;
 import com.aniways.Utils;
@@ -245,6 +246,12 @@ public void onConfigurationChanged(Configuration newConfig) {
         }
     }
 
+    @Override
+    protected void attachBaseContext(Context base) {
+        super.attachBaseContext(base);
+        MultiDex.install(this);
+    }
+
     private void initPlayServices() {
         if (checkPlayServices()) {
             gcm = GoogleCloudMessaging.getInstance(this);
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
index f999303ed..c4699f7a3 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
@@ -1326,7 +1326,10 @@ public void run() {
                                             ConnectionsManager.getInstance().updateDcSettings(0);
                                         }
                                     });
-                                    Intercom.client().registerIdentifiedUser(new Registration().withUserId(requestPhone));
+                                    Intercom.client().registerIdentifiedUser(
+                                            new Registration()
+                                                    .withUserId(requestPhone)
+                                                    .withUserAttributes(getCurrentUserAttributes()));
                                 } else {
                                     lastError = error.text;
 
@@ -2326,7 +2329,10 @@ public void run() {
                                             ConnectionsManager.getInstance().updateDcSettings(0);
                                         }
                                     });
-                                    Intercom.client().registerIdentifiedUser(new Registration().withUserId(requestPhone));
+                                    Intercom.client().registerIdentifiedUser(
+                                            new Registration()
+                                                    .withUserId(requestPhone)
+                                                    .withUserAttributes(getCurrentUserAttributes()));
 
                                 } else {
                                     if (error.text.contains("PHONE_NUMBER_INVALID")) {
@@ -2418,4 +2424,14 @@ public void restoreStateParams(Bundle bundle) {
             }
         }
     }
+
+    private Map<String, Object> getCurrentUserAttributes() {
+        Map<String,Object> userAttributes = new HashMap<>();
+
+        userAttributes.put("firstName", UserConfig.getCurrentUser().first_name);
+        userAttributes.put("lastName", UserConfig.getCurrentUser().last_name);
+        userAttributes.put("userName", UserConfig.getCurrentUser().username);
+
+        return userAttributes;
+    }
 }
