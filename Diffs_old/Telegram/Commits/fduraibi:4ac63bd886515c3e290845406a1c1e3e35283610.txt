diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Views/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Views/ChatActivityEnterView.java
index 91ed1e366..176cf4358 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Views/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Views/ChatActivityEnterView.java
@@ -258,6 +258,15 @@ public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3)
 
             @Override
             public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {
+                // Check if the text contains Emoji with SB Unicode instead of UTF16 and fix it (specially for messages copied from Whatsapp)
+                CharSequence csBefore = charSequence.subSequence(i, i+i3);
+                CharSequence csAfter = Emoji.fixSBEmoji(csBefore);
+
+                if (!csBefore.toString().contentEquals(csAfter)) {
+                    String NewText = charSequence.toString().replace(csBefore, csAfter);
+                    messsageEditText.setText(NewText, TextView.BufferType.EDITABLE);
+                }
+
                 String message = getTrimmedString(charSequence.toString());
                 sendButton.setEnabled(message.length() != 0);
                 checkSendButton();
