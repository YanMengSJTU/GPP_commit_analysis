diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
index 92359cf7b..9800563ae 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
@@ -60,6 +60,7 @@
 import java.lang.reflect.Field;
 import java.util.ArrayList;
 import java.util.LinkedHashMap;
+import java.util.List;
 
 import aniways.com.google.gson.JsonObject;
 
@@ -401,11 +402,16 @@ public void afterTextChanged(Editable editable) {
     }
 
     private void sendMessage() {
-        if (processSendingText(Aniways.encodeMessage(messsageEditText.getText()))) {
-            messsageEditText.setText("");
-            lastTypingTimeSend = 0;
-            if (delegate != null) {
-                delegate.onMessageSend();
+        List<String> messages = Aniways.encodeMessage(messsageEditText.getText());
+        boolean firstProcessed = false;
+        for(String message : messages) {
+            if (processSendingText(message) && !firstProcessed) {
+                messsageEditText.setText("");
+                lastTypingTimeSend = 0;
+                if (delegate != null) {
+                    delegate.onMessageSend();
+                }
+                firstProcessed = true;
             }
         }
 
