diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java b/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
index 7d027907b..9c29bd426 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/Emoji.java
@@ -503,7 +503,7 @@ public static CharSequence replaceEmoji(CharSequence cs) {
             if (c == 0xD83C || c == 0xD83D || (buf != 0 && (buf & 0xFFFFFFFF00000000L) == 0 && (c >= 0xDDE6 && c <= 0xDDFA))) {
                 buf <<= 16;
                 buf |= c;
-            } else if (buf > 0 && (c & 0xF000) == 0xD000) {
+            } else if (buf > 0 && ( (c & 0xF000) == 0xD000 || (c & 0xF000) == 0xE000 ) ) {
                 buf <<= 16;
                 buf |= c;
                 Drawable d = Emoji.getEmojiDrawable(buf);
@@ -542,7 +542,7 @@ public static CharSequence replaceEmoji(CharSequence cs) {
                 }
             }
             SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
-            if (emojiCount >= 200 || preferences.getBoolean("native_emoji", true)) {
+            if (emojiCount >= 200 || preferences.getBoolean("native_emoji", false)) {
                 break;
             }
         }
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java b/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
index 255fa2530..4662e3879 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
@@ -745,7 +745,12 @@ public void updateTimerProc() {
                 if (lastStatusUpdateTime != -1 && (lastStatusUpdateTime == 0 || lastStatusUpdateTime <= System.currentTimeMillis() - 55000 || offlineSended)) {
                     lastStatusUpdateTime = -1;
                     TLRPC.TL_account_updateStatus req = new TLRPC.TL_account_updateStatus();
-                    req.offline = false;
+                    SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
+                    if (preferences.getBoolean("invisible_status", false)){
+                        req.offline = true;
+                    } else {
+                        req.offline = false;
+                    }
                     ConnectionsManager.Instance.performRpc(req, new RPCRequest.RPCRequestDelegate() {
                         @Override
                         public void run(TLObject response, TLRPC.TL_error error) {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
index b58323cdc..fe65939c0 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
@@ -79,6 +79,7 @@
     int photoDownloadPrivateRow;
     int AddForwardingInfoRow;
     int NativeEmojiRow;
+    int InvisibleStatusRow;
 
     @Override
     public boolean onFragmentCreate() {
@@ -150,6 +151,7 @@ public void run() {
         enableAnimationsRow = rowCount++;
         AddForwardingInfoRow = rowCount++;
         NativeEmojiRow = rowCount++;
+        InvisibleStatusRow = rowCount++;
         notificationRow = rowCount++;
         blockedRow = rowCount++;
         backgroundRow = rowCount++;
@@ -304,13 +306,22 @@ public void run(TLObject response, TLRPC.TL_error error) {
                         }
                     } else if (i == NativeEmojiRow) {
                         SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
-                        boolean value = preferences.getBoolean("native_emoji", true);
+                        boolean value = preferences.getBoolean("native_emoji", false);
                         SharedPreferences.Editor editor = preferences.edit();
                         editor.putBoolean("native_emoji", !value);
                         editor.commit();
                         if (listView != null) {
                             listView.invalidateViews();
                         }
+                    } else if (i == InvisibleStatusRow) {
+                        SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
+                        boolean value = preferences.getBoolean("invisible_status", false);
+                        SharedPreferences.Editor editor = preferences.edit();
+                        editor.putBoolean("invisible_status", !value);
+                        editor.commit();
+                        if (listView != null) {
+                            listView.invalidateViews();
+                        }
                     }
 //                else if (i == 6) {
 //                    UserConfig.saveIncomingPhotos = !UserConfig.saveIncomingPhotos;
@@ -449,7 +460,7 @@ public boolean areAllItemsEnabled() {
         public boolean isEnabled(int i) {
             return i == textSizeRow || i == enableAnimationsRow || i == blockedRow || i == notificationRow || i == backgroundRow ||
                     i == askQuestionRow || i == sendLogsRow || i == sendByEnterRow || i == terminateSessionsRow || i == photoDownloadPrivateRow ||
-                    i == photoDownloadChatRow || i == AddForwardingInfoRow || i == NativeEmojiRow;
+                    i == photoDownloadChatRow || i == AddForwardingInfoRow || i == NativeEmojiRow || i == InvisibleStatusRow;
         }
 
         @Override
@@ -705,7 +716,16 @@ public void run() {
                 } else if (i == NativeEmojiRow) {
                     textView.setText(getStringEntry(R.string.NativeEmoji));
                     divider.setVisibility(View.VISIBLE);
-                    boolean enabled = preferences.getBoolean("native_emoji", true);
+                    boolean enabled = preferences.getBoolean("native_emoji", false);
+                    if (enabled) {
+                        checkButton.setImageResource(R.drawable.btn_check_on);
+                    } else {
+                        checkButton.setImageResource(R.drawable.btn_check_off);
+                    }
+                } else if (i == InvisibleStatusRow) {
+                    textView.setText(getStringEntry(R.string.InvisibleStatus));
+                    divider.setVisibility(View.VISIBLE);
+                    boolean enabled = preferences.getBoolean("invisible_status", false);
                     if (enabled) {
                         checkButton.setImageResource(R.drawable.btn_check_on);
                     } else {
@@ -776,7 +796,7 @@ public int getItemViewType(int i) {
                 return 1;
             } else if (i == textSizeRow) {
                 return 5;
-            } else if (i == enableAnimationsRow || i == sendByEnterRow || i == photoDownloadChatRow || i == photoDownloadPrivateRow || i == AddForwardingInfoRow || i== NativeEmojiRow) {
+            } else if (i == enableAnimationsRow || i == sendByEnterRow || i == photoDownloadChatRow || i == photoDownloadPrivateRow || i == AddForwardingInfoRow || i== NativeEmojiRow || i == InvisibleStatusRow) {
                 return 3;
             } else if (i == numberRow || i == notificationRow || i == blockedRow || i == backgroundRow || i == askQuestionRow || i == sendLogsRow || i == terminateSessionsRow) {
                 return 2;
diff --git a/TMessagesProj/src/main/res/values-ar/strings.xml b/TMessagesProj/src/main/res/values-ar/strings.xml
index 3945fa9a3..a4c6b2240 100644
--- a/TMessagesProj/src/main/res/values-ar/strings.xml
+++ b/TMessagesProj/src/main/res/values-ar/strings.xml
@@ -248,6 +248,7 @@
     <string name="ContactJoined">عندما يشترك صديق في تيليجرام</string>
     <string name="AddForwardingInfo">ادراج معلومات التوجية</string>
     <string name="NativeEmoji">ايقونات النظام</string>
+    <string name="InvisibleStatus">اخفاء الحالة</string>
 
     <!--media view-->
     <string name="NoMedia">لا توجد وسائط بعد</string>
diff --git a/TMessagesProj/src/main/res/values/strings.xml b/TMessagesProj/src/main/res/values/strings.xml
index d1deee096..071e1ca34 100644
--- a/TMessagesProj/src/main/res/values/strings.xml
+++ b/TMessagesProj/src/main/res/values/strings.xml
@@ -248,6 +248,7 @@
     <string name="ContactJoined">Contact joined Telegram</string>
     <string name="AddForwardingInfo">Add Forwarding Info</string>
     <string name="NativeEmoji">Native Emoji</string>
+    <string name="InvisibleStatus">Invisible status</string>
 
     <!--media view-->
     <string name="NoMedia">No shared media yet</string>
