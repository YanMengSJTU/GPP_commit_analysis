diff --git a/TMessagesProj/src/main/java/BotchaHelper/Helpers.java b/TMessagesProj/src/main/java/BotchaHelper/Helpers.java
index 24ff4a758..a017c2307 100644
--- a/TMessagesProj/src/main/java/BotchaHelper/Helpers.java
+++ b/TMessagesProj/src/main/java/BotchaHelper/Helpers.java
@@ -83,14 +83,22 @@ private static String giveChannelWithToken(long id) {
 
     public static boolean isChannelAllowed(long id) {
         List<Long> allowedIDs = getAllowedIDs();
-        boolean flag = false;
+        boolean flag1 = false;
+        boolean flag2 = false;
         for(int i = 0; i <allowedIDs.size(); i++) {
             if (id == allowedIDs.get(i)) {
-                flag = true;
+                flag1 = true;
             }
         }
 
-        return flag;
+        List<Long> allowedIDs2 = getAllowedIDsGeoSpatial();
+        for(int i = 0; i <allowedIDs2.size(); i++) {
+            if (id == allowedIDs2.get(i)) {
+                flag2 = true;
+            }
+        }
+
+        return flag1 && flag2;
         //return id == 135483832 || id == 171135579 || id == 149007104 || id == 192493113 || id == 175641240;
     }
 
@@ -109,14 +117,37 @@ public static boolean isChannelAllowed(long id) {
         returnList.add(192493113L);
         returnList.add(175641240L);*/
         SharedPreferences sharedPref = ApplicationLoader.applicationContext.getSharedPreferences("Notifications",(Context.MODE_PRIVATE));
-        String ids = sharedPref.getString("allowedIDS2", "");
+        String ids = sharedPref.getString("registeredIDs", "");
+        if(ids.equals("")) {
+            saveToRegisteredChannels(135483832L);
+            saveToRegisteredChannels(171135579L);
+        }
+        ids = sharedPref.getString("registeredIDs", "");
+        String array[] = ids.split(",");
+        for (String anArray : array) {
+            if (!anArray.equals("")) {
+                returnList.add(Long.parseLong(anArray, 10));
+            }
+        }
+        return returnList;
+    }
+
+
+    public static List<Long> getAllowedIDsGeoSpatial() {
+        List<Long> returnList = new ArrayList<Long>();
+        SharedPreferences sharedPref = ApplicationLoader.applicationContext.getSharedPreferences("Notifications",(Context.MODE_PRIVATE));
+        String ids = sharedPref.getString("geoAllowed2", "");
         if(ids.equals("")) {
-            saveToSharedPreference(135483832L);
-            saveToSharedPreference(171135579L);
-            saveToSharedPreference(149007104L);
-            saveToSharedPreference(192493113L);
-            saveToSharedPreference(175641240L);
+            List<Long> tempList = new ArrayList<Long>();
+            tempList.add(135483832L);
+            tempList.add(171135579L);
+            tempList.add(149007104L);
+            tempList.add(192493113L);
+            tempList.add(175641240L);
+            updateGeoAllowedChannels(tempList);
         }
+        ids = sharedPref.getString("geoAllowed2", "");
+        Log.i("Botcha debug second", ids);
         String array[] = ids.split(",");
         for (String anArray : array) {
             if (!anArray.equals("")) {
@@ -126,36 +157,38 @@ public static boolean isChannelAllowed(long id) {
         return returnList;
     }
 
-    public static void saveToSharedPreference(long id) {
+
+    public static void saveToRegisteredChannels(long id) {
         SharedPreferences sharedPref = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", (Context.MODE_PRIVATE));
-        String ids = sharedPref.getString("allowedIDS2", "");
+        String ids = sharedPref.getString("registeredIDs", "");
         SharedPreferences.Editor editor = sharedPref.edit();
         if (ids.equals("")) {
-            editor.putString("allowedIDS2", Long.toString(id));
+            editor.putString("registeredIDs", Long.toString(id));
             editor.commit();
         } else {
-            editor.putString("allowedIDS2", ids + "," + Long.toString(id));
+            editor.putString("registeredIDs", ids + "," + Long.toString(id));
             editor.commit();
         }
     }
 
-    public static void removeFromSharedPreference(long id) {
+    public static void removeFromRegisteredChannels(long id) {
         SharedPreferences sharedPref = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", (Context.MODE_PRIVATE));
-        String ids = sharedPref.getString("allowedIDS2", "");
+        String ids = sharedPref.getString("registeredIDs", "");
         SharedPreferences.Editor editor = sharedPref.edit();
         String result = ids.replaceAll(Long.toString(id), "");
-        editor.putString("allowedIDS2",result);
+        editor.putString("registeredIDs",result);
         editor.commit();
     }
 
-    public static void updateSharedPreference(List<Long> ids) {
+    public static void updateGeoAllowedChannels(List<Long> ids) {
         SharedPreferences sharedPref = ApplicationLoader.applicationContext.getSharedPreferences("Notifications", (Context.MODE_PRIVATE));
         SharedPreferences.Editor editor = sharedPref.edit();
         String result="";
         for (int i= 0; i< ids.size(); i++) {
-            result = result + ids.toString() + ",";
+            result = result + ids.get(i).toString() + ",";
         }
-        editor.putString("allowedIDS2",result);
+        editor.putString("geoAllowed2",result);
+        Log.i("Botcha debug", result);
         editor.commit();
     }
 }
