diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatActionCell.java b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatActionCell.java
index d5e64d2a3..873426ecf 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatActionCell.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatActionCell.java
@@ -188,10 +188,14 @@ public boolean onTouchEvent(MotionEvent event) {
                     final int off = textLayout.getOffsetForHorizontal(line, x);
                     final float left = textLayout.getLineLeft(line);
                     if (left <= x && left + textLayout.getLineWidth(line) >= x) {
-                        Spannable buffer = (Spannable)currentMessageObject.messageText;
-                        URLSpan[] link = buffer.getSpans(off, off, URLSpan.class);
+                        URLSpan[] link = null;
 
-                        if (link.length != 0) {
+                        if(currentMessageObject.messageText instanceof Spannable) {
+                            Spannable buffer = (Spannable) currentMessageObject.messageText;
+                            link = buffer.getSpans(off, off, URLSpan.class);
+                        }
+
+                        if (link != null && link.length != 0) {
                             if (event.getAction() == MotionEvent.ACTION_DOWN) {
                                 pressedLink = link[0];
                                 result = true;
