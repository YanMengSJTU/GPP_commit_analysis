diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index 49302ccbe..ba084b695 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -3886,7 +3886,9 @@ public void onContextClick(TLRPC.BotInlineResult result) {
                 } else {
                     TLRPC.User user = (TLRPC.User) object;
                     if (user != null) {
-                        if (user.username != null) {
+                        SharedPreferences preferences = MessagesController.getGlobalMainSettings();
+                        final boolean mentionByName = !user.bot && preferences.getBoolean("mentionByName", false);
+                        if (user.username != null && !mentionByName) {
                             chatActivityEnterView.replaceWithText(start, len, "@" + user.username + " ", false);
                         } else {
                             String name = UserObject.getFirstName(user, false);
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ForkSettingsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ForkSettingsActivity.java
index 89f040e32..a556dacba 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ForkSettingsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ForkSettingsActivity.java
@@ -54,6 +54,7 @@
     private int unmutedOnTopRow;
     private int rearVideoMessages;
     private int replaceForward;
+    private int mentionByName;
 
     private ArrayList<Integer> emptyRows = new ArrayList<Integer>();
     private int syncPinsRow;
@@ -93,6 +94,7 @@ public boolean onFragmentCreate() {
         unmutedOnTopRow = rowCount++;
         rearVideoMessages = rowCount++;
         replaceForward = rowCount++;
+        mentionByName = rowCount++;
     
         emptyRows.add(rowCount++);
         sectionRows.add(rowCount++);
@@ -189,6 +191,8 @@ public boolean supportsPredictiveItemAnimations() {
                 toggleGlobalMainSetting("rearVideoMessages", view, false);
             } else if (position == replaceForward) {
                 toggleGlobalMainSetting("replaceForward", view, true);
+            } else if (position == mentionByName) {
+                toggleGlobalMainSetting("mentionByName", view, false);
             } else if (position == syncPinsRow) {
                 toggleGlobalMainSetting("syncPins", view, true);
             } else if (position == hideSensitiveDataRow) {
@@ -257,6 +261,9 @@ public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {
                     } else if (position == replaceForward) {
                         String t = LocaleController.getString("ReplaceForward", R.string.ReplaceForward);
                         textCell.setTextAndCheck(t, preferences.getBoolean("replaceForward", true), false);
+                    } else if (position == mentionByName) {
+                        String t = LocaleController.getString("MentionByName", R.string.MentionByName);
+                        textCell.setTextAndCheck(t, preferences.getBoolean("mentionByName", false), false);
                     } else if (position == syncPinsRow) {
                         String t = LocaleController.getString("SyncPins", R.string.SyncPins);
                         String info = LocaleController.getString("SyncPinsInfo", R.string.SyncPinsInfo);
@@ -290,6 +297,7 @@ public boolean isEnabled(RecyclerView.ViewHolder holder) {
                         || position == unmutedOnTopRow
                         || position == rearVideoMessages
                         || position == replaceForward
+                        || position == mentionByName
                         || position == syncPinsRow
                         || position == photoHasStickerRow;
             return fork;
@@ -341,6 +349,7 @@ public int getItemViewType(int position) {
                 || position == syncPinsRow
                 || position == rearVideoMessages
                 || position == replaceForward
+                || position == mentionByName
                 || position == photoHasStickerRow) {
                 return 3;
             } else if (sectionRows.contains(position)) {
diff --git a/TMessagesProj/src/main/res/values-ru/strings.xml b/TMessagesProj/src/main/res/values-ru/strings.xml
index dc7627bd2..943013c85 100644
--- a/TMessagesProj/src/main/res/values-ru/strings.xml
+++ b/TMessagesProj/src/main/res/values-ru/strings.xml
@@ -35,5 +35,6 @@
     <string name="HideSensitiveData">Скрыть личную информацию</string>
     <string name="SystemCamera">Использовать системную камеру</string>
     <string name="SystemCameraInfo">Только в диалоге вложений</string>
+    <string name="MentionByName">Упоминать пользователей по имени</string>
 
 </resources>
diff --git a/TMessagesProj/src/main/res/values/strings.xml b/TMessagesProj/src/main/res/values/strings.xml
index a469f7143..e059d2794 100644
--- a/TMessagesProj/src/main/res/values/strings.xml
+++ b/TMessagesProj/src/main/res/values/strings.xml
@@ -3075,4 +3075,5 @@
     <string name="HideSensitiveData">Hide Sensitive Data</string>
     <string name="SystemCamera">Use System Camera for Photo</string>
     <string name="SystemCameraInfo">Only in Attachment Dialog</string>
+    <string name="MentionByName">Mention User by Name</string>
 </resources>
