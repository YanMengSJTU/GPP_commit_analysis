diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index a0fa58ff8..4aa44227f 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -11386,6 +11386,8 @@ public void onResume() {
             chatActivityEnterView.setFieldFocused(true);
         }
         if (chatActivityEnterView != null) {
+            EditTextCaption editTextCaption = chatActivityEnterView.getEditField();
+            editTextCaption.clearFocus();
             chatActivityEnterView.onResume();
         }
         if (currentUser != null) {
@@ -11836,6 +11838,9 @@ private void hideActionMode() {
             EditTextCaption editTextCaption = chatActivityEnterView.getEditField();
             editTextCaption.requestFocus();
             editTextCaption.setAllowDrawCursor(true);
+        } else if (chatActivityEnterView != null) {
+            EditTextCaption editTextCaption = chatActivityEnterView.getEditField();
+            editTextCaption.clearFocus();
         }
     }
 
