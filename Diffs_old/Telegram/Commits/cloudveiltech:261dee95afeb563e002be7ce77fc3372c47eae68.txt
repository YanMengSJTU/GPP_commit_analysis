diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 0f576e536..7a13e32d4 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -1,3 +1,7 @@
+def keystorePropertiesFile = rootProject.file("../keystore.properties");
+def keystoreProperties = new Properties()
+keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
+
 buildscript {
     repositories {
         maven { url 'https://maven.fabric.io/public' }
@@ -62,18 +66,18 @@ android {
 
     signingConfigs {
         debug {
-            storeFile file("config/release.keystore")
-            storePassword RELEASE_STORE_PASSWORD
-            keyAlias RELEASE_KEY_ALIAS
-            keyPassword RELEASE_KEY_PASSWORD
+            storeFile file(keystoreProperties['storeFileCloudVeil'])
+            storePassword keystoreProperties['storePasswordCloudVeil']
+            keyAlias keystoreProperties['keyAliasCloudVeil']
+            keyPassword keystoreProperties['keyPasswordCloudVeil']
             v2SigningEnabled false
         }
 
         release {
-            storeFile file("config/release.keystore")
-            storePassword RELEASE_STORE_PASSWORD
-            keyAlias RELEASE_KEY_ALIAS
-            keyPassword RELEASE_KEY_PASSWORD
+            storeFile file(keystoreProperties['storeFileCloudVeil'])
+            storePassword keystoreProperties['storePasswordCloudVeil']
+            keyAlias keystoreProperties['keyAliasCloudVeil']
+            keyPassword keystoreProperties['keyPasswordCloudVeil']
             v2SigningEnabled false
         }
     }
@@ -102,7 +106,7 @@ android {
         }
     }
 
-    defaultConfig.versionCode = 957
+    defaultConfig.versionCode = 961
 
     sourceSets.debug {
         manifest.srcFile 'config/debug/AndroidManifest.xml'
@@ -174,7 +178,7 @@ android {
     defaultConfig {
         minSdkVersion 14
         targetSdkVersion 25
-        versionName "3.18.0"
+        versionName "4.2.0"
 
         externalNativeBuild {
             ndkBuild {
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 4ea2663bf..0b0ba1d4f 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -3,4 +3,4 @@ distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-3.3-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-3.5-all.zip
