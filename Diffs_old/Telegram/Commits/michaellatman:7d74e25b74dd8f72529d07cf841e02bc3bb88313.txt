diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index ab347d7c4..f9fb47984 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -17,10 +17,11 @@ tasks.withType(JavaCompile) {
 }
 
 dependencies {
-    compile 'com.android.support:support-v4:19.0.+'
-    compile 'com.google.android.gms:play-services:3.2.+'
+    compile 'com.google.android.gms:play-services:5.0.+'
     compile 'net.hockeyapp.android:HockeySDK:3.0.1'
     compile 'com.googlecode.mp4parser:isoparser:1.0.+'
+    compile "com.android.support:support-v4:20.0.+"
+
 }
 
 android {
diff --git a/TMessagesProj/src/main/AndroidManifest.xml b/TMessagesProj/src/main/AndroidManifest.xml
index 894e88eea..5808597b5 100644
--- a/TMessagesProj/src/main/AndroidManifest.xml
+++ b/TMessagesProj/src/main/AndroidManifest.xml
@@ -146,12 +146,16 @@
             </intent-filter>
         </receiver>
 
+        <receiver android:name="org.telegram.android.WearReplyReceiver" android:enabled="true">
+
+        </receiver>
         <uses-library android:name="com.sec.android.app.multiwindow" android:required="false" />
         <meta-data android:name="com.sec.android.support.multiwindow" android:value="true" />
         <meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_W" android:value="632dp" />
         <meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_H" android:value="598dp" />
         <meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_W" android:value="632dp" />
         <meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_H" android:value="598dp" />
+        <meta-data android:name="com.google.android.gms.version" android:value="@integer/google_play_services_version" />
 
     </application>
 
diff --git a/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java b/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
index 88cfffecc..10824f42e 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
@@ -20,6 +20,8 @@
 import android.net.Uri;
 import android.provider.Settings;
 import android.support.v4.app.NotificationCompat;
+import android.support.v4.app.NotificationManagerCompat;
+import android.support.v4.app.RemoteInput;
 
 import org.json.JSONArray;
 import org.json.JSONObject;
@@ -44,7 +46,7 @@
 
     private ArrayList<MessageObject> pushMessages = new ArrayList<MessageObject>();
     private HashMap<Integer, MessageObject> pushMessagesDict = new HashMap<Integer, MessageObject>();
-    private NotificationManager notificationManager = null;
+    private NotificationManagerCompat notificationManager = null;
     private HashMap<Long, Integer> pushDialogs = new HashMap<Long, Integer>();
     public ArrayList<MessageObject> popupMessages = new ArrayList<MessageObject>();
     private long openned_dialog_id = 0;
@@ -68,7 +70,7 @@ public static NotificationsController getInstance() {
     }
 
     public NotificationsController() {
-        notificationManager = (NotificationManager)ApplicationLoader.applicationContext.getSystemService(Context.NOTIFICATION_SERVICE);
+        notificationManager = NotificationManagerCompat.from(ApplicationLoader.applicationContext);
     }
 
     public void cleanup() {
@@ -430,7 +432,28 @@ private void showOrUpdateNotification(boolean notifyAboutLast) {
             } else {
                 mBuilder.setVibrate(new long[]{0, 0});
             }
+            final String EXTRA_VOICE_REPLY = "extra_voice_reply";
 
+            String replyLabel = "Reply";
+
+            RemoteInput remoteInput = new RemoteInput.Builder(EXTRA_VOICE_REPLY)
+                    .setLabel(replyLabel)
+                    .build();
+            Intent reply = new Intent(ApplicationLoader.applicationContext,WearReplyReceiver.class);
+            reply.putExtra("chatID",user_id);
+
+
+            NotificationCompat.Action action =
+                    new NotificationCompat.Action.Builder(R.drawable.ic_action_reply,"Reply", PendingIntent.getBroadcast(ApplicationLoader.applicationContext, 0, reply,PendingIntent.FLAG_UPDATE_CURRENT))
+                            .addRemoteInput(remoteInput)
+                            .build();
+            NotificationCompat.WearableExtender wearableExtender =
+                    new NotificationCompat.WearableExtender()
+                            //.setHintHideIcon(true)
+                    .addAction(action);
+
+
+            mBuilder.extend(wearableExtender);
             notificationManager.notify(1, mBuilder.build());
             if (preferences.getBoolean("EnablePebbleNotifications", false)) {
                 sendAlertToPebble(lastMessage);
diff --git a/TMessagesProj/src/main/java/org/telegram/android/WearReplyReceiver.java b/TMessagesProj/src/main/java/org/telegram/android/WearReplyReceiver.java
new file mode 100644
index 000000000..5f1228bf0
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/android/WearReplyReceiver.java
@@ -0,0 +1,32 @@
+package org.telegram.android;
+
+import android.content.BroadcastReceiver;
+import android.content.Context;
+import android.content.Intent;
+import android.os.Bundle;
+import android.support.v4.app.RemoteInput;
+
+public class WearReplyReceiver extends BroadcastReceiver {
+    public WearReplyReceiver() {
+    }
+
+    @Override
+    public void onReceive(Context context, Intent intent) {
+        // TODO: This method is called when the BroadcastReceiver is receiving
+        // an Intent broadcast.
+        CharSequence text = getMessageText(intent);
+        int chatID = intent.getIntExtra("chatID",-1);
+        if(chatID!=-1){
+            if(text!=null)MessagesController.getInstance().sendMessage(text.toString(),chatID);
+        }
+    }
+    private CharSequence getMessageText(Intent intent) {
+        Bundle remoteInput = RemoteInput.getResultsFromIntent(intent);
+        if (remoteInput != null) {
+            return remoteInput.getCharSequence("extra_voice_reply");
+        }
+        return null;
+    }
+
+
+}
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/ic_action_reply.png b/TMessagesProj/src/main/res/drawable-xhdpi/ic_action_reply.png
new file mode 100644
index 000000000..119006014
Binary files /dev/null and b/TMessagesProj/src/main/res/drawable-xhdpi/ic_action_reply.png differ
