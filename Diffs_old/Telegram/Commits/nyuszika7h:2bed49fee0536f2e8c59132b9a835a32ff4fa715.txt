diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 136c1f780..2177b7f05 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -5,7 +5,7 @@ repositories {
 }
 
 dependencies {
-    compile 'com.android.support:support-v4:22.2.+'
+    compile 'com.android.support:support-v4:23.0.+'
     compile 'com.google.android.gms:play-services:3.2.+'
     //compile 'com.google.android.gms:play-services:7.5.0'
     compile 'net.hockeyapp.android:HockeySDK:3.5.+'
@@ -15,7 +15,7 @@ dependencies {
 
 android {
     compileSdkVersion 22
-    buildToolsVersion '22.0.1'
+    buildToolsVersion '23.0.0'
 
     compileOptions {
         sourceCompatibility JavaVersion.VERSION_1_7
@@ -82,8 +82,8 @@ android {
         applicationId "org.telegram.plus"
         minSdkVersion 8
         targetSdkVersion 22
-        versionCode 592
-        versionName "3.1.2.0"
+        versionCode 594
+        versionName "3.1.3.0"
         multiDexEnabled true
     }
 }
diff --git a/TMessagesProj/src/main/java/jawnae/pyronet/PyroClient.java b/TMessagesProj/src/main/java/jawnae/pyronet/PyroClient.java
index 1044c9c6e..8f2b03d57 100644
--- a/TMessagesProj/src/main/java/jawnae/pyronet/PyroClient.java
+++ b/TMessagesProj/src/main/java/jawnae/pyronet/PyroClient.java
@@ -58,7 +58,7 @@
         this.key.attach(this);
 
         this.outbound = new ByteStream();
-        this.listeners = new CopyOnWriteArrayList<PyroClientListener>();
+        this.listeners = new CopyOnWriteArrayList<>();
         this.lastEventTime = System.currentTimeMillis();
     }
 
diff --git a/TMessagesProj/src/main/java/org/telegram/android/LocaleController.java b/TMessagesProj/src/main/java/org/telegram/android/LocaleController.java
index 7ba7ad236..9114a82e4 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/LocaleController.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/LocaleController.java
@@ -243,6 +243,14 @@ public LocaleController() {
         sortedLanguages.add(localeInfo);
         languagesDict.put(localeInfo.shortName, localeInfo);
 
+        localeInfo = new LocaleInfo();
+        localeInfo.name = "日本語";
+        localeInfo.nameEnglish = "Japanese";
+        localeInfo.shortName = "ja";
+        localeInfo.pathToFile = null;
+        sortedLanguages.add(localeInfo);
+        languagesDict.put(localeInfo.shortName, localeInfo);
+
         localeInfo = new LocaleInfo();
         localeInfo.name = "Hrvatski";
         localeInfo.nameEnglish = "Croatian";
diff --git a/TMessagesProj/src/main/java/org/telegram/android/MessageObject.java b/TMessagesProj/src/main/java/org/telegram/android/MessageObject.java
index 231026dbf..2710420a1 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/MessageObject.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/MessageObject.java
@@ -10,6 +10,7 @@
 
 import android.content.SharedPreferences;
 import android.graphics.Paint;
+import android.graphics.Typeface;
 import android.text.Layout;
 import android.text.Spannable;
 import android.text.SpannableStringBuilder;
@@ -17,17 +18,20 @@
 import android.text.StaticLayout;
 import android.text.TextPaint;
 import android.text.TextUtils;
+import android.text.style.URLSpan;
 import android.text.util.Linkify;
 
 import org.telegram.messenger.ApplicationLoader;
 import org.telegram.messenger.ConnectionsManager;
 import org.telegram.messenger.FileLoader;
 import org.telegram.messenger.FileLog;
-import org.telegram.messenger.R;
 import org.telegram.messenger.TLRPC;
+import org.telegram.messenger.R;
 import org.telegram.messenger.UserConfig;
+import org.telegram.ui.Components.TypefaceSpan;
 import org.telegram.ui.Components.URLSpanNoUnderline;
 import org.telegram.ui.Components.URLSpanNoUnderlineBold;
+import org.telegram.ui.Components.URLSpanReplacement;
 
 import java.util.AbstractMap;
 import java.util.ArrayList;
@@ -433,7 +437,7 @@ public MessageObject(TLRPC.Message message, AbstractMap<Integer, TLRPC.User> use
         int dateYear = rightNow.get(Calendar.YEAR);
         int dateMonth = rightNow.get(Calendar.MONTH);
         dateKey = String.format("%d_%02d_%02d", dateYear, dateMonth, dateDay);
-        if (contentType == 1 || contentType == 2) {
+        if (contentType == 1 || contentType == 2 || contentType == 0) {
             monthKey = String.format("%d_%02d", dateYear, dateMonth);
         }
 
@@ -702,7 +706,54 @@ private void generateLayout() {
         generateLinkDescription();
         textLayoutBlocks = new ArrayList<>();
 
+        boolean useManualParse = messageOwner.entities.isEmpty() && (
+                messageOwner instanceof TLRPC.TL_message_old ||
+                messageOwner instanceof TLRPC.TL_message_old2 ||
+                messageOwner instanceof TLRPC.TL_message_old3 ||
+                messageOwner instanceof TLRPC.TL_message_old4 ||
+                messageOwner instanceof TLRPC.TL_messageForwarded_old ||
+                messageOwner instanceof TLRPC.TL_messageForwarded_old2 ||
+                messageOwner instanceof TLRPC.TL_message_secret ||
+                isOut() && messageOwner.send_state != MESSAGE_SEND_STATE_SENT || messageOwner.id < 0);
+
+        if (useManualParse) {
         addLinks(messageText);
+        }
+
+        if (messageText instanceof Spannable) {
+            Spannable spannable = (Spannable) messageText;
+            int count = messageOwner.entities.size();
+            for (int a = 0; a < count; a++) {
+                TLRPC.MessageEntity entity = messageOwner.entities.get(a);
+                if (entity.length <= 0 || entity.offset < 0 || entity.offset >= messageOwner.message.length()) {
+                    continue;
+                } else if (entity.offset + entity.length > messageOwner.message.length()) {
+                    entity.length = messageOwner.message.length() - entity.offset;
+                }
+                if (entity instanceof TLRPC.TL_messageEntityBold) {
+                    spannable.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface("fonts/rmedium.ttf")), entity.offset, entity.offset + entity.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+                } else if (entity instanceof TLRPC.TL_messageEntityItalic) {
+                    spannable.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface("fonts/ritalic.ttf")), entity.offset, entity.offset + entity.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+                } else if (entity instanceof TLRPC.TL_messageEntityCode) {
+                    spannable.setSpan(new TypefaceSpan(Typeface.MONOSPACE), entity.offset, entity.offset + entity.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+                } else if (!useManualParse) {
+                    String url = messageOwner.message.substring(entity.offset, entity.offset + entity.length);
+                    if (entity instanceof TLRPC.TL_messageEntityBotCommand || entity instanceof TLRPC.TL_messageEntityHashtag || entity instanceof TLRPC.TL_messageEntityMention) {
+                        spannable.setSpan(new URLSpanNoUnderline(url), entity.offset, entity.offset + entity.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+                    } else if (entity instanceof TLRPC.TL_messageEntityEmail) {
+                        spannable.setSpan(new URLSpanReplacement("mailto:" + url), entity.offset, entity.offset + entity.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+                    } else if (entity instanceof TLRPC.TL_messageEntityUrl) {
+                        if (!url.toLowerCase().startsWith("http")) {
+                            spannable.setSpan(new URLSpan("http://" + url), entity.offset, entity.offset + entity.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+                        } else {
+                            spannable.setSpan(new URLSpan(url), entity.offset, entity.offset + entity.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+                        }
+                    } else if (entity instanceof TLRPC.TL_messageEntityTextUrl) {
+                        spannable.setSpan(new URLSpanReplacement(entity.url), entity.offset, entity.offset + entity.length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+                    }
+                }
+            }
+        }
 
         int maxWidth;
         if (AndroidUtilities.isTablet()) {
diff --git a/TMessagesProj/src/main/java/org/telegram/android/MessagesController.java b/TMessagesProj/src/main/java/org/telegram/android/MessagesController.java
index 49ed73605..1fd921c9f 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/MessagesController.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/MessagesController.java
@@ -270,13 +270,10 @@ public void addSupportUser() {
         TLRPC.InputUser inputUser;
         if (user.id == UserConfig.getClientUserId()) {
             inputUser = new TLRPC.TL_inputUserSelf();
-        } else if (user.access_hash != 0) {
-            inputUser = new TLRPC.TL_inputUserForeign();
-            inputUser.user_id = user.id;
-            inputUser.access_hash = user.access_hash;
         } else {
-            inputUser = new TLRPC.TL_inputUserContact();
+            inputUser = new TLRPC.TL_inputUser();
             inputUser.user_id = user.id;
+            inputUser.access_hash = user.access_hash;
         }
         return inputUser;
     }
@@ -514,7 +511,9 @@ public void putUsers(ArrayList<TLRPC.User> users, boolean fromCache) {
             return;
         }
         boolean updateStatus = false;
-        for (TLRPC.User user : users) {
+        int count = users.size();
+        for (int a = 0; a < count; a++) {
+            TLRPC.User user = users.get(a);
             if (putUser(user, fromCache)) {
                 updateStatus = true;
             }
@@ -533,9 +532,13 @@ public void putChat(TLRPC.Chat chat, boolean fromCache) {
         if (chat == null) {
             return;
         }
-        if (fromCache) {
-            chats.putIfAbsent(chat.id, chat);
-        } else {
+        TLRPC.Chat oldChat = chats.get(chat.id);
+        if (!fromCache) {
+            if (oldChat != null && chat.version != oldChat.version) {
+                loadedFullChats.remove((Integer) chat.id);
+            }
+            chats.put(chat.id, chat);
+        } else if (oldChat == null) {
             chats.put(chat.id, chat);
         }
     }
@@ -544,7 +547,9 @@ public void putChats(ArrayList<TLRPC.Chat> chats, boolean fromCache) {
         if (chats == null || chats.isEmpty()) {
             return;
         }
-        for (TLRPC.Chat chat : chats) {
+        int count = chats.size();
+        for (int a = 0; a < count; a++) {
+            TLRPC.Chat chat = chats.get(a);
             putChat(chat, fromCache);
         }
     }
@@ -564,7 +569,9 @@ public void putEncryptedChats(ArrayList<TLRPC.EncryptedChat> encryptedChats, boo
         if (encryptedChats == null || encryptedChats.isEmpty()) {
             return;
         }
-        for (TLRPC.EncryptedChat encryptedChat : encryptedChats) {
+        int count = encryptedChats.size();
+        for (int a = 0; a < count; a++) {
+            TLRPC.EncryptedChat encryptedChat = encryptedChats.get(a);
             putEncryptedChat(encryptedChat, fromCache);
         }
     }
@@ -1145,12 +1152,8 @@ public void run() {
                 if (user == null) {
                     return;
                 }
-                if (user.access_hash != 0) {
-                    req.peer = new TLRPC.TL_inputPeerForeign();
-                    req.peer.access_hash = user.access_hash;
-                } else {
-                    req.peer = new TLRPC.TL_inputPeerContact();
-                }
+                req.peer = new TLRPC.TL_inputPeerUser();
+                req.peer.access_hash = user.access_hash;
                 req.peer.user_id = lower_part;
             }
             ConnectionsManager.getInstance().performRpc(req, new RPCRequest.RPCRequestDelegate() {
@@ -1449,14 +1452,9 @@ public void sendTyping(final long dialog_id, final int action, int classGuid) {
                 if (user == null) {
                     return;
                 }
-                if (user.access_hash != 0) {
-                    req.peer = new TLRPC.TL_inputPeerForeign();
-                    req.peer.user_id = user.id;
-                    req.peer.access_hash = user.access_hash;
-                } else {
-                    req.peer = new TLRPC.TL_inputPeerContact();
-                    req.peer.user_id = user.id;
-                }
+                req.peer = new TLRPC.TL_inputPeerUser();
+                req.peer.user_id = user.id;
+                req.peer.access_hash = user.access_hash;
             }
             if (action == 0) {
             req.action = new TLRPC.TL_sendMessageTypingAction();
@@ -1536,14 +1534,9 @@ public void loadMessages(final long dialog_id, final int count, final int max_id
                 if (user == null) {
                     return;
                 }
-                if (user.access_hash != 0) {
-                    req.peer = new TLRPC.TL_inputPeerForeign();
-                    req.peer.user_id = user.id;
-                    req.peer.access_hash = user.access_hash;
-                } else {
-                    req.peer = new TLRPC.TL_inputPeerContact();
-                    req.peer.user_id = user.id;
-                }
+                req.peer = new TLRPC.TL_inputPeerUser();
+                req.peer.user_id = user.id;
+                req.peer.access_hash = user.access_hash;
             }
             if (load_type == 3) {
                 req.offset = -count / 2;
@@ -2018,14 +2011,9 @@ public void markDialogAsRead(final long dialog_id, final int max_id, final int m
                 if (user == null) {
                     return;
                 }
-                if (user.access_hash != 0) {
-                    req.peer = new TLRPC.TL_inputPeerForeign();
-                    req.peer.user_id = user.id;
-                    req.peer.access_hash = user.access_hash;
-                } else {
-                    req.peer = new TLRPC.TL_inputPeerContact();
-                    req.peer.user_id = user.id;
-                }
+                req.peer = new TLRPC.TL_inputPeerUser();
+                req.peer.user_id = user.id;
+                req.peer.access_hash = user.access_hash;
             }
             req.max_id = max_positive_id;
             req.offset = offset;
@@ -3008,6 +2996,7 @@ public void processUpdates(final TLRPC.Updates updates, boolean fromQueue) {
                         message.to_id.chat_id = updates.chat_id;
                         message.dialog_id = -updates.chat_id;
                     }
+                    message.entities = updates.entities;
                     message.message = updates.message;
                     message.date = updates.date;
                     message.flags = updates.flags;
diff --git a/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java b/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
index 97cbe020a..27f8083e7 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
@@ -1371,12 +1371,8 @@ public static void updateServerNotificationsSettings(long dialog_id) {
             if (user == null) {
                 return;
             }
-            if (user.access_hash != 0) {
-                ((TLRPC.TL_inputNotifyPeer)req.peer).peer = new TLRPC.TL_inputPeerForeign();
+            ((TLRPC.TL_inputNotifyPeer)req.peer).peer = new TLRPC.TL_inputPeerUser();
                 ((TLRPC.TL_inputNotifyPeer)req.peer).peer.access_hash = user.access_hash;
-            } else {
-                ((TLRPC.TL_inputNotifyPeer)req.peer).peer = new TLRPC.TL_inputPeerContact();
-            }
             ((TLRPC.TL_inputNotifyPeer)req.peer).peer.user_id = (int)dialog_id;
         }
 
diff --git a/TMessagesProj/src/main/java/org/telegram/android/SecretChatHelper.java b/TMessagesProj/src/main/java/org/telegram/android/SecretChatHelper.java
index 5d793ea3d..9498d2d64 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/SecretChatHelper.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/SecretChatHelper.java
@@ -559,7 +559,6 @@ private void processSentMessage(TLRPC.Message newMsg, TLRPC.EncryptedFile file,
                 newMsg.media.video.h = video.h;
                 newMsg.media.video.date = video.date;
                 newMsg.media.caption = video.caption != null ? video.caption : "";
-                newMsg.media.video.user_id = video.user_id;
                 newMsg.media.video.size = file.size;
                 newMsg.media.video.id = file.id;
                 newMsg.media.video.access_hash = file.access_hash;
@@ -897,9 +896,7 @@ public void run() {
                     newMessage.media = new TLRPC.TL_messageMediaPhoto();
                     newMessage.media.caption = "";
                     newMessage.media.photo = new TLRPC.TL_photo();
-                    newMessage.media.photo.user_id = newMessage.from_id;
                     newMessage.media.photo.date = newMessage.date;
-                    newMessage.media.photo.geo = new TLRPC.TL_geoPointEmpty();
                     byte[] thumb = ((TLRPC.TL_decryptedMessageMediaPhoto) decryptedMessage.media).thumb;
                     if (thumb != null && thumb.length != 0 && thumb.length <= 6000 && decryptedMessage.media.thumb_w <= 100 && decryptedMessage.media.thumb_h <= 100) {
                         TLRPC.TL_photoCachedSize small = new TLRPC.TL_photoCachedSize();
@@ -948,7 +945,6 @@ public void run() {
                     newMessage.media.video.w = decryptedMessage.media.w;
                     newMessage.media.video.h = decryptedMessage.media.h;
                     newMessage.media.video.date = date;
-                    newMessage.media.video.user_id = from_id;
                     newMessage.media.video.size = file.size;
                     newMessage.media.video.id = file.id;
                     newMessage.media.video.access_hash = file.access_hash;
diff --git a/TMessagesProj/src/main/java/org/telegram/android/SendMessagesHelper.java b/TMessagesProj/src/main/java/org/telegram/android/SendMessagesHelper.java
index 62eecb357..74ea3b93b 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/SendMessagesHelper.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/SendMessagesHelper.java
@@ -540,14 +540,9 @@ public void sendMessage(ArrayList<MessageObject> messages, long peer) {
             if (sendToUser == null) {
                 return;
             }
-            if (sendToUser.access_hash != 0) {
-                sendToPeer = new TLRPC.TL_inputPeerForeign();
-                sendToPeer.user_id = sendToUser.id;
-                sendToPeer.access_hash = sendToUser.access_hash;
-            } else {
-                sendToPeer = new TLRPC.TL_inputPeerContact();
-                sendToPeer.user_id = sendToUser.id;
-            }
+            sendToPeer = new TLRPC.TL_inputPeerUser();
+            sendToPeer.user_id = sendToUser.id;
+            sendToPeer.access_hash = sendToUser.access_hash;
         }
 
         ArrayList<MessageObject> objArr = new ArrayList<>();
@@ -575,6 +570,10 @@ public void sendMessage(ArrayList<MessageObject> messages, long peer) {
             newMsg.message = msgObj.messageOwner.message;
             newMsg.fwd_msg_id = msgObj.getId();
             newMsg.attachPath = msgObj.messageOwner.attachPath;
+            newMsg.entities = msgObj.messageOwner.entities;
+            if (!newMsg.entities.isEmpty()) {
+                newMsg.flags |= TLRPC.MESSAGE_FLAG_HAS_ENTITIES;
+            }
             if (newMsg.attachPath == null) {
                 newMsg.attachPath = "";
             }
@@ -965,14 +964,9 @@ private void sendMessage(String message, TLRPC.MessageMedia location, TLRPC.TL_p
                     if ((sendToUser.flags & TLRPC.USER_FLAG_BOT) != 0) {
                         newMsg.flags &= ~TLRPC.MESSAGE_FLAG_UNREAD;
                     }
-                    if (sendToUser.access_hash != 0) {
-                        sendToPeer = new TLRPC.TL_inputPeerForeign();
-                        sendToPeer.user_id = sendToUser.id;
-                        sendToPeer.access_hash = sendToUser.access_hash;
-                    } else {
-                        sendToPeer = new TLRPC.TL_inputPeerContact();
-                        sendToPeer.user_id = sendToUser.id;
-                    }
+                    sendToPeer = new TLRPC.TL_inputPeerUser();
+                    sendToPeer.user_id = sendToUser.id;
+                    sendToPeer.access_hash = sendToUser.access_hash;
                 }
             }
         } else {
@@ -1563,6 +1557,10 @@ public void run(TLObject response, TLRPC.TL_error error) {
                         newMsgObj.local_id = newMsgObj.id = res.id;
                         newMsgObj.date = res.date;
                         newMsgObj.media = res.media;
+                        newMsgObj.entities = res.entities;
+                        if (!newMsgObj.entities.isEmpty()) {
+                            newMsgObj.flags |= TLRPC.MESSAGE_FLAG_HAS_ENTITIES;
+                        }
                         if (res instanceof TLRPC.TL_messages_sentMessage) {
                             MessagesController.getInstance().processNewDifferenceParams(-1, res.pts, res.date, res.pts_count);
                         } else if (res instanceof TLRPC.TL_messages_sentMessageLink) {
@@ -1849,10 +1847,8 @@ public void run() {
         } else {
             UserConfig.saveConfig(false);
             TLRPC.TL_photo photo = new TLRPC.TL_photo();
-            photo.user_id = UserConfig.getClientUserId();
             photo.date = ConnectionsManager.getInstance().getCurrentTime();
             photo.sizes = sizes;
-            photo.geo = new TLRPC.TL_geoPointEmpty();
             return photo;
         }
     }
@@ -1913,8 +1909,8 @@ private static boolean prepareSendingDocumentInternal(String path, String origin
             if (attributeAudio != null) {
                 originalPath += "audio" + f.length();
             } else {
-            originalPath += "" + f.length();
-        }
+                originalPath += "" + f.length();
+            }
         }
 
         TLRPC.TL_document document = null;
@@ -2218,9 +2214,7 @@ public void run() {
                                 }
                                 if (photo == null) {
                                     photo = new TLRPC.TL_photo();
-                                    photo.user_id = UserConfig.getClientUserId();
                                     photo.date = ConnectionsManager.getInstance().getCurrentTime();
-                                    photo.geo = new TLRPC.TL_geoPointEmpty();
                                     TLRPC.TL_photoSize photoSize = new TLRPC.TL_photoSize();
                                     photoSize.w = searchImage.width;
                                     photoSize.h = searchImage.height;
diff --git a/TMessagesProj/src/main/java/org/telegram/android/query/SharedMediaQuery.java b/TMessagesProj/src/main/java/org/telegram/android/query/SharedMediaQuery.java
index f7275f504..a95bdefc8 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/query/SharedMediaQuery.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/query/SharedMediaQuery.java
@@ -61,12 +61,8 @@ public static void loadMedia(final long uid, final int offset, final int count,
                 if (user == null) {
                     return;
                 }
-                if (user.access_hash != 0) {
-                    req.peer = new TLRPC.TL_inputPeerForeign();
-                    req.peer.access_hash = user.access_hash;
-                } else {
-                    req.peer = new TLRPC.TL_inputPeerContact();
-                }
+                req.peer = new TLRPC.TL_inputPeerUser();
+                req.peer.access_hash = user.access_hash;
                 req.peer.user_id = lower_part;
             }
             long reqId = ConnectionsManager.getInstance().performRpc(req, new RPCRequest.RPCRequestDelegate() {
@@ -109,12 +105,8 @@ public static void getMediaCount(final long uid, final int type, final int class
                 if (user == null) {
                     return;
                 }
-                if (user.access_hash != 0) {
-                    req.peer = new TLRPC.TL_inputPeerForeign();
-                    req.peer.access_hash = user.access_hash;
-                } else {
-                    req.peer = new TLRPC.TL_inputPeerContact();
-                }
+                req.peer = new TLRPC.TL_inputPeerUser();
+                req.peer.access_hash = user.access_hash;
                 req.peer.user_id = lower_part;
             }
             long reqId = ConnectionsManager.getInstance().performRpc(req, new RPCRequest.RPCRequestDelegate() {
@@ -158,8 +150,13 @@ public static int getMediaType(TLRPC.Message message) {
             }
         } else if (message.media instanceof TLRPC.TL_messageMediaAudio) {
             return MEDIA_AUDIO;
-        } else if (message.media instanceof TLRPC.TL_messageMediaWebPage) {
-            return MEDIA_URL;
+        } else if (!message.entities.isEmpty()) {
+            for (int a = 0; a < message.entities.size(); a++) {
+                TLRPC.MessageEntity entity = message.entities.get(a);
+                if (entity instanceof TLRPC.TL_messageEntityUrl || entity instanceof TLRPC.TL_messageEntityTextUrl || entity instanceof TLRPC.TL_messageEntityEmail) {
+                    return MEDIA_URL;
+                }
+            }
         }
         return -1;
     }
@@ -170,9 +167,15 @@ public static boolean canAddMessageToMedia(TLRPC.Message message) {
         } else if (message.media instanceof TLRPC.TL_messageMediaPhoto ||
                 message.media instanceof TLRPC.TL_messageMediaVideo ||
                 message.media instanceof TLRPC.TL_messageMediaDocument ||
-                message.media instanceof TLRPC.TL_messageMediaAudio/* ||
-                message.media instanceof TLRPC.TL_messageMediaWebPage && !(message.media.webpage instanceof TLRPC.TL_webPageEmpty)*/) {
+                message.media instanceof TLRPC.TL_messageMediaAudio) {
             return true;
+        } else if (!message.entities.isEmpty()) {
+            for (int a = 0; a < message.entities.size(); a++) {
+                TLRPC.MessageEntity entity = message.entities.get(a);
+                if (entity instanceof TLRPC.TL_messageEntityUrl || entity instanceof TLRPC.TL_messageEntityTextUrl || entity instanceof TLRPC.TL_messageEntityEmail) {
+                    return true;
+                }
+            }
         }
         return false;
     }
diff --git a/TMessagesProj/src/main/java/org/telegram/android/query/StickersQuery.java b/TMessagesProj/src/main/java/org/telegram/android/query/StickersQuery.java
index 29ceb0438..2857d547d 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/query/StickersQuery.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/query/StickersQuery.java
@@ -271,66 +271,70 @@ public void run() {
                     }
                 }
                 if (res != null) {
-                    final ArrayList<TLRPC.TL_messages_stickerSet> stickerSetsNew = new ArrayList<>();
-                    final HashMap<Long, TLRPC.TL_messages_stickerSet> stickerSetsByIdNew = new HashMap<>();
-                    final HashMap<Long, String> stickersByEmojiNew = new HashMap<>();
-                    final HashMap<Long, TLRPC.Document> stickersByIdNew = new HashMap<>();
-                    final HashMap<String, ArrayList<TLRPC.Document>> allStickersNew = new HashMap<>();
-
-                    for (int a = 0; a < res.size(); a++) {
-                        TLRPC.TL_messages_stickerSet stickerSet = res.get(a);
-                        if (stickerSet == null) {
-                            continue;
-                        }
-                        stickerSetsNew.add(stickerSet);
-                        stickerSetsByIdNew.put(stickerSet.set.id, stickerSet);
-
-                        for (int b = 0; b < stickerSet.documents.size(); b++) {
-                            TLRPC.Document document = stickerSet.documents.get(b);
-                            if (document == null || document instanceof TLRPC.TL_documentEmpty) {
+                    try {
+                        final ArrayList<TLRPC.TL_messages_stickerSet> stickerSetsNew = new ArrayList<>();
+                        final HashMap<Long, TLRPC.TL_messages_stickerSet> stickerSetsByIdNew = new HashMap<>();
+                        final HashMap<Long, String> stickersByEmojiNew = new HashMap<>();
+                        final HashMap<Long, TLRPC.Document> stickersByIdNew = new HashMap<>();
+                        final HashMap<String, ArrayList<TLRPC.Document>> allStickersNew = new HashMap<>();
+
+                        for (int a = 0; a < res.size(); a++) {
+                            TLRPC.TL_messages_stickerSet stickerSet = res.get(a);
+                            if (stickerSet == null) {
                                 continue;
                             }
-                            stickersByIdNew.put(document.id, document);
-                        }
-                        if ((stickerSet.set.flags & 2) == 0) {
-                            for (int b = 0; b < stickerSet.packs.size(); b++) {
-                                TLRPC.TL_stickerPack stickerPack = stickerSet.packs.get(b);
-                                if (stickerPack == null || stickerPack.emoticon == null) {
+                            stickerSetsNew.add(stickerSet);
+                            stickerSetsByIdNew.put(stickerSet.set.id, stickerSet);
+
+                            for (int b = 0; b < stickerSet.documents.size(); b++) {
+                                TLRPC.Document document = stickerSet.documents.get(b);
+                                if (document == null || document instanceof TLRPC.TL_documentEmpty) {
                                     continue;
                                 }
-                                stickerPack.emoticon = stickerPack.emoticon.replace("\uFE0F", "");
-                                ArrayList<TLRPC.Document> arrayList = allStickersNew.get(stickerPack.emoticon);
-                                if (arrayList == null) {
-                                    arrayList = new ArrayList<>();
-                                    allStickersNew.put(stickerPack.emoticon, arrayList);
-                                }
-                                for (int c = 0; c < stickerPack.documents.size(); c++) {
-                                    Long id = stickerPack.documents.get(c);
-                                    if (!stickersByEmojiNew.containsKey(id)) {
-                                        stickersByEmojiNew.put(id, stickerPack.emoticon);
+                                stickersByIdNew.put(document.id, document);
+                            }
+                            if ((stickerSet.set.flags & 2) == 0) {
+                                for (int b = 0; b < stickerSet.packs.size(); b++) {
+                                    TLRPC.TL_stickerPack stickerPack = stickerSet.packs.get(b);
+                                    if (stickerPack == null || stickerPack.emoticon == null) {
+                                        continue;
+                                    }
+                                    stickerPack.emoticon = stickerPack.emoticon.replace("\uFE0F", "");
+                                    ArrayList<TLRPC.Document> arrayList = allStickersNew.get(stickerPack.emoticon);
+                                    if (arrayList == null) {
+                                        arrayList = new ArrayList<>();
+                                        allStickersNew.put(stickerPack.emoticon, arrayList);
+                                    }
+                                    for (int c = 0; c < stickerPack.documents.size(); c++) {
+                                        Long id = stickerPack.documents.get(c);
+                                        if (!stickersByEmojiNew.containsKey(id)) {
+                                            stickersByEmojiNew.put(id, stickerPack.emoticon);
+                                        }
+                                        arrayList.add(stickersByIdNew.get(id));
                                     }
-                                    arrayList.add(stickersByIdNew.get(id));
                                 }
                             }
                         }
-                    }
 
-                    if (!cache) {
-                        putStickersToCache(stickerSetsNew, date, hash);
-                    }
-                    AndroidUtilities.runOnUIThread(new Runnable() {
-                        @Override
-                        public void run() {
-                            stickersById = stickersByIdNew;
-                            stickerSetsById = stickerSetsByIdNew;
-                            stickerSets = stickerSetsNew;
-                            allStickers = allStickersNew;
-                            stickersByEmoji = stickersByEmojiNew;
-                            loadHash = hash;
-                            loadDate = date;
-                            NotificationCenter.getInstance().postNotificationName(NotificationCenter.stickersDidLoaded);
+                        if (!cache) {
+                            putStickersToCache(stickerSetsNew, date, hash);
                         }
-                    });
+                        AndroidUtilities.runOnUIThread(new Runnable() {
+                            @Override
+                            public void run() {
+                                stickersById = stickersByIdNew;
+                                stickerSetsById = stickerSetsByIdNew;
+                                stickerSets = stickerSetsNew;
+                                allStickers = allStickersNew;
+                                stickersByEmoji = stickersByEmojiNew;
+                                loadHash = hash;
+                                loadDate = date;
+                                NotificationCenter.getInstance().postNotificationName(NotificationCenter.stickersDidLoaded);
+                            }
+                        });
+                    } catch (Throwable e) {
+                        FileLog.e("tmessages", e);
+                    }
                 }
             }
         });
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/TLClassStore.java b/TMessagesProj/src/main/java/org/telegram/messenger/TLClassStore.java
index 1c855859e..7174476a0 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/TLClassStore.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/TLClassStore.java
@@ -78,11 +78,13 @@ public TLClassStore() {
         classStore.put(TLRPC.TL_video_old2.constructor, TLRPC.TL_video_old2.class);
         classStore.put(TLRPC.TL_video_old.constructor, TLRPC.TL_video_old.class);
         classStore.put(TLRPC.TL_videoEncrypted.constructor, TLRPC.TL_videoEncrypted.class);
+        classStore.put(TLRPC.TL_video_old3.constructor, TLRPC.TL_video_old3.class);
 
         classStore.put(TLRPC.TL_audio.constructor, TLRPC.TL_audio.class);
         classStore.put(TLRPC.TL_audioEncrypted.constructor, TLRPC.TL_audioEncrypted.class);
         classStore.put(TLRPC.TL_audioEmpty.constructor, TLRPC.TL_audioEmpty.class);
         classStore.put(TLRPC.TL_audio_old.constructor, TLRPC.TL_audio_old.class);
+        classStore.put(TLRPC.TL_audio_old2.constructor, TLRPC.TL_audio_old2.class);
 
         classStore.put(TLRPC.TL_document.constructor, TLRPC.TL_document.class);
         classStore.put(TLRPC.TL_documentEmpty.constructor, TLRPC.TL_documentEmpty.class);
@@ -96,6 +98,7 @@ public TLClassStore() {
         classStore.put(TLRPC.TL_photoSizeEmpty.constructor, TLRPC.TL_photoSizeEmpty.class);
         classStore.put(TLRPC.TL_photoCachedSize.constructor, TLRPC.TL_photoCachedSize.class);
         classStore.put(TLRPC.TL_photo_old.constructor, TLRPC.TL_photo_old.class);
+        classStore.put(TLRPC.TL_photo_old2.constructor, TLRPC.TL_photo_old2.class);
     }
 
     static TLClassStore store = null;
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/TLRPC.java b/TMessagesProj/src/main/java/org/telegram/messenger/TLRPC.java
index c660c1dd1..3a69447df 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/TLRPC.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/TLRPC.java
@@ -38,8 +38,10 @@
     public static final int MESSAGE_FLAG_REPLY              = 0x00000008;
     public static final int MESSAGE_FLAG_MENTION            = 0x00000010;
     public static final int MESSAGE_FLAG_CONTENT_UNREAD     = 0x00000020;
+    public static final int MESSAGE_FLAG_HAS_MARKUP         = 0x00000040;
+    public static final int MESSAGE_FLAG_HAS_ENTITIES       = 0x00000080;
 
-    public static final int LAYER = 32;
+    public static final int LAYER = 34;
 
     public static class TL_inputEncryptedChat extends TLObject {
         public static int constructor = 0xf141b5e1;
@@ -5407,6 +5409,7 @@ public void serializeToStream(AbsSerializedData stream) {
         public int id;
         public int date;
         public MessageMedia media;
+        public ArrayList<MessageEntity> entities = new ArrayList<>();
         public int pts;
         public int pts_count;
         public ArrayList<TL_contacts_link> links = new ArrayList<>();
@@ -5415,7 +5418,7 @@ public void serializeToStream(AbsSerializedData stream) {
         public static messages_SentMessage TLdeserialize(AbsSerializedData stream, int constructor, boolean exception) {
             messages_SentMessage result = null;
             switch(constructor) {
-                case 0x4c3d47f3:
+                case 0x8a99d8e0:
                     result = new TL_messages_sentMessage();
                     break;
                 case 0x35a1a663:
@@ -5433,13 +5436,28 @@ public static messages_SentMessage TLdeserialize(AbsSerializedData stream, int c
     }
 
     public static class TL_messages_sentMessage extends messages_SentMessage {
-        public static int constructor = 0x4c3d47f3;
+        public static int constructor = 0x8a99d8e0;
 
 
         public void readParams(AbsSerializedData stream, boolean exception) {
             id = stream.readInt32(exception);
             date = stream.readInt32(exception);
             media = MessageMedia.TLdeserialize(stream, stream.readInt32(exception), exception);
+            int magic = stream.readInt32(exception);
+            if (magic != 0x1cb5c415) {
+                if (exception) {
+                    throw new RuntimeException(String.format("wrong Vector magic, got %x", magic));
+                }
+                return;
+            }
+            int count = stream.readInt32(exception);
+            for (int a = 0; a < count; a++) {
+                MessageEntity object = MessageEntity.TLdeserialize(stream, stream.readInt32(exception), exception);
+                if (object == null) {
+                    return;
+                }
+                entities.add(object);
+            }
             pts = stream.readInt32(exception);
             pts_count = stream.readInt32(exception);
         }
@@ -5449,6 +5467,12 @@ public void serializeToStream(AbsSerializedData stream) {
             stream.writeInt32(id);
             stream.writeInt32(date);
             media.serializeToStream(stream);
+            stream.writeInt32(0x1cb5c415);
+            int count = entities.size();
+            stream.writeInt32(count);
+            for (int a = 0; a < count; a++) {
+                entities.get(a).serializeToStream(stream);
+            }
             stream.writeInt32(pts);
             stream.writeInt32(pts_count);
         }
@@ -5601,14 +5625,14 @@ public void serializeToStream(AbsSerializedData stream) {
 
     public static class InputPeer extends TLObject {
         public int user_id;
-        public int chat_id;
         public long access_hash;
+        public int chat_id;
 
         public static InputPeer TLdeserialize(AbsSerializedData stream, int constructor, boolean exception) {
             InputPeer result = null;
             switch(constructor) {
-                case 0x1023dbe8:
-                    result = new TL_inputPeerContact();
+                case 0x7b8e7de6:
+                    result = new TL_inputPeerUser();
                     break;
                 case 0x179be863:
                     result = new TL_inputPeerChat();
@@ -5619,9 +5643,6 @@ public static InputPeer TLdeserialize(AbsSerializedData stream, int constructor,
                 case 0x7da07ec9:
                     result = new TL_inputPeerSelf();
                     break;
-                case 0x9b447325:
-                    result = new TL_inputPeerForeign();
-                    break;
             }
             if (result == null && exception) {
                 throw new RuntimeException(String.format("can't parse magic %x in InputPeer", constructor));
@@ -5633,17 +5654,19 @@ public static InputPeer TLdeserialize(AbsSerializedData stream, int constructor,
         }
     }
 
-    public static class TL_inputPeerContact extends InputPeer {
-        public static int constructor = 0x1023dbe8;
+    public static class TL_inputPeerUser extends InputPeer {
+        public static int constructor = 0x7b8e7de6;
 
 
         public void readParams(AbsSerializedData stream, boolean exception) {
             user_id = stream.readInt32(exception);
+            access_hash = stream.readInt64(exception);
         }
 
         public void serializeToStream(AbsSerializedData stream) {
             stream.writeInt32(constructor);
             stream.writeInt32(user_id);
+            stream.writeInt64(access_hash);
         }
     }
 
@@ -5679,22 +5702,6 @@ public void serializeToStream(AbsSerializedData stream) {
         }
     }
 
-    public static class TL_inputPeerForeign extends InputPeer {
-        public static int constructor = 0x9b447325;
-
-
-        public void readParams(AbsSerializedData stream, boolean exception) {
-            user_id = stream.readInt32(exception);
-            access_hash = stream.readInt64(exception);
-        }
-
-        public void serializeToStream(AbsSerializedData stream) {
-            stream.writeInt32(constructor);
-            stream.writeInt32(user_id);
-            stream.writeInt64(access_hash);
-        }
-    }
-
     public static class TL_msg_copy extends TLObject {
         public static int constructor = 0xe06046b2;
 
@@ -6542,17 +6549,14 @@ public void serializeToStream(AbsSerializedData stream) {
         public static InputUser TLdeserialize(AbsSerializedData stream, int constructor, boolean exception) {
             InputUser result = null;
             switch(constructor) {
-                case 0xf7c1b13f:
-                    result = new TL_inputUserSelf();
-                    break;
-                case 0x655e74ff:
-                    result = new TL_inputUserForeign();
-                    break;
                 case 0xb98886cf:
                     result = new TL_inputUserEmpty();
                     break;
-                case 0x86e94f65:
-                    result = new TL_inputUserContact();
+                case 0xf7c1b13f:
+                    result = new TL_inputUserSelf();
+                    break;
+                case 0xd8292816:
+                    result = new TL_inputUser();
                     break;
             }
             if (result == null && exception) {
@@ -6565,8 +6569,8 @@ public static InputUser TLdeserialize(AbsSerializedData stream, int constructor,
         }
     }
 
-    public static class TL_inputUserSelf extends InputUser {
-        public static int constructor = 0xf7c1b13f;
+    public static class TL_inputUserEmpty extends InputUser {
+        public static int constructor = 0xb98886cf;
 
 
         public void serializeToStream(AbsSerializedData stream) {
@@ -6574,24 +6578,8 @@ public void serializeToStream(AbsSerializedData stream) {
         }
     }
 
-    public static class TL_inputUserForeign extends InputUser {
-        public static int constructor = 0x655e74ff;
-
-
-        public void readParams(AbsSerializedData stream, boolean exception) {
-            user_id = stream.readInt32(exception);
-            access_hash = stream.readInt64(exception);
-        }
-
-        public void serializeToStream(AbsSerializedData stream) {
-            stream.writeInt32(constructor);
-            stream.writeInt32(user_id);
-            stream.writeInt64(access_hash);
-        }
-    }
-
-    public static class TL_inputUserEmpty extends InputUser {
-        public static int constructor = 0xb98886cf;
+    public static class TL_inputUserSelf extends InputUser {
+        public static int constructor = 0xf7c1b13f;
 
 
         public void serializeToStream(AbsSerializedData stream) {
@@ -6599,17 +6587,19 @@ public void serializeToStream(AbsSerializedData stream) {
         }
     }
 
-    public static class TL_inputUserContact extends InputUser {
-        public static int constructor = 0x86e94f65;
+    public static class TL_inputUser extends InputUser {
+        public static int constructor = 0xd8292816;
 
 
         public void readParams(AbsSerializedData stream, boolean exception) {
             user_id = stream.readInt32(exception);
+            access_hash = stream.readInt64(exception);
         }
 
         public void serializeToStream(AbsSerializedData stream) {
             stream.writeInt32(constructor);
             stream.writeInt32(user_id);
+            stream.writeInt64(access_hash);
         }
     }
 
@@ -7080,9 +7070,12 @@ public static Photo TLdeserialize(AbsSerializedData stream, int constructor, boo
                 case 0x2331b22d:
                     result = new TL_photoEmpty();
                     break;
-                case 0xc3838076:
+                case 0xcded42fe:
                     result = new TL_photo();
                     break;
+                case 0xc3838076:
+                    result = new TL_photo_old2();
+                    break;
                 case 0x22b56751:
                     result = new TL_photo_old();
                     break;
@@ -7112,6 +7105,45 @@ public void serializeToStream(AbsSerializedData stream) {
     }
 
     public static class TL_photo extends Photo {
+        public static int constructor = 0xcded42fe;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            id = stream.readInt64(exception);
+            access_hash = stream.readInt64(exception);
+            date = stream.readInt32(exception);
+            int magic = stream.readInt32(exception);
+            if (magic != 0x1cb5c415) {
+                if (exception) {
+                    throw new RuntimeException(String.format("wrong Vector magic, got %x", magic));
+                }
+                return;
+            }
+            int count = stream.readInt32(exception);
+            for (int a = 0; a < count; a++) {
+                PhotoSize object = PhotoSize.TLdeserialize(stream, stream.readInt32(exception), exception);
+                if (object == null) {
+                    return;
+                }
+                sizes.add(object);
+            }
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt64(id);
+            stream.writeInt64(access_hash);
+            stream.writeInt32(date);
+            stream.writeInt32(0x1cb5c415);
+            int count = sizes.size();
+            stream.writeInt32(count);
+            for (int a = 0; a < count; a++) {
+                sizes.get(a).serializeToStream(stream);
+            }
+        }
+    }
+
+    public static class TL_photo_old2 extends TL_photo {
         public static int constructor = 0xc3838076;
 
 
@@ -9383,9 +9415,12 @@ public void serializeToStream(AbsSerializedData stream) {
         public static Video TLdeserialize(AbsSerializedData stream, int constructor, boolean exception) {
             Video result = null;
             switch(constructor) {
-                case 0xee9f4a4d:
+                case 0xf72887d3:
                     result = new TL_video();
                     break;
+                case 0xee9f4a4d:
+                    result = new TL_video_old3();
+                    break;
                 case 0x55555553:
                     result = new TL_videoEncrypted();
                     break;
@@ -9410,6 +9445,38 @@ public static Video TLdeserialize(AbsSerializedData stream, int constructor, boo
     }
 
     public static class TL_video extends Video {
+        public static int constructor = 0xf72887d3;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            id = stream.readInt64(exception);
+            access_hash = stream.readInt64(exception);
+            date = stream.readInt32(exception);
+            duration = stream.readInt32(exception);
+            mime_type = stream.readString(exception);
+            size = stream.readInt32(exception);
+            thumb = PhotoSize.TLdeserialize(stream, stream.readInt32(exception), exception);
+            dc_id = stream.readInt32(exception);
+            w = stream.readInt32(exception);
+            h = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt64(id);
+            stream.writeInt64(access_hash);
+            stream.writeInt32(date);
+            stream.writeInt32(duration);
+            stream.writeString(mime_type);
+            stream.writeInt32(size);
+            thumb.serializeToStream(stream);
+            stream.writeInt32(dc_id);
+            stream.writeInt32(w);
+            stream.writeInt32(h);
+        }
+    }
+
+    public static class TL_video_old3 extends TL_video {
         public static int constructor = 0xee9f4a4d;
 
 
@@ -9818,6 +9885,52 @@ public void serializeToStream(AbsSerializedData stream) {
         }
     }
 
+    public static class help_AppChangelog extends TLObject {
+        public String text;
+
+        public static help_AppChangelog TLdeserialize(AbsSerializedData stream, int constructor, boolean exception) {
+            help_AppChangelog result = null;
+            switch(constructor) {
+                case 0xaf7e0394:
+                    result = new TL_help_appChangelogEmpty();
+                    break;
+                case 0x4668e6bd:
+                    result = new TL_help_appChangelog();
+                    break;
+            }
+            if (result == null && exception) {
+                throw new RuntimeException(String.format("can't parse magic %x in help_AppChangelog", constructor));
+            }
+            if (result != null) {
+                result.readParams(stream, exception);
+            }
+            return result;
+        }
+    }
+
+    public static class TL_help_appChangelogEmpty extends help_AppChangelog {
+        public static int constructor = 0xaf7e0394;
+
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+        }
+    }
+
+    public static class TL_help_appChangelog extends help_AppChangelog {
+        public static int constructor = 0x4668e6bd;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            text = stream.readString(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeString(text);
+        }
+    }
+
     public static class TL_keyboardButton extends TLObject {
         public static int constructor = 0xa2fa4880;
 
@@ -10349,6 +10462,7 @@ public void serializeToStream(AbsSerializedData stream) {
         public int fwd_from_id;
         public int fwd_date;
         public int reply_to_msg_id;
+        public ArrayList<MessageEntity> entities = new ArrayList<>();
         public ArrayList<Update> updates = new ArrayList<>();
         public ArrayList<User> users = new ArrayList<>();
         public ArrayList<Chat> chats = new ArrayList<>();
@@ -10360,13 +10474,13 @@ public void serializeToStream(AbsSerializedData stream) {
         public static Updates TLdeserialize(AbsSerializedData stream, int constructor, boolean exception) {
             Updates result = null;
             switch(constructor) {
-                case 0x52238b3c:
+                case 0xf9409b3d:
                     result = new TL_updateShortChatMessage();
                     break;
                 case 0x74ae4240:
                     result = new TL_updates();
                     break;
-                case 0xed5c2127:
+                case 0x3f32d858:
                     result = new TL_updateShortMessage();
                     break;
                 case 0x78d4dec1:
@@ -10390,7 +10504,7 @@ public static Updates TLdeserialize(AbsSerializedData stream, int constructor, b
     }
 
     public static class TL_updateShortChatMessage extends Updates {
-        public static int constructor = 0x52238b3c;
+        public static int constructor = 0xf9409b3d;
 
 
         public void readParams(AbsSerializedData stream, boolean exception) {
@@ -10411,6 +10525,23 @@ public void readParams(AbsSerializedData stream, boolean exception) {
             if ((flags & 8) != 0) {
                 reply_to_msg_id = stream.readInt32(exception);
             }
+            if ((flags & 128) != 0) {
+                int magic = stream.readInt32(exception);
+                if (magic != 0x1cb5c415) {
+                    if (exception) {
+                        throw new RuntimeException(String.format("wrong Vector magic, got %x", magic));
+                    }
+                    return;
+                }
+                int count = stream.readInt32(exception);
+                for (int a = 0; a < count; a++) {
+                    MessageEntity object = MessageEntity.TLdeserialize(stream, stream.readInt32(exception), exception);
+                    if (object == null) {
+                        return;
+                    }
+                    entities.add(object);
+                }
+            }
         }
 
         public void serializeToStream(AbsSerializedData stream) {
@@ -10432,6 +10563,14 @@ public void serializeToStream(AbsSerializedData stream) {
             if ((flags & 8) != 0) {
                 stream.writeInt32(reply_to_msg_id);
             }
+            if ((flags & 128) != 0) {
+                stream.writeInt32(0x1cb5c415);
+                int count = entities.size();
+                stream.writeInt32(count);
+                for (int a = 0; a < count; a++) {
+                    entities.get(a).serializeToStream(stream);
+                }
+            }
         }
     }
 
@@ -10515,7 +10654,7 @@ public void serializeToStream(AbsSerializedData stream) {
     }
 
     public static class TL_updateShortMessage extends Updates {
-        public static int constructor = 0xed5c2127;
+        public static int constructor = 0x3f32d858;
 
 
         public void readParams(AbsSerializedData stream, boolean exception) {
@@ -10535,6 +10674,23 @@ public void readParams(AbsSerializedData stream, boolean exception) {
             if ((flags & 8) != 0) {
                 reply_to_msg_id = stream.readInt32(exception);
             }
+            if ((flags & 128) != 0) {
+                int magic = stream.readInt32(exception);
+                if (magic != 0x1cb5c415) {
+                    if (exception) {
+                        throw new RuntimeException(String.format("wrong Vector magic, got %x", magic));
+                    }
+                    return;
+                }
+                int count = stream.readInt32(exception);
+                for (int a = 0; a < count; a++) {
+                    MessageEntity object = MessageEntity.TLdeserialize(stream, stream.readInt32(exception), exception);
+                    if (object == null) {
+                        return;
+                    }
+                    entities.add(object);
+                }
+            }
         }
 
         public void serializeToStream(AbsSerializedData stream) {
@@ -10555,6 +10711,14 @@ public void serializeToStream(AbsSerializedData stream) {
             if ((flags & 8) != 0) {
                 stream.writeInt32(reply_to_msg_id);
             }
+            if ((flags & 128) != 0) {
+                stream.writeInt32(0x1cb5c415);
+                int count = entities.size();
+                stream.writeInt32(count);
+                for (int a = 0; a < count; a++) {
+                    entities.get(a).serializeToStream(stream);
+                }
+            }
         }
     }
 
@@ -11217,17 +11381,20 @@ public void serializeToStream(AbsSerializedData stream) {
         public static Audio TLdeserialize(AbsSerializedData stream, int constructor, boolean exception) {
             Audio result = null;
             switch(constructor) {
+                case 0x586988d8:
+                    result = new TL_audioEmpty();
+                    break;
                 case 0x427425e7:
                     result = new TL_audio_old();
                     break;
-                case 0xc7ac6496:
+                case 0xf9e35055:
                     result = new TL_audio();
                     break;
                 case 0x555555F6:
                     result = new TL_audioEncrypted();
                     break;
-                case 0x586988d8:
-                    result = new TL_audioEmpty();
+                case 0xc7ac6496:
+                    result = new TL_audio_old2();
                     break;
             }
             if (result == null && exception) {
@@ -11266,7 +11433,7 @@ public void serializeToStream(AbsSerializedData stream) {
         }
     }
 
-    public static class TL_audio extends Audio {
+    public static class TL_audio_old2 extends TL_audio {
         public static int constructor = 0xc7ac6496;
 
 
@@ -11294,6 +11461,32 @@ public void serializeToStream(AbsSerializedData stream) {
         }
     }
 
+    public static class TL_audio extends Audio {
+        public static int constructor = 0xf9e35055;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            id = stream.readInt64(exception);
+            access_hash = stream.readInt64(exception);
+            date = stream.readInt32(exception);
+            duration = stream.readInt32(exception);
+            mime_type = stream.readString(exception);
+            size = stream.readInt32(exception);
+            dc_id = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt64(id);
+            stream.writeInt64(access_hash);
+            stream.writeInt32(date);
+            stream.writeInt32(duration);
+            stream.writeString(mime_type);
+            stream.writeInt32(size);
+            stream.writeInt32(dc_id);
+        }
+    }
+
     public static class TL_audioEncrypted extends TL_audio {
         public static int constructor = 0x555555F6;
 
@@ -12950,6 +13143,239 @@ public void serializeToStream(AbsSerializedData stream) {
         }
     }
 
+    public static class MessageEntity extends TLObject {
+        public int offset;
+        public int length;
+        public String language;
+        public String url;
+
+        public static MessageEntity TLdeserialize(AbsSerializedData stream, int constructor, boolean exception) {
+            MessageEntity result = null;
+            switch(constructor) {
+                case 0x6ed02538:
+                    result = new TL_messageEntityUrl();
+                    break;
+                case 0xbd610bc9:
+                    result = new TL_messageEntityBold();
+                    break;
+                case 0x826f8b60:
+                    result = new TL_messageEntityItalic();
+                    break;
+                case 0x64e475c2:
+                    result = new TL_messageEntityEmail();
+                    break;
+                case 0x73924be0:
+                    result = new TL_messageEntityPre();
+                    break;
+                case 0x76a6d327:
+                    result = new TL_messageEntityTextUrl();
+                    break;
+                case 0xbb92ba95:
+                    result = new TL_messageEntityUnknown();
+                    break;
+                case 0x6f635b0d:
+                    result = new TL_messageEntityHashtag();
+                    break;
+                case 0x6cef8ac7:
+                    result = new TL_messageEntityBotCommand();
+                    break;
+                case 0x28a20571:
+                    result = new TL_messageEntityCode();
+                    break;
+                case 0xfa04579d:
+                    result = new TL_messageEntityMention();
+                    break;
+            }
+            if (result == null && exception) {
+                throw new RuntimeException(String.format("can't parse magic %x in MessageEntity", constructor));
+            }
+            if (result != null) {
+                result.readParams(stream, exception);
+            }
+            return result;
+        }
+    }
+
+    public static class TL_messageEntityUrl extends MessageEntity {
+        public static int constructor = 0x6ed02538;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
+    public static class TL_messageEntityBold extends MessageEntity {
+        public static int constructor = 0xbd610bc9;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
+    public static class TL_messageEntityItalic extends MessageEntity {
+        public static int constructor = 0x826f8b60;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
+    public static class TL_messageEntityEmail extends MessageEntity {
+        public static int constructor = 0x64e475c2;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
+    public static class TL_messageEntityPre extends MessageEntity {
+        public static int constructor = 0x73924be0;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+            language = stream.readString(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+            stream.writeString(language);
+        }
+    }
+
+    public static class TL_messageEntityTextUrl extends MessageEntity {
+        public static int constructor = 0x76a6d327;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+            url = stream.readString(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+            stream.writeString(url);
+        }
+    }
+
+    public static class TL_messageEntityUnknown extends MessageEntity {
+        public static int constructor = 0xbb92ba95;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
+    public static class TL_messageEntityHashtag extends MessageEntity {
+        public static int constructor = 0x6f635b0d;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
+    public static class TL_messageEntityBotCommand extends MessageEntity {
+        public static int constructor = 0x6cef8ac7;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
+    public static class TL_messageEntityCode extends MessageEntity {
+        public static int constructor = 0x28a20571;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
+    public static class TL_messageEntityMention extends MessageEntity {
+        public static int constructor = 0xfa04579d;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            offset = stream.readInt32(exception);
+            length = stream.readInt32(exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(offset);
+            stream.writeInt32(length);
+        }
+    }
+
     public static class TL_destroy_sessions_res extends TLObject {
         public static int constructor = 0xfb95abcd;
 
@@ -13826,7 +14252,7 @@ public void serializeToStream(AbsSerializedData stream) {
     }
 
     public static class TL_messages_sendMessage extends TLObject {
-        public static int constructor = 0xfc55e6b5;
+        public static int constructor = 0xdf12390;
 
         public int flags;
         public InputPeer peer;
@@ -13834,6 +14260,7 @@ public void serializeToStream(AbsSerializedData stream) {
         public String message;
         public long random_id;
         public ReplyMarkup reply_markup;
+        public ArrayList<MessageEntity> entities = new ArrayList<>();
 
         public TLObject deserializeResponse(AbsSerializedData stream, int constructor, boolean exception) {
             return messages_SentMessage.TLdeserialize(stream, constructor, exception);
@@ -13851,6 +14278,14 @@ public void serializeToStream(AbsSerializedData stream) {
             if ((flags & 4) != 0) {
                 reply_markup.serializeToStream(stream);
             }
+            if ((flags & 8) != 0) {
+                stream.writeInt32(0x1cb5c415);
+                int count = entities.size();
+                stream.writeInt32(count);
+                for (int a = 0; a < count; a++) {
+                    entities.get(a).serializeToStream(stream);
+                }
+            }
         }
     }
 
@@ -14236,11 +14671,11 @@ public void serializeToStream(AbsSerializedData stream) {
     }
 
     public static class TL_photos_getUserPhotos extends TLObject {
-        public static int constructor = 0xb7ee553c;
+        public static int constructor = 0x91cd32a8;
 
         public InputUser user_id;
         public int offset;
-        public int max_id;
+        public long max_id;
         public int limit;
 
         public TLObject deserializeResponse(AbsSerializedData stream, int constructor, boolean exception) {
@@ -14251,7 +14686,7 @@ public void serializeToStream(AbsSerializedData stream) {
             stream.writeInt32(constructor);
             user_id.serializeToStream(stream);
             stream.writeInt32(offset);
-            stream.writeInt32(max_id);
+            stream.writeInt64(max_id);
             stream.writeInt32(limit);
         }
     }
@@ -15175,6 +15610,27 @@ public void serializeToStream(AbsSerializedData stream) {
         }
     }
 
+    public static class TL_help_getAppChangelog extends TLObject {
+        public static int constructor = 0x5bab7fb2;
+
+        public String device_model;
+        public String system_version;
+        public String app_version;
+        public String lang_code;
+
+        public TLObject deserializeResponse(AbsSerializedData stream, int constructor, boolean exception) {
+            return help_AppChangelog.TLdeserialize(stream, constructor, exception);
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeString(device_model);
+            stream.writeString(system_version);
+            stream.writeString(app_version);
+            stream.writeString(lang_code);
+        }
+    }
+
     //manually created
 
     //EncryptedChat start
@@ -15252,6 +15708,7 @@ public static EncryptedChat TLdeserialize(AbsSerializedData stream, int construc
         public String message;
         public MessageMedia media;
         public int flags;
+        public ArrayList<MessageEntity> entities = new ArrayList<>();
         public ReplyMarkup reply_markup;
         public int send_state = 0; //custom
         public int fwd_msg_id = 0; //custom
@@ -15276,11 +15733,14 @@ public static Message TLdeserialize(AbsSerializedData stream, int constructor, b
                     result = new TL_message_old3();
                     break;
                 case 0xc3060325:
-                    result = new TL_message();
+                    result = new TL_message_old4();
                     break;
                 case 0x83e5de54:
                     result = new TL_messageEmpty();
                     break;
+                case 0xf07814c8:
+                    result = new TL_message();
+                    break;
                 case 0xa367e716:
                     result = new TL_messageForwarded_old2(); //custom
                     break;
@@ -15352,6 +15812,91 @@ public void serializeToStream(AbsSerializedData stream) {
     }
 
     public static class TL_message extends Message {
+        public static int constructor = 0xf07814c8;
+
+
+        public void readParams(AbsSerializedData stream, boolean exception) {
+            flags = stream.readInt32(exception);
+            id = stream.readInt32(exception);
+            from_id = stream.readInt32(exception);
+            to_id = Peer.TLdeserialize(stream, stream.readInt32(exception), exception);
+            if ((flags & 4) != 0) {
+                fwd_from_id = stream.readInt32(exception);
+            }
+            if ((flags & 4) != 0) {
+                fwd_date = stream.readInt32(exception);
+            }
+            if ((flags & 8) != 0) {
+                reply_to_msg_id = stream.readInt32(exception);
+            }
+            date = stream.readInt32(exception);
+            message = stream.readString(exception);
+            media = MessageMedia.TLdeserialize(stream, stream.readInt32(exception), exception);
+            if ((flags & 64) != 0) {
+                reply_markup = ReplyMarkup.TLdeserialize(stream, stream.readInt32(exception), exception);
+            }
+            if ((flags & 128) != 0) {
+                int magic = stream.readInt32(exception);
+                if (magic != 0x1cb5c415) {
+                    if (exception) {
+                        throw new RuntimeException(String.format("wrong Vector magic, got %x", magic));
+                    }
+                    return;
+                }
+                int count = stream.readInt32(exception);
+                for (int a = 0; a < count; a++) {
+                    MessageEntity object = MessageEntity.TLdeserialize(stream, stream.readInt32(exception), exception);
+                    if (object == null) {
+                        return;
+                    }
+                    entities.add(object);
+                }
+            }
+            if (id < 0 || (media != null && !(media instanceof TL_messageMediaEmpty) && !(media instanceof TL_messageMediaWebPage) && message != null && message.length() != 0 && message.startsWith("-1"))) {
+                attachPath = stream.readString(exception);
+            }
+            if ((flags & MESSAGE_FLAG_FWD) != 0 && id < 0) {
+                fwd_msg_id = stream.readInt32(exception);
+            }
+        }
+
+        public void serializeToStream(AbsSerializedData stream) {
+            stream.writeInt32(constructor);
+            stream.writeInt32(flags);
+            stream.writeInt32(id);
+            stream.writeInt32(from_id);
+            to_id.serializeToStream(stream);
+            if ((flags & 4) != 0) {
+                stream.writeInt32(fwd_from_id);
+            }
+            if ((flags & 4) != 0) {
+                stream.writeInt32(fwd_date);
+            }
+            if ((flags & 8) != 0) {
+                stream.writeInt32(reply_to_msg_id);
+            }
+            stream.writeInt32(date);
+            stream.writeString(message);
+            media.serializeToStream(stream);
+            if ((flags & 64) != 0) {
+                reply_markup.serializeToStream(stream);
+            }
+            if ((flags & 128) != 0) {
+                stream.writeInt32(0x1cb5c415);
+                int count = entities.size();
+                stream.writeInt32(count);
+                for (int a = 0; a < count; a++) {
+                    entities.get(a).serializeToStream(stream);
+                }
+            }
+            stream.writeString(attachPath);
+            if ((flags & MESSAGE_FLAG_FWD) != 0 && id < 0) {
+                stream.writeInt32(fwd_msg_id);
+            }
+        }
+    }
+
+    public static class TL_message_old4 extends TL_message {
         public static int constructor = 0xc3060325;
 
 
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatBaseCell.java b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatBaseCell.java
index dd6162155..b5d7a58ef 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatBaseCell.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatBaseCell.java
@@ -49,7 +49,7 @@
         void didPressedCancelSendButton(ChatBaseCell cell);
         void didLongPressed(ChatBaseCell cell);
         void didPressReplyMessage(ChatBaseCell cell, int id);
-        void didPressUrl(MessageObject messageObject, String url);
+        void didPressUrl(MessageObject messageObject, ClickableSpan url);
         void needOpenWebView(String url, String title, String originalUrl, int w, int h);
         void didClickedImage(ChatBaseCell cell);
         boolean canPerformActions();
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMediaCell.java b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMediaCell.java
index d3821573f..bc55dee11 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMediaCell.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMediaCell.java
@@ -46,7 +46,6 @@
 import org.telegram.ui.Components.RadialProgress;
 import org.telegram.ui.Components.ResourceLoader;
 import org.telegram.ui.Components.StaticLayoutEx;
-import org.telegram.ui.Components.URLSpanNoUnderline;
 import org.telegram.ui.PhotoViewer;
 
 import java.io.File;
@@ -221,16 +220,7 @@ public boolean onTouchEvent(MotionEvent event) {
                         }
                     } else if (linkPreviewPressed) {
                         try {
-                            if (pressedLink instanceof URLSpanNoUnderline) {
-                                String url = ((URLSpanNoUnderline) pressedLink).getURL();
-                                if (url.startsWith("@") || url.startsWith("#") || url.startsWith("/")) {
-                                    if (delegate != null) {
-                                        delegate.didPressUrl(currentMessageObject, url);
-                                    }
-                                }
-                            } else {
-                                pressedLink.onClick(this);
-                            }
+                            delegate.didPressUrl(currentMessageObject, pressedLink);
                         } catch (Exception e) {
                             FileLog.e("tmessages", e);
                         }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMessageCell.java b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMessageCell.java
index 1b5f6768c..06a649c92 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMessageCell.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Cells/ChatMessageCell.java
@@ -40,7 +40,6 @@
 import org.telegram.ui.Components.RadialProgress;
 import org.telegram.ui.Components.ResourceLoader;
 import org.telegram.ui.Components.StaticLayoutEx;
-import org.telegram.ui.Components.URLSpanNoUnderline;
 
 import java.io.File;
 import java.util.Locale;
@@ -133,16 +132,7 @@ public boolean onTouchEvent(MotionEvent event) {
                                     } else {
                                         if (link[0] == pressedLink) {
                                             try {
-                                                if (pressedLink instanceof URLSpanNoUnderline) {
-                                                    String url = ((URLSpanNoUnderline) pressedLink).getURL();
-                                                    if (url.startsWith("@") || url.startsWith("#") || url.startsWith("/")) {
-                                                        if (delegate != null) {
-                                                            delegate.didPressUrl(currentMessageObject, url);
-                                                        }
-                                                    }
-                                                } else {
-                                                    pressedLink.onClick(this);
-                                                }
+                                                delegate.didPressUrl(currentMessageObject, pressedLink);
                                             } catch (Exception e) {
                                                 FileLog.e("tmessages", e);
                                             }
@@ -217,7 +207,10 @@ public boolean onTouchEvent(MotionEvent event) {
                                 pressedLink.onClick(this);
                             } else {
                                 if (drawImageButton && delegate != null) {
+                                    if (buttonState == -1) {
+                                        playSoundEffect(SoundEffectConstants.CLICK);
                                     delegate.didClickedImage(this);
+                                    }
                                 } else {
                                 TLRPC.WebPage webPage = currentMessageObject.messageOwner.media.webpage;
                                     if (Build.VERSION.SDK_INT >= 16 && webPage.embed_url != null && webPage.embed_url.length() != 0) {
@@ -715,17 +708,12 @@ public void setMessageObject(MessageObject messageObject) {
                 }
             }
             //Plus
-            //Log.e("setMessageObject3", "totalHeight " + totalHeight + " namesOffset " + namesOffset + " messageObject.textHeight: " + messageObject.textHeight);
             if( ( showAvatar && !isChat && !messageObject.isOut() ) || ((( (showMyAvatar && !isChat) || (showMyAvatarGroup && isChat)) && messageObject.isOut()))){
                 if ((totalHeight < avatarSize)) {
                     totalHeight = avatarSize + AndroidUtilities.dp(10);
-                    //Log.e("setMessageObject2","totalHeight "+totalHeight);
                 }
                 //totalHeight = messageObject.textHeight + AndroidUtilities.dp(19.5f) + namesOffset;
-
             }
-
-            //Log.e("setMessageObject 3", "backgroundWidth " + backgroundWidth+" maxChildWidth " + maxChildWidth);
         }
       updateButtonState(dataChanged);
     }
@@ -873,7 +861,7 @@ protected void onDraw(Canvas canvas) {
                     if (drawImageButton) {
                         int size = AndroidUtilities.dp(48);
                         buttonX = (int) (linkImageView.getImageX() + (linkImageView.getImageWidth() - size) / 2.0f);
-                        buttonY = (int) (linkImageView.getImageY() + (linkImageView.getImageHeight() - size) / 2.0f) + namesOffset;
+                        buttonY = (int) (linkImageView.getImageY() + (linkImageView.getImageHeight() - size) / 2.0f);
                         radialProgress.setProgressRect(buttonX, buttonY, buttonX + AndroidUtilities.dp(48), buttonY + AndroidUtilities.dp(48));
                     }
                 }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index 29657e966..b17cbe209 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -28,6 +28,7 @@
 import android.provider.ContactsContract;
 import android.provider.MediaStore;
 import android.text.TextUtils;
+import android.text.style.ClickableSpan;
 import android.util.Base64;
 import android.util.SparseArray;
 import android.util.TypedValue;
@@ -116,6 +117,8 @@
 import org.telegram.ui.Components.SizeNotifierFrameLayout;
 import org.telegram.ui.Components.TimerDrawable;
 import org.telegram.ui.Components.TypingDotsDrawable;
+import org.telegram.ui.Components.URLSpanNoUnderline;
+import org.telegram.ui.Components.URLSpanReplacement;
 import org.telegram.ui.Components.WebFrameLayout;
 
 import java.io.File;
@@ -1947,6 +1950,16 @@ public void onClick(View view) {
                     }
                 AlertDialog.Builder builder = null;
                     if (currentUser != null && userBlocked) {
+                    if ((currentUser.flags & TLRPC.USER_FLAG_BOT) != 0) {
+                        String botUserLast = botUser;
+                        botUser = null;
+                                MessagesController.getInstance().unblockUser(currentUser.id);
+                        if (botUserLast != null && botUserLast.length() != 0) {
+                            MessagesController.getInstance().sendBotStart(currentUser, botUserLast);
+                    } else {
+                        SendMessagesHelper.getInstance().sendMessage("/start", dialog_id, null, null, false);
+                    }
+                } else {
                     builder = new AlertDialog.Builder(getParentActivity());
                         builder.setMessage(LocaleController.getString("AreYouSureUnblockContact", R.string.AreYouSureUnblockContact));
                         builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
@@ -1955,8 +1968,9 @@ public void onClick(DialogInterface dialogInterface, int i) {
                                 MessagesController.getInstance().unblockUser(currentUser.id);
                             }
                         });
+                    }
                 } else if (currentUser != null && botUser != null) {
-                    if (botUser.length() != 0) {
+                    if (botUser != null && botUser.length() != 0) {
                         MessagesController.getInstance().sendBotStart(currentUser, botUser);
                     } else {
                         SendMessagesHelper.getInstance().sendMessage("/start", dialog_id, null, null, false);
@@ -2763,7 +2777,7 @@ private void updateSecretStatus() {
             bottomOverlay.setVisibility(View.INVISIBLE);
         }
         if (hideKeyboard) {
-            chatActivityEnterView.hidePopup();
+            chatActivityEnterView.hidePopup(false);
             if (getParentActivity() != null) {
             AndroidUtilities.hideKeyboard(getParentActivity().getCurrentFocus());
         }
@@ -4561,10 +4575,14 @@ private void updateBottomOverlay() {
             bottomOverlayChatText.setText(LocaleController.getString("DeleteThisGroup", R.string.DeleteThisGroup));
         } else {
             if (userBlocked) {
+                if ((currentUser.flags & TLRPC.USER_FLAG_BOT) != 0) {
+                    bottomOverlayChatText.setText(LocaleController.getString("BotUnblock", R.string.BotUnblock));
+                } else {
                 bottomOverlayChatText.setText(LocaleController.getString("Unblock", R.string.Unblock));
+                }
             } else if (botUser != null) {
                 bottomOverlayChatText.setText(LocaleController.getString("BotStart", R.string.BotStart));
-                chatActivityEnterView.hidePopup();
+                chatActivityEnterView.hidePopup(false);
                 if (getParentActivity() != null) {
                     AndroidUtilities.hideKeyboard(getParentActivity().getCurrentFocus());
                 }
@@ -5357,7 +5375,7 @@ public boolean onBackPressed() {
             updateVisibleRows();
             return false;
         } else if (chatActivityEnterView.isPopupShowing()) {
-            chatActivityEnterView.hidePopup();
+            chatActivityEnterView.hidePopup(true);
             return false;
         }
         return true;
@@ -5663,15 +5681,36 @@ public boolean canPerformActions() {
                         }
 
                         @Override
-                    public void didPressUrl(MessageObject messageObject, String url) {
-                            if (url.startsWith("@")) {
-                            MessagesController.openByUserName(url.substring(1), ChatActivity.this, 0);
-                            } else if (url.startsWith("#")) {
+                    public void didPressUrl(MessageObject messageObject, final ClickableSpan url) {
+                        if (url instanceof URLSpanNoUnderline) {
+                            String str = ((URLSpanNoUnderline) url).getURL();
+                            if (str.startsWith("@")) {
+                                MessagesController.openByUserName(str.substring(1), ChatActivity.this, 0);
+                            } else if (str.startsWith("#")) {
                             DialogsActivity fragment = new DialogsActivity(null);
-                                fragment.setSearchString(url);
+                                fragment.setSearchString(str);
                                 presentFragment(fragment);
-                        } else if (url.startsWith("/")) {
-                            chatActivityEnterView.setCommand(messageObject, url);
+                            } else if (str.startsWith("/")) {
+                                chatActivityEnterView.setCommand(messageObject, str);
+                            }
+                        } else if (url instanceof URLSpanReplacement) {
+                            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
+                            builder.setMessage(LocaleController.formatString("OpenUrlAlert", R.string.OpenUrlAlert, ((URLSpanReplacement) url).getURL()));
+                            builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
+                            builder.setPositiveButton(LocaleController.getString("Open", R.string.Open), new DialogInterface.OnClickListener() {
+                                @Override
+                                public void onClick(DialogInterface dialogInterface, int i) {
+                                    try {
+                                        url.onClick(fragmentView);
+                                    } catch (Exception e) {
+                                        FileLog.e("tmessages", e);
+                                    }
+                                }
+                            });
+                            builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
+                            showDialog(builder.create());
+                        } else {
+                            url.onClick(fragmentView);
                             }
                         }
 
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
index 05436a03c..c0e98fad9 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
@@ -220,30 +220,46 @@ public boolean onTouchEvent(MotionEvent event) {
         messageEditText.setHintTextColor(0xffb2b2b2);
         frameLayout.addView(messageEditText, LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT, LayoutHelper.WRAP_CONTENT, Gravity.BOTTOM, 52, 0, isChat ? 50 : 2, 0));
         messageEditText.setOnKeyListener(new View.OnKeyListener() {
+
+            boolean ctrlPressed = false;
+
             @Override
             public boolean onKey(View view, int i, KeyEvent keyEvent) {
                 if (i == KeyEvent.KEYCODE_BACK && !keyboardVisible && isPopupShowing()) {
                     if (keyEvent.getAction() == 1) {
+                        if (currentPopupContentType == 1 && botButtonsMessageObject != null) {
+                            SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
+                            preferences.edit().putInt("hidekeyboard_" + dialog_id, botButtonsMessageObject.getId()).commit();
+                        }
                         showPopup(0, 0);
                     }
                     return true;
-                } else if (i == KeyEvent.KEYCODE_ENTER && sendByEnter && keyEvent.getAction() == KeyEvent.ACTION_DOWN) {
+                } else if (i == KeyEvent.KEYCODE_ENTER && (ctrlPressed || sendByEnter) && keyEvent.getAction() == KeyEvent.ACTION_DOWN) {
                     sendMessage();
                     return true;
+                } else if (i == KeyEvent.KEYCODE_CTRL_LEFT || i == KeyEvent.KEYCODE_CTRL_RIGHT) {
+                    ctrlPressed = keyEvent.getAction() == KeyEvent.ACTION_DOWN;
+                    return true;
                 }
                 return false;
             }
         });
         messageEditText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
+
+            boolean ctrlPressed = false;
+
             @Override
             public boolean onEditorAction(TextView textView, int i, KeyEvent keyEvent) {
                 if (i == EditorInfo.IME_ACTION_SEND) {
                     sendMessage();
                     return true;
-                } else if (sendByEnter) {
-                    if (keyEvent != null && i == EditorInfo.IME_NULL && keyEvent.getAction() == KeyEvent.ACTION_DOWN) {
+                } else if (keyEvent != null && i == EditorInfo.IME_NULL) {
+                    if ((ctrlPressed || sendByEnter) && keyEvent.getAction() == KeyEvent.ACTION_DOWN) {
                         sendMessage();
                         return true;
+                    } else if (i == KeyEvent.KEYCODE_CTRL_LEFT || i == KeyEvent.KEYCODE_CTRL_RIGHT) {
+                        ctrlPressed = keyEvent.getAction() == KeyEvent.ACTION_DOWN;
+                        return true;
                     }
                 }
                 return false;
@@ -326,7 +342,13 @@ public void onClick(View v) {
                     if (botReplyMarkup != null) {
                         if (!isPopupShowing() || currentPopupContentType != 1) {
                             showPopup(1, 1);
+                            SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
+                            preferences.edit().remove("hidekeyboard_" + dialog_id).commit();
                         } else {
+                            if (currentPopupContentType == 1 && botButtonsMessageObject != null) {
+                                SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
+                                preferences.edit().putInt("hidekeyboard_" + dialog_id, botButtonsMessageObject.getId()).commit();
+                            }
                             openKeyboardInternal();
                         }
                     } else if (hasBotCommands) {
@@ -1229,13 +1251,14 @@ public void didPressedButton(CharSequence text) {
         botKeyboardView.setPanelHeight(AndroidUtilities.displaySize.x > AndroidUtilities.displaySize.y ? keyboardHeightLand : keyboardHeight);
         botKeyboardView.setButtons(botReplyMarkup != null ? botReplyMarkup : null);
         if (botReplyMarkup != null) {
+            SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
+            boolean keyboardHidden = preferences.getInt("hidekeyboard_" + dialog_id, 0) == messageObject.getId();
             if (botButtonsMessageObject != replyingMessageObject && (botReplyMarkup.flags & 2) != 0) {
-                SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
                 if (preferences.getInt("answered_" + dialog_id, 0) == messageObject.getId()) {
                     return;
                 }
             }
-            if (messageEditText.length() == 0 && !isPopupShowing()) {
+            if (!keyboardHidden && messageEditText.length() == 0 && !isPopupShowing()) {
                 showPopup(1, 1);
             }
         } else {
@@ -1381,8 +1404,12 @@ public void onStickerSelected(TLRPC.Document sticker) {
         }
     }
 
-    public void hidePopup() {
+    public void hidePopup(boolean byBackButton) {
         if (isPopupShowing()) {
+            if (currentPopupContentType == 1 && byBackButton && botButtonsMessageObject != null) {
+                SharedPreferences preferences = ApplicationLoader.applicationContext.getSharedPreferences("mainconfig", Activity.MODE_PRIVATE);
+                preferences.edit().putInt("hidekeyboard_" + dialog_id, botButtonsMessageObject.getId()).commit();
+            }
             showPopup(0, 0);
         }
     }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/EmojiView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/EmojiView.java
index 3421e4ea2..9ea304ed5 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/EmojiView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/EmojiView.java
@@ -12,10 +12,11 @@
 import android.content.Context;
 import android.content.SharedPreferences;
 import android.database.DataSetObserver;
+import android.graphics.PorterDuff;
+import android.graphics.drawable.Drawable;
 import android.os.Build;
 import android.support.v4.view.PagerAdapter;
 import android.support.v4.view.ViewPager;
-import android.text.TextUtils;
 import android.util.TypedValue;
 import android.view.Gravity;
 import android.view.HapticFeedbackConstants;
@@ -499,7 +500,12 @@ public boolean onTouchEvent(MotionEvent event) {
                 return true;
             }
         };
-        backspaceButton.setImageResource(R.drawable.ic_smiles_backspace);
+        //SharedPreferences themePrefs = ApplicationLoader.applicationContext.getSharedPreferences(AndroidUtilities.THEME_PREFS, AndroidUtilities.THEME_PREFS_MODE);
+        Drawable icon = getResources().getDrawable(R.drawable.ic_smiles_backspace);
+        int iconColor = themePrefs.getInt("chatEmojiViewTabIconColor", 0xffa8a8a8);
+        icon.setColorFilter(iconColor, PorterDuff.Mode.SRC_ATOP);
+        backspaceButton.setImageDrawable(icon);
+        //backspaceButton.setImageResource(R.drawable.ic_smiles_backspace);
         backspaceButton.setBackgroundResource(R.drawable.ic_emoji_backspace);
         backspaceButton.setScaleType(ImageView.ScaleType.CENTER);
         frameLayout.addView(backspaceButton, LayoutHelper.createFrame(52, 48));
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/PagerSlidingTabStrip.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/PagerSlidingTabStrip.java
index 5eff6bcc7..49157d2b4 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/PagerSlidingTabStrip.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/PagerSlidingTabStrip.java
@@ -11,13 +11,17 @@
 import android.content.Context;
 import android.content.SharedPreferences;
 import android.graphics.Canvas;
+import android.graphics.ColorFilter;
 import android.graphics.Paint;
 import android.graphics.Paint.Style;
 import android.graphics.PorterDuff;
+import android.graphics.PorterDuffColorFilter;
 import android.graphics.drawable.Drawable;
+import android.graphics.drawable.StateListDrawable;
 import android.os.Build;
 import android.support.v4.view.ViewPager;
 import android.support.v4.view.ViewPager.OnPageChangeListener;
+import android.util.SparseArray;
 import android.view.View;
 import android.view.ViewTreeObserver.OnGlobalLayoutListener;
 import android.widget.FrameLayout;
@@ -120,9 +124,8 @@ public void onGlobalLayout() {
     private void addIconTab(final int position, int resId) {
         ImageView tab = new ImageView(getContext());
         tab.setFocusable(true);
-        paintTabIcons(position);
         //tab.setImageResource(resId);
-        tab.setImageDrawable(getResources().getDrawable(resId));
+        tab.setImageDrawable(setImageButtonState(position));
         tab.setScaleType(ImageView.ScaleType.CENTER);
         tab.setOnClickListener(new OnClickListener() {
             @Override
@@ -134,7 +137,96 @@ public void onClick(View v) {
         tab.setSelected(position == currentPosition);
     }
     //Plus
+    private StateListDrawable setImageButtonState(int index)
+    {
+        Drawable nonactiveTab = getResources().getDrawable(icons[index]);
+        Drawable filteredNonactiveTab = nonactiveTab.getConstantState().newDrawable();
+        Drawable activeTab = getResources().getDrawable(icons_active[index]);
+        Drawable filteredActiveTab = activeTab.getConstantState().newDrawable();
+
+        SharedPreferences themePrefs = ApplicationLoader.applicationContext.getSharedPreferences(AndroidUtilities.THEME_PREFS, AndroidUtilities.THEME_PREFS_MODE);
+        int tabColor = themePrefs.getInt("chatEmojiViewTabColor", AndroidUtilities.getIntDarkerColor("themeColor", -0x15));
+        int iconColor = themePrefs.getInt("chatEmojiViewTabIconColor", 0xffa8a8a8);
+
+        int focused = android.R.attr.state_focused;
+        int selected = android.R.attr.state_selected;
+        int pressed = android.R.attr.state_pressed;
+
+        final FilterableStateListDrawable selectorDrawable = new FilterableStateListDrawable();
+
+        selectorDrawable.addState(new int[] {-focused, -selected, -pressed}, filteredNonactiveTab, new PorterDuffColorFilter(iconColor, PorterDuff.Mode.SRC_ATOP));
+        selectorDrawable.addState(new int[] {-focused, -selected, -pressed}, nonactiveTab);
+        selectorDrawable.addState(new int[] {-focused, selected, -pressed}, filteredActiveTab, new PorterDuffColorFilter(tabColor, PorterDuff.Mode.SRC_ATOP));
+        selectorDrawable.addState(new int[] {-focused, selected, -pressed}, activeTab);
+        selectorDrawable.addState(new int[] {pressed}, filteredActiveTab, new PorterDuffColorFilter(tabColor, PorterDuff.Mode.SRC_ATOP));
+        selectorDrawable.addState(new int[] {pressed}, activeTab);
+        selectorDrawable.addState(new int[]{focused, -selected, -pressed}, filteredNonactiveTab, new PorterDuffColorFilter(iconColor, PorterDuff.Mode.SRC_ATOP));
+        selectorDrawable.addState(new int[]{focused, -selected, -pressed}, nonactiveTab);
+        selectorDrawable.addState(new int[]{focused, selected, -pressed}, filteredNonactiveTab, new PorterDuffColorFilter(iconColor, PorterDuff.Mode.SRC_ATOP));
+        selectorDrawable.addState(new int[]{focused, selected, -pressed}, nonactiveTab);
+
+        return selectorDrawable;
+    }
+
+    public class FilterableStateListDrawable extends StateListDrawable {
+
+        private int currIdx = -1;
+        private int childrenCount = 0;
+        private SparseArray<ColorFilter> filterMap;
+
+        public FilterableStateListDrawable() {
+            super();
+            filterMap = new SparseArray<>();
+        }
+
+        @Override
+        public void addState(int[] stateSet, Drawable drawable) {
+            super.addState(stateSet, drawable);
+            childrenCount++;
+        }
+
+        public void addState(int[] stateSet, Drawable drawable, ColorFilter colorFilter) {
+            // this is a new custom method, does not exist in parent class
+            int currChild = childrenCount;
+            addState(stateSet, drawable);
+            filterMap.put(currChild, colorFilter);
+        }
+
+        @Override
+        public boolean selectDrawable(int idx) {
+            if (currIdx != idx) {
+                setColorFilter(getColorFilterForIdx(idx));
+            }
+            boolean result = super.selectDrawable(idx);
+            // check if the drawable has been actually changed to the one I expect
+            if (getCurrent() != null) {
+                currIdx = result ? idx : currIdx;
+                if (!result) {
+                    // it has not been changed, meaning, back to previous filter
+                    setColorFilter(getColorFilterForIdx(currIdx));
+                }
+            } else if (getCurrent() == null) {
+                currIdx = -1;
+                setColorFilter(null);
+            }
+            return result;
+        }
+
+        private ColorFilter getColorFilterForIdx(int idx) {
+            return filterMap != null ? filterMap.get(idx) : null;
+        }
+    }
+
     private int[] icons = {
+            R.drawable.ic_smiles_recent,
+            R.drawable.ic_smiles_smile,
+            R.drawable.ic_smiles_flower,
+            R.drawable.ic_smiles_bell,
+            R.drawable.ic_smiles_car,
+            R.drawable.ic_smiles_grid,
+            R.drawable.ic_smiles_sticker};
+
+    private int[] icons_active = {
             R.drawable.ic_smiles_recent_active,
             R.drawable.ic_smiles_smile_active,
             R.drawable.ic_smiles_flower_active,
@@ -142,14 +234,17 @@ public void onClick(View v) {
             R.drawable.ic_smiles_car_active,
             R.drawable.ic_smiles_grid_active,
             R.drawable.ic_smiles_sticker_active};
-
+/*
     private void paintTabIcons(int i){
         SharedPreferences themePrefs = ApplicationLoader.applicationContext.getSharedPreferences(AndroidUtilities.THEME_PREFS, AndroidUtilities.THEME_PREFS_MODE);
         int tabColor = themePrefs.getInt("chatEmojiViewTabColor", AndroidUtilities.getIntDarkerColor("themeColor", -0x15));
-        Drawable icon = getResources().getDrawable(icons[i]);
-        icon.setColorFilter(tabColor, PorterDuff.Mode.SRC_IN);
+        Drawable icon_active = getResources().getDrawable(icons_active[i]);
+        icon_active.setColorFilter(tabColor, PorterDuff.Mode.SRC_IN);
+        //Drawable icon = getResources().getDrawable(icons[i]);
+        //int iconColor = themePrefs.getInt("chatEmojiViewTabIconColor", 0xffa8a8a8);
+        //icon.setColorFilter(iconColor, PorterDuff.Mode.SRC_IN);
         //iv.setImageDrawable(icon);
-    }//
+    }*/
 
     private void updateTabStyles() {
         for (int i = 0; i < tabCount; i++) {
@@ -228,6 +323,7 @@ protected void onDraw(Canvas canvas) {
         @Override
         public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
             currentPosition = position;
+
             currentPositionOffset = positionOffset;
             scrollToChild(position, (int) (positionOffset * tabsContainer.getChildAt(position).getWidth()));
             invalidate();
@@ -251,8 +347,8 @@ public void onPageSelected(int position) {
             if (delegatePageListener != null) {
                 delegatePageListener.onPageSelected(position);
             }
-            //
-            if(position == currentPosition)paintTabIcons(position);
+            //plus
+            //if(position == currentPosition)paintTabIcons(position);
             //
             for (int a = 0; a < tabsContainer.getChildCount(); a++) {
                 tabsContainer.getChildAt(a).setSelected(a == position);
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/MediaActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/MediaActivity.java
index 109143ff2..1b6de6c7b 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/MediaActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/MediaActivity.java
@@ -44,7 +44,6 @@
 import org.telegram.android.MessagesController;
 import org.telegram.android.query.SharedMediaQuery;
 import org.telegram.messenger.ApplicationLoader;
-import org.telegram.messenger.BuildConfig;
 import org.telegram.messenger.ConnectionsManager;
 import org.telegram.messenger.FileLoader;
 import org.telegram.messenger.FileLog;
@@ -290,6 +289,7 @@ public void onClick(DialogInterface dialogInterface, int i) {
                             }
                             MessagesController.getInstance().deleteMessages(ids, random_ids, currentEncryptedChat);
                             actionBar.hideActionMode();
+                            actionBar.closeSearchField();
                             selectedFiles.clear();
                         }
                     });
@@ -400,9 +400,9 @@ public void onTextChanged(EditText editText) {
         dropDownContainer.setSubMenuOpenSide(1);
         dropDownContainer.addSubItem(shared_media_item, LocaleController.getString("SharedMediaTitle", R.string.SharedMediaTitle), 0);
         dropDownContainer.addSubItem(files_item, LocaleController.getString("DocumentsTitle", R.string.DocumentsTitle), 0);
-        //if ((int) dialog_id != 0) {
-            if(BuildConfig.DEBUG)dropDownContainer.addSubItem(links_item, LocaleController.getString("LinksTitle", R.string.LinksTitle), 0);
-        //}
+        if ((int) dialog_id != 0) {
+            dropDownContainer.addSubItem(links_item, LocaleController.getString("LinksTitle", R.string.LinksTitle), 0);
+        }
         actionBar.addView(dropDownContainer, LayoutHelper.createFrame(LayoutHelper.WRAP_CONTENT, LayoutHelper.MATCH_PARENT, Gravity.TOP | Gravity.LEFT, AndroidUtilities.isTablet() ? 64 : 56, 0, 40, 0));
         dropDownContainer.setOnClickListener(new View.OnClickListener() {
             @Override
@@ -511,6 +511,10 @@ public boolean onItemLongClick(AdapterView<?> parent, View view, int i, long id)
                     SharedDocumentCell cell = (SharedDocumentCell) view;
                     MessageObject message = cell.getDocument();
                     return MediaActivity.this.onItemLongClick(message, view, 0);
+                } else if (selectedMode == 3 && view instanceof SharedLinkCell) {
+                    SharedLinkCell cell = (SharedLinkCell) view;
+                    MessageObject message = cell.getMessage();
+                    return MediaActivity.this.onItemLongClick(message, view, 0);
                 }
                 return false;
             }
@@ -674,6 +678,14 @@ public void didReceivedNotification(int id, Object... args) {
         }
     }
 
+    @Override
+    public void onPause() {
+        super.onPause();
+        if (dropDownContainer != null) {
+            dropDownContainer.closeSubMenu();
+        }
+    }
+
     @Override
     public void onResume() {
         super.onResume();
@@ -829,12 +841,12 @@ private void switchToCurrentSelectedMode() {
             } else if (selectedMode == 3) {
                 listView.setAdapter(linksAdapter);
                 dropDown.setText(LocaleController.getString("LinksTitle", R.string.LinksTitle));
-                emptyImageView.setImageResource(R.drawable.tip2);
+                emptyImageView.setImageResource(R.drawable.tip3);
                 emptyTextView.setText(LocaleController.getString("NoSharedLinks", R.string.NoSharedLinks));
                 searchItem.setVisibility(!sharedMediaData[3].messages.isEmpty() ? View.VISIBLE : View.GONE);
                 if (!sharedMediaData[selectedMode].loading && !sharedMediaData[selectedMode].endReached && sharedMediaData[selectedMode].messages.isEmpty()) {
                     sharedMediaData[selectedMode].loading = true;
-                    SharedMediaQuery.loadMedia(dialog_id, 0, 50, 0, SharedMediaQuery.MEDIA_URL, false, classGuid);
+                    SharedMediaQuery.loadMedia(dialog_id, 0, 50, 0, SharedMediaQuery.MEDIA_URL, true, classGuid);
                 }
                 listView.setVisibility(View.VISIBLE);
                 if (sharedMediaData[selectedMode].loading && sharedMediaData[selectedMode].messages.isEmpty()) {
@@ -877,6 +889,8 @@ private boolean onItemLongClick(MessageObject item, View view, int a) {
             ((SharedDocumentCell) view).setChecked(true, true);
         } else if (view instanceof SharedPhotoVideoCell) {
             ((SharedPhotoVideoCell) view).setChecked(a, true, true);
+        } else if (view instanceof SharedLinkCell) {
+            ((SharedLinkCell) view).setChecked(true, true);
         }
         actionBar.showActionMode();
         return true;
@@ -902,6 +916,8 @@ private void onItemClick(int index, View view, MessageObject message, int a) {
                 ((SharedDocumentCell) view).setChecked(selectedFiles.containsKey(message.getId()), true);
             } else if (view instanceof SharedPhotoVideoCell) {
                 ((SharedPhotoVideoCell) view).setChecked(a, selectedFiles.containsKey(message.getId()), true);
+            } else if (view instanceof SharedLinkCell) {
+                ((SharedLinkCell) view).setChecked(selectedFiles.containsKey(message.getId()), true);
             }
         } else {
             if (selectedMode == 0) {
@@ -979,13 +995,20 @@ private void onItemClick(int index, View view, MessageObject message, int a) {
             } else if (selectedMode == 3) {
                 try {
                     TLRPC.WebPage webPage = message.messageOwner.media.webpage;
-                    if (Build.VERSION.SDK_INT >= 16 && webPage.embed_url != null && webPage.embed_url.length() != 0) {
-                        BottomSheet.Builder builder = new BottomSheet.Builder(getParentActivity());
-                        builder.setCustomView(new WebFrameLayout(getParentActivity(), builder.create(), webPage.title, webPage.url, webPage.embed_url, webPage.embed_width, webPage.embed_height));
-                        builder.setUseFullWidth(true);
-                        showDialog(builder.create());
-                    } else {
-                        Uri uri = Uri.parse(webPage.url);
+                    String link = null;
+                    if (webPage != null && !(webPage instanceof TLRPC.TL_webPageEmpty)) {
+                        if (Build.VERSION.SDK_INT >= 16 && webPage.embed_url != null && webPage.embed_url.length() != 0) {
+                            openWebView(webPage);
+                            return;
+                        } else {
+                            link = webPage.url;
+                        }
+                    }
+                    if (link == null) {
+                        link = ((SharedLinkCell) view).getLink(0);
+                    }
+                    if (link != null) {
+                        Uri uri = Uri.parse(link);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         intent.putExtra(Browser.EXTRA_APPLICATION_ID, getParentActivity().getPackageName());
                         getParentActivity().startActivity(intent);
@@ -997,6 +1020,13 @@ private void onItemClick(int index, View view, MessageObject message, int a) {
         }
     }
 
+    private void openWebView(TLRPC.WebPage webPage) {
+        BottomSheet.Builder builder = new BottomSheet.Builder(getParentActivity());
+        builder.setCustomView(new WebFrameLayout(getParentActivity(), builder.create(), webPage.title, webPage.url, webPage.embed_url, webPage.embed_width, webPage.embed_height));
+        builder.setUseFullWidth(true);
+        showDialog(builder.create());
+    }
+
     private void fixLayoutInternal() {
         if (listView == null) {
             return;
@@ -1091,15 +1121,26 @@ public View getItemView(int section, int position, View convertView, ViewGroup p
                 } else {
                     if (convertView == null) {
                         convertView = new SharedLinkCell(mContext);
+                        ((SharedLinkCell) convertView).setDelegate(new SharedLinkCell.SharedLinkCellDelegate() {
+                            @Override
+                            public void needOpenWebView(TLRPC.WebPage webPage) {
+                                MediaActivity.this.openWebView(webPage);
+                            }
+
+                            @Override
+                            public boolean canPerformActions() {
+                                return !actionBar.isActionModeShowed();
+                            }
+                        });
                     }
-                    SharedLinkCell sharedDocumentCell = (SharedLinkCell) convertView;
+                    SharedLinkCell sharedLinkCell = (SharedLinkCell) convertView;
                     MessageObject messageObject = messageObjects.get(position - 1);
-                    sharedDocumentCell.setLink(messageObject, position != messageObjects.size() || section == sharedMediaData[3].sections.size() - 1 && sharedMediaData[3].loading);
-                    /*if (actionBar.isActionModeShowed()) {
-                        sharedDocumentCell.setChecked(selectedFiles.containsKey(messageObject.getId()), !scrolling);
+                    sharedLinkCell.setLink(messageObject, position != messageObjects.size() || section == sharedMediaData[3].sections.size() - 1 && sharedMediaData[3].loading);
+                    if (actionBar.isActionModeShowed()) {
+                        sharedLinkCell.setChecked(selectedFiles.containsKey(messageObject.getId()), !scrolling);
                     } else {
-                        sharedDocumentCell.setChecked(false, !scrolling);
-                    }*/
+                        sharedLinkCell.setChecked(false, !scrolling);
+                    }
                 }
             } else {
                 if (convertView == null) {
@@ -1393,12 +1434,8 @@ public void queryServerSearch(final String query, final int max_id) {
                 if (user == null) {
                     return;
                 }
-                if (user.access_hash != 0) {
-                    req.peer = new TLRPC.TL_inputPeerForeign();
-                    req.peer.access_hash = user.access_hash;
-                } else {
-                    req.peer = new TLRPC.TL_inputPeerContact();
-                }
+                req.peer = new TLRPC.TL_inputPeerUser();
+                req.peer.access_hash = user.access_hash;
                 req.peer.user_id = uid;
             }
             final int currentReqId = ++lastReqId;
@@ -1529,7 +1566,7 @@ public boolean areAllItemsEnabled() {
 
         @Override
         public boolean isEnabled(int i) {
-            return i != searchResult.size();
+            return i != searchResult.size() + globalSearch.size();
         }
 
         @Override
@@ -1589,15 +1626,26 @@ public View getView(int i, View view, ViewGroup viewGroup) {
             } else if (currentType == 3) {
                 if (view == null) {
                     view = new SharedLinkCell(mContext);
+                    ((SharedLinkCell) view).setDelegate(new SharedLinkCell.SharedLinkCellDelegate() {
+                        @Override
+                        public void needOpenWebView(TLRPC.WebPage webPage) {
+                            MediaActivity.this.openWebView(webPage);
+                        }
+
+                        @Override
+                        public boolean canPerformActions() {
+                            return !actionBar.isActionModeShowed();
+                        }
+                    });
                 }
                 SharedLinkCell sharedLinkCell = (SharedLinkCell) view;
                 MessageObject messageObject = getItem(i);
                 sharedLinkCell.setLink(messageObject, i != getCount() - 1);
-                /*if (actionBar.isActionModeShowed()) {
-                    sharedDocumentCell.setChecked(selectedFiles.containsKey(messageObject.getId()), !scrolling);
+                if (actionBar.isActionModeShowed()) {
+                    sharedLinkCell.setChecked(selectedFiles.containsKey(messageObject.getId()), !scrolling);
                 } else {
-                    sharedDocumentCell.setChecked(false, !scrolling);
-                }*/
+                    sharedLinkCell.setChecked(false, !scrolling);
+                }
             }
             return view;
         }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/PhotoAlbumPickerActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/PhotoAlbumPickerActivity.java
index 09703b1b3..185f765c1 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/PhotoAlbumPickerActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/PhotoAlbumPickerActivity.java
@@ -293,6 +293,14 @@ public void onClick(View view) {
         return fragmentView;
     }
 
+    @Override
+    public void onPause() {
+        super.onPause();
+        if (dropDownContainer != null) {
+            dropDownContainer.closeSubMenu();
+        }
+    }
+
     @Override
     public void onResume() {
         super.onResume();
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/PopupNotificationActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/PopupNotificationActivity.java
index 68b6c659e..0bdda2994 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/PopupNotificationActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/PopupNotificationActivity.java
@@ -1067,7 +1067,7 @@ private void setTypingAnimation(boolean start) {
     @Override
     public void onBackPressed() {
         if (chatActivityEnterView.isPopupShowing()) {
-            chatActivityEnterView.hidePopup();
+            chatActivityEnterView.hidePopup(true);
             return;
         }
         super.onBackPressed();
@@ -1090,7 +1090,7 @@ protected void onPause() {
         super.onPause();
         overridePendingTransition(0, 0);
         if (chatActivityEnterView != null) {
-            chatActivityEnterView.hidePopup();
+            chatActivityEnterView.hidePopup(false);
             chatActivityEnterView.setFieldFocused(false);
         }
         ConnectionsManager.getInstance().setAppPaused(true, false);
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ProfileActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ProfileActivity.java
index 40970fde6..bd3ab8df8 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ProfileActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ProfileActivity.java
@@ -273,6 +273,11 @@ public void onItemClick(final int id) {
                     if (id == -1) {
                         finishFragment();
                     } else if (id == block_contact) {
+                    TLRPC.User user = MessagesController.getInstance().getUser(user_id);
+                    if (user == null) {
+                        return;
+                    }
+                    if ((user.flags & TLRPC.USER_FLAG_BOT) == 0) {
                         AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
                         if (!userBlocked) {
                             builder.setMessage(LocaleController.getString("AreYouSureBlockContact", R.string.AreYouSureBlockContact));
@@ -292,6 +297,15 @@ public void onClick(DialogInterface dialogInterface, int i) {
                         });
                         builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
                     showDialog(builder.create());
+                    } else {
+                        if (!userBlocked) {
+                            MessagesController.getInstance().blockUser(user_id);
+                        } else {
+                            MessagesController.getInstance().unblockUser(user_id);
+                            SendMessagesHelper.getInstance().sendMessage("/start", user_id, null, null, false);
+                            finishFragment();
+                        }
+                    }
                     } else if (id == add_contact) {
                         TLRPC.User user = MessagesController.getInstance().getUser(user_id);
                         Bundle args = new Bundle();
@@ -1421,9 +1435,14 @@ private void createActionBarMenu() {
                     item.addSubItem(share_contact, LocaleController.getString("ShareContact", R.string.ShareContact), 0);
                     item.addSubItem(block_contact, !userBlocked ? LocaleController.getString("BlockContact", R.string.BlockContact) : LocaleController.getString("Unblock", R.string.Unblock), 0);
                 } else {
-                    item.addSubItem(block_contact, !userBlocked ? LocaleController.getString("BlockContact", R.string.BlockContact) : LocaleController.getString("Unblock", R.string.Unblock), 0);
+                    if ((user.flags & TLRPC.USER_FLAG_BOT) != 0) {
+                        item.addSubItem(block_contact, !userBlocked ? LocaleController.getString("BotStop", R.string.BotStop) : LocaleController.getString("BotRestart", R.string.BotRestart), 0);
+            } else {
+                        item.addSubItem(block_contact, !userBlocked ? LocaleController.getString("BlockContact", R.string.BlockContact) : LocaleController.getString("Unblock", R.string.Unblock), 0);
+                    }
                 }
             } else {
+                //ActionBarMenuItem item = menu.addItem(0, R.drawable.ic_ab_other);
                 ActionBarMenuItem item = menu.addItem(0, dots);
                 item.addSubItem(share_contact, LocaleController.getString("ShareContact", R.string.ShareContact), 0);
                 item.addSubItem(block_contact, !userBlocked ? LocaleController.getString("BlockContact", R.string.BlockContact) : LocaleController.getString("Unblock", R.string.Unblock), 0);
@@ -1431,6 +1450,7 @@ private void createActionBarMenu() {
                 item.addSubItem(delete_contact, LocaleController.getString("DeleteContact", R.string.DeleteContact), 0);
             }
         } else if (chat_id != 0) {
+            //ActionBarMenuItem item = menu.addItem(0, R.drawable.ic_ab_other);
             ActionBarMenuItem item = menu.addItem(0, dots);
             if (chat_id > 0) {
                 item.addSubItem(add_member, LocaleController.getString("AddMember", R.string.AddMember), 0);
@@ -1457,7 +1477,7 @@ public void didSelectDialog(DialogsActivity messageFragment, long dialog_id, boo
             args.putBoolean("scrollToTopOnResume", true);
             NotificationCenter.getInstance().removeObserver(this, NotificationCenter.closeChats);
             NotificationCenter.getInstance().postNotificationName(NotificationCenter.closeChats);
-            int lower_part = (int)dialog_id;
+            int lower_part = (int) dialog_id;
             if (lower_part != 0) {
                 if (lower_part > 0) {
                     args.putInt("user_id", lower_part);
@@ -1465,7 +1485,7 @@ public void didSelectDialog(DialogsActivity messageFragment, long dialog_id, boo
                     args.putInt("chat_id", -lower_part);
                 }
             } else {
-                args.putInt("enc_id", (int)(dialog_id >> 32));
+                args.putInt("enc_id", (int) (dialog_id >> 32));
             }
             presentFragment(new ChatActivity(args), true);
             removeSelfFromStack();
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ThemingChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ThemingChatActivity.java
index 6a886dd95..e411cb5c5 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ThemingChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ThemingChatActivity.java
@@ -82,6 +82,7 @@
     private int editTextIconsColorRow;
     private int emojiViewBGColorRow;
     private int emojiViewTabColorRow;
+    private int emojiViewTabIconColorRow;
     private int sendColorRow;
     private int memberColorCheckRow;
     private int memberColorRow;
@@ -173,6 +174,7 @@ public boolean onFragmentCreate() {
         attachTextColorRow = rowCount++;
 
         emojiViewBGColorRow = rowCount++;
+        emojiViewTabIconColorRow = rowCount++;
         emojiViewTabColorRow = rowCount++;
 
         return true;
@@ -719,6 +721,20 @@ public void colorChanged(int color) {
 
                         },themePrefs.getInt("chatEmojiViewBGColor", 0xfff5f6f7), CENTER, 0, true);
 
+                        colorDialog.show();
+                    } else if (i == emojiViewTabIconColorRow) {
+                        if (getParentActivity() == null) {
+                            return;
+                        }
+                        LayoutInflater li = (LayoutInflater)getParentActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
+                        li.inflate(R.layout.colordialog, null, false);
+                        ColorSelectorDialog colorDialog = new ColorSelectorDialog(getParentActivity(), new OnColorChangedListener() {
+                            @Override
+                            public void colorChanged(int color) {
+                                commitInt("chatEmojiViewTabIconColor", color);
+                            }
+
+                        },themePrefs.getInt("chatEmojiViewTabIconColor", 0xffa8a8a8), CENTER, 0, true);
                         colorDialog.show();
                     } else if (i == emojiViewTabColorRow) {
                         if (getParentActivity() == null) {
@@ -1039,6 +1055,8 @@ public boolean onItemLongClick(AdapterView<?> adapterView, View view, int i, lon
                         resetPref("chatAttachTextColor");
                     } else if (i == emojiViewBGColorRow) {
                         resetPref("chatEmojiViewBGColor");
+                    } else if (i == emojiViewTabIconColorRow) {
+                        resetPref("chatEmojiViewTabIconColor");
                     } else if (i == emojiViewTabColorRow) {
                         resetPref("chatEmojiViewTabColor");
                     } else{
@@ -1155,7 +1173,7 @@ public boolean isEnabled(int i) {
                     i == textSizeRow || i == timeSizeRow || i == dateColorRow || i == dateSizeRow || i == dateBubbleColorRow || i == rTextColorRow || i == rLinkColorRow || i == lTextColorRow || i == lLinkColorRow ||
                     i == rTimeColorRow|| i == lTimeColorRow || i == checksColorRow || i == memberColorCheckRow || AndroidUtilities.getBoolPref("chatMemberColorCheck") && i == memberColorRow || i == contactNameColorRow || i == forwardRightNameColorRow || i == forwardLeftNameColorRow || i == showUsernameCheckRow ||
                     i == editTextSizeRow || i == editTextColorRow || i == editTextIconsColorRow || i == sendColorRow || i == editTextBGColorRow || i == attachBGColorRow || i == attachTextColorRow ||
-                    i == emojiViewBGColorRow || i == emojiViewTabColorRow;
+                    i == emojiViewBGColorRow || i == emojiViewTabIconColorRow || i == emojiViewTabColorRow;
         }
 
         @Override
@@ -1342,6 +1360,8 @@ else if (type == 3){
                     textCell.setTextAndColor(LocaleController.getString("EditTextIconsColor", R.string.EditTextIconsColor), themePrefs.getInt("chatEditTextIconsColor", 0xffadadad), true);
                 } else if (i == emojiViewBGColorRow) {
                     textCell.setTextAndColor(LocaleController.getString("EmojiViewBGColor", R.string.EmojiViewBGColor), themePrefs.getInt("chatEmojiViewBGColor", 0xfff5f6f7), true);
+                } else if (i == emojiViewTabIconColorRow) {
+                    textCell.setTextAndColor(LocaleController.getString("EmojiViewTabIconColor", R.string.EmojiViewTabIconColor), themePrefs.getInt("chatEmojiViewTabIconColor", 0xffa8a8a8), false);
                 } else if (i == emojiViewTabColorRow) {
                     textCell.setTextAndColor(LocaleController.getString("EmojiViewTabColor", R.string.EmojiViewTabColor), themePrefs.getInt("chatEmojiViewTabColor", AndroidUtilities.getIntDarkerColor("themeColor",-0x15)), false);
                 }
@@ -1365,7 +1385,7 @@ else if ( i == headerColorRow  || i == muteColorRow || i == headerIconsColorRow
                     i == solidBGColorRow || i == rBubbleColorRow || i == lBubbleColorRow || i == nameColorRow || i == statusColorRow || i == dateColorRow || i == dateBubbleColorRow ||
                     i == rTextColorRow || i == rLinkColorRow || i == lTextColorRow || i == lLinkColorRow || i == rLinkColorRow || i == rTimeColorRow || i == lTimeColorRow || i == checksColorRow || i == memberColorRow || i == contactNameColorRow || i == forwardRightNameColorRow || i == forwardLeftNameColorRow ||
                     i == sendColorRow || i == editTextColorRow || i == editTextBGColorRow || i == editTextIconsColorRow ||  i == attachBGColorRow || i == attachTextColorRow ||
-                    i == emojiViewBGColorRow || i == emojiViewTabColorRow) {
+                    i == emojiViewBGColorRow || i == emojiViewTabIconColorRow || i == emojiViewTabColorRow) {
                 return 3;
             } else if (i == solidBGColorCheckRow || i == memberColorCheckRow || i == showUsernameCheckRow || i == avatarAlignTopRow || i == ownAvatarAlignTopRow || i == showContactAvatar || i == showOwnAvatar || i == showOwnAvatarGroup) {
                 return 4;
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ThemingChatsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ThemingChatsActivity.java
index 64f5769eb..6dbb1e94c 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ThemingChatsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ThemingChatsActivity.java
@@ -219,7 +219,7 @@ public void colorChanged(int color) {
                             public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
-                        },themePrefs.getInt( key, 0xffffffff), CENTER, 0, false);
+                        },themePrefs.getInt( key, 0xffffffff), CENTER, 0, true);
                         colorDialog.show();
                     } else if (i == headerIconsColorRow) {
                         if (getParentActivity() == null) {
@@ -260,7 +260,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, 0xffdcdcdc), CENTER, 0, false);
+                        },themePrefs.getInt( key, 0xffdcdcdc), CENTER, 0, true);
                         colorDialog.show();
                     } /*else if (i == usernameTitleRow) {
                         boolean b = themePrefs.getBoolean( key, true);
@@ -314,7 +314,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, 0xff212121), CENTER, 0, false);
+                        },themePrefs.getInt( key, 0xff212121), CENTER, 0, true);
 
                         colorDialog.show();
                     } else if (i == groupNameColorRow) {
@@ -329,7 +329,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, themePrefs.getInt("chatsNameColor", 0xff212121)), CENTER, 0, false);
+                        },themePrefs.getInt( key, themePrefs.getInt("chatsNameColor", 0xff212121)), CENTER, 0, true);
 
                         colorDialog.show();
                     } else if (i == unknownNameColorRow) {
@@ -344,7 +344,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, themePrefs.getInt("chatsNameColor", 0xff212121)), CENTER, 0, false);
+                        },themePrefs.getInt( key, themePrefs.getInt("chatsNameColor", 0xff212121)), CENTER, 0, true);
 
                         colorDialog.show();
                     } else if (i == groupIconColorRow) {
@@ -401,7 +401,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, 0xff8f8f8f), CENTER, 0, false);
+                        },themePrefs.getInt( key, 0xff8f8f8f), CENTER, 0, true);
 
                         colorDialog.show();
                     } else if (i == memberColorRow) {
@@ -416,7 +416,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, darkColor), CENTER, 0, false);
+                        },themePrefs.getInt( key, darkColor), CENTER, 0, true);
 
                         colorDialog.show();
                     } else if (i == mediaColorRow) {
@@ -431,7 +431,7 @@ public void colorChanged(int color) {
                                 commitInt( "chatsMediaColor", color);
                             }
 
-                        },themePrefs.getInt( "chatsMediaColor", themePrefs.getInt("chatsMemberColor", darkColor)), CENTER, 0, false);
+                        },themePrefs.getInt( "chatsMediaColor", themePrefs.getInt("chatsMemberColor", darkColor)), CENTER, 0, true);
 
                         colorDialog.show();
                     } else if (i == typingColorRow) {
@@ -446,7 +446,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, defColor), CENTER, 0, false);
+                        },themePrefs.getInt( key, defColor), CENTER, 0, true);
 
                         colorDialog.show();
                     } else if (i == timeColorRow) {
@@ -461,7 +461,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, 0xff999999), CENTER, 0, false);
+                        },themePrefs.getInt( key, 0xff999999), CENTER, 0, true);
                         colorDialog.show();
                     } else if (i == countColorRow) {
                         if (getParentActivity() == null) {
@@ -475,7 +475,7 @@ public void colorChanged(int color) {
                                 commitInt( key, color);
                             }
 
-                        },themePrefs.getInt( key, 0xffffffff), CENTER, 0, false);
+                        },themePrefs.getInt( key, 0xffffffff), CENTER, 0, true);
                         colorDialog.show();
                     } else if (i == countBGColorRow) {
                         if (getParentActivity() == null) {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ThemingProfileActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ThemingProfileActivity.java
index ca950be4e..35087ce25 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ThemingProfileActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ThemingProfileActivity.java
@@ -467,7 +467,7 @@ else if (type == 1) {
                 if (i == headerSection2Row) {
                     ((HeaderCell) view).setText(LocaleController.getString("Header", R.string.Header));
                 } else if (i == rowsSection2Row) {
-                    ((HeaderCell) view).setText(LocaleController.getString("ChatList", R.string.ChatList));
+                    ((HeaderCell) view).setText(LocaleController.getString("OptionsList", R.string.OptionsList));
                 }
             }
             else if (type == 2) {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/VideoEditorActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/VideoEditorActivity.java
index 9e3ed4868..55da83c70 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/VideoEditorActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/VideoEditorActivity.java
@@ -88,6 +88,7 @@
     private int resultWidth = 0;
     private int resultHeight = 0;
     private int bitrate = 0;
+    private int originalBitrate = 0;
     private float videoDuration = 0;
     private long startTime = 0;
     private long endTime = 0;
@@ -252,7 +253,7 @@ public void onItemClick(int id) {
                     }
                     if (delegate != null) {
                         if (compressVideo.getVisibility() == View.GONE || compressVideo.getVisibility() == View.VISIBLE && !compressVideo.isChecked()) {
-                            delegate.didFinishEditVideo(videoPath, startTime, endTime, originalWidth, originalHeight, rotationValue, originalWidth, originalHeight, bitrate, estimatedSize, esimatedDuration);
+                            delegate.didFinishEditVideo(videoPath, startTime, endTime, originalWidth, originalHeight, rotationValue, originalWidth, originalHeight, originalBitrate, estimatedSize, esimatedDuration);
                         } else {
                             delegate.didFinishEditVideo(videoPath, startTime, endTime, resultWidth, resultHeight, rotationValue, originalWidth, originalHeight, bitrate, estimatedSize, esimatedDuration);
                         }
@@ -787,7 +788,7 @@ private boolean processOpenVideo() {
                 if (headerBox.getWidth() != 0 && headerBox.getHeight() != 0) {
                     trackHeaderBox = headerBox;
                     tBitrate = trackBitrate;
-                    bitrate = (int)(trackBitrate / 100000 * 100000);
+                    originalBitrate = bitrate = (int)(trackBitrate / 100000 * 100000);
                     if (bitrate > 900000) {
                         bitrate = 900000;
                     }
diff --git a/TMessagesProj/src/main/res/drawable-hdpi/tip1.png b/TMessagesProj/src/main/res/drawable-hdpi/tip1.png
index d979e349f..16abb9b9f 100644
Binary files a/TMessagesProj/src/main/res/drawable-hdpi/tip1.png and b/TMessagesProj/src/main/res/drawable-hdpi/tip1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-mdpi/tip1.png b/TMessagesProj/src/main/res/drawable-mdpi/tip1.png
index 40ae2af83..af62d2e32 100644
Binary files a/TMessagesProj/src/main/res/drawable-mdpi/tip1.png and b/TMessagesProj/src/main/res/drawable-mdpi/tip1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xhdpi/tip1.png b/TMessagesProj/src/main/res/drawable-xhdpi/tip1.png
index a6a75ed78..98934f271 100644
Binary files a/TMessagesProj/src/main/res/drawable-xhdpi/tip1.png and b/TMessagesProj/src/main/res/drawable-xhdpi/tip1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/Thumbs.db b/TMessagesProj/src/main/res/drawable-xxhdpi/Thumbs.db
index f07d883e6..d4c69da4e 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/Thumbs.db and b/TMessagesProj/src/main/res/drawable-xxhdpi/Thumbs.db differ
diff --git a/TMessagesProj/src/main/res/drawable-xxhdpi/tip1.png b/TMessagesProj/src/main/res/drawable-xxhdpi/tip1.png
index 5d9960e33..f126139a5 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxhdpi/tip1.png and b/TMessagesProj/src/main/res/drawable-xxhdpi/tip1.png differ
diff --git a/TMessagesProj/src/main/res/drawable-xxxhdpi/Thumbs.db b/TMessagesProj/src/main/res/drawable-xxxhdpi/Thumbs.db
index 0dfd537de..8ae53874d 100644
Binary files a/TMessagesProj/src/main/res/drawable-xxxhdpi/Thumbs.db and b/TMessagesProj/src/main/res/drawable-xxxhdpi/Thumbs.db differ
diff --git a/TMessagesProj/src/main/res/values-ar/strings.xml b/TMessagesProj/src/main/res/values-ar/strings.xml
index 6fc6d9739..fd2efad03 100644
--- a/TMessagesProj/src/main/res/values-ar/strings.xml
+++ b/TMessagesProj/src/main/res/values-ar/strings.xml
@@ -137,6 +137,7 @@
     <string name="OpenInBrowser">فتح في المتصفح</string>
     <string name="CopyUrl">انسخ الرابط</string>
     <string name="SendItems">أرسل %1$s</string>
+    <string name="OpenUrlAlert">هل ترغب في فتح الرابط باستخدام %1$s ؟</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s قام بتعيين عداد التدمير الذاتي إلى to %2$s</string>
     <string name="MessageLifetimeChangedOutgoing">لقد قمت بتعيين التدمير الذاتي إلى %1$s</string>
@@ -549,6 +550,9 @@
     <string name="BotStatusCantRead">لا يستطيع الوصول للرسائل</string>
     <string name="BotInfoTitle">ماذا يستطيع هذا البوت عمله؟</string>
     <string name="BotStart">إبدأ</string>
+    <string name="BotUnblock">إعادة تشغيل</string>
+    <string name="BotStop">إيقاف البوت</string>
+    <string name="BotRestart">إعادة تعيين البوت</string>
     <!--button titles-->
     <string name="Next">التالي</string>
     <string name="Back">رجوع</string>
@@ -837,8 +841,8 @@
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s الساعة %2$s</string>
     <!--update text-->
-<string name="updateText">تم تحديث تيليجرام نسخة الاندرويد. الجديد في نسخة ٣.١.٢: \n\n- كلمات البحث الحديثة. \n- اضغط باستمرار لاستعراض الملصق قبل إرساله.</string>
-    <string name="updateBuild">591</string>
+    <string name="updateText">تم تحديث تيليجرام نسخة الآندرويد. الجديد في نسخة 3.1.3:\n\n-  قسم جديد للروابط المشاركة في معلومات المحادثة \n- استعراض لروابط الصور داخل التطبيق.</string>
+    <string name="updateBuild">594</string>
     <!--Telegram+--><!--
   <string name="updatePlusText"></string>-->
   <string name="TelegramForAndroid">بلاس مسنجر للأندرويد</string>
diff --git a/TMessagesProj/src/main/res/values-ca/strings.xml b/TMessagesProj/src/main/res/values-ca/strings.xml
index 1f11252cb..eb8c039c1 100644
--- a/TMessagesProj/src/main/res/values-ca/strings.xml
+++ b/TMessagesProj/src/main/res/values-ca/strings.xml
@@ -56,6 +56,7 @@
   <string name="WillUnmuteIn">D\'aquí %1$s</string>
   <string name="MuteDisable">Inhabilita</string>
   <string name="Hashtags">ETIQUETES</string>
+  <string name="Recent">RECENT</string>
   <!--broadcasts-->
   <string name="NewBroadcastList">Llista de difusió nova</string>
   <string name="EnterListName">Introduïu el nom de la llista</string>
@@ -63,6 +64,7 @@
   <string name="AddRecipient">Afegeix un destinatari</string>
   <string name="KickFromBroadcast">Treu de la llista de difusió</string>
   <!--audio view-->
+  <string name="NoAudio">Afegiu fitxers a la biblioteca de música del dispositiu per veure\'ls aquí.</string>
   <string name="AttachMusic">Música</string>
   <string name="AudioUnknownArtist">Artista desconegut</string>
   <string name="AudioUnknownTitle">Títol desconegut</string>
@@ -122,7 +124,7 @@
   <string name="DeleteThisChat">Elimina aquest xat</string>
   <string name="SlideToCancel">LLISQUEU PER CANCEL·LAR</string>
   <string name="SaveToDownloads">Desa a «Baixades»</string>
-  <string name="SaveToMusic">Desa a música</string>
+  <string name="SaveToMusic">Desa-ho a música</string>
   <string name="ShareFile">Comparteix</string>
   <string name="ApplyLocalizationFile">Aplica la localització</string>
   <string name="UnsupportedAttachment">El fitxer adjunt no és compatible</string>
@@ -132,6 +134,7 @@
   <string name="OpenInBrowser">Obre al navegador</string>
   <string name="CopyUrl">Copia la URL</string>
   <string name="SendItems">Envia %1$s</string>
+  <string name="OpenUrlAlert">Voleu obrir la url %1$s?</string>
   <!--notification-->
   <string name="MessageLifetimeChanged">%1$s ha definit l\'autodestrucció en %2$s</string>
   <string name="MessageLifetimeChangedOutgoing">Heu definit l\'autodestrucció en %1$s</string>
@@ -202,12 +205,12 @@
   <string name="RevokeAlert">Voleu revocar l\'enllaç? Un cop ho feu, ningú podrà unir-se al grup utilitzant-lo.</string>
   <string name="RevokeAlertNewLink">L\'enllaç d\'invitació anterior no està actiu. S\'ha generat un enllaç nou.</string>
   <string name="RevokeButton">Revoca</string>
-  <string name="RevokeLink">Enllaç de revocació</string>
+  <string name="RevokeLink">Revoca l\'enllaç</string>
   <string name="CopyLink">Copia l\'enllaç</string>
   <string name="ShareLink">Comparteix l\'enllaç</string>
   <string name="LinkInfo">Qualsevol qui tingui Telegram instal·lat serà capaç d\'unir-se al grup tot seguint l\'enllaç.</string>
   <!--group info view-->
-  <string name="SharedMedia">Fitxers compartits</string>
+  <string name="SharedMedia">Elements compartits</string>
   <string name="SETTINGS">Configuració</string>
   <string name="AddMember">Afegeix un membre</string>
   <string name="DeleteAndExit">Elimina i surt del grup</string>
@@ -280,7 +283,7 @@
   <string name="Vibrate">Vibració</string>
   <string name="InAppPreview">Vista prèvia</string>
   <string name="Reset">Reinicialitza</string>
-  <string name="ResetAllNotifications">Reinicialitza totes les notificacions</string>
+  <string name="ResetAllNotifications">Restaura totes les notificacions</string>
   <string name="UndoAllCustom">Desfà la configuració de les notificacions personalitzades per a tots els contactes i grups.</string>
   <string name="NotificationsAndSounds">Notificacions i sons</string>
   <string name="BlockedUsers">Usuaris blocats</string>
@@ -297,7 +300,7 @@
   <string name="ContactJoined">En unir-se un contacte al Telegram</string>
   <string name="Pebble">PEBBLE</string>
   <string name="Language">Llengua</string>
-  <string name="AskAQuestionInfo">Tingueu present que el suport del Telegram és fet per voluntaris. Intentem respondre tan ràpid com és possible, però podem trigar una mica.<![CDATA[<br><br>]]>Sisplau, feu una ullada a les <![CDATA[<a href=\"https://telegram.org/faq#general\">PMF del Telegram</a>]]>. Tenen resposta a la majoria de preguntes i també consells importants per a la <![CDATA[<a href=\"https://telegram.org/faq#troubleshooting\">resolució de problemes</a>]]>.</string>
+  <string name="AskAQuestionInfo">Tingueu present que el suport del Telegram és ofert per voluntaris. Intentem respondre tan ràpid com ens és possible, però podem trigar una mica.<![CDATA[<br><br>]]>Sisplau, feu una ullada a les <![CDATA[<a href=\"https://telegram.org/faq#general\">PMF del Telegram</a>]]>. Tenen la resposta a la majoria de preguntes i també consells importants per a la <![CDATA[<a href=\"https://telegram.org/faq#troubleshooting\">resolució de problemes</a>]]>.</string>
   <string name="AskButton">Pregunta-ho a un voluntari</string>
   <string name="TelegramFaq">PMF del Telegram</string>
   <string name="TelegramFaqUrl">https://telegram.org/faq</string>
@@ -387,9 +390,11 @@
   <string name="AutoLockDisabled">Inhabilitat</string>
   <!--media view-->
   <string name="NoMedia">Compartiu fotos i vídeos a aquest xat i accediu-hi des de qualsevol dispositiu.</string>
-  <string name="DocumentsTitle">Documents</string>
-  <string name="SharedMediaTitle">Fitxers compartits</string>
-  <string name="NoSharedFiles">Compartiu fitxers i documents a aquest xat i accediu-hi des de qualsevol dispositiu.</string>
+  <string name="DocumentsTitle">Fitxers</string>
+  <string name="SharedMediaTitle">Multimèdia</string>
+  <string name="LinksTitle">Enllaços</string>
+  <string name="NoSharedFiles">Compartiu fitxers i documents a aquí i accediu-hi des de qualsevol dels vostres dispositiu.</string>
+  <string name="NoSharedLinks">Compartiu enllaços aquí i accediu-hi des de qualsevol dels vostres dispositius.</string>
   <!--map view-->
   <string name="Map">Mapa</string>
   <string name="Satellite">Satèl·lit</string>
@@ -542,6 +547,9 @@
   <string name="BotStatusCantRead">no té accés als missatges</string>
   <string name="BotInfoTitle">Què pot fer aquest bot?</string>
   <string name="BotStart">INICIA</string>
+  <string name="BotUnblock">REINICIA</string>
+  <string name="BotStop">Atura el bot</string>
+  <string name="BotRestart">Reinicia el bot</string>
   <!--button titles-->
   <string name="Next">Endavant</string>
   <string name="Back">Enrere</string>
@@ -829,6 +837,9 @@
   <string name="formatterDay24H">HH:mm</string>
   <string name="formatterDay12H">h:mm a</string>
   <string name="formatDateAtTime">%1$s a les %2$s</string>
+  <!--update text-->
+  <string name="updateText">S\'ha actualitzat el Telegram per a l\'Android. Novetats a la versió 3.1.3:\n\n- Nova secció \'Enllaços compartits\' a la informació del xat\n- Previsualització, dins de l\'aplicació, per a enllaços a fotos</string>
+  <string name="updateBuild">594</string>
     <!--Telegram+--><!--
   <string name="updatePlusText">\n\nNovetats a la versió 3.1.1.6\n\n- Nou MOD per mostrar l\'avatar dels contactes als xats\n- Nou MOD per mostrar l\'avatar propi als xats i grups\n- Nou MOD per alinear l\'avatar propi a dalt\n- S\'han afegit les noves bombolles Ed i Edge (gràcies a Edwin Macalopu)\n- Nou MOD per canviar el color de fons i de text del menú d\'adjuntar als xats\n- Nou MOD per canviar el color del títol i botons dels diàlegs\n- Correcció d\'errors</string>-->
     <string name="TelegramForAndroid">Plus Messenger per Android</string>
@@ -841,7 +852,7 @@
     <string name="General">General</string>
     <string name="Screens">Pantalles</string>
     <string name="MainScreen">Pantalla principal</string>
-  <string name="ChatScreen">Pantalla de xats</string>
+  <string name="ChatScreen">Pantalla de xat</string>
   <string name="ContactsScreen">Pantalla de contactes</string>
     <string name="Header">Capçalera</string>
     <string name="Rows">Files</string>
@@ -965,5 +976,8 @@
   <string name="ShowOwnAvatarGroup">Mostra el meu avatar als grups</string>
   <string name="OwnAvatarAlignTop">Alinea el meu avatar a dalt</string>
   <string name="DialogColor">Color del títol/botó dels diàlegs</string>
-  <string name="ShowUsername">Mostra el nom d\'usuari dels membres</string>
+  <string name="ShowUsername">Mostra el nom d\'usuari als missatges</string>
+  <string name="DisableAudioStop">No aturis els àudios</string>
+  <string name="ListDividerColor">Color del divisor de llista</string>
+  <string name="CenterAvatar">Centra l\'avatar, el nom i el número de telèfon</string>
 </resources>
diff --git a/TMessagesProj/src/main/res/values-de/strings.xml b/TMessagesProj/src/main/res/values-de/strings.xml
index 21267f9f2..caf3cf11a 100644
--- a/TMessagesProj/src/main/res/values-de/strings.xml
+++ b/TMessagesProj/src/main/res/values-de/strings.xml
@@ -1,7 +1,4 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<!--Translation by iLLogical2007, DanielGroeger and everyone from https://github.com/DrKLO/Telegram/pull/129 whom I didn't notice -->
-
+<?xml version='1.0' encoding='UTF-8'?>
 <resources>
     <string name="AppName">Plus Messenger</string>
     <string name="LanguageName">Deutsch</string>
@@ -137,6 +134,7 @@
     <string name="OpenInBrowser">Im Browser öffnen</string>
     <string name="CopyUrl">URL kopieren</string>
     <string name="SendItems">%1$s senden</string>
+    <string name="OpenUrlAlert">URL %1$s öffnen?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s hat den Selbstzerstörungs-Timer auf %2$s gesetzt</string>
     <string name="MessageLifetimeChangedOutgoing">Du hast den Selbstzerstörungs-Timer auf %1$s gesetzt</string>
@@ -549,6 +547,9 @@
     <string name="BotStatusCantRead">kein Zugriff auf Nachrichten</string>
     <string name="BotInfoTitle">Was kann dieser Bot?</string>
     <string name="BotStart">STARTEN</string>
+    <string name="BotUnblock">NEUSTART</string>
+    <string name="BotStop">Bot Anhalten</string>
+    <string name="BotRestart">Bot Neu Starten</string>
     <!--button titles-->
     <string name="Next">Weiter</string>
     <string name="Back">Zurück</string>
@@ -837,11 +838,11 @@
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s um %2$s</string>
     <!--update text-->
-    <string name="updateText">Plus Messenger für Android wurde aktualisiert. Neu in Version 3.1.2:\n\n- Die letzte Suche wird gespeichert\n- Stickervorschau: Sticker vor dem Senden antippen und halten</string>
-    <string name="updateBuild">591</string>
-    <!--Telegram+--><!--
+    <string name="updateText">Plus Messenger für Android wurde aktualisiert. Neu in Version 3.1.3:\n\n- Neuer \"Geteilte Links\" Bereich in der Chat Info\n- In-App Vorschau für Links von Bildern.</string>
+    <string name="updateBuild">594</string>
+    <!--Telegram+-->
   <string name="updatePlusText">
-\n\nNeu in 3.1.1.9:\n\n- Neue Sprechblase iOS hinzugefügt (Dank an Edwin Macalopu)\n- Neuer MOD Benutzernamen zusammen mit Mitgliedsnamen in Gruppen anzeigen\n- Zeigt Gruppe Admin im Gruppenprofil. Der Admin Benutzer hat ein eigenes Symbol\n- Neuer MOD Profilbild, Name und Telefonnummer im Hauptmenü zentrieren\n- Neuer MOD um Wiedergabe von Audio im Chat zu halten wird der Näherungssensor deaktiviert\n- Neuer MOD ändert Profilbild Farbe in Profilübersicht \n- Fehlerbeseitigung\n\n Prüfen und Anwenden von Themen für den Plus Messenger: https://play.google.com/store/apps/details?id=es.rafalense.themes</string>-->
+\n\nNeu in Version 3.1.3.0:\n\n- Neuer MOD ändert Standard Emoji Tab Symbol Farbe\n- Fehlerbeseitigung</string>
     <string name="TelegramForAndroid">Plus Messenger für Android</string>
   <string name="Theming">Themen bearbeiten</string>
   <string name="colorHexInvalid">Ungültiger Hex-Code!</string>
@@ -886,7 +887,8 @@
   <string name="EditTextSize">Text im Texteingabefeld</string>
   <string name="EditTextBGColor">Hintergrund Texteingabefeld</string>
   <string name="EmojiViewBGColor">Hintergrund Emojis</string>
-  <string name="EmojiViewTabColor">Tab Emojis</string>
+  <string name="EmojiViewTabColor">Emoji ausgewähltes Tab</string>
+  <string name="EmojiViewTabIconColor">Emoji Tab Symbol</string>
   <string name="OnlineColor">Online</string>
     <string name="ChatMusic">Musik</string>
   <string name="SaveTheme">Thema speichern</string>
diff --git a/TMessagesProj/src/main/res/values-es/strings.xml b/TMessagesProj/src/main/res/values-es/strings.xml
index c6b629638..9cad4161a 100644
--- a/TMessagesProj/src/main/res/values-es/strings.xml
+++ b/TMessagesProj/src/main/res/values-es/strings.xml
@@ -1,7 +1,4 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<!--Translation by Borja Campina, Edited by Victor Espinoza and Francisco Vila-->
-
+<?xml version='1.0' encoding='UTF-8'?>
 <resources>
     <string name="AppName">Plus Messenger</string>
     <string name="LanguageName">Español</string>
@@ -137,6 +134,7 @@
     <string name="OpenInBrowser">Abrir en el navegador</string>
     <string name="CopyUrl">Copiar URL</string>
     <string name="SendItems">Enviar %1$s</string>
+    <string name="OpenUrlAlert">¿Abrir %1$s?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s activó la autodestrucción en %2$s</string>
     <string name="MessageLifetimeChangedOutgoing">Activaste la autodestrucción en %1$s</string>
@@ -549,6 +547,9 @@
     <string name="BotStatusCantRead">no tiene acceso a los mensajes</string>
     <string name="BotInfoTitle">¿Qué puede hacer este bot?</string>
     <string name="BotStart">INICIAR</string>
+    <string name="BotUnblock">REINICIAR</string>
+    <string name="BotStop">Detener bot</string>
+    <string name="BotRestart">Reiniciar bot</string>
     <!--button titles-->
     <string name="Next">Siguiente</string>
     <string name="Back">Atrás</string>
@@ -837,10 +838,10 @@
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s a las %2$s</string>
     <!--update text-->
-    <string name="updateText">Plus Messenger para Android fue actualizada. Novedades en la versión 3.1.2:\n\n- Búsquedas recientes\n- Mantén pulsado sobre un sticker para obtener una vista previa antes de enviarlo</string>
-    <string name="updateBuild">591</string>
+    <string name="updateText">Plus Messenger para Android ha sido actualizada. Novedades en la versión 3.1.3:\n\n- Nueva sección de \'Enlaces\' en la información del chat\n- Vista previa en la app para enlaces a fotos</string>
+    <string name="updateBuild">594</string>
     <!--Telegram+-->
-    <string name="updatePlusText">Novedades en 3.1.2.0:\n\n- Solución de errores</string>
+    <string name="updatePlusText">\n\nNovedades en 3.1.3.0:\n\n- Nuevo MOD para ajustar color por defecto de icono de pestaña de emoticonos\n- Solución de errores</string>
     <string name="TelegramForAndroid">Plus Messenger para Android</string>
     <string name="Theming">Tematización</string>
     <string name="colorHexInvalid">¡Color hexadecimal inválido!</string>
@@ -856,7 +857,7 @@
     <string name="Header">Cabecera</string>
     <string name="Rows">Lista</string>
     <string name="ChatList">Lista de chat</string>
-    <string name="ChatsList">Lista de chats</string>
+    <string name="ChatsList">Lista de mensajes</string>
     <string name="ContactsList">Lista de contactos</string>
     <string name="HeaderColor">Color de cabecera</string>
     <string name="NameColor">Color de nombre</string>
@@ -885,7 +886,8 @@
     <string name="EditTextSize">Tamaño de entrada de texto</string>
     <string name="EditTextBGColor">Color de fondo de entrada de texto</string>
     <string name="EmojiViewBGColor">Color de fondo de emoticonos</string>
-    <string name="EmojiViewTabColor">Color de pestaña de emoticonos</string>
+    <string name="EmojiViewTabColor">Color de pestaña seleccionada de emoticonos</string>
+    <string name="EmojiViewTabIconColor">Color de icono de pestaña de emoticonos</string>
     <string name="OnlineColor">Color en línea</string>
     <string name="ChatMusic">Música</string>
     <string name="SaveTheme">Guardar tema</string>
@@ -975,7 +977,7 @@
     <string name="ShowOwnAvatarGroup">Muestra foto propia en grupo</string>
     <string name="OwnAvatarAlignTop">Alinear foto propia arriba</string>
     <string name="DialogColor">Color de título/botón de diálogo</string>
-    <string name="ShowUsername">Muestra apodo junto a nombre de miembro</string>
+  <string name="ShowUsername">Muestra alias junto a nombre de miembro</string>
     <string name="DisableAudioStop">No parar audio</string>
     <string name="ListDividerColor">Color de divisor de lista</string>
     <string name="CenterAvatar">Centrar avatar, nombre y móvil</string>
diff --git a/TMessagesProj/src/main/res/values-fr/strings.xml b/TMessagesProj/src/main/res/values-fr/strings.xml
index 7c2ce7c93..6c9d5268b 100644
--- a/TMessagesProj/src/main/res/values-fr/strings.xml
+++ b/TMessagesProj/src/main/res/values-fr/strings.xml
@@ -35,7 +35,7 @@
   <string name="WaitingForNetwork">En attente du réseau…</string>
   <string name="Connecting">Connexion…</string>
   <string name="Updating">Mise à jour…</string>
-  <string name="NewSecretChat">Nouvelle conversation secrète</string>
+  <string name="NewSecretChat">Nv. chat secret</string>
   <string name="AwaitingEncryption">En attente de la connexion de %s…</string>
   <string name="EncryptionRejected">Conversation secrète annulée</string>
   <string name="EncryptionProcessing">Échange des clés de chiffrement…</string>
@@ -50,14 +50,15 @@
   <string name="CompatibilityChat">%1$s utilise une version plus ancienne de Telegram, par conséquent les photos secrètes seront affichées en mode compatibilité.\n\Une fois que %2$s aura mis à jour son application, les photos avec compte-à-rebours de 1 minute ou moins seront visibles en mode \"toucher-pour-voir\" et vous serez averti si votre interlocuteur fait une capture d\'écran.</string>
   <string name="SearchMessages">MESSAGES</string>
   <string name="Search">Recherche</string>
-  <string name="MuteNotifications">Notifications muettes</string>
+  <string name="MuteNotifications">Notifications</string>
   <string name="MuteFor">Muet pendant %1$s</string>
   <string name="UnmuteNotifications">Activer les notifications</string>
   <string name="WillUnmuteIn">Dans %1$s</string>
   <string name="MuteDisable">Désactiver</string>
   <string name="Hashtags">HASHTAGS</string>
+  <string name="Recent">RÉCENT</string>
   <!--broadcasts-->
-  <string name="NewBroadcastList">Nouvelle liste de diffusion</string>
+  <string name="NewBroadcastList">Nv. liste de diffusion</string>
   <string name="EnterListName">Saisissez le nom de la liste</string>
   <string name="YouCreatedBroadcastList">Vous avez créé un liste de diffusion</string>
   <string name="AddRecipient">Ajouter un destinataire</string>
@@ -87,18 +88,18 @@
   <string name="Typing">écrit…</string>
   <string name="IsTyping">écrit…</string>
   <string name="AreTyping">écrivent…</string>
-  <string name="IsRecordingAudio">%1$s enregistre de l\'audio...</string>
+  <string name="IsRecordingAudio">%1$s enregistre du son...</string>
   <string name="IsSendingPhoto">%1$s envoie une photo...</string>
   <string name="IsSendingVideo">%1$s envoie une vidéo...</string>
   <string name="IsSendingFile">%1$s envoie un fichier...</string>
-  <string name="RecordingAudio">enregistrement de l\'audio...</string>
+  <string name="RecordingAudio">enregistrement...</string>
   <string name="SendingPhoto">envoi de la photo...</string>
   <string name="SendingVideoStatus">envoi de la vidéo...</string>
-  <string name="SendingFile">envoi d\'un fichier...</string>
+  <string name="SendingFile">envoi du fichier...</string>
   <string name="GotAQuestion">Une question\nsur Telegram?</string>
   <string name="ChatTakePhoto">Prendre une photo</string>
   <string name="ChatGallery">Galerie</string>
-  <string name="ChatLocation">Localisation</string>
+  <string name="ChatLocation">Position</string>
   <string name="ChatVideo">Vidéo</string>
   <string name="ChatDocument">Fichier</string>
   <string name="ChatCamera">Appareil photo</string>
@@ -126,14 +127,15 @@
   <string name="SaveToDownloads">Enregistrer dans les téléchargements</string>
   <string name="SaveToMusic">Enregistrer dans musique</string>
   <string name="ShareFile">Partager</string>
-  <string name="ApplyLocalizationFile">Appliquer le fichier de localisation</string>
+  <string name="ApplyLocalizationFile">Installer le pack linguistique</string>
   <string name="UnsupportedAttachment">Type de pièce-jointe inconnu</string>
   <string name="SetTimer">Temps avant auto-destruction</string>
   <string name="ServiceNotifications">Notifications de Service</string>
-  <string name="GettingLinkInfo">Obtention d\'informations sur le lien…</string>
-  <string name="OpenInBrowser">Ouvrir dans un navigateur</string>
+  <string name="GettingLinkInfo">Obtention d\'infos sur le lien…</string>
+  <string name="OpenInBrowser">Ouvrir dans le navigateur</string>
   <string name="CopyUrl">Copier l\'URL</string>
   <string name="SendItems">Envoyer %1$s</string>
+  <string name="OpenUrlAlert">Ouvrir l\'url %1$s?</string>
   <!--notification-->
   <string name="MessageLifetimeChanged">%1$s a défini l\'auto-destruction des messages à %2$s</string>
   <string name="MessageLifetimeChangedOutgoing">Vous avez défini l\'auto-destruction des messages à %1$s</string>
@@ -145,7 +147,7 @@
   <string name="NotificationMessagePhoto">%1$s vous a envoyé une photo</string>
   <string name="NotificationMessageVideo">%1$s vous a envoyé une vidéo</string>
   <string name="NotificationMessageContact">%1$s a partagé un contact avec vous</string>
-  <string name="NotificationMessageMap">%1$s vous a envoyé une localisation</string>
+  <string name="NotificationMessageMap">%1$s vous a envoyé une position</string>
   <string name="NotificationMessageDocument">%1$s vous a envoyé un fichier</string>
   <string name="NotificationMessageAudio">%1$s vous a envoyé un fichier audio</string>
   <string name="NotificationMessageSticker">%1$s vous a envoyé un sticker</string>
@@ -154,7 +156,7 @@
   <string name="NotificationMessageGroupPhoto">%1$s a envoyé une photo au groupe %2$s</string>
   <string name="NotificationMessageGroupVideo">%1$s a envoyé une vidéo au groupe %2$s</string>
   <string name="NotificationMessageGroupContact">%1$s a partagé un contact avec le groupe %2$s</string>
-  <string name="NotificationMessageGroupMap">%1$s a envoyé une localisation au groupe %2$s</string>
+  <string name="NotificationMessageGroupMap">%1$s a envoyé une position au groupe %2$s</string>
   <string name="NotificationMessageGroupDocument">%1$s a envoyé un fichier au groupe %2$s</string>
   <string name="NotificationMessageGroupAudio">%1$s a envoyé un fichier audio au groupe %2$s</string>
   <string name="NotificationMessageGroupSticker">%1$s a envoyé un sticker au groupe %2$s</string>
@@ -184,7 +186,7 @@
   <string name="LastSeen">vu</string>
   <string name="LastSeenDate">vu</string>
   <string name="InviteFriends">Inviter des amis</string>
-  <string name="GlobalSearch">RECHERCHE GENERALE</string>
+  <string name="GlobalSearch">RECHERCHE GÉNÉRALE</string>
   <string name="Lately">vu récemment</string>
   <string name="WithinAWeek">vu dans la semaine</string>
   <string name="WithinAMonth">vu au cours du dernier mois</string>
@@ -227,11 +229,11 @@
   <string name="PhoneWork">Travail</string>
   <string name="PhoneOther">Autre</string>
   <string name="PhoneMain">Principal</string>
-  <string name="StartEncryptedChat">Démarrer une conversation secrète</string>
+  <string name="StartEncryptedChat">Démarrer un chat secret</string>
   <string name="CreateEncryptedChatError">Une erreur s\'est produite.</string>
   <string name="EncryptionKey">Clé de chiffrement</string>
   <string name="MessageLifetime">Temps avant auto-destruction</string>
-  <string name="ShortMessageLifetimeForever">Désactivé</string>
+  <string name="ShortMessageLifetimeForever">Non</string>
   <string name="EncryptionKeyDescription">Cette image est une visualisation de la clé de chiffrement pour cette conversation secrète avec <![CDATA[<b>]]>%1$s<![CDATA[</b>]]>.<![CDATA[<br><br>]]>Si l\'image sur le téléphone de <![CDATA[<b>]]>%2$s<![CDATA[</b>]]> est identique, votre conversation est sécurisée à 200%%.<![CDATA[<br><br>]]>Plus d\'informations sur telegram.org</string>
   <string name="NumberUnknown">Inconnu</string>
   <string name="Info">Info</string>
@@ -247,22 +249,22 @@
   <string name="UsernameHelp">Vous pouvez choisir un nom d\'utilisateur sur <![CDATA[<b>]]>Telegram<![CDATA[</b>]]>. Si vous le faites, d\'autres personnes pourront vous trouver à l\'aide de celui-ci, et vous contacter sans connaitre votre numéro de téléphone.<![CDATA[<br><br>]]>Vous pouvez utiliser <![CDATA[<b>]]>a–z<![CDATA[</b>]]>, <![CDATA[<b>]]>0–9<![CDATA[</b>]]> et _. La longueur minimale est de <![CDATA[<b>]]>5<![CDATA[</b>]]> caractères.</string>
   <string name="UsernameChecking">Vérification du nom d\'utilisateur...</string>
   <string name="UsernameAvailable">%1$s est disponible.</string>
-  <string name="UsernameEmpty">Vide</string>
+  <string name="UsernameEmpty">Aucun</string>
   <string name="ErrorOccurred">Une erreur est survenue.</string>
   <!--stickers view-->
-  <string name="Stickers">Autocollants</string>
-  <string name="StickersInfo">Les artistes peuvent ajouter leur propre paquet d\'autocollants en utilisant notre robot @stickers.\n\nLes utilisateurs peuvent ajouter des autocollants en les touchant et en choisissant \"Ajouter aux autocollants\".</string>
+  <string name="Stickers">Stickers</string>
+  <string name="StickersInfo">Les artistes peuvent ajouter leur propre série de stickers en utilisant notre bot @stickers.\n\nLes utilisateurs peuvent ajouter des stickers en les touchant et en choisissant \"Ajouter aux Stickers\".</string>
   <string name="AddStickers">Ajouter des autocollants</string>
   <string name="AddToStickers">Ajouter aux autocollants</string>
   <string name="AddStickersNotFound">Autocollants introuvables</string>
-  <string name="StickersRemoved">Autocollants retirés</string>
+  <string name="StickersRemoved">Stickers supprimés</string>
   <string name="AddStickersInstalled">Nouveaux autocollants ajoutés</string>
   <string name="StickersHide">Cacher</string>
   <string name="StickersShow">Afficher</string>
   <string name="StickersShare">Partager</string>
   <string name="StickersCopy">Copier le lien</string>
   <string name="StickersRemove">Retirer</string>
-  <string name="NoStickers">Aucun autocollant actuellement</string>
+  <string name="NoStickers">Aucun sticker pour l\'instant</string>
   <!--settings view-->
   <string name="ResetNotificationsText">Rétablir tous les paramètres de notification par défaut</string>
   <string name="TextSize">Taille de police des messages</string>
@@ -278,8 +280,8 @@
   <string name="Sound">Son</string>
   <string name="InAppNotifications">Notifications internes</string>
   <string name="InAppSounds">Sons dans l\'app</string>
-  <string name="InAppVibrate">Vibration dans l\'app</string>
-  <string name="Vibrate">Vibrer</string>
+  <string name="InAppVibrate">Vibrations dans l\'app</string>
+  <string name="Vibrate">Vibreur</string>
   <string name="InAppPreview">Prévisualisation dans l\'app</string>
   <string name="Reset">Réinitialiser</string>
   <string name="ResetAllNotifications">Réinitialiser toutes les notifications</string>
@@ -290,21 +292,21 @@
   <string name="NoSound">Pas de son</string>
   <string name="Default">Par défaut</string>
   <string name="Support">Support</string>
-  <string name="OnlyIfSilent">Seulement si silencieux</string>
-  <string name="ChatBackground">Arrière-plan de conversation</string>
+  <string name="OnlyIfSilent">Seulement en silencieux</string>
+  <string name="ChatBackground">Arrière-plan</string>
   <string name="MessagesSettings">Messages</string>
-  <string name="SendByEnter">Envoyer en pressant la touche entrée</string>
+  <string name="SendByEnter">Touche Entrée pour envoyer</string>
   <string name="TerminateAllSessions">Terminer toutes les autres sessions</string>
   <string name="Events">Évènements</string>
   <string name="ContactJoined">Un contact a rejoint Telegram</string>
   <string name="Pebble">PEBBLE</string>
   <string name="Language">Langue</string>
-  <string name="AskAQuestionInfo">Veuillez noter que le support Telegram est assuré par des bénévoles. Nous essayons de répondre aussi vite que possible, mais cela peut prendre un peu de temps. <![CDATA[<br><br>]]>Veuillez consulter la <![CDATA[<a href=\"http://telegram.org/faq#general\">FAQ Telegram</a>]]> : cela répond à la plupart des questions et donne des conseils pour les <![CDATA[<a href=\"http://telegram.org/faq#troubleshooting\">problèmes</a>]]>.</string>
+  <string name="AskAQuestionInfo">Veuillez noter que le support Telegram est assuré par des bénévoles. Nous essayons de répondre aussi vite que possible, mais cela peut prendre un peu de temps. <![CDATA[<br><br>]]>Veuillez consulter la <![CDATA[<a href=\"https://telegram.org/faq#general\">FAQ Telegram</a>]]> : cela répond à la plupart des questions et donne des conseils pour les <![CDATA[<a href=\"https://telegram.org/faq#troubleshooting\">problèmes</a>]]>.</string>
   <string name="AskButton">Demandez à un bénévole</string>
   <string name="TelegramFaq">FAQ de Telegram</string>
   <string name="TelegramFaqUrl">https://telegram.org/faq</string>
-  <string name="DeleteLocalization">Supprimer la localisation ?</string>
-  <string name="IncorrectLocalization">Fichier de localisation incorrect</string>
+  <string name="DeleteLocalization">Supprimer la langue ?</string>
+  <string name="IncorrectLocalization">Fichier linguistique incorrect</string>
   <string name="Enabled">Activé</string>
   <string name="Disabled">Désactivé</string>
   <string name="NotificationsService">Service de notifications</string>
@@ -316,17 +318,17 @@
   <string name="LedColor">Couleur de la LED</string>
   <string name="PopupNotification">Notifications popup</string>
   <string name="NoPopup">Pas de popup</string>
-  <string name="OnlyWhenScreenOn">Uniquement lorsque l\'écran est allumé</string>
-  <string name="OnlyWhenScreenOff">Uniquement lorsque l\'écran est éteint</string>
+  <string name="OnlyWhenScreenOn">Si l\'écran est allumé</string>
+  <string name="OnlyWhenScreenOff">Si l\'écran est éteint</string>
   <string name="AlwaysShowPopup">Toujours afficher les popups</string>
   <string name="BadgeNumber">Compteur de Badge</string>
   <string name="Short">Bref</string>
   <string name="Long">Long</string>
   <string name="SystemDefault">Paramètres par défaut</string>
   <string name="SettingsDefault">Réglages par défaut</string>
-  <string name="AutomaticMediaDownload">Téléchargement automatique des médias</string>
-  <string name="WhenUsingMobileData">Lors de la connexion aux données mobiles</string>
-  <string name="WhenConnectedOnWiFi">Lors d\'une connexion WIFI</string>
+  <string name="AutomaticMediaDownload">Téléchargement auto. des médias</string>
+  <string name="WhenUsingMobileData">En connexion au réseau mobile</string>
+  <string name="WhenConnectedOnWiFi">En connexion Wi-Fi</string>
   <string name="WhenRoaming">En itinérance</string>
   <string name="NoMediaAutoDownload">Aucun média</string>
   <string name="SaveToGallerySettings">Enregistrer dans la galerie</string>
@@ -348,13 +350,14 @@
   <string name="NotificationsDisabled">Désactivé</string>
   <string name="VibrationDisabled">Désactivé</string>
   <string name="LedDisabled">Désactivé</string>
-  <string name="RepeatDisabled">Désactiver</string>
+  <string name="RepeatDisabled">Non</string>
   <string name="InChatSound">Sons des conversations</string>
   <string name="SoundDefault">Par défaut</string>
+  <string name="VibrationDefault">Par défaut</string>
   <string name="SmartNotifications">Notifications intelligentes</string>
   <string name="SmartNotificationsDisabled">Désactivé</string>
   <string name="SmartNotificationsInfo">Ne pas sonner plus de %1$s par %2$s</string>
-  <string name="SmartNotificationsSoundAtMost">Ne pas sonner plus de...</string>
+  <string name="SmartNotificationsSoundAtMost">Sonner au plus</string>
   <string name="SmartNotificationsTimes">fois</string>
   <string name="SmartNotificationsWithin">dans</string>
   <string name="SmartNotificationsMinutes">minutes</string>
@@ -364,14 +367,14 @@
   <string name="NoOtherSessions">Aucune autre session active</string>
   <string name="NoOtherSessionsInfo">Vous pouvez vous connecter depuis d\'autres téléphones, tablettes et ordinateurs avec ce même numéro de téléphone. Vos données seront automatiquement synchronisées.</string>
   <string name="OtherSessions">Sessions actives</string>
-  <string name="SessionsInfo">Contrôlez vos sessions sur d\'autres appareils.</string>
+  <string name="SessionsInfo">Gérez vos sessions sur d\'autres périphériques</string>
   <string name="TerminateSessionInfo">Appuyez sur une session pour la terminer.</string>
   <string name="TerminateSessionQuestion">Terminer cette session ?</string>
   <string name="UnofficialApp">app non-officielle</string>
   <!--passcode view-->
   <string name="Passcode">Verrouillage par code d\'accès</string>
   <string name="ChangePasscode">Changer le code d\'accès</string>
-  <string name="ChangePasscodeInfo">Lorsque vous configurez un code d\'accès supplémentaire, une icône de verrouillage s\'affiche sur la page des chats. Touchez-la pour verrouiller et déverrouiller votre application Telegram. \ n \ nNote: si vous oubliez le code d\'accès, vous devrez supprimer et réinstaller l\'application. Toutes les conversations secrètes seront perdues.</string>
+  <string name="ChangePasscodeInfo">Lorsque vous configurez un code d\'accès supplémentaire, une icône de verrouillage s\'affiche sur la page des chats. Touchez-la pour verrouiller et déverrouiller votre application Telegram.\n\nNote: si vous oubliez le code d\'accès, vous devrez supprimer et réinstaller l\'application. Toutes les conversations secrètes seront perdues.</string>
   <string name="ChangePasscodeAlert">Vous allez à présent voir une icône de verrouillage sur la page des chats. Touchez-la pour verrouiller votre application Telegram avec votre nouveau code d\'accès.</string>
   <string name="PasscodePIN">PIN</string>
   <string name="PasscodePassword">Mot de passe</string>
@@ -379,27 +382,29 @@
   <string name="EnterNewFirstPasscode">Saisissez un code d\'accès</string>
   <string name="EnterNewPasscode">Saisissez votre nouveau code d\'accès</string>
   <string name="EnterYourPasscode">Saisissez votre code d\'accès</string>
-  <string name="ReEnterYourPasscode">Saisissez à nouveau votre nouveau code d\'accès</string>
+  <string name="ReEnterYourPasscode">Confirmez votre nouveau code d\'accès</string>
   <string name="InvalidPasscode">Code d\'accès invalide</string>
   <string name="PasscodeDoNotMatch">Les codes d\'accès ne correspondent pas</string>
-  <string name="AutoLock">Verrouillage automatique</string>
+  <string name="AutoLock">Auto-verrouillage</string>
   <string name="AutoLockInfo">Code d\'accès requis en cas d\'absence</string>
-  <string name="AutoLockInTime">dans %1$s</string>
-  <string name="AutoLockDisabled">Verrouillage désactivé</string>
+  <string name="AutoLockInTime">après %1$s</string>
+  <string name="AutoLockDisabled">Désactivé</string>
   <!--media view-->
   <string name="NoMedia">Partager des photos et des vidéos dans cette conversation et y accéder sur chacun de vos appareils. </string>
-  <string name="DocumentsTitle">Fichiers</string>
-  <string name="SharedMediaTitle">Média partagé</string>
+  <string name="DocumentsTitle">Fichiers partagés</string>
+  <string name="SharedMediaTitle">Médias partagés</string>
+  <string name="LinksTitle">Liens Partagés</string>
   <string name="NoSharedFiles">Partager des fichiers et des documents dans cette conversation et y accéder sur chacun de vos appareils. </string>
+  <string name="NoSharedLinks">Partager des liens dans cette discussion et y accéder sur n\'importe lequel de vos appareils .</string>
   <!--map view-->
   <string name="Map">Carte</string>
   <string name="Satellite">Satellite</string>
   <string name="Hybrid">Hybride</string>
   <string name="MetersAway">m de distance</string>
   <string name="KMetersAway">km de distance</string>
-  <string name="SendLocation">Envoyer votre localisation actuelle</string>
-  <string name="SendSelectedLocation">Envoyer la localisation selectionnée</string>
-  <string name="ShareLocation">Localisation</string>
+  <string name="SendLocation">Envoyer votre position actuelle</string>
+  <string name="SendSelectedLocation">Envoyer la position selectionnée</string>
+  <string name="ShareLocation">Position</string>
   <string name="AccurateTo">Exact à %1$s</string>
   <string name="NearbyPlaces">OU CHOISIR UN LIEU</string>
   <!--photo gallery view-->
@@ -427,17 +432,17 @@
   <string name="Exposure">Exposition</string>
   <string name="Warmth">Température</string>
   <string name="Saturation">Saturation</string>
-  <string name="Vignette">Vignetage</string>
+  <string name="Vignette">Vignettage</string>
   <string name="Shadows">Ombres</string>
   <string name="Grain">Grain</string>
   <string name="Sharpen">Netteté</string>
   <string name="Blur">Flou</string>
-  <string name="BlurOff">Désactiver</string>
+  <string name="BlurOff">Désactivé</string>
   <string name="BlurLinear">Linéaire</string>
   <string name="BlurRadial">Radial</string>
   <string name="AreYouSureDeletePhoto">Êtes-vous sûr(e) de vouloir supprimer cette photo?</string>
   <string name="AreYouSureDeleteVideo">Êtes-vous sûr(e) de vouloir supprimer cette vidéo?</string>
-  <string name="DiscardChanges">Annuler les modifications?</string>
+  <string name="DiscardChanges">Annuler les changements?</string>
   <string name="ClearSearch">Supprimer l\'historique de recherche ?</string>
   <string name="ClearButton">Effacer</string>
   <string name="PickerPhotos">Photos</string>
@@ -467,7 +472,7 @@
   <string name="ChangePassword">Changer le mot de passe</string>
   <string name="TurnPasswordOff">Désactiver le mot de passe</string>
   <string name="SetRecoveryEmail">Définir l\'e-mail de récupération</string>
-  <string name="ChangeRecoveryEmail">Modifier l\'e-mail de récupération</string>
+  <string name="ChangeRecoveryEmail">Changer l\'e-mail de récupération</string>
   <string name="TurnPasswordOffQuestion">Êtes-vous sûr(e) de vouloir désactiver le mot de passe ?</string>
   <string name="PasswordHint">Indice du mot de passe</string>
   <string name="PasswordHintText">Veuillez créer un indice pour votre mot de passe</string>
@@ -498,7 +503,7 @@
   <!--privacy settings-->
   <string name="PrivacySettings">Vie privée et Sécurité</string>
   <string name="PrivacyTitle">Vie privée</string>
-  <string name="PrivacyLastSeen">Vu pour la dernière fois</string>
+  <string name="PrivacyLastSeen">Dernière visite</string>
   <string name="LastSeenEverybody">Tout le monde</string>
   <string name="LastSeenContacts">Mes Contacts</string>
   <string name="LastSeenNobody">Personne</string>
@@ -513,17 +518,17 @@
   <string name="DeleteAccountHelp">Si vous ne vous connectez pas au moins une fois durant cette période, votre compte sera effacé ainsi que tous vos groupes, messages et contacts.</string>
   <string name="DeleteAccountNowConfirmation">Supprimer votre compte ?</string>
   <string name="LastSeenHelp">Choisir qui peut voir la date de votre dernière connexion.</string>
-  <string name="LastSeenTitle">Qui peut voir la date votre dernière connexion ?</string>
-  <string name="AddExceptions">Ajouter des exceptions</string>
-  <string name="CustomHelp">Important: Vous ne pourrez plus voir la date de dernière connexion des utilisateurs qui ne peuvent pas voir la vôtre. À la place, une indication approximative sera affichée (récemment, dans la semaine, dans le dernier mois). </string>
-  <string name="AlwaysShareWith">Toujours Partager Avec</string>
-  <string name="NeverShareWith">Ne Jamais Partager Avec</string>
-  <string name="CustomShareSettingsHelp">Ces paramètres écraseront les valeurs ci-dessus</string>
+  <string name="LastSeenTitle">Qui peut voir quand c\'était ?</string>
+  <string name="AddExceptions">Exceptions</string>
+  <string name="CustomHelp">Important: Vous ne pourrez plus voir la date de dernière visite des personnes qui ne peuvent pas voir la vôtre. À la place, une vague indication sera affichée (récemment, dans la semaine, dans le dernier mois). </string>
+  <string name="AlwaysShareWith">Visible par </string>
+  <string name="NeverShareWith">Masqué à</string>
+  <string name="CustomShareSettingsHelp">Ces paramètres écraseront les valeurs précédentes</string>
   <string name="AlwaysShareWithTitle">Toujours Partager</string>
-  <string name="AlwaysShareWithPlaceholder">Toujours partager avec les utilisateurs...</string>
-  <string name="NeverShareWithTitle">Ne Jamais Partager</string>
-  <string name="NeverShareWithPlaceholder">Ne jamais partager avec les utilisateurs...</string>
-  <string name="EmpryUsersPlaceholder">Ajouter des Utilisateurs</string>
+  <string name="AlwaysShareWithPlaceholder">Toujours partager avec les personnes...</string>
+  <string name="NeverShareWithTitle">Ne pas montrer</string>
+  <string name="NeverShareWithPlaceholder">Ne pas partager avec les personnes...</string>
+  <string name="EmpryUsersPlaceholder">Personne</string>
   <string name="PrivacyFloodControlError">Désolé, requêtes trop nombreuses. Impossible de modifier vos réglages de Vie Privée pour le moment, veuillez patienter.</string>
   <string name="ClearOtherSessionsHelp">Déconnecte tous les appareils sauf celui-ci.</string>
   <string name="RemoveFromListText">Presser et maintenir sur un utilisateur pour le supprimer.</string>
@@ -542,7 +547,10 @@
   <string name="BotStatusRead">a accès aux messages</string>
   <string name="BotStatusCantRead">n\'a pas accès aux messages</string>
   <string name="BotInfoTitle">Que peux faire ce bot ?</string>
-  <string name="BotStart">DEMARRER</string>
+  <string name="BotStart">DÉMARRER</string>
+  <string name="BotUnblock">REDÉMARRER</string>
+  <string name="BotStop">Arrêter le bot</string>
+  <string name="BotRestart">Redémarrer le bot</string>
   <!--button titles-->
   <string name="Next">Suivant</string>
   <string name="Back">Précédent</string>
@@ -558,7 +566,7 @@
   <string name="Delete">Supprimer</string>
   <string name="Forward">Transférer</string>
   <string name="Retry">Réessayer</string>
-  <string name="FromCamera">Depuis l\'appareil photo</string>
+  <string name="FromCamera">Prendre une photo</string>
   <string name="FromGalley">Depuis la galerie</string>
   <string name="DeletePhoto">Supprimer la photo</string>
   <string name="Set">Définir</string>
@@ -588,7 +596,7 @@
   <string name="UnsuppotedMedia">Ce message n\'est pas supporté sur votre version de Telegram. Mettez à jour l\'application pour le voir: https://telegram.org/update</string>
   <string name="AttachPhoto">Photo</string>
   <string name="AttachVideo">Vidéo</string>
-  <string name="AttachLocation">Localisation</string>
+  <string name="AttachLocation">Position</string>
   <string name="AttachContact">Contact</string>
   <string name="AttachDocument">Fichier</string>
   <string name="AttachSticker">Sticker</string>
@@ -734,12 +742,12 @@
   <string name="Years_few">%1$d ans</string>
   <string name="Years_many">%1$d ans</string>
   <string name="Years_other">%1$d ans</string>
-  <string name="Users_zero">%1$d utilisateurs</string>
-  <string name="Users_one">%1$d utilisateur</string>
-  <string name="Users_two">%1$d utilisateurs</string>
-  <string name="Users_few">%1$d utilisateurs</string>
-  <string name="Users_many">%1$d utilisateurs</string>
-  <string name="Users_other">%1$d utilisateurs</string>
+  <string name="Users_zero">%1$d personnes</string>
+  <string name="Users_one">%1$d personne</string>
+  <string name="Users_two">%1$d personnes</string>
+  <string name="Users_few">%1$d personnes</string>
+  <string name="Users_many">%1$d personnes</string>
+  <string name="Users_other">%1$d personnes</string>
   <string name="Times_zero">%1$d fois</string>
   <string name="Times_one">%1$d fois</string>
   <string name="Times_two">%1$d fois</string>
@@ -795,12 +803,12 @@
   <string name="ForwardedAudio_few">%1$d audios transférés</string>
   <string name="ForwardedAudio_many">%1$d audios transférés</string>
   <string name="ForwardedAudio_other">%1$d audios transférés</string>
-  <string name="ForwardedLocation_zero">%1$d localisations transférées</string>
-  <string name="ForwardedLocation_one">Localisation transférée</string>
-  <string name="ForwardedLocation_two">%1$d localisations transférées</string>
-  <string name="ForwardedLocation_few">%1$d localisations transférées</string>
-  <string name="ForwardedLocation_many">%1$d localisations transférées</string>
-  <string name="ForwardedLocation_other">%1$d localisations transférées</string>
+  <string name="ForwardedLocation_zero">%1$d positions transférées</string>
+  <string name="ForwardedLocation_one">position transférée</string>
+  <string name="ForwardedLocation_two">%1$d position transférées</string>
+  <string name="ForwardedLocation_few">%1$d positions transférées</string>
+  <string name="ForwardedLocation_many">%1$d positions transférées</string>
+  <string name="ForwardedLocation_other">%1$d positions transférées</string>
   <string name="ForwardedContact_zero">%1$d contacts transférés</string>
   <string name="ForwardedContact_one">Contact transféré</string>
   <string name="ForwardedContact_two">%1$d contacts transférés</string>
@@ -830,9 +838,10 @@
   <string name="formatterDay24H">HH:mm</string>
   <string name="formatterDay12H">h:mm a</string>
   <string name="formatDateAtTime">%1$s à %2$s</string>
-  <!--update text--><!--
-  <string name="updateText">Plus Messenger pour Android vient d\'être mis à jour. Nouveautés de la version 2.9: \n\n- Installez et partagez des paquets de stickers personnalisés comme celui-ci: this one: https://play.google.com/store/apps/details?id=es.rafalense.themes\n- Si vous êtes un artiste, créez vos paquets de stickers, en utilisant notre robot @stickers. \n\n- Utilisez Telegram avec Android Auto.</string>-->
-  <string name="updateBuild">591</string>
+  <!--update text-->
+  <string name="updateText">Plus Messenger pour Android a été mis à jour. Nouveautés de la version 3.1.3:\n\n- Nouvelle section \"Liens partagés\" dans les informations de la conversation\n
+- Prévisualistaion In-app pour les liens des images</string>
+  <string name="updateBuild">594</string>
     <!--Telegram+-->
     <string name="TelegramForAndroid">Plus Messenger pour Android</string>
     <string name="Theming">Thème</string>
diff --git a/TMessagesProj/src/main/res/values-gl/strings.xml b/TMessagesProj/src/main/res/values-gl/strings.xml
index c353f378d..0d5559a2c 100644
--- a/TMessagesProj/src/main/res/values-gl/strings.xml
+++ b/TMessagesProj/src/main/res/values-gl/strings.xml
@@ -57,6 +57,7 @@ e introduce o teu número.</string>
   <string name="WillUnmuteIn">En %1$s</string>
   <string name="MuteDisable">Desactivar</string>
   <string name="Hashtags">HASHTAGS</string>
+  <string name="Recent">RECENTE</string>
   <!--broadcasts-->
   <string name="NewBroadcastList">Nova difusión</string>
   <string name="EnterListName">Introduce o nome da lista</string>
@@ -64,6 +65,10 @@ e introduce o teu número.</string>
   <string name="AddRecipient">Engadir destinatario</string>
   <string name="KickFromBroadcast">Eliminar da lista de difusión</string>
   <!--audio view-->
+  <string name="NoAudio">Engade ficheiros ao teu cartafol de música para velos aquí.</string>
+  <string name="AttachMusic">Música</string>
+  <string name="AudioUnknownArtist">Artista descoñecido</string>
+  <string name="AudioUnknownTitle">Título descoñecido</string>
   <!--documents view-->
   <string name="SelectFile">Seleccionar un ficheiro</string>
   <string name="FreeOfTotal">%1$s libres de %2$s</string>
@@ -120,6 +125,7 @@ e introduce o teu número.</string>
   <string name="DeleteThisChat">Eliminar este chat</string>
   <string name="SlideToCancel">ARRASTRAR PARA CANCELAR</string>
   <string name="SaveToDownloads">Gardar en descargas</string>
+  <string name="SaveToMusic">Gardar en música</string>
   <string name="ShareFile">Compartir</string>
   <string name="ApplyLocalizationFile">Aplicar tradución</string>
   <string name="UnsupportedAttachment">Adxunto non soportado</string>
@@ -129,6 +135,7 @@ e introduce o teu número.</string>
   <string name="OpenInBrowser">Abrir no navegador</string>
   <string name="CopyUrl">Copiar URL</string>
   <string name="SendItems">Enviar %1$s</string>
+  <string name="OpenUrlAlert">Abrir url %1$s?</string>
   <!--notification-->
   <string name="MessageLifetimeChanged">%1$s puxo o temporizador para a autodestrución en %2$s</string>
   <string name="MessageLifetimeChangedOutgoing">Puxeches o temporizador para a autodestrución en %1$s</string>
@@ -207,7 +214,7 @@ e introduce o teu número.</string>
   <string name="SharedMedia">Multimedia compartida</string>
   <string name="SETTINGS">Axustes</string>
   <string name="AddMember">Engadir membro</string>
-  <string name="DeleteAndExit">Eliminar e saír</string>
+  <string name="DeleteAndExit">Saír do grupo</string>
   <string name="Notifications">Notificacións</string>
   <string name="KickFromGroup">Eliminar do grupo</string>
   <!--contact info view-->
@@ -346,6 +353,7 @@ e introduce o teu número.</string>
   <string name="RepeatDisabled">Apagado</string>
   <string name="InChatSound">Sons no chat</string>
   <string name="SoundDefault">Predeterminado</string>
+  <string name="VibrationDefault">Predeterminado</string>
   <string name="SmartNotifications">Notificacións intelixentes</string>
   <string name="SmartNotificationsDisabled">Desactivado</string>
   <string name="SmartNotificationsInfo">Soar como máximo %1$s en %2$s</string>
@@ -383,9 +391,11 @@ e introduce o teu número.</string>
   <string name="AutoLockDisabled">Desactivado</string>
   <!--media view-->
   <string name="NoMedia">Comparte fotos e vídeos neste chat e accede a eles dende calquera dos teus dispositivos.</string>
-  <string name="DocumentsTitle">Ficheiros</string>
+  <string name="DocumentsTitle">Ficheiros compartidos</string>
   <string name="SharedMediaTitle">Multimedia</string>
+  <string name="LinksTitle">Ligazóns compartidas</string>
   <string name="NoSharedFiles">Comparte ficheiros e documentos neste chat e accede a eles dende calquera dos teus dispositivos.</string>
+  <string name="NoSharedLinks">Comparte ligazóns neste chat e accede a eles dende calquera dos teus dispositivos.</string>
   <!--map view-->
   <string name="Map">Mapa</string>
   <string name="Satellite">Satélite</string>
@@ -538,6 +548,9 @@ e introduce o teu número.</string>
   <string name="BotStatusCantRead">non ten acceso ás mensaxes</string>
   <string name="BotInfoTitle">Que pode facer este bot?</string>
   <string name="BotStart">INICIAR</string>
+  <string name="BotUnblock">REINICIAR</string>
+  <string name="BotStop">Deter bot</string>
+  <string name="BotRestart">Reiniciar bot</string>
   <!--button titles-->
   <string name="Next">Seguinte</string>
   <string name="Back">Atrás</string>
@@ -825,7 +838,11 @@ e introduce o teu número.</string>
   <string name="formatterDay24H">HH:mm</string>
   <string name="formatterDay12H">h:mm a</string>
   <string name="formatDateAtTime">%1$s ás %2$s</string>
-  <!--Telegram+-->
+  <!--update text-->
+  <string name="updateText">Telegram para Android foi actualizada. Novidades na versión 3.1.3:\n\n - Nova sección de \'Enlaces\' na información do chat\n - Vista previa na app para enlaces a fotos</string>
+  <string name="updateBuild">594</string>
+  <!--Telegram+--><!--
+  <string name="updatePlusText">\nnNovidades en 3.1.1.9:\nn - Novo MOD para centrar foto, nome e número en menú de navegación - Novo MOD para non parar audio (desactiva actuación de sensor de proximidad) - Novo MOD para cambiar cor de iconas en pantalla perfil - Solución de erros</string>-->
     <string name="TelegramForAndroid">Plus Messenger para Android</string>
     <string name="Theming">Tematización</string>
     <string name="colorHexInvalid">Cor hexadecimal inválida!</string>
@@ -929,8 +946,39 @@ e introduce o teu número.</string>
   <string name="KeepOriginalFilename">Manter o nome orixinal do ficheiro</string>
   <string name="KeepOriginalFilenameHelp">No canto de só números, os ficheiros gardaranse usando o formato nome_data</string>
   <string name="AvatarSize">Tamaño do avatar</string>
-  <string name="AvatarAlignTop">Aliñar o avatar arriba</string>
-  <string name="AvatarMarginLeft">Marxe esquerdo do avatar</string>
+  <string name="AvatarAlignTop">Aliñar foto de contacto arriba</string>
+  <string name="AvatarMarginLeft">Marxe do avatar</string>
   <string name="GroupNameColor">Cor de nombre de grupo</string>
   <string name="GroupNameSize">Tamaño de nome de grupo</string>
+  <string name="UnknownNameColor">Cor de nome (número descoñecido)</string>
+  <string name="HideBackgroundShadow">Ocultar sombra de fondo personalizado</string>
+  <string name="SetSolidBGColor">Poñer cor de fondo</string>
+  <string name="SolidBGColor">Cor de fondo</string>
+  <string name="EmojiPopupSize">Tamaño do popup de emoji</string>
+  <string name="ForwardRightNameColor">Cor de nome da burbulla dereita reenvío</string>
+  <string name="ForwardLeftNameColor">Cor de nome da burbulla esquerda reenvío</string>
+  <string name="IconsColor">Cor de iconos</string>
+  <string name="SettingsScreen">Pantalla de Axustes/Tematización</string>
+  <string name="BackgroundColor">Cor de fondo</string>
+  <string name="ShadowColor">Cor de sombra</string>
+  <string name="SectionColor">Cor de sección</string>
+  <string name="TitleColor">Cor de título</string>
+  <string name="SummaryColor">Cor Resumen/Subtítulo</string>
+  <string name="MediaColor">Cor de texto \'Foto/Sticker\'</string>
+  <string name="ThemesAppMsg">Gustaríache ver algúns dos temas creado por outros usuarios de Plus Messenger?</string>
+  <string name="UseDeviceFont">Empregar fonte do dispositivo</string>
+  <string name="AppWillRestart">Plus Messenger reiniciarase</string>
+  <string name="GroupIconColor">Cor do icono de grupo</string>
+  <string name="SharedContactNameColor">Cor do nome de contacto compartido</string>
+  <string name="AttachBGColor">Cor de fondo de adxuntar</string>
+  <string name="AttachTextColor">Cor do texto de adxuntar</string>
+  <string name="ShowContactAvatar">Mostrar avatar de contacto na pantalla de chats</string>
+  <string name="ShowOwnAvatar">Mostra foto propia en chat</string>
+  <string name="ShowOwnAvatarGroup">Mostra foto propia en grupo</string>
+  <string name="OwnAvatarAlignTop">Aliñar foto propia arriba</string>
+  <string name="DialogColor">Cor de título/botón de diálogo</string>
+  <string name="ShowUsername">Mostra alias xunto a nome de membro</string>
+  <string name="DisableAudioStop">Non deter audio</string>
+  <string name="ListDividerColor">Cor de divisor de lista</string>
+  <string name="CenterAvatar">Centrar avatar, nome e teléfono</string>
 </resources>
diff --git a/TMessagesProj/src/main/res/values-hi/strings.xml b/TMessagesProj/src/main/res/values-hi/strings.xml
index 668942235..969c39adc 100644
--- a/TMessagesProj/src/main/res/values-hi/strings.xml
+++ b/TMessagesProj/src/main/res/values-hi/strings.xml
@@ -515,7 +515,7 @@
   <string name="formatDateAtTime">%1$s पर %2$s</string>
   <!--update text-->
   <string name="updateText">Plus Messenger for Android has been updated. New in Version 3.0:\n\n\n\n- Dedicated tabs for each one of your custom sticker sets in the sticker panel. Add custom stickers like https://telegram.me/addstickers/Animals\n- New bot API, free for everyone. If you\'re an engineer, create your own bots for games, services or integrations. Learn more at https://telegram.org/blog/bot-revolution\n https://play.google.com/store/apps/details?id=es.rafalense.themes</string>
-  <string name="updateBuild">591</string>
+  <string name="updateBuild">594</string>
   <!--Telegram+--><!--
   <string name="updatePlusText"></string>-->
   <string name="TelegramForAndroid">Android  के लिए प्लस मैसेंजर</string>
diff --git a/TMessagesProj/src/main/res/values-hr/strings.xml b/TMessagesProj/src/main/res/values-hr/strings.xml
index 2e90c6783..939ae2512 100644
--- a/TMessagesProj/src/main/res/values-hr/strings.xml
+++ b/TMessagesProj/src/main/res/values-hr/strings.xml
@@ -1,4 +1,4 @@
-<?xml version="1.0" encoding="utf-8"?>
+<?xml version='1.0' encoding='UTF-8'?>
 <resources>
     <string name="AppName">Plus Messenger</string>
     <string name="LanguageName">Hrvatski</string>
@@ -55,12 +55,17 @@
     <string name="UnmuteNotifications">Uključiti</string>
     <string name="WillUnmuteIn">Za %1$s</string>
     <string name="MuteDisable">Onemogućeno</string>
+  <string name="Hashtags">HASHTAGS</string>
     <!--broadcasts-->
     <string name="NewBroadcastList">Nova distribucijska lista</string>
     <string name="EnterListName">Upiši naziv liste</string>
     <string name="YouCreatedBroadcastList">Napravili ste distribucijsku listu</string>
     <string name="AddRecipient">Dodaj primatelja</string>
     <string name="KickFromBroadcast">Ukloni iz distribucijske liste</string>
+  <!--audio view-->
+  <string name="AttachMusic">Glazba</string>
+  <string name="AudioUnknownArtist">Nepoznat izvođač</string>
+  <string name="AudioUnknownTitle">Nepoznat naslov</string>
     <!--documents view-->
     <string name="SelectFile">Odaberite datoteku</string>
     <string name="FreeOfTotal">Slobodno %1$s od %2$s</string>
@@ -81,14 +86,23 @@
     <string name="Typing">piše...</string>
     <string name="IsTyping">piše...</string>
     <string name="AreTyping">pišu...</string>
+  <string name="IsRecordingAudio">%1$s snima zvučni zapis...</string>
+  <string name="IsSendingPhoto">%1$s šalje sliku...</string>
+  <string name="IsSendingVideo">%1$s šalje video zapis...</string>
+  <string name="IsSendingFile">%1$s šalje datoteku...</string>
+  <string name="RecordingAudio">snima zvučni zapis...</string>
+  <string name="SendingPhoto">šalje fotografiju...</string>
+  <string name="SendingVideoStatus">šalje video zapis...</string>
+  <string name="SendingFile">šalje datoteku...</string>
     <string name="GotAQuestion">Imaš pitanje o Telegramu?</string>
     <string name="ChatTakePhoto">Uslikaj</string>
     <string name="ChatGallery">Galerija</string>
     <string name="ChatLocation">Lokacija</string>
     <string name="ChatVideo">Video</string>
     <string name="ChatDocument">Datoteka</string>
+  <string name="ChatCamera">Kamera</string>
     <string name="NoMessages">Trenutno ovdje nema poruka...</string>
-    <string name="ForwardedMessage">Proslijeđene poruke</string>
+  <string name="ForwardedMessage">Proslijeđena poruka</string>
     <string name="From">Od</string>
     <string name="NoRecent">Nema nedavnih</string>
     <string name="Message">Poruka</string>
@@ -108,11 +122,16 @@
     <string name="DeleteThisChat">Izbriši ovo dopisivanje</string>
     <string name="SlideToCancel">POVUCITE ZA PREKID</string>
     <string name="SaveToDownloads">Spremi u preuzimanja</string>
+  <string name="SaveToMusic">Spremi u glazbu</string>
     <string name="ShareFile">Dijeli</string>
-    <string name="ApplyLocalizationFile">Koristiti prijevod</string>
+  <string name="ApplyLocalizationFile">Koristi prijevod</string>
     <string name="UnsupportedAttachment">Privitak nije podržan</string>
     <string name="SetTimer">Postavi samouništenje</string>
     <string name="ServiceNotifications">Usluga obavijesti</string>
+  <string name="OpenInBrowser">Otvori u pretraživaču</string>
+  <string name="CopyUrl">Kopiraj link</string>
+  <string name="SendItems">Pošalji %1$s</string>
+  <string name="OpenUrlAlert">Otvori URL %1$s?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s postavlja odbrojavanje samouništenja za %2$s</string>
     <string name="MessageLifetimeChangedOutgoing">Odbrojavanje za samouništenje je postavljeno na %1$s</string>
@@ -122,7 +141,7 @@
     <string name="NotificationMessageText">%1$s: %2$s</string>
     <string name="NotificationMessageNoText">%1$s vam šalje poruku</string>
     <string name="NotificationMessagePhoto">%1$s vam šalje sliku</string>
-    <string name="NotificationMessageVideo">%1$s vam šalje videozapis</string>
+  <string name="NotificationMessageVideo">%1$s vam šalje video zapis</string>
     <string name="NotificationMessageContact">%1$s dijeli kontakt s tobom</string>
     <string name="NotificationMessageMap">%1$s vam šalje lokaciju</string>
     <string name="NotificationMessageDocument">%1$s vam šalje datoteku</string>
@@ -131,7 +150,7 @@
     <string name="NotificationMessageGroupText">%1$s @ %2$s: %3$s</string>
     <string name="NotificationMessageGroupNoText">%1$s šalje poruku u grupi %2$s</string>
     <string name="NotificationMessageGroupPhoto">%1$s šalje sliku u grupi %2$s</string>
-    <string name="NotificationMessageGroupVideo">%1$s šalje videozapis u grupi %2$s</string>
+  <string name="NotificationMessageGroupVideo">%1$s šalje video zapis u grupi %2$s</string>
     <string name="NotificationMessageGroupContact">%1$s dijeli kontakt s grupom %2$s</string>
     <string name="NotificationMessageGroupMap">%1$s šalje lokaciju u grupi %2$s</string>
     <string name="NotificationMessageGroupDocument">%1$s šalje datoteku u grupi %2$s</string>
@@ -146,7 +165,7 @@
     <string name="NotificationGroupKickYou">%1$s te ukonio/la iz grupe %2$s</string>
     <string name="NotificationGroupLeftMember">%1$s napušta grupu %2$s</string>
     <string name="NotificationContactJoined">%1$s se pridružio/la Telegramu!</string>
-    <string name="NotificationUnrecognizedDevice">%1$s,\nOtkrili smo prijavu na vaš račun s novog uređaja - %2$s\n\nUređaj: %3$s\nLokacija: %4$s\n\nAko to niste vi, odabrate Postavke - Privatnost i sigurnost - Ugasi sve ostale sesije.\n\nHvala,\nTelegram tim</string>
+  <string name="NotificationUnrecognizedDevice">%1$s,\nOtkrili smo prijavu na vaš račun s novog uređaja - %2$s\n\nUređaj: %3$s\nLokacija: %4$s\n\nAko to niste vi, odabrate Postavke - Privatnost i sigurnost - Sesije i ugasite sve ostale sesije.\n\nAko mislite da se netko prijavio na vaš račun protiv vaše volje možete aktivirati potvrdu u dva koraka u postavkama Privatnost i sigurnost.\n\nHvala,\nTelegram tim</string>
     <string name="NotificationContactNewPhoto">%1$s je obnovio/la profilnu sliku</string>
     <string name="Reply">Odgovori</string>
     <string name="ReplyToGroup">Odgovoriti grupi %1$s</string>
@@ -173,6 +192,11 @@
     <string name="EnterGroupNamePlaceholder">Upišite naziv grupe</string>
     <string name="GroupName">Naziv grupe</string>
     <string name="MembersCount">%1$d/%2$d članova</string>
+  <string name="JoinToGroup">Da li se želite pridružiti grupi \'%1$s\'?</string>
+  <string name="JoinToGroupErrorFull">Žao nam je, ova grupa je već popunjena.</string>
+  <string name="JoinToGroupErrorNotExist">Žao nam je, ova grupa ne postoji.</string>
+  <string name="CopyLink">Kopiraj link</string>
+  <string name="ShareLink">Podijeli link</string>
     <!--group info view-->
     <string name="SharedMedia">Dijeljene datoteke</string>
     <string name="SETTINGS">Postavke</string>
@@ -209,11 +233,24 @@
     <string name="UsernameInvalidShort">Korisničko ime mora imati barem 5 znakova.</string>
     <string name="UsernameInvalidLong">Korisničko ime nesmije imati više od 32 znaka.</string>
     <string name="UsernameInvalidStartNumber">Žao nam je, korisničko ime ne smije započimati s brojem.</string>
-    <string name="UsernameHelp">Odaberite svoje korisničko ime na <![CDATA[<b>]]>Telegramu<![CDATA[</b>]]>. Ako to učinite drugi ljudi će imati mogućnost pronaći vas preko odabranog korisničkog imena i kontaktirati vas bez da znaju vaš telefonski broj.<![CDATA[<br><br>]]>U imenu možete koristiti <![CDATA[<b>]]>a–z<![CDATA[</b>]]>, <![CDATA[<b>]]>0–9<![CDATA[</b>]]> i podcrte. Minimalna duljina je <![CDATA[<b>]]>5<![CDATA[</b>]]> znakova.</string>
+  <string name="UsernameHelp">Odaberite svoje korisničko ime na <![CDATA[<b>]]>Telegramu<![CDATA[</b>]]>. Ako to učinite drugi ljudi će imati mogućnost pronaći vas preko odabranog korisničkog imena i kontaktirati vas bez da znaju vaš telefonski broj.<![CDATA[<br><br>]]>U imenu možete koristit <![CDATA[<b>]]>a–z<![CDATA[</b>]]>, <![CDATA[<b>]]>0–9<![CDATA[</b>]]> i podcrte. Minimalna duljina je <![CDATA[<b>]]>5<![CDATA[</b>]]> znakova.</string>
     <string name="UsernameChecking">Provjera korisničkog imena...</string>
     <string name="UsernameAvailable">%1$s je dostupno.</string>
     <string name="UsernameEmpty">Nije postavljeno</string>
     <string name="ErrorOccurred">Došlo je do greške.</string>
+  <!--stickers view-->
+  <string name="Stickers">Naljepnice</string>
+  <string name="AddStickers">Dodaj naljepnice</string>
+  <string name="AddToStickers">Dodaj u naljepnice</string>
+  <string name="AddStickersNotFound">Naljepnice nisu pronađene</string>
+  <string name="StickersRemoved">Naljepnice uklonjene</string>
+  <string name="AddStickersInstalled">Nove naljepnice su spremljene</string>
+  <string name="StickersHide">Sakrij</string>
+  <string name="StickersShow">Prikaži</string>
+  <string name="StickersShare">Podijeli</string>
+  <string name="StickersCopy">Kopiraj link</string>
+  <string name="StickersRemove">Ukloni</string>
+  <string name="NoStickers">Nemate naljepnice</string>
     <!--settings view-->
     <string name="ResetNotificationsText">Postavi sve postavke obavijesti na početne vrijednosti</string>
     <string name="TextSize">Veličina teksta poruke</string>
@@ -222,7 +259,7 @@
     <string name="Unblock">Odblokiraj</string>
     <string name="UnblockText">Za odblokiranje dodirni i zadrži prst na nazivu korisnika.</string>
     <string name="NoBlocked">Nema blokiranih korisnika</string>
-    <string name="MessageNotifications">Obavijesti poruka</string>
+  <string name="MessageNotifications">Obavijesti poruke</string>
     <string name="Alert">Obavijest</string>
     <string name="MessagePreview">Pregled poruke</string>
     <string name="GroupNotifications">Obavijesti grupe</string>
@@ -241,6 +278,7 @@
     <string name="NoSound">Bez zvuka</string>
     <string name="Default">Zadano</string>
     <string name="Support">Podrška</string>
+  <string name="OnlyIfSilent">Samo kad je stišano</string>
     <string name="ChatBackground">Pozadina dopisivanja</string>
     <string name="MessagesSettings">Poruke</string>
     <string name="SendByEnter">Enter šalje poruku</string>
@@ -249,7 +287,6 @@
     <string name="ContactJoined">Kontakt se pridružio Telegramu</string>
     <string name="Pebble">PEBBLE</string>
     <string name="Language">Jezik</string>
-    <string name="AskAQuestionInfo">Molimo da se obrati pozornost kako Telegram podršku daju dobrovoljci. Trudimo se odgovoriti što je brže moguće, ali ponekad može potrajati.<![CDATA[<br><br>]]>Pogledaj <![CDATA[<a href=\"http://telegram.org/faq#general\">često postavljana pitanja</a>]]>: tu su odgovori na većinu pitanja i važni savjeti za <![CDATA[<a href=\"http://telegram.org/faq#troubleshooting\">rješavanje problema</a>]]>.</string>
     <string name="AskButton">Pitaj dobrovoljca</string>
     <string name="TelegramFaq">Često postavljana pitanja</string>
     <string name="TelegramFaqUrl">https://telegram.org/faq</string>
@@ -297,26 +334,44 @@
     <string name="NotificationsOther">Ostalo</string>
     <string name="NotificationsDisabled">Onemogućeno</string>
     <string name="VibrationDisabled">Onemogućeno</string>
+  <string name="LedDisabled">Onemogućeno</string>
+  <string name="RepeatDisabled">Isključeno</string>
+  <string name="InChatSound">Zvukovi tijekom pokrenutog dopisivanja </string>
+  <string name="SoundDefault">Osnovno</string>
+  <string name="VibrationDefault">Zadano</string>
+  <string name="SmartNotifications">Pametne obavijesti</string>
+  <string name="SmartNotificationsDisabled">Onemogućeno</string>
+  <string name="SmartNotificationsMinutes">minuta</string>
+  <!--sessions view-->
+  <string name="SessionsTitle">Aktivne sesije</string>
+  <string name="CurrentSession">Trenutna sesija</string>
+  <string name="NoOtherSessions">Nema drugih aktivnih sesija</string>
+  <string name="NoOtherSessionsInfo">Na Telegram se možeš prijavit s drugog mobitela, tableta i računala koristeći isti telefonski broj. Svi tvoji podaci će se trenutno sinkronizirati.</string>
+  <string name="OtherSessions">Aktivne sesije</string>
+  <string name="SessionsInfo">Upravljaj svojim sesijama na drugim uređajima.</string>
+  <string name="TerminateSessionInfo">Pritisni i zadrži sesiju za gašenje.</string>
+  <string name="TerminateSessionQuestion">Ugasiti ovu sesiju?</string>
+  <string name="UnofficialApp">neslužbena aplikacija</string>
     <!--passcode view-->
-    <string name="Passcode">Šifra</string>
+  <string name="Passcode">Zaključavanje lozinkom</string>
     <string name="ChangePasscode">Promijeni šifru</string>
-    <string name="ChangePasscodeInfo">Kada podesite dodatnu šifru, ikona sa lokotom će se pojaviti na stranici sa dopisivanjima. Pritisnite je da bi otključali vašu Telegram aplikaciju.\n\nPodsjetnik: ako zaboravite šifru, morate obrisati i reinstalirati aplikaciju. Sva tajna dopisivanja biti će obrisana.</string>
+  <string name="ChangePasscodeInfo">Kada podesite dodatnu šifru, ikona sa lokotom će se pojaviti na stranici sa dopisivanjima. Pritisnite je da bi zaključali i otključali vašu Telegram aplikaciju.\n\nPodsjetnik: ako zaboravite šifru, morate obrisati aplikaciju i reinstalirati. Sva tajna dopisivanja biti će obrisana.</string>
     <string name="ChangePasscodeAlert">Ikona s lokotom će se pojaviti na stranci sa dopisivanjima. Pritisnite je da bi zaključali Telegram sa novom šifrom.</string>
     <string name="PasscodePIN">PIN</string>
     <string name="PasscodePassword">Lozinka</string>
     <string name="EnterCurrentPasscode">Unesite trenutnu šifru</string>
+  <string name="EnterNewFirstPasscode">Unesite lozinku</string>
     <string name="EnterNewPasscode">Unesite novu šifru</string>
     <string name="EnterYourPasscode">Unesite vašu šifru</string>
-    <string name="ReEnterYourPasscode">Ponovno unesite novu šifru</string>
+  <string name="ReEnterYourPasscode">Ponovno unesite vašu novu šifru</string>
     <string name="InvalidPasscode">Neispravna šifra</string>
     <string name="PasscodeDoNotMatch">Šifra se ne poklapaju</string>
     <string name="AutoLock">Automatsko zaključavanje</string>
-    <string name="AutoLockInfo">Zahtjevaj šifru ako sam odsutan.</string>
+  <string name="AutoLockInfo">Zahtijevaj šifru ako sam neaktivan.</string>
     <string name="AutoLockInTime">za %1$s</string>
     <string name="AutoLockDisabled">Onemogućeno</string>
     <!--media view-->
     <string name="NoMedia">Dijelite slike i video u ovom dopisivanju pa pristupite njima s bilo kojeg vašeg uređaja.</string>
-    <string name="DocumentsTitle">Datoteke</string>
     <string name="SharedMediaTitle">Multimedija</string>
     <string name="NoSharedFiles">Dijelite datoteke i dokumente u ovom dopisivanju pa pristupite njima s bilo kojeg vašeg uređaja.</string>
     <!--map view-->
@@ -325,14 +380,15 @@
     <string name="Hybrid">Hibridni prikaz</string>
     <string name="MetersAway">m udaljen</string>
     <string name="KMetersAway">km udaljen</string>
-    <string name="SendLocation">Pošalji lokaciju</string>
-    <string name="ShareLocation">Dijeli lokaciju</string>
+  <string name="SendSelectedLocation">Pošalji označenu lokaciju</string>
+  <string name="ShareLocation">Lokacija</string>
     <!--photo gallery view-->
     <string name="ShowAllMedia">Svi medijski zapisi</string>
     <string name="SaveToGallery">Spremi u galeriju</string>
     <string name="Of">%1$d od %2$d</string>
     <string name="Gallery">Galerija</string>
     <string name="AllPhotos">Sve slike</string>
+  <string name="AllVideo">Svi video zapisi</string>
     <string name="NoPhotos">Još nema slika</string>
     <string name="PleaseDownload">Molimo te prvo preuzmi medijsku datoteku</string>
     <string name="NoRecentPhotos">Nema nedavnih slika</string>
@@ -355,9 +411,39 @@
     <string name="Grain">Zrnato</string>
     <string name="Sharpen">Oštrina</string>
     <string name="Blur">Zamutiti</string>
-    <string name="AreYouSureDeletePhoto">Jeste li sigurni da želite obrisat ovu sliku?</string>
-    <string name="AreYouSureDeleteVideo">Jeste li sigurni da želite obrisat ovaj video?</string>
+  <string name="BlurOff">Isključeno</string>
+  <string name="BlurLinear">Linearano</string>
+  <string name="BlurRadial">Radijalano</string>
+  <string name="AreYouSureDeletePhoto">Jeste li sigurni da želite obrisati ovu sliku?</string>
+  <string name="AreYouSureDeleteVideo">Jeste li sigurni da želite obrisati ovaj video zapis?</string>
     <string name="DiscardChanges">Odbaciti izmjene?</string>
+  <string name="ClearSearch">Obrisati povijest pretraživanja?</string>
+  <string name="ClearButton">Očisti</string>
+  <string name="PickerPhotos">Fotografije</string>
+  <string name="PickerVideo">Video zapis</string>
+  <string name="AddCaption">Dodaj opis</string>
+  <!--password view-->
+  <string name="TwoStepVerification">Potvrda u dva koraka</string>
+  <string name="SetAdditionalPassword">Postavi dodatnu lozinku</string>
+  <string name="YourPassword">Vaša lozinka</string>
+  <string name="PleaseEnterFirstPassword">Unesite lozinku</string>
+  <string name="PleaseEnterPassword">Unesite vašu novu lozinku</string>
+  <string name="PleaseReEnterPassword">Ponovno unesite vašu novu lozinku</string>
+  <string name="YourEmail">Vaš e-mail</string>
+  <string name="YourEmailSkip">Preskoči</string>
+  <string name="YourEmailSkipWarning">Upozorenje</string>
+  <string name="ChangePassword">Promijeni lozinku</string>
+  <string name="PasswordHint">Podsjetnik za lozinku</string>
+  <string name="PasswordHintText">Kreirajte podsjetnik za vašu lozinku</string>
+  <string name="PasswordDoNotMatch">Lozinke se ne poklapaju</string>
+  <string name="PasswordAsHintError">Podsjetnik se mora razlikovati od vaše lozinke</string>
+  <string name="RestorePasswordNoEmailTitle">Žao nam je</string>
+  <string name="RestoreEmailTrouble">Imate problema sa pristupom vašem e-mailu %1$s?</string>
+  <string name="ResetMyAccountWarning">Upozorenje</string>
+  <string name="ResetMyAccountWarningReset">Ponovno postavi</string>
+  <string name="LoginPassword">Lozinka</string>
+  <string name="ForgotPassword">Zaboravljena lozinka?</string>
+  <string name="PasswordCode">Kôd</string>
     <!--privacy settings-->
     <string name="PrivacySettings">Privatnost i sigurnost</string>
     <string name="PrivacyTitle">Privatnost</string>
@@ -372,7 +458,7 @@
     <string name="LastSeenNobodyPlus">Nitko (+%1$d)</string>
     <string name="SecurityTitle">Sigurnost</string>
     <string name="DeleteAccountTitle">Samouništenje korisničkog računa</string>
-    <string name="DeleteAccountIfAwayFor">Ako sam odsutan</string>
+  <string name="DeleteAccountIfAwayFor">Ako sam neaktivan</string>
     <string name="DeleteAccountHelp">Ako se ne prijavite barem jednom u ovom periodu vaš korisniči račun će biti obrisan skupa sa svim grupama, porukama i kontaktima.</string>
     <string name="DeleteAccountNowConfirmation">Izbrisati korisnički račun?</string>
     <string name="LastSeenHelp">Promijenite tko može vidjeti vaše vrijeme zadnjeg posjeta.</string>
@@ -396,12 +482,20 @@
     <string name="EditedVideo">Uređeni video</string>
     <string name="SendingVideo">Šaljem video...</string>
     <string name="CompressVideo">Kompresiraj video</string>
+  <!--bot-->
+  <string name="BotShare">Podijeli</string>
+  <string name="BotInvite">Dodaj u grupu</string>
+  <string name="BotSettings">Postavke</string>
+  <string name="BotHelp">Pomoć</string>
+  <string name="BotStatusRead">ima pristup porukama</string>
+  <string name="BotStatusCantRead">nema pristup porukama</string>
     <!--button titles-->
     <string name="Next">Sljedeće</string>
     <string name="Back">Natrag</string>
     <string name="Done">Gotovo</string>
     <string name="Open">Otvori</string>
     <string name="Cancel">Odustani</string>
+  <string name="Close">Zatvori</string>
     <string name="Add">Dodaj</string>
     <string name="Edit">Uredi</string>
     <string name="Send">Šalji</string>
@@ -417,6 +511,7 @@
     <string name="OK">U redu</string>
     <string name="Crop">IZREŽI</string>
     <!--messages-->
+  <string name="ActionInviteYou">Pridružili ste se grupi u koju ste pozvani poveznicom</string>
     <string name="ActionKickUser">un1 je uklonio un2</string>
     <string name="ActionLeftUser">un1 je napustio grupu</string>
     <string name="ActionAddUser">un1 je dodao un2</string>
@@ -434,10 +529,9 @@
     <string name="ActionKickUserYou">un1 te uklonio</string>
     <string name="ActionAddUserYou">un1 te dodao</string>
     <string name="ActionAddUserSelf">un1 se vratio grupi</string>
-  <string name="UnsuppotedMedia">Tvoja verzija Telegrama ne podržava ovu poruku. Obnovi aplikaciju za nastavak:
-http://telegram.org/update</string>
+  <string name="ActionAddUserSelfYou">Vratili ste se u grupu</string>
     <string name="AttachPhoto">Slika</string>
-    <string name="AttachVideo">Videozapis</string>
+  <string name="AttachVideo">Video zapis</string>
     <string name="AttachLocation">Lokacija</string>
     <string name="AttachContact">Kontakt</string>
     <string name="AttachDocument">Datoteka</string>
@@ -450,16 +544,16 @@ http://telegram.org/update</string>
     <string name="InvalidPhoneNumber">Neispravni telefonski broj</string>
     <string name="CodeExpired">Kod je istekao, ponovo se ulogiraj</string>
     <string name="FloodWait">Previše pokušaja, probajte ponovo kasnije</string>
+  <string name="FloodWaitTime">Previše pokušaja, molimo pokušajte ponovo u %1$s</string>
     <string name="InvalidCode">Neispravan kod</string>
     <string name="InvalidFirstName">Neispravno ime</string>
     <string name="InvalidLastName">Neispravno prezime</string>
     <string name="Loading">Učitavanje...</string>
     <string name="NoPlayerInstalled">Nemaš video player, instaliraj neki za nastavak</string>
-    <string name="NoMailInstalled">Molimo Vas, pošaljite mail na sms@telegram.org i objasnite Vaš problem.</string>
+  <string name="NoMailInstalled">Molim Vas, pošaljite mail na sms@stel.com i objasnite Vaš problem.</string>
     <string name="NoHandleAppInstalled">Nemaš aplikaciju zaduženu za tip datoteke \'%1$s\', instaliraj neku za nastavak</string>
     <string name="InviteUser">Ovaj korisnik još nema Telegram, poslati pozivnicu?</string>
     <string name="AreYouSure">Sigurno?</string>
-    <string name="AddToTheGroup">Dodati %1$s u grupu?\n\nBroj poruka za proslijediti: </string>
     <string name="ForwardMessagesTo">Proslijediti kontaktu %1$s?</string>
     <string name="SendMessagesTo">Poslati poruke za %1$s?</string>
     <string name="AreYouSureLogout">Jeste li ste sigurni da se želite odjaviti?\n\nNapominjemo da Telegram možete koristiti neprimjetno na svim vašim uređajima odjednom.\n\nUpamtite, odjavljivanjem brišete sva vaša Tajna dopisivanja.</string>
@@ -492,7 +586,7 @@ http://telegram.org/update</string>
     <string name="Page5Message"><![CDATA[<b>Plus Messenger</b>]]> nema ograničenje za veličinu<![CDATA[<br/>]]>medijskih datoteka i dopisivanja.</string>
     <string name="Page6Message"><![CDATA[<b>Plus Messenger</b>]]> vam omogućuje pristup<![CDATA[<br/>]]>porukama s više uređaja.</string>
     <string name="Page7Message"><![CDATA[<b>Plus Messenger</b>]]> poruke su snažno enkriptirane<![CDATA[<br/>]]>i mogu se same uništiti.</string>
-    <string name="StartMessaging">Počni dopisivanje</string>
+  <string name="StartMessaging">Počni s dopisivanje</string>
     <!--plural-->
     <string name="Online_zero">%1$d osoba na mreži</string>
     <string name="Online_one">%1$d osoba na mreži</string>
@@ -584,6 +678,66 @@ http://telegram.org/update</string>
     <string name="Users_few">%1$d korisnika</string>
     <string name="Users_many">%1$d korisnika</string>
     <string name="Users_other">%1$d korisnika</string>
+  <string name="Stickers_one">%1$d naljepnica</string>
+  <string name="Stickers_two">%1$d naljepnice</string>
+  <string name="Stickers_few">%1$d naljepnice</string>
+  <string name="Stickers_many">%1$d naljepnice</string>
+  <string name="Stickers_other">%1$d naljepnice</string>
+  <!--forwarded messages-->
+  <string name="ForwardedMessage_zero">%1$d proslijeđenih poruka</string>
+  <string name="ForwardedMessage_one">Proslijeđena poruka</string>
+  <string name="ForwardedMessage_two">%1$d proslijeđene poruke</string>
+  <string name="ForwardedMessage_few">%1$d proslijeđene poruke</string>
+  <string name="ForwardedMessage_many">%1$d proslijeđenih poruka</string>
+  <string name="ForwardedMessage_other">%1$d proslijeđene poruke</string>
+  <string name="ForwardedFile_zero">%1$d proslijeđenih datoteka</string>
+  <string name="ForwardedFile_one">Proslijeđena datoteka</string>
+  <string name="ForwardedFile_two">%1$d proslijeđene datoteke</string>
+  <string name="ForwardedFile_few">%1$d proslijeđene datoteke</string>
+  <string name="ForwardedFile_many">%1$d proslijeđenih datoteka</string>
+  <string name="ForwardedFile_other">%1$d proslijeđene datoteke</string>
+  <string name="ForwardedPhoto_zero">%1$d proslijeđenih slika</string>
+  <string name="ForwardedPhoto_one">Proslijeđena slika</string>
+  <string name="ForwardedPhoto_two">%1$d proslijeđene slike</string>
+  <string name="ForwardedPhoto_few">%1$d proslijeđene slike</string>
+  <string name="ForwardedPhoto_many">%1$d proslijeđenih slika</string>
+  <string name="ForwardedPhoto_other">%1$d proslijeđene slike</string>
+  <string name="ForwardedVideo_zero">%1$d proslijeđenih videa</string>
+  <string name="ForwardedVideo_one">Proslijeđen video zapis</string>
+  <string name="ForwardedVideo_two">%1$d proslijeđena video zapisa</string>
+  <string name="ForwardedVideo_few">%1$d proslijeđena video zapisa</string>
+  <string name="ForwardedVideo_many">%1$d proslijeđenih video zapisa</string>
+  <string name="ForwardedVideo_other">%1$d proslijeđena video zapisa</string>
+  <string name="ForwardedAudio_zero">%1$d proslijeđenih zvučnih zapisa</string>
+  <string name="ForwardedAudio_one">Proslijeđen zvučni zapis</string>
+  <string name="ForwardedAudio_two">%1$d proslijeđena zvučna zapisa</string>
+  <string name="ForwardedAudio_few">%1$d proslijeđena zvučna zapisa</string>
+  <string name="ForwardedAudio_many">%1$d proslijeđenih zvučnih zapisa</string>
+  <string name="ForwardedAudio_other">%1$d proslijeđena zvučna zapisa</string>
+  <string name="ForwardedLocation_zero">%1$d proslijeđenih lokacija</string>
+  <string name="ForwardedLocation_one">Proslijeđena lokacija</string>
+  <string name="ForwardedLocation_two">%1$d proslijeđene lokacije</string>
+  <string name="ForwardedLocation_few">%1$d proslijeđene lokacije</string>
+  <string name="ForwardedLocation_many">%1$d proslijeđenih lokacija</string>
+  <string name="ForwardedLocation_other">%1$d proslijeđene lokacije</string>
+  <string name="ForwardedContact_zero">%1$d proslijeđenih kontakta</string>
+  <string name="ForwardedContact_one">Proslijeđen kontakt</string>
+  <string name="ForwardedContact_two">%1$d proslijeđena kontakta</string>
+  <string name="ForwardedContact_few">%1$d proslijeđena kontakta</string>
+  <string name="ForwardedContact_many">%1$d proslijeđenih kontakta</string>
+  <string name="ForwardedContact_other">%1$d proslijeđena kontakta</string>
+  <string name="ForwardedSticker_zero">%1$d proslijeđenih naljepnica</string>
+  <string name="ForwardedSticker_one">Proslijeđena naljepnica</string>
+  <string name="ForwardedSticker_two">%1$d proslijeđene naljepnice</string>
+  <string name="ForwardedSticker_few">%1$d proslijeđene naljepnice</string>
+  <string name="ForwardedSticker_many">%1$d proslijeđenih naljepnica</string>
+  <string name="ForwardedSticker_other">%1$d proslijeđene naljepnice</string>
+  <string name="AndOther_zero">i %1$d ostalih</string>
+  <string name="AndOther_one">i %1$d ostali</string>
+  <string name="AndOther_two">i %1$d ostala</string>
+  <string name="AndOther_few">i %1$d ostala</string>
+  <string name="AndOther_many">i %1$d ostalih</string>
+  <string name="AndOther_other">i %1$d ostala</string>
     <!--date formatters-->
     <string name="formatterMonthYear">MMM yyyy</string>
     <string name="formatterMonth">dd.MM.yyy</string>
@@ -595,6 +749,8 @@ http://telegram.org/update</string>
     <string name="formatterDay24H">HH:mm</string>
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s u %2$s</string>
+  <!--update text-->
+  <string name="updateBuild">594</string>
     <!--Telegram+-->
   <string name="TelegramForAndroid">Plus Messenger za Android</string>
   <string name="Theming">Izrada teme</string>
diff --git a/TMessagesProj/src/main/res/values-it/strings.xml b/TMessagesProj/src/main/res/values-it/strings.xml
index 9eb74d4cd..5193f360a 100644
--- a/TMessagesProj/src/main/res/values-it/strings.xml
+++ b/TMessagesProj/src/main/res/values-it/strings.xml
@@ -1,7 +1,4 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<!--https://www.transifex.com/projects/p/telegram/language/it/members/-->
-
+<?xml version='1.0' encoding='UTF-8'?>
 <resources>
     <string name="AppName">Plus Messenger</string>
     <string name="LanguageName">Italiano</string>
@@ -137,6 +134,7 @@
     <string name="OpenInBrowser">Apri nel Browser</string>
     <string name="CopyUrl">Copia URL</string>
     <string name="SendItems">Invia %1$s</string>
+    <string name="OpenUrlAlert">Aprire url %1$s?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s ha impostato il timer di autodistruzione a %2$s</string>
     <string name="MessageLifetimeChangedOutgoing">Hai impostato il timer di autodistruzione a %1$s</string>
@@ -549,6 +547,9 @@
     <string name="BotStatusCantRead">non ha accesso ai messaggi</string>
     <string name="BotInfoTitle">Cosa può fare questo bot?</string>
     <string name="BotStart">AVVIA</string>
+    <string name="BotUnblock">RIAVVIA</string>
+    <string name="BotStop">Arresta bot</string>
+    <string name="BotRestart">Riavvia bot</string>
     <!--button titles-->
     <string name="Next">Avanti</string>
     <string name="Back">Indietro</string>
@@ -837,11 +838,11 @@
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s alle %2$s</string>
     <!--update text-->
-    <string name="updateText">Plus Messenger per Android si è aggiornato. Nuovo nella versione 3.1.2:\n\n- Risultati recenti nella ricerca\n- Tieni premuto su uno sticker per visualizzare l\'anteprima prima di inviarlo</string>
-    <string name="updateBuild">591</string>
-    <!--Telegram+--><!--
+    <string name="updateText">Plus Messenger per Android si è aggiornato. Nuovo nella versione 3.1.3:\n\n- Nuova sezione \"Link condivisi\" nelle info della chat\n- Anteprima in-app delle foto dei link</string>
+    <string name="updateBuild">594</string>
+    <!--Telegram+-->
   <string name="updatePlusText">
-\n\nNew in 3.1.1.9:\n\n- Nuove bolle in stile iOS aggiunte (tgrazie a Edwin Macalopu)\n- Nuova MOD per mostrare l\'username assieme al nome del partecipante del gruppo\n- Mostra l\'amministratore del gruppo nella schermata del profilo del gruppo. L\'amministratore ha un\'icona particolare\n- Nuova MOD per centrare l\'avatar, il nome ed il telefono nel menu di navigazione\n- Nuova MOD per continuare a riprodurre gli audio nelle chat disabilitndo l\'azione del sensore di prossimità\n- Nuova MOD per cambiare il colore delle icone nella schermata profilo\n- Bug fixes\n\nEsplora e scarica temi per Plus Messenger: https://play.google.com/store/apps/details?id=es.rafalense.themes</string>-->
+\n\nNovità nella versione 3.1.3.0:\n\n- Nuova MOD per cambiare il colore predefinito della icona della linguetta degli emoji\n- Correzione di Bug</string>
     <string name="TelegramForAndroid">Plus Messenger per Android</string>
   <string name="Theming">Personalizzazione</string>
     <string name="colorHexInvalid">Codice del colore esadecimale non valido!</string>
@@ -886,7 +887,8 @@
     <string name="EditTextSize">Dimensione del testo immesso</string>
     <string name="EditTextBGColor">Colore di sfondo del campo di testo</string>
     <string name="EmojiViewBGColor">Colore di sfondo degli Emoji</string>
-    <string name="EmojiViewTabColor">Colore della linguetta degli Emoji</string>
+  <string name="EmojiViewTabColor">Colore della linguetta dell\'Emoji selezionato</string>
+  <string name="EmojiViewTabIconColor">Colore icona linguetta degli Emoji</string>
     <string name="OnlineColor">Colore dello stato Online</string>
     <string name="ChatMusic">Musica</string>
     <string name="SaveTheme">Salva il tema</string>
diff --git a/TMessagesProj/src/main/res/values-ko/strings.xml b/TMessagesProj/src/main/res/values-ko/strings.xml
index e9edd2a42..d2d981037 100644
--- a/TMessagesProj/src/main/res/values-ko/strings.xml
+++ b/TMessagesProj/src/main/res/values-ko/strings.xml
@@ -137,6 +137,7 @@
     <string name="OpenInBrowser">브라우져에서 열기</string>
     <string name="CopyUrl">URL 복사</string>
     <string name="SendItems">%1$s 전송</string>
+    <string name="OpenUrlAlert">%1$s 링크를 여시겠습니까?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s님이 자동삭제를 %2$s 후로 설정했습니다</string>
     <string name="MessageLifetimeChangedOutgoing">자동삭제를 %1$s 후로 설정했습니다</string>
@@ -549,6 +550,9 @@
     <string name="BotStatusCantRead">메시지 접근 권한이 없습니다</string>
     <string name="BotInfoTitle">이 봇은 무엇을 할 수 있나요?</string>
     <string name="BotStart">시작</string>
+    <string name="BotUnblock">재시작</string>
+    <string name="BotStop">봇 정지</string>
+    <string name="BotRestart">봇 재시작</string>
     <!--button titles-->
     <string name="Next">다음</string>
     <string name="Back">뒤로</string>
@@ -837,6 +841,6 @@
     <string name="formatterDay12H">a h:mm</string>
     <string name="formatDateAtTime">%1$s %2$s</string>
     <!--update text-->
-    <string name="updateText">텔레그램 안드로이드 버전이 업데이트 되었습니다. 새로운 버전은 3.1.2 입니다:\n\n- 최신 검색 결과\n- 스티커를 꾹 누를 경우 미리보기 기능</string>
-    <string name="updateBuild">591</string>
+    <string name="updateText">텔레그램 안드로이드 버전이 업데이트 되었습니다. 새로운 버전은 3.1.3 입니다:\n\n- 채팅방 정보내 \'공유된 링크\' 추가 \n- 사진 링크 프리뷰  기능</string>
+    <string name="updateBuild">594</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-nl/strings.xml b/TMessagesProj/src/main/res/values-nl/strings.xml
index 4e4b335a8..34ac519ed 100644
--- a/TMessagesProj/src/main/res/values-nl/strings.xml
+++ b/TMessagesProj/src/main/res/values-nl/strings.xml
@@ -1,7 +1,4 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<!--https://www.transifex.com/projects/p/telegram/language/nl/members/-->
-
+<?xml version='1.0' encoding='UTF-8'?>
 <resources>
     <string name="AppName">Plus Messenger</string>
     <string name="LanguageName">Nederlands</string>
@@ -137,6 +134,7 @@
     <string name="OpenInBrowser">Openen in browser</string>
     <string name="CopyUrl">Link kopiëren</string>
     <string name="SendItems">%1$s versturen</string>
+    <string name="OpenUrlAlert">URL %1$s openen?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s heeft de zelfvernietigingstimer ingesteld op %2$s</string>
     <string name="MessageLifetimeChangedOutgoing">Je hebt de zelfvernietigingstimer ingesteld op %1$s</string>
@@ -170,7 +168,7 @@
     <string name="NotificationGroupKickYou">%1$s heeft je verwijderd uit de groep %2$s</string>
     <string name="NotificationGroupLeftMember">%1$s heeft de groep %2$s verlaten</string>
     <string name="NotificationContactJoined">%1$s heeft nu Telegram!</string>
-    <string name="NotificationUnrecognizedDevice">%1$s,\nEr is op je account ingelogd vanaf een nieuw apparaat op %2$s\n\nApparaat: %3$s\nLocatie: %4$s\n\nAls jij dit niet was, kun je die sessie beëindigen via Instellingen - Privacy en veiligheid - Sessies.\n\nAls je dat denkt dat iemand anders zonder jouw toestemming is ingelogd kun je twee-staps-verificatie activeren via instellingen - privacy en veiligheid .\n\nBedankt,\nHet Telegram-team</string>
+    <string name="NotificationUnrecognizedDevice">%1$s,\nEr is op je account ingelogd vanaf een nieuw apparaat op %2$s\n\nApparaat: %3$s\nLocatie: %4$s\n\nAls jij dit niet was, kun je die sessie beëindigen via Instellingen - Privacy en veiligheid - Sessies.\n\nAls je dat denkt dat iemand anders zonder jouw toestemming is ingelogd kun je twee-staps-verificatie activeren via instellingen - privacy en veiligheid.\n\nBedankt,\nHet Telegram-team</string>
     <string name="NotificationContactNewPhoto">%1$s heeft zijn/haar profielfoto gewijzigd</string>
     <string name="NotificationInvitedToGroupByLink">%1$s neemt deel aan de groep %2$s via uitnodigingslink</string>
     <string name="Reply">Antwoord</string>
@@ -366,7 +364,7 @@
     <string name="SessionsTitle">Actieve sessies</string>
     <string name="CurrentSession">Huidige sessie</string>
     <string name="NoOtherSessions">Geen andere actieve sessies</string>
-    <string name="NoOtherSessionsInfo">Je kunt in Telegram inloggen vanaf andere apparaten (mobiel,tablet,desktop) met hetzelfde telefoonnummer. Al je data zal direct worden gesynchroniseerd.</string>
+    <string name="NoOtherSessionsInfo">Je kunt in Telegram inloggen vanaf andere apparaten (mobiel, tablet, desktop) met hetzelfde telefoonnummer. Al je data zal direct worden gesynchroniseerd.</string>
     <string name="OtherSessions">Actieve sessies</string>
     <string name="SessionsInfo">Beheer je sessies van andere apparaten.</string>
     <string name="TerminateSessionInfo">Tik op een sessie om deze te beëindigen.</string>
@@ -549,6 +547,9 @@
     <string name="BotStatusCantRead">geen toegang tot berichten</string>
     <string name="BotInfoTitle">Wat kan deze bot?</string>
     <string name="BotStart">BEGIN</string>
+    <string name="BotUnblock">HERSTART</string>
+    <string name="BotStop">Bot stoppen</string>
+    <string name="BotRestart">Bot herstarten</string>
     <!--button titles-->
     <string name="Next">Volgende</string>
     <string name="Back">Vorige</string>
@@ -837,8 +838,8 @@
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s om %2$s</string>
     <!--update text-->
-    <string name="updateText">Plus Messenger voor Android is bijgewerkt. Nieuw in versie 3.1.2:\n\n- Recente zoekresultaten\n- Stickers aantikken en vasthouden om een voorbeeld weer te geven voor het versturen.</string>
-    <string name="updateBuild">591</string>
+    <string name="updateText">Plus Messenger voor Android is bijgewerkt. Nieuw in versie 3.1.3:\n\n- Nieuw \'Gedeelde links\'-gedeelte in chatinformatie\n- In-app voorvertoning voor links naar foto\'s</string>
+    <string name="updateBuild">594</string>
     <!--Telegram+--><!--
   <string name="updatePlusText"></string>-->
     <string name="TelegramForAndroid">Plus Messenger voor Android</string>
@@ -964,4 +965,7 @@
   <string name="SummaryColor">Samenvatting/Ondertitel kleur</string>
   <string name="MediaColor">\'Foto/Sticker\' tekst kleur</string>
   <string name="ThemesAppMsg">Wilt u thema\'s bekijken van andere Plus Messenger gebruikers?</string>
+  <string name="UseDeviceFont">Gebruik het apparaat lettertype</string>
+  <string name="AppWillRestart">Plus Messenger zal nu herstarten</string>
+  <string name="GroupIconColor">Kleur van het icoontje</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-pl/strings.xml b/TMessagesProj/src/main/res/values-pl/strings.xml
index 0d924992d..ab8b8dc5d 100644
--- a/TMessagesProj/src/main/res/values-pl/strings.xml
+++ b/TMessagesProj/src/main/res/values-pl/strings.xml
@@ -56,12 +56,18 @@
     <string name="WillUnmuteIn">W %1$s</string>
     <string name="MuteDisable">Wyłącz</string>
   <string name="Hashtags">Hashtagi</string>
+  <string name="Recent">OSTATNIE</string>
     <!--broadcasts-->
     <string name="NewBroadcastList">Nowe ogłoszenie</string>
     <string name="EnterListName">Wprowadź nazwę listy</string>
     <string name="YouCreatedBroadcastList">Utworzyłeś listę transmisji</string>
     <string name="AddRecipient">Dodaj odbiorcę</string>
     <string name="KickFromBroadcast">Usuń z listy transmisji</string>
+  <!--audio view-->
+  <string name="NoAudio">Dodaj utwory do biblioteki, aby zobaczyć je tutaj.</string>
+  <string name="AttachMusic">Muzyka</string>
+  <string name="AudioUnknownArtist">Nieznany artysta</string>
+  <string name="AudioUnknownTitle">Nieznany tytuł</string>
     <!--documents view-->
     <string name="SelectFile">Wybierz plik</string>
     <string name="FreeOfTotal">Wolne %1$s z %2$s</string>
@@ -96,6 +102,7 @@
     <string name="ChatLocation">Lokalizacja</string>
     <string name="ChatVideo">Wideo</string>
     <string name="ChatDocument">Plik</string>
+  <string name="ChatCamera">Aparat</string>
     <string name="NoMessages">Brak wiadomości...</string>
     <string name="ForwardedMessage">Przekazana wiadomość</string>
     <string name="From">Od</string>
@@ -117,11 +124,16 @@
     <string name="DeleteThisChat">Usuń  czat</string>
     <string name="SlideToCancel">Przeciągnij aby anulować</string>
     <string name="SaveToDownloads">Zapisz do pobranych</string>
+  <string name="SaveToMusic">Zapisz do muzyki</string>
     <string name="ShareFile">Udostępnij</string>
     <string name="ApplyLocalizationFile">Zastosuj plik lokalizacyjny</string>
     <string name="UnsupportedAttachment">Nieobsługiwany załącznik</string>
     <string name="SetTimer">Ustaw zegar autodestrukcji</string>
     <string name="ServiceNotifications">Powiadomienia serwisowe</string>
+  <string name="GettingLinkInfo">Zbieram informację na temat linku...</string>
+  <string name="OpenInBrowser">Otwórz w przeglądarce</string>
+  <string name="CopyUrl">Kopiuj link</string>
+  <string name="SendItems">Wyślij %1$s</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s ustawił/a licznik autodestrukcji na %2$s</string>
     <string name="MessageLifetimeChangedOutgoing">Ustawiłeś licznik autodestrukcji na %1$s</string>
@@ -157,6 +169,7 @@
     <string name="NotificationContactJoined">%1$s dołączył do Telegram-a!</string>
     <string name="NotificationUnrecognizedDevice">%1$s,\nZarejestrowalismy logowanie do Twojego konta z nowego urządzenia%2$s\n\nUrządzenie: %3$s\nLokalizacja: %4$s\n\nJeżeli to nie ty, idź do Ustawienia - Prywatność i Bezpieczeństwo - Zakończ wszystkie inne sesje.\n\nPozdrawiamy,\nZespół Telegram</string>
     <string name="NotificationContactNewPhoto">%1$s zaktualizował/a swoje zdjęcie profilowe</string>
+  <string name="NotificationInvitedToGroupByLink">%1$s wrócił/a do grupy %2$s dzięki zaproszeniu</string>
     <string name="Reply">Odpowiedz</string>
     <string name="ReplyToGroup">Odpowiedz %1$s</string>
     <string name="ReplyToUser">Odpowiedz %1$s</string>
@@ -182,6 +195,19 @@
     <string name="EnterGroupNamePlaceholder">Wpisz nazwę grupy</string>
     <string name="GroupName">Nazwa grupy</string>
     <string name="MembersCount">%1$d/%2$d użytkownicy </string>
+  <string name="JoinToGroup">Czy chcesz dołączyć do grupy \'%1$s\'?</string>
+  <string name="JoinToGroupErrorFull">Niestety, ta grupa jest już pełna.</string>
+  <string name="JoinToGroupErrorNotExist">Niestety, ta grupa nie istnieje.</string>
+  <string name="LinkCopied">Link zostal skopiowany do schowka</string>
+  <string name="InviteToGroupByLink">Zaproś do grupy przez wysłanie linku</string>
+  <string name="InviteLink">Link z zaproszeniem</string>
+  <string name="RevokeAlert">Czy jesteś pewien, że chcesz cofnąć link? Jeśli to zrobisz nikt nie będzie mógł dołączyć do grupy używając go.</string>
+  <string name="RevokeAlertNewLink">Poprzedni link jest nieaktywny. Nowy został już wygenerowany. </string>
+  <string name="RevokeButton">Odwolaj</string>
+  <string name="RevokeLink">Cofnij link</string>
+  <string name="CopyLink">Kopiuj link</string>
+  <string name="ShareLink">Udostępnij link</string>
+  <string name="LinkInfo">Każdy użytkownik komunikatora Telegram będzie mógł dołączyć do Twojej grupy przez ten link</string>
     <!--group info view-->
     <string name="SharedMedia">Współdzielone pliki</string>
     <string name="SETTINGS">Ustawienia</string>
@@ -224,6 +250,20 @@
     <string name="UsernameAvailable">%1$s jest dostępny. </string>
     <string name="UsernameEmpty">Nic</string>
     <string name="ErrorOccurred">Wystąpił błąd.</string>
+  <!--stickers view-->
+  <string name="Stickers">Naklejki</string>
+  <string name="StickersInfo">Artyści mogą dodawać swoje naklejki używając naszego  @stickers bot.\n\n Użytkownicy mogą dodawać je naciskając na nie i wybierając \"dodaj do naklejek\". </string>
+  <string name="AddStickers">Dodaj naklejki</string>
+  <string name="AddToStickers">Dodaj do naklejek</string>
+  <string name="AddStickersNotFound">Naklejki nie znalezione</string>
+  <string name="StickersRemoved">Naklejki usunięte</string>
+  <string name="AddStickersInstalled">Nowe naklejki zostały dodane</string>
+  <string name="StickersHide">Ukryj</string>
+  <string name="StickersShow">Pokaż</string>
+  <string name="StickersShare">Udostępnij</string>
+  <string name="StickersCopy">Kopiuj link</string>
+  <string name="StickersRemove">Usuń</string>
+  <string name="NoStickers">Nie ma jeszcze naklejek</string>
     <!--settings view-->
     <string name="ResetNotificationsText">Przywróć wszystkie domyślne powiadomienia</string>
     <string name="TextSize">Rozmiar czcionki w wiadomościach</string>
@@ -251,6 +291,7 @@
     <string name="NoSound">Bez dźwięków</string>
     <string name="Default">Domyślny</string>
     <string name="Support">Wsparcie</string>
+  <string name="OnlyIfSilent">Tylko w trybie cichym</string>
     <string name="ChatBackground">Tło czatu</string>
     <string name="MessagesSettings">Wiadomości</string>
     <string name="SendByEnter">Wyślij przez Enter</string>
@@ -310,15 +351,34 @@
   <string name="LedDisabled">Wyłączony</string>
   <string name="RepeatDisabled">Wyłącz</string>
   <string name="InChatSound">Dźwięki czatu</string>
+  <string name="SoundDefault">Domyślny</string>
+  <string name="VibrationDefault">Domyślne</string>
+  <string name="SmartNotifications">Inteligentne powiadomienia</string>
+  <string name="SmartNotificationsDisabled">Wyłączone</string>
+  <string name="SmartNotificationsInfo">Dźwięk w na maksa %1$s podczas %2$s</string>
+  <string name="SmartNotificationsSoundAtMost">Dźwięk na maksa</string>
+  <string name="SmartNotificationsTimes">Czasy</string>
+  <string name="SmartNotificationsWithin">podczas</string>
+  <string name="SmartNotificationsMinutes">minuty</string>
   <!--sessions view-->
+  <string name="SessionsTitle">Aktywne sesje</string>
+  <string name="CurrentSession">Obecna sejsa</string>
+  <string name="NoOtherSessions">Brak innych aktywnych sesji</string>
+  <string name="NoOtherSessionsInfo">Możesz korzystać z Telegram z innych telefonów, tabletów, komputerów, laptopów, używając tego samego numeru telefonu. Wszystkie Twoje dane będą natychmiast synchronizowane.</string>
+  <string name="OtherSessions">Aktywne sesje</string>
+  <string name="SessionsInfo">Kontroluj swoje sesje na innych uradzeniach </string>
+  <string name="TerminateSessionInfo">Naciśnij na sesje, aby ją zakończyć.</string>
+  <string name="TerminateSessionQuestion">Czy chcesz zakończyć tą sesję?</string>
+  <string name="UnofficialApp">nieoficjalna aplikacja</string>
     <!--passcode view-->
-    <string name="Passcode">Kod dostępu</string>
+  <string name="Passcode">Kod blokady</string>
     <string name="ChangePasscode">Zmień kod dostępu</string>
     <string name="ChangePasscodeInfo">Gdy przypiszesz dodatkowy pin, na stronach czatów pojawi się ikona blokady. Kliknij w nią, aby zablokować lub odblokować aplikacje Telegram.\n\nUwaga: jeżeli zapomnisz swojego pinu, będzies musiał usunąć i ponownie zainstalować aplikację. Wszystkie sekretne chaty zostaną utracone.</string>
     <string name="ChangePasscodeAlert">Zobaczysz teraz ikonę blokady na stronach czatów. Kliknij w nią, aby zablokować aplikację Telegram swoim nowym pinem.</string>
     <string name="PasscodePIN">PIN</string>
     <string name="PasscodePassword">Hasło</string>
     <string name="EnterCurrentPasscode">Podaj swój obecny kod dostępu</string>
+  <string name="EnterNewFirstPasscode">Wpisz hasło</string>
     <string name="EnterNewPasscode">Podaj swój nowy kod dostępu</string>
     <string name="EnterYourPasscode">Podaj twój kod dostępu</string>
     <string name="ReEnterYourPasscode">Podaj ponownie nowy kod dostępu</string>
@@ -330,24 +390,31 @@
     <string name="AutoLockDisabled">Wyłączone</string>
     <!--media view-->
     <string name="NoMedia">Udostępnij zdjęcia i video na tym czacie z opcją dostępu do nich na dowolnych urządzeniach.</string>
-    <string name="DocumentsTitle">Pliki</string>
+  <string name="DocumentsTitle">Udostępnione pliki</string>
     <string name="SharedMediaTitle">Współdzielone pliki</string>
+  <string name="LinksTitle">Udostępnione linki</string>
     <string name="NoSharedFiles">Udostępnij pliki i dokumenty na tym czacie z opcją dostępu do nich na dowolnych urządzeniach</string>
+  <string name="NoSharedLinks">Udostępnij linki na tym czacie z opcją dostępu do nich na dowolnych urządzeniach</string>
     <!--map view-->
     <string name="Map">Mapa</string>
     <string name="Satellite">Satelitarna</string>
     <string name="Hybrid">Hybrydowa</string>
     <string name="MetersAway">m od</string>
     <string name="KMetersAway">km od</string>
-    <string name="SendLocation">Wyślij lokalizację</string>
-    <string name="ShareLocation">Udostępnij lokalizację</string>
+  <string name="SendLocation">Wyślij swoja obecną lokalizację </string>
+  <string name="SendSelectedLocation">Wyślij wybrana lokalizację</string>
+  <string name="ShareLocation">Lokalizacja</string>
+  <string name="AccurateTo">Z dokładnością do %1$s</string>
+  <string name="NearbyPlaces">LUB WYBIERZ MIEJSCE</string>
     <!--photo gallery view-->
     <string name="ShowAllMedia">Pokaż wszystkie media</string>
     <string name="SaveToGallery">Zapisz do galerii</string>
     <string name="Of">%1$d z %2$d</string>
     <string name="Gallery">Galeria</string>
     <string name="AllPhotos">Wszystkie zdjęcia</string>
+  <string name="AllVideo">Wszystkie wideo</string>
     <string name="NoPhotos">Brak zdjęć</string>
+  <string name="NoVideo">Nie masz jeszcze żadnego wideo</string>
     <string name="PleaseDownload">Najpierw pobierz dane </string>
     <string name="NoRecentPhotos">Brak zdjęć ostatnio</string>
     <string name="NoRecentGIFs">Brak ostatnich GIFów</string>
@@ -377,7 +444,61 @@
     <string name="DiscardChanges">Czy chcesz porzucić zmiany? </string>
   <string name="ClearSearch">Czy na pewno chcesz wyczyść historię wyszukiwania?</string>
   <string name="ClearButton">Czysto</string>
+  <string name="PickerPhotos">Zdjęcia</string>
+  <string name="PickerVideo">Wideo</string>
+  <string name="AddCaption">Podaj podpis</string>
+  <string name="PhotoCaption">Opis zjęcia</string>
+  <string name="VideoCaption">Opis filmu</string>
   <!--password view-->
+  <string name="TwoStepVerification">Dwuetapowa weryfikacja</string>
+  <string name="SetAdditionalPassword">Ustaw dodatkowe hasło</string>
+  <string name="SetAdditionalPasswordInfo">Możesz ustawić sobie hasło, które będzie wymagane przy logowaniu na nowe urządzenie. Hasło otrzymasz smsem.</string>
+  <string name="YourPassword">Twoje hasło</string>
+  <string name="PleaseEnterCurrentPassword">Podaj swoje hasło</string>
+  <string name="PleaseEnterFirstPassword">Wpisz hasło</string>
+  <string name="PleaseEnterPassword">Podaj swoje nowe hasło</string>
+  <string name="PleaseReEnterPassword">Wpisz ponownie swoje nowe hasło</string>
+  <string name="RecoveryEmail">Zapasowy E-mail</string>
+  <string name="YourEmail">Twój E-mail</string>
+  <string name="YourEmailInfo">Proszę podaj swój prawdziwy adres e-mail. To jedyna droga do odzyskania zapominanego hasła.</string>
+  <string name="YourEmailSkip">Pomin</string>
+  <string name="YourEmailSkipWarning">Uwaga</string>
+  <string name="YourEmailSkipWarningText">Nie, poważnie.\n\n Jeśli zapomnisz hasła to stracisz dostęp do swojego konta Telegram. Nie będzie możliwości jego odzyskania.</string>
+  <string name="YourEmailAlmostThere">Prawie na miejscu!</string>
+  <string name="YourEmailAlmostThereText">Proszę sprawdź swój e-mail (nie zapomni o folderze spam), aby zakończyć dwuetapowa weryfikację.</string>
+  <string name="YourPasswordSuccess">Sukces! </string>
+  <string name="YourPasswordSuccessText">Twoje hasło dla dwuetapowej weryfikacji jest teraz aktywne.</string>
+  <string name="ChangePassword">Zmień hasło</string>
+  <string name="TurnPasswordOff">Wyłącz hasło</string>
+  <string name="SetRecoveryEmail">Ustaw zapasowy E-mail</string>
+  <string name="ChangeRecoveryEmail">Zmień zapasowy E-mail</string>
+  <string name="TurnPasswordOffQuestion">Czy jesteś pewnien, że chcesz wyłączyc hasło?</string>
+  <string name="PasswordHint">Wskazówka do hasła</string>
+  <string name="PasswordHintText">Prosze stworz wskazówkę do Twojego hasła</string>
+  <string name="PasswordDoNotMatch">Hasla się nie zgadzają</string>
+  <string name="AbortPassword">Przerwij tworzenie dwuetapowej weryfikacji </string>
+  <string name="EmailPasswordConfirmText">Prosze wykonaj te kroki w celu utworzenia dwuetapowej weryfikacji:\n\n1.  Spawdź swoj email (nie zapomnij o folderze spam)n%1$s\n\n2. Wejdź w link weryfikacyjny. </string>
+  <string name="PasswordAsHintError">Podpowiedź musi byc inna niż Twoje hasło</string>
+  <string name="PasswordEmailInvalid">Niepoprawny adres e-mail</string>
+  <string name="RestorePasswordNoEmailTitle">Przepraszamy</string>
+  <string name="RestorePasswordNoEmailText">Jeśli nie dodasz adresu email podczas ustawiania hasła to tracisz opcję, aby je odzyskać, gdy je zapomnisz </string>
+  <string name="RestoreEmailSent">Wysłaliśmy kod na adres email, który nam podałeś:\n\n%1$s</string>
+  <string name="RestoreEmailSentInfo">Proszę sprawdź swój email i wpisz tutaj 6-cio cyfrowy kod, który od nas otrzymałeś.</string>
+  <string name="RestoreEmailTrouble">Masz problem z dostępem do swojego emaila %1$s?</string>
+  <string name="RestoreEmailTroubleText">Jeśli nie możesz uzyskać dostępu do emaila, możesz użyć hasła lub zresetować swoje konto.</string>
+  <string name="ResetMyAccount">RESETUJ MOJE KONTO</string>
+  <string name="ResetMyAccountText">Stracisz wszystkie swoje chaty, wiadomości, także te z plikami multimedialnymi, które udostępniłeś, jeśli potwierdzisz resetowanie swojego konta.</string>
+  <string name="ResetMyAccountWarning">Ostrzeżenie</string>
+  <string name="ResetMyAccountWarningText">Tego nie da się cofnąć\n\nJeśli zresetujesz swoje konto to wszystkie twoje wiadomości i czaty zostaną usunięte. </string>
+  <string name="ResetMyAccountWarningReset">Zresetuj</string>
+  <string name="LoginPassword">Hasło</string>
+  <string name="LoginPasswordText">Masz włączoną Dwu-etapową Weryfikację, Twoje konto jest chronione dodatkowym hasłem. </string>
+  <string name="ForgotPassword">Zapominałeś hasła?</string>
+  <string name="PasswordRecovery">Odzyskiwanie hasła</string>
+  <string name="PasswordCode">Kod</string>
+  <string name="PasswordReset">Hasło wylaczone</string>
+  <string name="EnabledPasswordText">Masz włączoną Dwu-etapową Weryfikację.\nBędziesz potrzebował hasła, aby zalogować się na Twoje konto Telegram.</string>
+  <string name="PendingEmailText">Twój adres email %1$s nie został jeszcze aktywowany i czeka na potwierdzenie. </string>
     <!--privacy settings-->
     <string name="PrivacySettings">Prywatność i bezpieczeństwo</string>
     <string name="PrivacyTitle">Prywatność</string>
@@ -416,12 +537,23 @@
     <string name="EditedVideo">Edytowane wideo</string>
     <string name="SendingVideo">Wysyłanie wideo...</string>
     <string name="CompressVideo">Kompresuj Wideo</string>
+  <!--bot-->
+  <string name="Bot">bot</string>
+  <string name="BotShare">Udostępni</string>
+  <string name="BotInvite">Dodaj do grupy</string>
+  <string name="BotSettings">Ustawienia </string>
+  <string name="BotHelp">Pomoc</string>
+  <string name="BotStatusRead">ma dostęp do wiadomości</string>
+  <string name="BotStatusCantRead">nie ma dostępu do wiadomości</string>
+  <string name="BotInfoTitle">Co ten bot może robić?</string>
+  <string name="BotStart">START</string>
     <!--button titles-->
     <string name="Next">Następne</string>
     <string name="Back">Wróć</string>
     <string name="Done">Gotowe</string>
     <string name="Open">Otwórz</string>
     <string name="Cancel">Anuluj</string>
+  <string name="Close">Zamknij</string>
     <string name="Add">Dodaj</string>
     <string name="Edit">Edycja</string>
     <string name="Send">Wyślij</string>
@@ -437,6 +569,8 @@
     <string name="OK">OK</string>
     <string name="Crop">Kadruj</string>
     <!--messages-->
+  <string name="ActionInviteYou">Dołączyłeś do grupy przez link z zaproszeniem</string>
+  <string name="ActionInviteUser">un1 dołączył do grupy przez link z zaproszeniem</string>
     <string name="ActionKickUser">un1 usunięty/a przez un2</string>
     <string name="ActionLeftUser">un1 opuścił/a grupę</string>
     <string name="ActionAddUser">un1 dodał/a un2</string>
@@ -454,7 +588,8 @@
     <string name="ActionKickUserYou">un1 usunął cię</string>
     <string name="ActionAddUserYou">un1 dodał cię</string>
     <string name="ActionAddUserSelf">un1 wrócił/a do grupy</string>
-    <string name="UnsuppotedMedia">Ta wiadomość nie jest wspierana przez twoją wersję Telegram. Aktualizuj aplikację na: http://telegram.org/update</string>
+  <string name="ActionAddUserSelfYou">Wróciłeś do grupy</string>
+  <string name="UnsuppotedMedia">Ta wiadomość nie jest obsługiwana przez Twoją wersję Telegram.  Uaktualni ją aby zobaczyć: https://telegram.org/update</string>
     <string name="AttachPhoto">Zdjęcie</string>
     <string name="AttachVideo">Wideo</string>
     <string name="AttachLocation">Lokalizacja</string>
@@ -469,6 +604,7 @@
     <string name="InvalidPhoneNumber">Błędny numer telefonu</string>
     <string name="CodeExpired">Kod przedawniony, proszę zalogować się ponownie</string>
     <string name="FloodWait">Zbyt wiele prób, proszę spróbować ponownie później</string>
+  <string name="FloodWaitTime">Zbyt dużo prób, proszę sprawdź ponownie w %1$s</string>
     <string name="InvalidCode">Błędny kod</string>
     <string name="InvalidFirstName">Nieprawidłowe imię</string>
     <string name="InvalidLastName">Nieprawidłowe nazwisko</string>
@@ -478,7 +614,10 @@
     <string name="NoHandleAppInstalled">Nie posiadasz aplikacji, aby otworzyć ten typ pliku\'%1$s\'. Zainstaluj jedną z nich, aby otworzyć ten plik</string>
     <string name="InviteUser">Ten kontakt nie używa Telegramu, wysłać mu zaproszenie ?</string>
     <string name="AreYouSure">Na pewno ?</string>
-    <string name="AddToTheGroup">Dadać %1$s do grupy?\n\nLIczba ostanich wiadomości do przodu:</string>
+  <string name="AddToTheGroupTitle">Dodać %1$s to grupy %2$s?</string>
+  <string name="AddToTheGroupForwardCount">Liczba wiadomości do przeczytania:</string>
+  <string name="AddToTheGroup">Dodać %1$s do grupy?</string>
+  <string name="UserAlreadyInGroup">Ten użytkownik jest już w tej grupie</string>
     <string name="ForwardMessagesTo">Przekazać wiadomości do %1$s?</string>
     <string name="SendMessagesTo">Wysłać wiadomość do %1$s?</string>
     <string name="AreYouSureLogout">Czy na pewno chcesz się wylogować?\n\nZauważ że można bezproblemowo używać Telegram wszystkich urządzeń na raz.\nPamiętaj, wylogowanie się zniszczy wszystkie twoje tajne rozmowy.</string>
@@ -496,6 +635,8 @@
     <string name="SendMessagesToGroup">Wysłać wiadomość do %1$s?</string>
     <string name="ForwardMessagesToGroup">Przekazać wiadomości do %1$s?</string>
     <string name="FeatureUnavailable">Ta usługa nie jest aktualnie dostępna w Twoim kraju.</string>
+  <string name="NoUsernameFound">Nie ma konta Telegram z tą nazwą użytkownika </string>
+  <string name="BotCantJoinGroups">Ten bot nie może dołączyć do grup.</string>
     <!--Intro view-->
     <string name="Page1Title">Plus Messenger</string>
     <string name="Page2Title">Szybki</string>
@@ -603,6 +744,30 @@
     <string name="Users_few">%1$d użytkowników</string>
     <string name="Users_many">%1$d użytkowników</string>
     <string name="Users_other">%1$d użytkowników</string>
+  <string name="Times_zero">%1$d razy</string>
+  <string name="Times_one">%1$d raz</string>
+  <string name="Times_two">%1$d razy</string>
+  <string name="Times_few">%1$d razy</string>
+  <string name="Times_many">%1$d razy</string>
+  <string name="Times_other">%1$d razy</string>
+  <string name="Meters_zero">%1$d metrów</string>
+  <string name="Meters_one">%1$d metr</string>
+  <string name="Meters_two">%1$d metrów</string>
+  <string name="Meters_few">%1$d metrów</string>
+  <string name="Meters_many">%1$d metrów</string>
+  <string name="Meters_other">%1$d metrów</string>
+  <string name="Stickers_zero">%1$d naklejek</string>
+  <string name="Stickers_one">%1$d naklejka</string>
+  <string name="Stickers_two">%1$d naklejek</string>
+  <string name="Stickers_few">%1$d naklejek</string>
+  <string name="Stickers_many">%1$d naklejek</string>
+  <string name="Stickers_other">%1$d naklejek</string>
+  <string name="Photos_zero">%1$d zdjęcia</string>
+  <string name="Photos_one">%1$d zdjęcie</string>
+  <string name="Photos_two">%1$d zdjęcia</string>
+  <string name="Photos_few">%1$d zdjęcia</string>
+  <string name="Photos_many">%1$d zdjęcia</string>
+  <string name="Photos_other">%1$d zdjęcia</string>
   <!--forwarded messages-->
   <string name="ForwardedMessage_zero">%1$d przekazano wiadomość</string>
   <string name="ForwardedMessage_one">Przekazane wiadomość </string>
@@ -773,9 +938,39 @@
   <string name="KeepOriginalFilename">Zachowaj oryginalną nazwę pilku </string>
   <string name="KeepOriginalFilenameHelp">Z uwagi na liczbę pliki będą zapisane w formacie nazwa_data </string>
   <string name="AvatarSize">Rozmiar zdjęcia kontaktu </string>
-  <string name="AvatarAlignTop">Przesuń zdjęcie na wierzch </string>
-  <string name="AvatarMarginLeft">Zdjęcie lewego marginesu </string>
+  <string name="AvatarAlignTop">Wyrównaj do góry zdjęcie kontaktu</string>
+  <string name="AvatarMarginLeft">Zdjęcie marginesu</string>
   <string name="GroupNameColor">Kolor nazwy grupy</string>
   <string name="GroupNameSize">Rozmiar nazwy grupy</string>
   <string name="UnknownNameColor">Nazwa osoby z poza kontaktów (nieznany numer)</string>
+  <string name="HideBackgroundShadow">Ukryj niestandardowy cień</string>
+  <string name="SetSolidBGColor">Ustaw kolor tła</string>
+  <string name="SolidBGColor">Kolor tła</string>
+  <string name="EmojiPopupSize">Wielkość okienka z emotikonami </string>
+  <string name="ForwardRightNameColor">Kolor nazwy użytkownika z wiadomością</string>
+  <string name="ForwardLeftNameColor">Kolor nazwy użytkownika z wiadomością</string>
+  <string name="IconsColor">Kolor ikon</string>
+  <string name="SettingsScreen">Okno ustawień/motywów</string>
+  <string name="BackgroundColor">Kolor tła</string>
+  <string name="ShadowColor">Kolor cienia</string>
+  <string name="SectionColor">Kolor sekcji</string>
+  <string name="TitleColor">Kolor tytułu</string>
+  <string name="SummaryColor">Kolor podsumowania/napisów</string>
+  <string name="MediaColor">Kolor tekstu zdjęcia/naklejki</string>
+  <string name="ThemesAppMsg">Czy chcesz zobaczyć motywy tworzone przez użytkowników Plus Messenger?</string>
+  <string name="UseDeviceFont">Użyj czcionki urządzenia </string>
+  <string name="AppWillRestart">Plus Messenger zostanie uruchomiony ponownie</string>
+  <string name="GroupIconColor">Kolor ikony grupy</string>
+  <string name="SharedContactNameColor">Kolor nazwy udostępnionego kontaktu</string>
+  <string name="AttachBGColor">Załącz kolor tła</string>
+  <string name="AttachTextColor">Załącz kolor tekstu</string>
+  <string name="ShowContactAvatar">Pokaż zdjęcie kontaktu w ekranie rozmowy</string>
+  <string name="ShowOwnAvatar">Pokaż własne zdjęcie w ekranie rozmowy</string>
+  <string name="ShowOwnAvatarGroup">Pokaż własne zdjęcie w grupowym ekranie rozmowy</string>
+  <string name="OwnAvatarAlignTop">Przesuń własne zdjęcie na wierzch </string>
+  <string name="DialogColor">Kolor tytułu/przycisku okna</string>
+  <string name="ShowUsername">Pokaż nazwę użytkownika prze nazwie </string>
+  <string name="DisableAudioStop">Nie przestawaj odtwarzać audio</string>
+  <string name="ListDividerColor">Kolor listy podziałki</string>
+  <string name="CenterAvatar">Główne zdjęcie, nazwa i telefon</string>
 </resources>
diff --git a/TMessagesProj/src/main/res/values-pt-rBR/strings.xml b/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
index fed0cf0da..1b97e56fc 100644
--- a/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
+++ b/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
@@ -1,7 +1,4 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<!--https://www.transifex.com/projects/p/telegram/language/pt_BR/members/-->
-
+<?xml version='1.0' encoding='UTF-8'?>
 <resources>
     <string name="AppName">Plus Messenger</string>
     <string name="LanguageName">Português (Brasil)</string>
@@ -46,8 +43,8 @@
     <string name="EncryptedChatStartedIncoming">Você entrou no chat secreto</string>
     <string name="ClearHistory">Limpar histórico</string>
     <string name="DeleteChat">Apagar e sair</string>
-    <string name="DeleteChatUser">Excluir conversa</string>
-    <string name="HiddenName">Excluir Conta</string>
+    <string name="DeleteChatUser">Apagar conversa</string>
+    <string name="HiddenName">Conta Excluída</string>
     <string name="SelectChat">Selecione um Chat</string>
     <string name="PhotoTip">Toque e segure para ver</string>
     <string name="CompatibilityChat">%1$s está usando uma versão mais antiga do Telegram, por isso fotos secretas serão mostradas em modo de compatibilidade.\n\nAssim que %2$s atualizar o Telegram, fotos com timers de 1 minuto ou menos passarão a funcionar no modo ‘Toque e segure para ver’, e você será notificado caso a outra pessoa salve a tela.</string>
@@ -137,6 +134,7 @@
     <string name="OpenInBrowser">Abrir no Navegador</string>
     <string name="CopyUrl">Copiar URL</string>
     <string name="SendItems">Enviar %1$s</string>
+    <string name="OpenUrlAlert">Abrir URL em %1$s?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s estabeleceu o tempo de autodestruição para %2$s </string>
     <string name="MessageLifetimeChangedOutgoing">Você estabeleceu o tempo de autodestruição para %1$s</string>
@@ -549,6 +547,9 @@
     <string name="BotStatusCantRead">não tem acesso as mensagens</string>
     <string name="BotInfoTitle">O que esse bot pode fazer?</string>
     <string name="BotStart">COMEÇAR</string>
+    <string name="BotUnblock">REINICIAR</string>
+    <string name="BotStop">Parar bot</string>
+    <string name="BotRestart">Reiniciar bot</string>
     <!--button titles-->
     <string name="Next">Próximo</string>
     <string name="Back">Voltar</string>
@@ -837,27 +838,27 @@
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s às %2$s</string>
     <!--update text-->
-    <string name="updateText">Plus Messenger para Android acaba de ser atualizado. Novo na versão 3.1.2\n\n- Resultados das buscas recentes\n- Pressione e mantenha em um sticker para pré-visualizar antes do envio</string>
-    <string name="updateBuild">591</string>
-    <!--Telegram+--><!--
+    <string name="updateText">Plus Messenger para Android foi atualizado. Novidade na versão 3.1.3\n\n- Nova sessão \"Links Compartilhados\" na informação do chat\n- Pré-visualizaçãp de fotos em links no aplicativo.</string>
+    <string name="updateBuild">594</string>
+    <!--Telegram+-->
   <string name="updatePlusText">
-\n\nNew in 3.1.1.9:\n\n- New MOD to center avatar, name and phone in navigation menu\n- New MOD to don\'t stop audio in chat (disables proximity sensor action)\n-New MOD to change icons color in profile screen\n- Bug fixes</string>-->
+\n\nNovo na versão 3.1.3.0:\n\n- Novo MOD para mudar a cor do ícone padrão da aba de emoji\n- Concertos de Bugs</string>
     <string name="TelegramForAndroid">Plus Messenger para Android</string>
     <string name="Theming">Personalização</string>
-    <string name="colorHexInvalid">Código de cor hexadecimal inválido!</string>
+  <string name="colorHexInvalid">Código de cor HEX inválido!</string>
     <string name="themeColor">Cor do Tema</string>
     <string name="ResetThemeSettings">Redefinir Tema</string>
     <string name="ResetThemeSettingsSum">Reverter todas as personalizações</string>
   <string name="ResetThemeToastText">Redefinir tema ao padrão!</string>
     <string name="General">Geral</string>
     <string name="Screens">Telas</string>
-    <string name="MainScreen">Tela Principal</string>
-  <string name="ChatScreen">Tela de Conversa</string>
-    <string name="ContactsScreen">Tela de Contatos</string>
+  <string name="MainScreen">Principal</string>
+  <string name="ChatScreen">Chat</string>
+  <string name="ContactsScreen">Contatos</string>
     <string name="Header">Cabeçalho</string>
     <string name="Rows">Linhas</string>
-    <string name="ChatList">Lista de Conversas</string>
-    <string name="ChatsList">Lista de Conversas</string>
+  <string name="ChatList">Lista de Chat</string>
+  <string name="ChatsList">Lista de Chats</string>
     <string name="ContactsList">Lista de Contatos</string>
     <string name="HeaderColor">Cor do Cabeçalho</string>
   <string name="NameColor">Cor do Nome</string>
@@ -876,7 +877,7 @@
     <string name="LBubbleColor">Cor da Bolha Esquerda</string>
     <string name="DateColor">Cor da Data</string>
     <string name="DateSize">Tamanho da Data</string>
-    <string name="DateBubbleColor">Cor da Bolha de Data</string>
+  <string name="DateBubbleColor">Cor da Bolha Data</string>
   <string name="RTextColor">Cor do texto direito</string>
     <string name="LTextColor">Cor do Texto Esquerdo</string>
     <string name="RTimeColor">Cor da Hora Direita</string>
@@ -885,8 +886,9 @@
     <string name="EditTextColor">Cor do Texto Digitado</string>
     <string name="EditTextSize">Tamanho do Texto Digitado</string>
   <string name="EditTextBGColor">Cor da Caixa de Texto</string>
-    <string name="EmojiViewBGColor">Cor do Fundo dos Emojis</string>
-    <string name="EmojiViewTabColor">Cor da Aba de Emojis</string>
+  <string name="EmojiViewBGColor">Cor do Fundo Emojis</string>
+  <string name="EmojiViewTabColor">Cor selecionada da aba de emoji</string>
+  <string name="EmojiViewTabIconColor">Cor do icone da aba de emoji</string>
     <string name="OnlineColor">Cor do Status Online</string>
     <string name="ChatMusic">Música</string>
     <string name="SaveTheme">Salvar Tema</string>
@@ -907,17 +909,17 @@
     <string name="SendLogs">Enviar Logs</string>
   <string name="SendLogsEmpty">Não existem logs ainda</string>
     <string name="SendIcon">Ícone de Enviar</string>
-  <string name="HideMobile">Ocultar número celular no menu</string>
+  <string name="HideMobile">Ocultar Número no Menu</string>
     <string name="FloatingPencilColor">Cor do Lápis Flutuante</string>
-    <string name="FloatingBGColor">Cor do Fundo do Botão Flutuante</string>
+  <string name="FloatingBGColor">Cor do Botão Flutuante</string>
     <string name="Community">Comunidade no G+</string>
   <string name="TypingColor">Cor do \"digitando\"</string>
-  <string name="EditTextIconsColor">Cor dos Ícones na Entrada de Texto</string>
-  <string name="NavigationDrawer">Menu Lateral</string>
+  <string name="EditTextIconsColor">Cor dos Ícones na Caixa de Texto</string>
+  <string name="NavigationDrawer">Menu de Navegação</string>
   <string name="OptionsList">Lista de Opções</string>
   <string name="ListColor">Cor da Lista</string>
   <string name="OwnNameSize">Tamanho do Nome</string>
-  <string name="PhoneColor">Cor do Telefone</string>
+  <string name="PhoneColor">Cor do Número</string>
   <string name="PhoneSize">Tamanho do Número</string>
   <string name="AvatarColor">Cor do Avatar</string>
   <string name="IconColor">Cor dos Ícones de Opções</string>
@@ -935,7 +937,7 @@
   <string name="ForwardNoQuote">Encaminhar sem mencionar</string>
   <string name="DisableMessageClick">Desativar Pop-up ao Clicar</string>
   <string name="ProfileScreen">Perfil de Contato/Grupo</string>
-  <string name="HideBackground">Ocultar Fundo Personalizado</string>
+  <string name="HideBackground">Ocultar Capa Personalizada</string>
   <string name="RLinkColor">Cor do Link Direito</string>
   <string name="LLinkColor">Cor do Link Esquerdo</string>
   <string name="ThemeApplied">Tema aplicado!</string>
@@ -943,24 +945,24 @@
   <string name="ShowAndroidEmoji">Usar Emojis Nativos</string>
   <string name="BubbleStyle">Estilo das Bolhas</string>
   <string name="KeepOriginalFilename">Manter Nome de Arquivo Original</string>
-  <string name="KeepOriginalFilenameHelp">Ao invés de apenas números, os arquivos serão salvos no formato nome_data</string>
+  <string name="KeepOriginalFilenameHelp">Arquivos serão salvos no formato nome_data</string>
   <string name="AvatarSize">Tamanho do Avatar</string>
-  <string name="AvatarAlignTop">Alinhar avatar do contato no topo</string>
+  <string name="AvatarAlignTop">Avatar do Contato no Topo</string>
   <string name="AvatarMarginLeft">Margem do Avatar</string>
   <string name="GroupNameColor">Cor do Nome do Grupo</string>
   <string name="GroupNameSize">Tamanho do Nome do Grupo</string>
   <string name="UnknownNameColor">Cor do Nome (Número Desconhecido)</string>
-  <string name="HideBackgroundShadow">Ocultar Sombra do Fundo Personalizado</string>
+  <string name="HideBackgroundShadow">Ocultar Sombra da Capa</string>
   <string name="SetSolidBGColor">Definir Cor de Fundo</string>
   <string name="SolidBGColor">Cor de Fundo</string>
-  <string name="EmojiPopupSize">Tamanho do Pop-up de Emoji</string>
+  <string name="EmojiPopupSize">Tamanho do Pop-Up Emoji</string>
   <string name="ForwardRightNameColor">Cor do Nome Direito ao Encaminhar</string>
   <string name="ForwardLeftNameColor">Cor do Nome Esquerdo ao Encaminhar</string>
   <string name="IconsColor">Cor dos Ícones</string>
-  <string name="SettingsScreen">Tela de Configurações/Personalizações</string>
+  <string name="SettingsScreen">Configurações/Personalização</string>
   <string name="BackgroundColor">Cor de Fundo</string>
   <string name="ShadowColor">Cor da Sombra</string>
-  <string name="SectionColor">Cor das Sessões</string>
+  <string name="SectionColor">Cor das Seções</string>
   <string name="TitleColor">Cor dos Títulos</string>
   <string name="SummaryColor">Cor dos Subtítulos/Descrições</string>
   <string name="MediaColor">Cor do Texto \'Foto/Adesivo\'</string>
@@ -968,16 +970,16 @@
   <string name="UseDeviceFont">Usar Fonte do Dispositivo</string>
   <string name="AppWillRestart">O Plus Messenger irá reiniciar</string>
   <string name="GroupIconColor">Cor do Ícone de Grupo</string>
-  <string name="SharedContactNameColor">Cor do Nome do Contato Compartilhado</string>
+  <string name="SharedContactNameColor">Cor do Nome Contato Compartilhado</string>
   <string name="AttachBGColor">Cor de Fundo do Anexar</string>
   <string name="AttachTextColor">Cor de Texto do Anexar</string>
   <string name="ShowContactAvatar">Mostrar Avatar do Contato</string>
   <string name="ShowOwnAvatar">Mostrar Próprio Avatar no Chat</string>
   <string name="ShowOwnAvatarGroup">Mostrar Próprio Avatar em Grupos</string>
-  <string name="OwnAvatarAlignTop">Alinhar Próprio Avatar no Topo</string>
+  <string name="OwnAvatarAlignTop">Avatar Próprio no Topo</string>
   <string name="DialogColor">Cor do Título/Botão de Diálogo</string>
-  <string name="ShowUsername">Exibir Nome de Usuário com Nome do Membro</string>
+  <string name="ShowUsername">Exibir Nome de Usuário</string>
   <string name="DisableAudioStop">Não Parar Áudio</string>
   <string name="ListDividerColor">Cor do Divisor de Lista</string>
-  <string name="CenterAvatar">Centralizar Avatar, Nome e Telefone</string>
+  <string name="CenterAvatar">Centralizar Avatar, Nome e Número</string>
 </resources>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values-pt-rPT/strings.xml b/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
index 6f602b68e..56df1be7e 100644
--- a/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
+++ b/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
@@ -46,8 +46,8 @@
     <string name="EncryptedChatStartedIncoming">Você entrou no chat secreto</string>
     <string name="ClearHistory">Limpar histórico</string>
     <string name="DeleteChat">Apagar e sair</string>
-    <string name="DeleteChatUser">Excluir conversa</string>
-    <string name="HiddenName">Excluir Conta</string>
+    <string name="DeleteChatUser">Apagar conversa</string>
+    <string name="HiddenName">Conta Excluída</string>
     <string name="SelectChat">Selecione um Chat</string>
     <string name="PhotoTip">Toque e segure para ver</string>
     <string name="CompatibilityChat">%1$s está usando uma versão mais antiga do Telegram, por isso fotos secretas serão mostradas em modo de compatibilidade.\n\nAssim que %2$s atualizar o Telegram, fotos com timers de 1 minuto ou menos passarão a funcionar no modo ‘Toque e segure para ver’, e você será notificado caso a outra pessoa salve a tela.</string>
@@ -137,6 +137,7 @@
     <string name="OpenInBrowser">Abrir no Navegador</string>
     <string name="CopyUrl">Copiar URL</string>
     <string name="SendItems">Enviar %1$s</string>
+    <string name="OpenUrlAlert">Abrir URL em %1$s?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s estabeleceu o tempo de autodestruição para %2$s </string>
     <string name="MessageLifetimeChangedOutgoing">Você estabeleceu o tempo de autodestruição para %1$s</string>
@@ -549,6 +550,9 @@
     <string name="BotStatusCantRead">não tem acesso as mensagens</string>
     <string name="BotInfoTitle">O que esse bot pode fazer?</string>
     <string name="BotStart">COMEÇAR</string>
+    <string name="BotUnblock">REINICIAR</string>
+    <string name="BotStop">Parar bot</string>
+    <string name="BotRestart">Reiniciar bot</string>
     <!--button titles-->
     <string name="Next">Próximo</string>
     <string name="Back">Voltar</string>
@@ -837,8 +841,8 @@
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s às %2$s</string>
     <!--update text-->
-    <string name="updateText">Plus Messenger para Android acaba de ser atualizado. Novo na versão 3.1.2\n\n- Resultados das buscas recentes\n- Pressione e mantenha em um sticker para pré-visualizar antes do envio</string>
-    <string name="updateBuild">591</string>
+    <string name="updateText">Plus Messenger para Android foi atualizado. Novidade na versão 3.1.3\n\n- Nova sessão \"Links Compartilhados\" na informação do chat\n- Pré-visualizaçãp de fotos em links no aplicativo.</string>
+    <string name="updateBuild">594</string>
     <!--Telegram+-->
   <string name="TelegramForAndroid">Plus Messenger para Android</string>
   <string name="Theming">Temas</string>
diff --git a/TMessagesProj/src/main/res/values-ru/strings.xml b/TMessagesProj/src/main/res/values-ru/strings.xml
index f66d132e0..70ab435cb 100644
--- a/TMessagesProj/src/main/res/values-ru/strings.xml
+++ b/TMessagesProj/src/main/res/values-ru/strings.xml
@@ -56,6 +56,7 @@
   <string name="WillUnmuteIn">Через %1$s</string>
   <string name="MuteDisable">Отключить</string>
   <string name="Hashtags">ХЕШТЕГИ</string>
+  <string name="Recent">НЕДАВНЕЕ</string>
   <!--broadcasts-->
   <string name="NewBroadcastList">Новый список рассылки</string>
   <string name="EnterListName">Введите имя списка</string>
@@ -133,6 +134,7 @@
   <string name="OpenInBrowser">Открыть в браузере</string>
   <string name="CopyUrl">Копировать URL</string>
   <string name="SendItems">Отправить %1$s</string>
+  <string name="OpenUrlAlert">Открыть URL %1$s?</string>
   <!--notification-->
   <string name="MessageLifetimeChanged">%1$s поставил(а) таймер самоуничтожения на %2$s</string>
   <string name="MessageLifetimeChangedOutgoing">Вы поставили таймер самоуничтожения на %1$s</string>
@@ -298,7 +300,7 @@
   <string name="ContactJoined">Контакт присоединился к Telegram</string>
   <string name="Pebble">PEBBLE</string>
   <string name="Language">Язык</string>
-  <string name="AskAQuestionInfo">Обратите внимание, что поддержка Telegram осуществляется добровольцами. Мы постараемся ответить как можно быстрее, но на это может потребоваться некоторое время.<![CDATA[<br><br>]]>Пожалуйста, ознакомьтесь с <![CDATA[<a href=\"http://telegram.org/faq#general\">вопросами и ответами о Telegram</a>]]>: там есть ответы на большинство вопросов и важные советы по <![CDATA[<a href=\"http://telegram.org/faq#troubleshooting\">устранению неполадок</a>]]>.</string>
+  <string name="AskAQuestionInfo">Обратите внимание, что поддержка Telegram осуществляется добровольцами. Мы постараемся ответить как можно быстрее, но это может занять некоторое время.<![CDATA[<br><br>]]>Пожалуйста, ознакомьтесь с <![CDATA[<a href=\"https://telegram.org/faq#general\">вопросами и ответами о Telegram</a>]]>: там есть ответы на большинство вопросов и важные советы по <![CDATA[<a href=\"https://telegram.org/faq#troubleshooting\">устранению неполадок</a>]]>.</string>
   <string name="AskButton">Спросить добровольца</string>
   <string name="TelegramFaq">Вопросы и ответы о Telegram</string>
   <string name="TelegramFaqUrl">https://telegram.org/faq</string>
@@ -388,9 +390,11 @@
   <string name="AutoLockDisabled">Отключена</string>
   <!--media view-->
   <string name="NoMedia">Поделитесь фото и видео в этом чате и получите доступ к ним на любом из ваших устройств.</string>
-  <string name="DocumentsTitle">Файлы</string>
+  <string name="DocumentsTitle">Общие файлы</string>
   <string name="SharedMediaTitle">Общие медиа</string>
+  <string name="LinksTitle">Общие ссылки</string>
   <string name="NoSharedFiles">Поделитесь файлами и документами в этом чате и получите доступ к ним на любом из ваших устройств.</string>
+  <string name="NoSharedLinks">Делитесь ссылками в этом чате и получайте к ним доступ с любого из ваших устройств.</string>
   <!--map view-->
   <string name="Map">Карта</string>
   <string name="Satellite">Спутник</string>
@@ -543,6 +547,9 @@
   <string name="BotStatusCantRead">не имеет доступа к сообщениям</string>
   <string name="BotInfoTitle">Что этот бот может делать?</string>
   <string name="BotStart">СТАРТ</string>
+  <string name="BotUnblock">ПЕРЕЗАПУСК</string>
+  <string name="BotStop">Остановить бота</string>
+  <string name="BotRestart">Перезапустить бота</string>
   <!--button titles-->
   <string name="Next">Далее</string>
   <string name="Back">Назад</string>
@@ -831,44 +838,45 @@
   <string name="formatterDay12H">h:mm a</string>
   <string name="formatDateAtTime">%1$s в %2$s</string>
   <!--update text-->
-  <string name="updateText">Plus Messenger для Android обновлён. Новое в версии 3.1:\n\n- Поиск сообщений внутри конкретного чата.\n- Полностью переработано меню вложений. Отправка контактов и аудиофайлов прямо из меню вложений.\n- Улучшено воспроизведение медиа в приложении (YouTube, Vimeo, SoundCloud и др.), новый плеер для больших аудиофайлов.\n\nБольше об этом обновлении:\nhttps://telegram.org/blog/search-and-media</string>
-  <string name="updateBuild">591</string>
-    <!--Telegram+-->
+  <string name="updateText">Plus Messenger для Android обновлён. Новое в версии 3.1.3:\n\n- Новый раздел \'Общие ссылки\' в информации о части\n- Предварительный просмотр ссылок на фото в приложении</string>
+  <string name="updateBuild">594</string>
+    <!--Telegram+--><!--
+  <string name="updatePlusText">\n\nНовое в 3.1.1.9:\n\n- Добавлен новый пузырь сообщений iOS (спасибо Edwin Macalopu)\n- Новый мод, показывающий имя пользователя вместе с именем члена группы\n- Отображение администратора группы в её профиле. Администратор группы имеет отдельный значок\n- Новый мод, центрирующий аватар, имя и номер телефона в меню навигации\n- Новый мод, позволяющий проигрывать аудио в чате игнорируя сенсор приближения\n- Новый мод, позволяющий менять цвет иконок на экране профиля\n- Исправления ошибок\n\nСмотрите и используйте темы для Plus Messenger: https://play.google.com/store/apps/details?id=es.rafalense.themes</string>-->
   <string name="TelegramForAndroid">Plus Messenger для Android</string>
   <string name="Theming">Кастомизация</string>
-  <string name="colorHexInvalid">Неверный hex-код темы!</string>
+  <string name="colorHexInvalid">Неверный hex-код цвета!</string>
   <string name="themeColor">Цвет темы</string>
   <string name="ResetThemeSettings">Сброс настроек темы</string>
   <string name="ResetThemeSettingsSum">Отменить все изменения в теме</string>
-  <string name="ResetThemeToastText">Отменить настройки темы по умолчанию</string>
-  <string name="General">Быстрые настройки</string>
+  <string name="ResetThemeToastText">Настройки темы по умолчанию!</string>
+  <string name="General">Основное</string>
   <string name="Screens">Дополнительные настройки</string>
-  <string name="MainScreen">Настройки экрана диалогов</string>
-  <string name="ChatScreen">Настройки экрана чата</string>
-  <string name="ContactsScreen">Настройки экрана контактов</string>
-  <string name="Header">Список настроек</string>
+  <string name="MainScreen">Основной экран</string>
+  <string name="ChatScreen">Экран чата</string>
+  <string name="ContactsScreen">Экран контактов</string>
+  <string name="Header">Заголовок</string>
   <string name="Rows">Строки</string>
-  <string name="ChatList">Дополнительные настройки чата</string>
-  <string name="ChatsList">Дополнительные настройки диалогов</string>
-  <string name="ContactsList">Дополнительные настройки контактов</string>
+  <string name="ChatList">Список чата</string>
+  <string name="ChatsList">Список чатов</string>
+  <string name="ContactsList">Список контактов</string>
   <string name="HeaderColor">Цвет заголовка</string>
-  <string name="NameColor">Цвет имени контакта</string>
-  <string name="NameSize">Размер имени контакта</string>
+  <string name="NameColor">Цвет имени</string>
+  <string name="NameSize">Размер имени</string>
   <string name="MessageColor">Цвет сообщения</string>
   <string name="MessageSize">Размер сообщения</string>
   <string name="TimeDateColor">Цвет времени/даты</string>
   <string name="TimeDateSize">Размер времени/даты</string>
   <string name="CountColor">Цвет счётчика сообщений</string>
   <string name="CountSize">Размер счётчика сообщений</string>
-  <string name="RowColor">Цвет заливки фона</string>
+  <string name="RowColor">Цвет колонки</string>
   <string name="CountBGColor">Цвет фона счётчика сообщений</string>
   <string name="StatusColor">Цвет статуса</string>
   <string name="StatusSize">Размер статуса</string>
-  <string name="RBubbleColor">Цвет правого пузыря сообщений</string>
-  <string name="LBubbleColor">Цвет левого пузыря сообщений</string>
+  <string name="RBubbleColor">Цвет правого пузыря</string>
+  <string name="LBubbleColor">Цвет левого пузыря</string>
   <string name="DateColor">Цвет даты</string>
   <string name="DateSize">Размер даты</string>
-  <string name="DateBubbleColor">Палитра для цвета даты</string>
+  <string name="DateBubbleColor">Цвет пузыря даты</string>
   <string name="RTextColor">Цвет текста cправа</string>
   <string name="LTextColor">Цвет текста слева</string>
   <string name="RTimeColor">Цвет времени справа</string>
@@ -876,36 +884,36 @@
   <string name="TimeSize">Размер времени</string>
   <string name="EditTextColor">Цвет вводимого текста</string>
   <string name="EditTextSize">Размер вводимого текста</string>
-  <string name="EditTextBGColor">Цвет окна ввода текста</string>
+  <string name="EditTextBGColor">Цвет фона для ввода текста</string>
   <string name="EmojiViewBGColor">Цвет фона Emoji</string>
   <string name="EmojiViewTabColor">Цвет вкладок Emoji</string>
-  <string name="OnlineColor">Цвет надписи \"онлайн\"</string>
+  <string name="OnlineColor">Цвет статуса \"онлайн\"</string>
   <string name="ChatMusic">Музыка</string>
   <string name="SaveTheme">Сохранить тему</string>
   <string name="SaveThemeSum">Сохраните свою тему в папку Telegram/Themes</string>
   <string name="SaveThemeToastText">Тема сохранена!</string>
   <string name="SavedTo">%1$s сохранено в %2$s</string>
-  <string name="SaveErrorMsg0">Тема ещё не создана. Примените сначала любой мод Telegram+</string>
+  <string name="SaveErrorMsg0">Тема ещё не создана. Примените сначала любой мод Plus Messenger</string>
   <string name="restoreOkMsg">Настройки восстановлены с SD-карты</string>
-  <string name="restoreErrorMsg">Файл настройки не найден в %s</string>
+  <string name="restoreErrorMsg">Не найден файл настроек в %s</string>
   <string name="NoMediaMessage">SD-карта не найдена.</string>
   <string name="EnterName">Введите имя</string>
   <string name="Themes">Темы</string>
   <string name="ApplyTheme">Применить тему</string>
-  <string name="ApplyThemeSum">Установить ранее сохранённую тему</string>
-  <string name="MemberColor">Цвет ника отправителя</string>
-  <string name="ChecksColor">Цвет галочки отправлено/доставлено</string>
+  <string name="ApplyThemeSum">Установить xml темы из локальной папки</string>
+  <string name="MemberColor">Цвет участника</string>
+  <string name="ChecksColor">Цвет галочки доставки</string>
   <string name="MuteColor">Цвет беззвучного режима</string>
   <string name="SendLogs">Отправлять логи</string>
   <string name="SendLogsEmpty">Нет логов</string>
-  <string name="SendIcon">Цвет иконки отправить</string>
+  <string name="SendIcon">Цвет иконки \"отправить\"</string>
   <string name="HideMobile">Скрыть номер телефона из меню</string>
-  <string name="FloatingPencilColor">Цвет плавающей кнопки</string>
-  <string name="FloatingBGColor">Фон значка карандаш</string>
+  <string name="FloatingPencilColor">Цвет значка карандаша</string>
+  <string name="FloatingBGColor">Фон значка карандаша</string>
   <string name="Community">Сообщество Google+</string>
   <string name="TypingColor">Цвет набирающего текст</string>
-  <string name="EditTextIconsColor">Цвет иконок в нижней панели</string>
-  <string name="NavigationDrawer">Настройки бокового меню</string>
+  <string name="EditTextIconsColor">Цвет иконок в панели ввода</string>
+  <string name="NavigationDrawer">Боковое меню</string>
   <string name="OptionsList">Список настроек меню</string>
   <string name="ListColor">Цвет заливки бокового меню</string>
   <string name="OwnNameSize">Размер имени</string>
@@ -918,15 +926,15 @@
   <string name="VersionColor">Цвет версии приложения</string>
   <string name="VersionSize">Размер версии приложения</string>
   <string name="HeaderTitleColor">Цвет текста заголовка</string>
-  <string name="HeaderIconsColor">Цвет иконок</string>
+  <string name="HeaderIconsColor">Цвет иконок заголовка</string>
   <string name="DividerColor">Цвет разделительной линии</string>
   <string name="AvatarRadius">Закругление аватара</string>
-  <string name="SetMemberColor">Менять цвет отправителя</string>
-  <string name="ForwardNameColor">Цвет пересланного сообщения</string>
+  <string name="SetMemberColor">Установить цвет участника</string>
+  <string name="ForwardNameColor">Цвет имени в пересылаемом сообщении</string>
   <string name="HeaderTitle">Название в заголовке</string>
   <string name="ForwardNoQuote">Копировать/Переслать</string>
   <string name="DisableMessageClick">Включить всплывающие окна</string>
-  <string name="ProfileScreen">Настройки экрана профиля</string>
+  <string name="ProfileScreen">Экрана профиля</string>
   <string name="HideBackground">Cкрыть фоновое изображение</string>
   <string name="RLinkColor">Цвет ссылки справа</string>
   <string name="LLinkColor">Цвет ссылки слева</string>
@@ -937,9 +945,39 @@
   <string name="KeepOriginalFilename">Оригинальные названия файлов</string>
   <string name="KeepOriginalFilenameHelp">Скачанные файлы в папке Telegram/Documents будет иметь формат \"Имя файла_Дата загрузки\"</string>
   <string name="AvatarSize">Размер аватара</string>
-  <string name="AvatarAlignTop">Поместить аватар в начало</string>
-  <string name="AvatarMarginLeft">Отступ  аватара с лева</string>
+  <string name="AvatarAlignTop">Разместить аватар сверху</string>
+  <string name="AvatarMarginLeft">Отступ от аватара слева</string>
   <string name="GroupNameColor">Цвет названия группы</string>
   <string name="GroupNameSize">Размер названия группы</string>
   <string name="UnknownNameColor">Цвет имени (неизвестный номер)</string>
+  <string name="HideBackgroundShadow">Скрыть фоновую тень  </string>
+  <string name="SetSolidBGColor">Установить цвет фона</string>
+  <string name="SolidBGColor">Цвет фона</string>
+  <string name="EmojiPopupSize">Размер панели Emoji</string>
+  <string name="ForwardRightNameColor">Цвет правого пузыря форварда</string>
+  <string name="ForwardLeftNameColor">Цвет левого пузыря форварда</string>
+  <string name="IconsColor">Цвет иконок</string>
+  <string name="SettingsScreen">Экран Настроек/Темы</string>
+  <string name="BackgroundColor">Цвет фона</string>
+  <string name="ShadowColor">Цвет тени</string>
+  <string name="SectionColor">Цвет секции</string>
+  <string name="TitleColor">Цвет заголовка</string>
+  <string name="SummaryColor">Цвет подписей</string>
+  <string name="MediaColor">Цвет текста \'Фото/Стикеры\'</string>
+  <string name="ThemesAppMsg">Хотите посмотреть темы, созданные другими пользователями Plus Messenger?</string>
+  <string name="UseDeviceFont">Использовать шрифт устройства</string>
+  <string name="AppWillRestart">Plus Messenger будет перезагружен</string>
+  <string name="GroupIconColor">Цвет иконки группы</string>
+  <string name="SharedContactNameColor">Цвет имени переданного контакта</string>
+  <string name="AttachBGColor">Цвет фона вложения</string>
+  <string name="AttachTextColor">Цвет текста вложения</string>
+  <string name="ShowContactAvatar">Показывать аватар контакта в чате</string>
+  <string name="ShowOwnAvatar">Показывать свой аватар в чате</string>
+  <string name="ShowOwnAvatarGroup">Показывать свой аватар в чате группы</string>
+  <string name="OwnAvatarAlignTop">Размешение своего аватара сверху</string>
+  <string name="DialogColor">Цвет заголовка/кнопок диалога</string>
+  <string name="ShowUsername">Показывать имя пользователя с именем участника </string>
+  <string name="DisableAudioStop">Не останавливать аудио</string>
+  <string name="ListDividerColor">Цвет разделителя списка</string>
+  <string name="CenterAvatar">Центрировать аватар, имя и телефон</string>
 </resources>
diff --git a/TMessagesProj/src/main/res/values-tr/strings.xml b/TMessagesProj/src/main/res/values-tr/strings.xml
index a0e879fb7..6c1518968 100644
--- a/TMessagesProj/src/main/res/values-tr/strings.xml
+++ b/TMessagesProj/src/main/res/values-tr/strings.xml
@@ -461,7 +461,7 @@
   <string name="formatterDay24H">HH:mm</string>
   <!--update text-->
   <string name="updateText">Plus Messenger için temalar indirin ve uygulayın. Hergün yeni temalar ekleniyor:\n https://play.google.com/store/apps/details?id=es.rafalense.themes</string>
-  <string name="updateBuild">591</string>
+  <string name="updateBuild">594</string>
   <!--Telegram+--><!--
   <string name="updatePlusText">
 \n\n3.1.1.9\'daki Yenilikler\n\n- Yeni iOS baloncuğu eklendi (Edwin Macalopu\'ya teşekkürler)\n- Gruplarda kullanıcı adı iler beraber üye ismini birlikte gösteren yeni MOD eklendi\n- Grup profilinde admin gösterilir. Admin kendi ikonuna sahiptir\n- Sol menüde avatar,isim ve telefonu ortalamayı sağlayan yeni MOD eklendi\n- Sohbete yakınlık sensörü eylemlerini kapatmayı ve çalan sesleri devam ettirmeyi sağlayan yeni MOD eklendi \n- Profil ekranına ikon renklerini değiştirmeyi sağlayan yeni MOD eklendi\n- Hata düzeltmeleri \n\n Plus Messenger için temalar: https://play.google.com/store/apps/details?id=es.rafalense.themes</string>-->
diff --git a/TMessagesProj/src/main/res/values-zh-rCN/strings.xml b/TMessagesProj/src/main/res/values-zh-rCN/strings.xml
index 3d7471b6d..b0c88d9c4 100644
--- a/TMessagesProj/src/main/res/values-zh-rCN/strings.xml
+++ b/TMessagesProj/src/main/res/values-zh-rCN/strings.xml
@@ -5,76 +5,84 @@
         <string name="LanguageNameInEnglish">Simplified Chinese</string>
         <string name="LanguageCode">zh_CN</string>
         <!--signin view-->
-        <string name="YourPhone">您的手机号</string>
-        <string name="StartText">请确认您的国家码并输入您的手机号</string>
-        <string name="ChooseCountry">选择您的国家</string>
-        <string name="WrongCountry">国家代码错误</string>
+  <string name="YourPhone">您的手机</string>
+  <string name="StartText">请确认您的国家代码\n然后输入您的手机号码。</string>
+  <string name="ChooseCountry">选择国家</string>
+  <string name="WrongCountry">错误的国家区号</string>
         <!--code enter view-->
         <string name="YourCode">验证码</string>
-        <string name="SentSmsCode">我们已通过短信将验证码发送至您的手机</string>
-        <string name="CallText">我们将会在 %1$d:%2$02d 后呼叫您的号码</string>
-        <string name="Calling">正在呼叫您的号码...</string>
+  <string name="SentSmsCode">我们发送了一条带有验证码的短信到您的手机</string>
+  <string name="CallText">我们稍后将会呼叫您的手机 %1$d:%2$02d</string>
+  <string name="Calling">正在呼叫...</string>
         <string name="Code">验证码</string>
-        <string name="WrongNumber">号码错了?</string>
-        <string name="DidNotGetTheCode">没收到验证码?</string>
+  <string name="WrongNumber">号码错误？</string>
+  <string name="DidNotGetTheCode">未收到验证码？</string>
         <!--signup view-->
         <string name="YourName">您的姓名</string>
         <string name="RegisterText">设置您的姓名</string>
         <!--<string name="RegisterText">Set up your name and picture</string>-->
-        <string name="FirstName">名 (必填)</string>
-        <string name="LastName">姓 (选填)</string>
+  <string name="FirstName">名字（必填）</string>
+  <string name="LastName">姓氏（可选）</string>
         <string name="CancelRegistration">取消注册</string>
         <!--chats view-->
         <string name="Settings">设置</string>
         <string name="Contacts">联系人</string>
-        <string name="NewGroup">新的群聊</string>
+  <string name="NewGroup">新建群组</string>
         <string name="Yesterday">昨天</string>
         <string name="NoResult">没有结果</string>
-        <string name="NoChats">还没有会话...</string>
-        <string name="NoChatsHelp">要发起会话可点击右下角的新消息按钮\n或者点击菜单按钮查看更多选项。</string>
-        <string name="WaitingForNetwork">等待网络连接...</string>
-        <string name="Connecting">正在连接...</string>
-        <string name="Updating">更新中...</string>
-        <string name="NewSecretChat">新的私密会话</string>
-        <string name="AwaitingEncryption">等待 %s 上线...</string>
-        <string name="EncryptionRejected">私密会话已取消</string>
-        <string name="EncryptionProcessing">正在交换加密密钥...</string>
-        <string name="EncryptedChatStartedOutgoing">%s 加入了您的私密会话。</string>
-        <string name="EncryptedChatStartedIncoming">您加入了私密会话。</string>
-        <string name="ClearHistory">清除历史记录</string>
+  <string name="NoChats">暂时还没有对话...</string>
+  <string name="NoChatsHelp">要开始对话\n请点击右上角的撰写按钮\n或者进入联系人界面</string>
+  <string name="WaitingForNetwork">等待网络...</string>
+  <string name="Connecting">连接中…</string>
+  <string name="Updating">刷新中...</string>
+  <string name="NewSecretChat">新建加密对话</string>
+  <string name="AwaitingEncryption">等待%s上线…</string>
+  <string name="EncryptionRejected">加密对话已取消</string>
+  <string name="EncryptionProcessing">正在交换加密密钥…</string>
+  <string name="EncryptedChatStartedOutgoing">%s 加入了您的加密对话。</string>
+  <string name="EncryptedChatStartedIncoming">您已加入加密对话。</string>
+  <string name="ClearHistory">清除聊天记录</string>
         <string name="DeleteChat">删除并退出</string>
-        <string name="DeleteChatUser">删除会话</string>
-        <string name="HiddenName">账户已删除</string>
-        <string name="SelectChat">选择会话</string>
-        <string name="PhotoTip">长按来查看</string>
-        <string name="CompatibilityChat">%1$s 正在使用旧版的 Telegram，所以私密图片会以兼容模式显示。\n\n当 %2$s 升级 Telegram 后，有时限的图片将可以在 \'长按来查看\' 模式下运行，同时在其他成员进行屏幕截图时您也会得到通知。</string>
-        <string name="SearchMessages">消息</string>
+  <string name="DeleteChatUser">删除对话</string>
+  <string name="HiddenName">隐藏姓名</string>
+  <string name="SelectChat">选择对话</string>
+  <string name="PhotoTip">点按并预览</string>
+  <string name="CompatibilityChat">%1$s 正在使用旧版本的 Telegram，因此以兼容模式显示照片。\n\n当 %2$s 更新了 Telegram 后，阅后即焚定时器设置在一分钟之内时，照片将用“点按并预览”模式暂存；对方截取手机画面时，也会通知您。</string>
+  <string name="SearchMessages">搜索消息</string>
         <string name="Search">搜索</string>
-        <string name="MuteNotifications">屏蔽通知</string>
-        <string name="MuteFor">屏蔽 %1$s</string>
-        <string name="UnmuteNotifications">解除屏蔽</string>
-        <string name="WillUnmuteIn">在 %1$s 之后</string>
+  <string name="MuteNotifications">暂停消息通知</string>
+  <string name="MuteFor">暂停通知 %1$s</string>
+  <string name="UnmuteNotifications">恢复消息通知</string>
+  <string name="WillUnmuteIn"> %1$s 后</string>
+  <string name="MuteDisable">禁用暂停通知</string>
+  <string name="Hashtags">主题标签</string>
+  <string name="Recent">最近</string>
         <!--broadcasts-->
-        <string name="NewBroadcastList">新的广播列表</string>
-        <string name="EnterListName">输入列表名称</string>
-        <string name="YouCreatedBroadcastList">您创建了一个广播列表</string>
-        <string name="AddRecipient">添加收听者</string>
-        <string name="KickFromBroadcast">从广播列表中移除</string>
+  <string name="NewBroadcastList">新建广播名单</string>
+  <string name="EnterListName">输入名单名称</string>
+  <string name="YouCreatedBroadcastList">您创建了一个广播名单</string>
+  <string name="AddRecipient">增加联系人</string>
+  <string name="KickFromBroadcast">从广播名单中移除</string>
+  <!--audio view-->
+  <string name="NoAudio">请把文件加入到本机音乐库中，以便您在此处浏览他们。</string>
+  <string name="AttachMusic">音乐</string>
+  <string name="AudioUnknownArtist">未知艺术家</string>
+  <string name="AudioUnknownTitle">未知标题</string>
         <!--documents view-->
         <string name="SelectFile">选择文件</string>
-        <string name="FreeOfTotal">剩余 %1$s ，共 %2$s</string>
-        <string name="UnknownError">未知错误</string>
-        <string name="AccessError">无法访问</string>
-        <string name="NoFiles">还没有文件...</string>
+  <string name="FreeOfTotal">%1$s 可用，共 %2$s</string>
+  <string name="UnknownError">未知的错误</string>
+  <string name="AccessError">存取错误</string>
+  <string name="NoFiles">暂时还没有文件...</string>
         <string name="FileUploadLimit">文件大小不能超过 %1$s</string>
-        <string name="NotMounted">储存设备未挂载</string>
-        <string name="UsbActive">激活 USB 传输</string>
-        <string name="InternalStorage">内部储存</string>
-        <string name="ExternalStorage">外置储存</string>
+  <string name="NotMounted">未挂载存储器</string>
+  <string name="UsbActive">已启用USB传输</string>
+  <string name="InternalStorage">内部存储器</string>
+  <string name="ExternalStorage">外部存储器</string>
         <string name="SystemRoot">系统根目录</string>
-        <string name="SdCard">SD 卡</string>
+  <string name="SdCard">SD卡</string>
         <string name="Folder">文件夹</string>
-        <string name="GalleryInfo">发送完整图片</string>
+  <string name="GalleryInfo">传送未经压缩的照片</string>
         <!--chat view-->
         <string name="Invisible">隐身</string>
   <string name="Typing">正在输入…</string>
@@ -90,142 +98,163 @@
   <string name="SendingFile">正在发送文件...</string>
   <string name="GotAQuestion">对 Telegram 有疑问？</string>
         <string name="ChatTakePhoto">拍照</string>
-        <string name="ChatGallery">从相册选择</string>
-        <string name="ChatLocation">发送地理位置</string>
-        <string name="ChatVideo">发送视频</string>
-        <string name="ChatDocument">发送文件</string>
-        <string name="NoMessages">还没有消息...</string>
-        <string name="ForwardedMessage">转发消息</string>
-        <string name="From">从</string>
-        <string name="NoRecent">没有最近的联系人</string>
+  <string name="ChatGallery">相册</string>
+  <string name="ChatLocation">位置</string>
+  <string name="ChatVideo">视频</string>
+  <string name="ChatDocument">文件</string>
+  <string name="ChatCamera">相机</string>
+  <string name="NoMessages">暂时还没有消息…</string>
+  <string name="ForwardedMessage">已转发的消息</string>
+  <string name="From">来自</string>
+  <string name="NoRecent">没有最近使用</string>
         <string name="Message">消息</string>
-        <string name="TypeMessage">消息</string>
-        <string name="ShareMyContactInfo">分享我的联系方式</string>
-        <string name="AddToContacts">添加至通讯录</string>
-        <string name="EncryptedPlaceholderTitleIncoming">%s 邀请您加入私密会话。</string>
-        <string name="EncryptedPlaceholderTitleOutgoing">您邀请了 %s 加入私密会话。</string>
-        <string name="EncryptedDescriptionTitle">私密会话:</string>
-        <string name="EncryptedDescription1">使用端对端加密</string>
-        <string name="EncryptedDescription2">不会在我们的服务器上留下记录</string>
-        <string name="EncryptedDescription3">定时自毁</string>
-        <string name="EncryptedDescription4">不允许转发</string>
-        <string name="YouWereKicked">您被从群聊中踢出</string>
-        <string name="YouLeft">您离开了群聊</string>
-        <string name="DeleteThisGroup">删除此群聊</string>
-        <string name="DeleteThisChat">删除这个会话</string>
-        <string name="SlideToCancel">滑动取消</string>
-        <string name="SaveToDownloads">保存到“下载”文件夹</string>
+  <string name="TypeMessage">输入消息</string>
+  <string name="ShareMyContactInfo">分享我的联系人信息</string>
+  <string name="AddToContacts">添加为联系人</string>
+  <string name="EncryptedPlaceholderTitleIncoming">%s 邀请您进入加密对话。</string>
+  <string name="EncryptedPlaceholderTitleOutgoing">已邀请 %s 进入加密对话。</string>
+  <string name="EncryptedDescriptionTitle">加密对话：</string>
+  <string name="EncryptedDescription1">使用端到端加密</string>
+  <string name="EncryptedDescription2">不在服务器上留下记录</string>
+  <string name="EncryptedDescription3">使用阅后即焚计时器</string>
+  <string name="EncryptedDescription4">不允许转发消息</string>
+  <string name="YouWereKicked">您已经被踢出该群组</string>
+  <string name="YouLeft">您已经离开该群组</string>
+  <string name="DeleteThisGroup">删除该群组</string>
+  <string name="DeleteThisChat">删除此次对话</string>
+  <string name="SlideToCancel">滑动以取消</string>
+  <string name="SaveToDownloads">保存到下载</string>
+  <string name="SaveToMusic">保存为音乐</string>
         <string name="ShareFile">分享文件</string>
-        <string name="ApplyLocalizationFile">应用本地化文件</string>
+  <string name="ApplyLocalizationFile">使用本地化文件</string>
         <string name="UnsupportedAttachment">不支持的附件</string>
-        <string name="SetTimer">设置自毁定时器</string>
+  <string name="SetTimer">设置阅后即焚计时器</string>
         <string name="ServiceNotifications">服务通知</string>
+  <string name="GettingLinkInfo">正在获取连接信息...</string>
+  <string name="OpenInBrowser">在浏览器中打开</string>
+  <string name="CopyUrl">复制链接</string>
+  <string name="SendItems">发送 %1$s</string>
         <!--notification-->
-        <string name="MessageLifetimeChanged">%1$s 设置了时间为 %2$s 的自毁定时器</string>
-        <string name="MessageLifetimeChangedOutgoing">您设置了时间为 %1$s 的自毁定时器</string>
-        <string name="MessageLifetimeRemoved">%1$s 取消了自毁定时器</string>
-        <string name="MessageLifetimeYouRemoved">您取消了自毁定时器</string>
-        <string name="YouHaveNewMessage">您有新消息</string>
+  <string name="MessageLifetimeChanged">%1$s 已将阅后即焚计时器设定为 %2$s</string>
+  <string name="MessageLifetimeChangedOutgoing">您已将阅后即焚计时器设定为 %1$s</string>
+  <string name="MessageLifetimeRemoved">%1$s 取消了阅后即焚计时器</string>
+  <string name="MessageLifetimeYouRemoved">您取消了阅后即焚计时器</string>
+  <string name="YouHaveNewMessage">您有一条新消息</string>
         <string name="NotificationMessageText">%1$s: %2$s</string>
-        <string name="NotificationMessageNoText">%1$s 发送了一条消息</string>
-        <string name="NotificationMessagePhoto">%1$s 发送了一张图片</string>
-        <string name="NotificationMessageVideo">%1$s 发送了一段视频</string>
-        <string name="NotificationMessageContact">%1$s 发送了一张联系人名片</string>
-        <string name="NotificationMessageMap">%1$s 发送了一个地理位置</string>
-        <string name="NotificationMessageDocument">%1$s 发送了一个文件</string>
-        <string name="NotificationMessageAudio">%1$s 发送了一段音频</string>
-        <string name="NotificationMessageSticker">%1$s 发送了一个表情</string>
+  <string name="NotificationMessageNoText">%1$s 给您发送了一条消息</string>
+  <string name="NotificationMessagePhoto">%1$s 给您发送了一张图片</string>
+  <string name="NotificationMessageVideo">%1$s 给您发送了一段视频</string>
+  <string name="NotificationMessageContact">%1$s 与您分享了一个联系人</string>
+  <string name="NotificationMessageMap">%1$s 给您发送了一个位置</string>
+  <string name="NotificationMessageDocument">%1$s 给您发送了一个文件</string>
+  <string name="NotificationMessageAudio">%1$s 给您发送了一段语音</string>
+  <string name="NotificationMessageSticker">%1$s 给您发送了一张图贴</string>
         <string name="NotificationMessageGroupText">%1$s @ %2$s: %3$s</string>
-        <string name="NotificationMessageGroupNoText">%1$s 在群中发送了一条消息 %2$s</string>
-        <string name="NotificationMessageGroupPhoto">%1$s 在群中发送了一张图片 %2$s</string>
-        <string name="NotificationMessageGroupVideo">%1$s 在群中发送了一段视频 %2$s</string>
-        <string name="NotificationMessageGroupContact">%1$s 在群聊共享了一张联系人名片 %2$s</string>
-        <string name="NotificationMessageGroupMap">%1$s 在群中发送了一个地理位置 %2$s</string>
-        <string name="NotificationMessageGroupDocument">%1$s 在群中共享了一份文件 %2$s</string>
-        <string name="NotificationMessageGroupAudio">%1$s 在群中发送了一段音频 %2$s</string>
-        <string name="NotificationMessageGroupSticker">%1$s 在群中发送了一个表情 %2$s</string>
-        <string name="NotificationInvitedToGroup">%1$s 邀请你加入群 %2$s</string>
-        <string name="NotificationEditedGroupName">%1$s 编辑了群 %2$s 的昵称</string>
-        <string name="NotificationEditedGroupPhoto">%1$s 编辑了群 %2$s 的头像</string>
-        <string name="NotificationGroupAddMember">%1$s 被 %3$s 邀请加入群 %2$s</string>
-        <string name="NotificationGroupKickMember">%1$s 被 %3$s 从本群移除 %2$s</string>
-        <string name="NotificationGroupKickYou">%1$s 将你从群 %2$s 移除</string>
-        <string name="NotificationGroupLeftMember">%1$s 退出本群 %2$s</string>
-        <string name="NotificationContactJoined">%1$s 加入了 Telegram!</string>
-        <string name="NotificationUnrecognizedDevice">%1$s,\n我们检测到你的账号尝试在一部新设备 %2$s 上登录\n\n设备：%3$s\n地点：%4$s\n\n若非本人登陆，可在设置－隐私与安全 - 终止所有对话。\n\nTelegram团队\n敬上！</string>
-        <string name="NotificationContactNewPhoto">%1$s 上传了文件图片</string>
+  <string name="NotificationMessageGroupNoText">%1$s 发送了一条消息到 %2$s 群组</string>
+  <string name="NotificationMessageGroupPhoto">%1$s 发送了一张图片到 %2$s 群组</string>
+  <string name="NotificationMessageGroupVideo">%1$s 发送了一段视频到 %2$s 群组</string>
+  <string name="NotificationMessageGroupContact">%1$s 分享了一个联系人到 %2$s 群组</string>
+  <string name="NotificationMessageGroupMap">%1$s 发送了一个位置到 %2$s 群组</string>
+  <string name="NotificationMessageGroupDocument">%1$s 发送了一个文件到 %2$s 群组</string>
+  <string name="NotificationMessageGroupAudio">%1$s 发送了一段语音到 %2$s 群组</string>
+  <string name="NotificationMessageGroupSticker">%1$s 发送了一张图贴到 %2$s 群组</string>
+  <string name="NotificationInvitedToGroup">%1$s 邀请您加入 %2$s 群组</string>
+  <string name="NotificationEditedGroupName">%1$s 编辑了%2$s 群组的名称</string>
+  <string name="NotificationEditedGroupPhoto">%1$s 编辑了 %2$s 群组的图片</string>
+  <string name="NotificationGroupAddMember">%1$s 邀请了 %3$s 加入 %2$s 群组</string>
+  <string name="NotificationGroupAddSelf">%1$s 返回了 %2$s 群组</string>
+  <string name="NotificationGroupKickMember">%1$s 已将 %3$s 从 %2$s 群组移出</string>
+  <string name="NotificationGroupKickYou">%1$s 将您移出了 %2$s 群组</string>
+  <string name="NotificationGroupLeftMember">%1$s 已离开 %2$s 群组</string>
+  <string name="NotificationContactJoined">%1$s 加入了 Telegram！</string>
+  <string name="NotificationUnrecognizedDevice">%1$s，\n我们发现您的账号在 %2$s 从新的设备登录\n\n设备： %3$s\n位置： %4$s\n\n如果这不是您本人，您可以到 “设置” - “注销所有其它设备上的会话” 注销其登录\n\n谢谢，\n Telegram 团队</string>
+  <string name="NotificationContactNewPhoto">%1$s 更新了头像</string>
+  <string name="NotificationInvitedToGroupByLink">通过邀请，%1$s 已经加入 %2$s 群组。</string>
         <string name="Reply">回复</string>
-        <string name="ReplyToGroup">回复 %1$s</string>
-        <string name="ReplyToUser">回复 %1$s</string>
+  <string name="ReplyToGroup">回复给 %1$s</string>
+  <string name="ReplyToUser">回复给 %1$s</string>
         <string name="NotificationMessagesPeopleDisplayOrder">%1$s %2$s</string>
         <!--contacts view-->
         <string name="SelectContact">选择联系人</string>
-        <string name="NoContacts">通讯录为空</string>
-        <string name="InviteText">你好，一起加入 Plus Messenger 吧！ http://goo.gl/jnmjnZ</string>
-        <string name="TodayAt">在</string>
-        <string name="YesterdayAt">昨天在</string>
+  <string name="NoContacts">还没有联系人</string>
+  <string name="InviteText">嘿，我们试试 Telegram 吧：http://telegram.org/dl2</string>
+  <string name="TodayAt">于今天</string>
+  <string name="YesterdayAt">于昨天</string>
         <string name="Online">在线</string>
-        <string name="LastSeen">最后上线</string>
-        <string name="LastSeenDate">最后上线</string>
+  <string name="LastSeen">最近上线</string>
+  <string name="LastSeenDate">最近上线</string>
         <string name="InviteFriends">邀请朋友</string>
-        <string name="GlobalSearch">全球搜索</string>
-        <string name="Lately">近期最后上线</string>
-        <string name="WithinAWeek">最后上线一周内</string>
-        <string name="WithinAMonth">最后上线一月内</string>
-        <string name="ALongTimeAgo">最后上线很久以前</string>
-        <string name="NewMessageTitle">新的消息</string>
+  <string name="GlobalSearch">网络查找</string>
+  <string name="Lately">最近上过线</string>
+  <string name="WithinAWeek">最近一周内上过线</string>
+  <string name="WithinAMonth">最近一月内上过线</string>
+  <string name="ALongTimeAgo">很久以前上过线</string>
+  <string name="NewMessageTitle">新消息</string>
         <!--group create view-->
-        <string name="SendMessageTo">发送信息给...</string>
-        <string name="EnterGroupNamePlaceholder">输入群名称</string>
-        <string name="GroupName">群名称</string>
+  <string name="SendMessageTo">发送消息至...</string>
+  <string name="EnterGroupNamePlaceholder">输入群组名称</string>
+  <string name="GroupName">群组名称</string>
         <string name="MembersCount">%1$d/%2$d 成员</string>
+  <string name="JoinToGroup">您要加入“%1$s”群组吗？</string>
+  <string name="JoinToGroupErrorFull">对不起，这个群组已经满员。</string>
+  <string name="JoinToGroupErrorNotExist">对不起，这个群组貌似不存在。</string>
+  <string name="LinkCopied">邀请链接已复制到剪贴板</string>
+  <string name="InviteToGroupByLink">通过链接方式邀请他人加入群组</string>
+  <string name="InviteLink">邀请链接</string>
+  <string name="RevokeAlert">确认撤销这个邀请？一旦撤销，其他人将不能通过这个链接加入到本群组。</string>
+  <string name="RevokeAlertNewLink">以前的邀请链接失效，已生成新的邀请链接。</string>
+  <string name="RevokeButton">撤销</string>
+  <string name="RevokeLink">撤销邀请链接</string>
+  <string name="CopyLink">复制邀请链接</string>
+  <string name="ShareLink">分享邀请链接</string>
+  <string name="LinkInfo">安装 Telegram 的人将会通过邀请链接加入您的群组。</string>
         <!--group info view-->
-        <string name="SharedMedia">分享媒体</string>
+  <string name="SharedMedia">分享的多媒体文件</string>
         <string name="SETTINGS">设置</string>
         <string name="AddMember">添加成员</string>
-        <string name="DeleteAndExit">删除并离开该群</string>
+  <string name="DeleteAndExit">删除并退出群组</string>
         <string name="Notifications">通知</string>
-        <string name="KickFromGroup">从群中移除</string>
+  <string name="KickFromGroup">从群组中移除</string>
         <!--contact info view-->
         <string name="ShareContact">分享</string>
         <string name="AddContact">添加</string>
         <string name="AddContactTitle">添加联系人</string>
-        <string name="BlockContact">屏蔽联系人</string>
+  <string name="BlockContact">屏蔽</string>
         <string name="EditContact">编辑</string>
         <string name="DeleteContact">删除</string>
-        <string name="PhoneHome">主页</string>
-        <string name="PhoneMobile">移动</string>
+  <string name="PhoneHome">家庭</string>
+  <string name="PhoneMobile">手机</string>
         <string name="PhoneWork">工作</string>
-        <string name="PhoneOther">其他</string>
+  <string name="PhoneOther">其它</string>
         <string name="PhoneMain">主要</string>
-        <string name="StartEncryptedChat">开始私密会话。</string>
-        <string name="CreateEncryptedChatError">发生错误。</string>
-        <string name="EncryptionKey">加密密钥</string>
-        <string name="MessageLifetime">自毁定时器</string>
+  <string name="StartEncryptedChat">开始加密对话</string>
+  <string name="CreateEncryptedChatError">出现了一个错误。</string>
+  <string name="EncryptionKey">密钥</string>
+  <string name="MessageLifetime">阅后即焚计时器</string>
         <string name="ShortMessageLifetimeForever">关闭</string>
-        <string name="EncryptionKeyDescription">这张图片是与 <![CDATA[<b>]]>%1$s<![CDATA[</b>]]> 私密会话密钥的可视化图标。<![CDATA[<br><br>]]>如果这张图片与 <![CDATA[<b>]]>%2$s\'s<![CDATA[</b>]]> 电话上显示的一样，你的会话 200%% 安全。<![CDATA[<br><br>]]>更多尽在 telegram.org</string>
-        <string name="NumberUnknown">未知</string>
-        <string name="Info">信息</string>
-        <string name="Phone">电话</string>
+  <string name="EncryptionKeyDescription">此图片是与 <![CDATA[<b>]]>%1$s<![CDATA[</b>]]> 加密对话的加密密钥的可视化图片。<![CDATA[<br><br>]]>若此图片与 <![CDATA[<b>]]>%2$s 的<![CDATA[</b>]]> 手机上的图片一致，你们之间的聊天就是 200%% 安全的。<![CDATA[<br><br>]]>了解更多请访问 telegram.org</string>
+  <string name="NumberUnknown">未设置</string>
+  <string name="Info">个人信息</string>
+  <string name="Phone">手机号码</string>
         <!--usernames-->
-        <string name="Username">用户名</string>
-        <string name="UsernamePlaceholder">你的用户名</string>
-        <string name="UsernameInUse">抱歉，该用户名已被占用。</string>
-        <string name="UsernameInvalid">抱歉，该用户名无效。</string>
-        <string name="UsernameInvalidShort">用户名必须至少 5 个字符以上。</string>
-        <string name="UsernameInvalidLong">用户名不能超出32个字符。</string>
-        <string name="UsernameInvalidStartNumber">抱歉，用户名不能以数字开头。</string>
-        <string name="UsernameHelp">你可以在<![CDATA[<b>]]>Plus Messenger<![CDATA[</b>]]>上选择一个用户名。用户名可使他人找到你，并不通过你的手机号码就能与你联系。<![CDATA[<br><br>]]>你可以使用 <![CDATA[<b>]]>a–z<![CDATA[</b>]]>, <![CDATA[<b>]]>0–9<![CDATA[</b>]]>和下划线。 最短长度为 <![CDATA[<b>]]>5<![CDATA[</b>]]> 个字符。</string>
-        <string name="UsernameChecking">查对用户名中...</string>
-        <string name="UsernameAvailable">%1$s 可以使用。</string>
-        <string name="UsernameEmpty">用户名为空。</string>
+  <string name="Username">昵称</string>
+  <string name="UsernamePlaceholder">输入您的昵称</string>
+  <string name="UsernameInUse">对不起，此昵称已经被其他人使用了。</string>
+  <string name="UsernameInvalid">对不起，此昵称无效。</string>
+  <string name="UsernameInvalidShort">用户昵称至少需要五个字母。</string>
+  <string name="UsernameInvalidLong">用户昵称不能超过32个字符。</string>
+  <string name="UsernameInvalidStartNumber">对不起，用户昵称不能以数字开头。</string>
+  <string name="UsernameHelp">您可以在 <![CDATA[<b>]]>Telegram<![CDATA[</b>]]> 上选择昵称。设置了昵称，其他人就可以在没有您的手机号码的情况下在 Telegram 上找到您并与您联络。<![CDATA[<br><br>]]>您可以用 <![CDATA[<b>]]>a–z<![CDATA[</b>]]>、 <![CDATA[<b>]]>0–9<![CDATA[</b>]]> 和下划线设置昵称，最少 <![CDATA[<b>]]>5<![CDATA[</b>]]> 个字符。</string>
+  <string name="UsernameChecking">正在检查昵称...</string>
+  <string name="UsernameAvailable">%1$s 可用。</string>
+  <string name="UsernameEmpty">无</string>
         <string name="ErrorOccurred">发生错误。</string>
   <!--stickers view-->
   <string name="Stickers">图贴</string>
-  <string name="StickersInfo">欢迎艺术家使用 @stickers 机器人加入自己设计的图贴包。\n\n其他使用者可以通过长按选择“添加到图贴”的方式来加入图贴。</string>
+  <string name="StickersInfo">欢迎艺术家使用 @stickers 接口加入自己设计的图贴集。\n\n其他使用者可以通过长按选择“添加到图贴”的方式来加入图贴。</string>
   <string name="AddStickers">添加图贴</string>
-  <string name="AddToStickers">添加到图贴库</string>
-  <string name="AddStickersNotFound">没找到图贴</string>
+  <string name="AddToStickers">添加到图贴集</string>
+  <string name="AddStickersNotFound">未找到图贴</string>
   <string name="StickersRemoved">图贴已删除</string>
   <string name="AddStickersInstalled">新图贴已添加</string>
   <string name="StickersHide">隐藏</string>
@@ -235,86 +264,86 @@
   <string name="StickersRemove">移除</string>
   <string name="NoStickers">还没有图贴</string>
         <!--settings view-->
-        <string name="ResetNotificationsText">将所有通知设置为默认值。</string>
-        <string name="TextSize">字号</string>
-        <string name="AskAQuestion">提出一个问题</string>
-        <string name="EnableAnimations">启用动画</string>
-        <string name="Unblock">解除屏蔽</string>
-        <string name="UnblockText">长按用户名以解除屏蔽</string>
-        <string name="NoBlocked">没有被屏蔽用户</string>
+  <string name="ResetNotificationsText">重置所有通知设置为默认值</string>
+  <string name="TextSize">消息文本大小</string>
+  <string name="AskAQuestion">我有疑问</string>
+  <string name="EnableAnimations">开启动画效果</string>
+  <string name="Unblock">取消屏蔽</string>
+  <string name="UnblockText">长按一个用户以取消屏蔽</string>
+  <string name="NoBlocked">没有被屏蔽的用户</string>
         <string name="MessageNotifications">消息通知</string>
-        <string name="Alert">提醒</string>
+  <string name="Alert">警告</string>
         <string name="MessagePreview">消息预览</string>
-        <string name="GroupNotifications">群提醒</string>
+  <string name="GroupNotifications">群组通知</string>
         <string name="Sound">声音</string>
-        <string name="InAppNotifications">应用内提醒</string>
-        <string name="InAppSounds">应用内声音</string>
-        <string name="InAppVibrate">应用内振动</string>
+  <string name="InAppNotifications">程序内通知</string>
+  <string name="InAppSounds">程序内声音</string>
+  <string name="InAppVibrate">程序内振动</string>
         <string name="Vibrate">振动</string>
-        <string name="InAppPreview">应用内预览</string>
+  <string name="InAppPreview">程序内消息预览</string>
         <string name="Reset">重置</string>
-        <string name="ResetAllNotifications">重置所有提醒</string>
-        <string name="UndoAllCustom">取消所有联系人及群习惯通知设置</string>
-        <string name="NotificationsAndSounds">通知与声音</string>
-        <string name="BlockedUsers">屏蔽的用户</string>
-        <string name="LogOut">登出</string>
-        <string name="NoSound">静音</string>
+  <string name="ResetAllNotifications">重置所有通知</string>
+  <string name="UndoAllCustom">撤消所有联系人和群组的自定制通知设置</string>
+  <string name="NotificationsAndSounds">通知和声音</string>
+  <string name="BlockedUsers">被屏蔽的用户</string>
+  <string name="LogOut">退出登录</string>
+  <string name="NoSound">无声</string>
         <string name="Default">默认</string>
         <string name="Support">支持</string>
   <string name="OnlyIfSilent">静音时</string>
   <string name="ChatBackground">对话背景</string>
         <string name="MessagesSettings">消息</string>
         <string name="SendByEnter">按回车键发送</string>
-        <string name="TerminateAllSessions">终止所有会话</string>
+  <string name="TerminateAllSessions">注销所有其它设备上的会话</string>
         <string name="Events">事件</string>
-        <string name="ContactJoined">已加入 Telegram 的联系人</string>
+  <string name="ContactJoined">联系人已加入 Telegram</string>
         <string name="Pebble">PEBBLE</string>
         <string name="Language">语言</string>
-        <string name="AskAQuestionInfo">请注意 Telegram 由志愿者支持维护。我们会尽快回复，请耐心等待。<![CDATA[<br><br>]]>请查看 <![CDATA[<a href=\"http://telegram.org/faq#general\">Telegram FAQ</a>]]>：已经解答了大部分疑难问题，还有重要提示 <![CDATA[<a href=\"http://telegram.org/faq#troubleshooting\">troubleshooting</a>]]>。</string>
+  <string name="AskAQuestionInfo">请注意，Telegram 的技术支持由志愿者提供，我们会试着尽快回复，但还是可能会需要一点时间。<![CDATA[ <br><br> ]]>请见<![CDATA[<a href=\"http://telegram.org/faq#general\">Telegram 常见问题</a>]]>：当中包含了大多数问题的答案与<![CDATA[<a href=\"http://telegram.org/faq#troubleshooting\">疑难解答</a>]]>。</string>
         <string name="AskButton">询问志愿者</string>
-        <string name="TelegramFaq">Telegram FAQ</string>
+  <string name="TelegramFaq">Telegram 常见问题</string>
         <string name="TelegramFaqUrl">https://telegram.org/faq</string>
-        <string name="DeleteLocalization">删除定位？</string>
-        <string name="IncorrectLocalization">错误的定位文件</string>
-        <string name="Enabled">启用</string>
-        <string name="Disabled">禁用</string>
+  <string name="DeleteLocalization">删除本地化文件？</string>
+  <string name="IncorrectLocalization">错误的本地化文件</string>
+  <string name="Enabled">已启用</string>
+  <string name="Disabled">已禁用</string>
         <string name="NotificationsService">通知服务</string>
-        <string name="NotificationsServiceDisableInfo">如果 Google Play 服务已满足你接收信息的要求，可以禁用此通知服务。 但是我们建议你将其设置为开启状态，这样当应用在后台运行时仍能收到即时通知。</string>
-        <string name="SortBy">分类</string>
-        <string name="ImportContacts">重要联系人</string>
-        <string name="SortFirstName">名</string>
-        <string name="SortLastName">姓</string>
+  <string name="NotificationsServiceDisableInfo">如果您能收到 Google Play 服务发送的通知，您可以禁用 Telegram 的通知服务。但是我们仍然建议您保留该应用在后台运行以接收即时消息。</string>
+  <string name="SortBy">排序</string>
+  <string name="ImportContacts">导入联系人</string>
+  <string name="SortFirstName">名字</string>
+  <string name="SortLastName">姓氏</string>
         <string name="LedColor">LED 颜色</string>
-        <string name="PopupNotification">弹出通知</string>
+  <string name="PopupNotification">弹出提醒</string>
         <string name="NoPopup">不弹出</string>
-        <string name="OnlyWhenScreenOn">仅在屏幕“开启”</string>
-        <string name="OnlyWhenScreenOff">仅在屏幕“关闭”</string>
-        <string name="AlwaysShowPopup">总是弹出</string>
-        <string name="BadgeNumber">计数</string>
+  <string name="OnlyWhenScreenOn">只在屏幕打开时</string>
+  <string name="OnlyWhenScreenOff">只在屏幕关闭时</string>
+  <string name="AlwaysShowPopup">总是显示提醒</string>
+  <string name="BadgeNumber">未读数量提示</string>
         <string name="Short">短</string>
         <string name="Long">长</string>
         <string name="SystemDefault">系统默认</string>
-        <string name="SettingsDefault">设置默认</string>
-        <string name="AutomaticMediaDownload">自动媒体下载</string>
-        <string name="WhenUsingMobileData">使用移动数据时</string>
-        <string name="WhenConnectedOnWiFi">连接到 Wi-Fi 时</string>
+  <string name="SettingsDefault">默认设置</string>
+  <string name="AutomaticMediaDownload">自动下载多媒体</string>
+  <string name="WhenUsingMobileData">使用移动数据流量时</string>
+  <string name="WhenConnectedOnWiFi">接入 WiFi 时</string>
         <string name="WhenRoaming">漫游时</string>
-        <string name="NoMediaAutoDownload">无媒体</string>
+  <string name="NoMediaAutoDownload">无</string>
         <string name="SaveToGallerySettings">保存到相册</string>
         <string name="EditName">编辑姓名</string>
-        <string name="NotificationsPriority">优先</string>
+  <string name="NotificationsPriority">优先级</string>
         <string name="NotificationsPriorityDefault">默认</string>
         <string name="NotificationsPriorityLow">低</string>
         <string name="NotificationsPriorityHigh">高</string>
         <string name="NotificationsPriorityMax">最大</string>
-        <string name="RepeatNotificationsNever">永不</string>
+  <string name="RepeatNotificationsNever">从不重复通知</string>
         <string name="RepeatNotifications">重复通知</string>
-        <string name="PhoneNumberHelp">你可在此修改 Plus Messenger 绑定的号码。你的用户名和云数据 — 消息，媒体，联系人等将被移动到新的号码中。\n\n<![CDATA[<b>注意：</b>]]> 所有联系人都会将你的新号码 <![CDATA[<b>new number</b>]]> 添加至通讯录中，只要他们有旧号码并未被你屏蔽。</string>
-        <string name="PhoneNumberAlert">所有联系人都会将你的新号码添加至通讯录中，只要他们有旧号码并未被你屏蔽。</string>
-        <string name="PhoneNumberChange">改变号码</string>
-        <string name="ChangePhoneNewNumber">新号码</string>
-        <string name="ChangePhoneHelp">我们将向你的新号码发送一条附有验证码的短信。</string>
-        <string name="ChangePhoneNumberOccupied">号码为 %1$s 已被连接到新用户。请在启用新号码前删除原用户。</string>
+  <string name="PhoneNumberHelp">您可以更换您的 Telegram 手机号码，您的账号和云端数据（消息，多媒体文件，联系人等）会迁移到新的号码。\n\n<![CDATA[<b>注意：</b>]]> 所有您的 Telegram 联系人会获得您的 <![CDATA[<b>新号码</b>]]> 并加入到他们的联系人列表中，前提是他们有您的旧号码并且您没有屏蔽他们。</string>
+  <string name="PhoneNumberAlert">所有您的 Telegram 联系人会获得您的新手机号码并加入到他们的联系人列表，前提是他们有您的旧号码并且您没有屏蔽他们。</string>
+  <string name="PhoneNumberChange">更换手机号码</string>
+  <string name="ChangePhoneNewNumber">新手机号码</string>
+  <string name="ChangePhoneHelp">我们将会给您的新手机号码发送验证码短信。</string>
+  <string name="ChangePhoneNumberOccupied">手机号码 %1$s 已经绑定到 Telegram。迁移到此号码前，请先解除绑定账号。</string>
         <string name="NotificationsOther">其他</string>
   <string name="NotificationsDisabled">禁用</string>
   <string name="VibrationDisabled">禁用</string>
@@ -331,21 +360,21 @@
   <string name="SmartNotificationsWithin">时间范围</string>
   <string name="SmartNotificationsMinutes">分钟</string>
   <!--sessions view-->
-  <string name="SessionsTitle">可用的Telegram登录</string>
-  <string name="CurrentSession">当前的Telegram登录</string>
-  <string name="NoOtherSessions">没有其他的Telegram登录</string>
-  <string name="NoOtherSessionsInfo">您可以同一个手机号码从其他的手机、平板或台式机登录Telegram，所有聊天数据会即时同步。</string>
-  <string name="OtherSessions">其他的Telegram登录</string>
-  <string name="SessionsInfo">控制其他设备上的Telegram登录。</string>
-  <string name="TerminateSessionInfo">点击以中断其他Telegram登录。</string>
-  <string name="TerminateSessionQuestion">断开这个Telegram登录？</string>
-  <string name="UnofficialApp">非官方Telegram应用软件</string>
+  <string name="SessionsTitle">活跃的 Telegram 登录</string>
+  <string name="CurrentSession">当前的 Telegram 登录</string>
+  <string name="NoOtherSessions">没有其他的 Telegram 登录</string>
+  <string name="NoOtherSessionsInfo">您可以同一个手机号码从其他的手机、平板或台式机登录 Telegram，所有聊天数据会即时同步。</string>
+  <string name="OtherSessions">其他的 Telegram 登录</string>
+  <string name="SessionsInfo">控制其他设备上的 Telegram 登录。</string>
+  <string name="TerminateSessionInfo">点击以中断其他 Telegram 登录。</string>
+  <string name="TerminateSessionQuestion">断开这个 Telegram 登录？</string>
+  <string name="UnofficialApp">非官方 Telegram 应用软件</string>
   <!--passcode view-->
   <string name="Passcode">锁定码</string>
   <string name="ChangePasscode">更换锁定码</string>
-  <string name="ChangePasscodeInfo">如果您设置了锁定码，聊天界面会出现一个锁型标志。点击这个标志可以锁定或是解锁Telegram程序。\n\n注意：如果忘记了锁定码，您只能删除并重新安装Telgegram程序，而且所有的加密聊天记录会丢失。</string>
-  <string name="ChangePasscodeAlert">现在，您的聊天记录页面上将会出现锁型标志。点击此标志，将会用锁定您的Telegram程序。</string>
-  <string name="PasscodePIN">PIN码</string>
+  <string name="ChangePasscodeInfo">如果您设置了锁定码，聊天界面会出现一个锁型标志。点击这个标志可以锁定或是解锁 Telegram 程序。\n\n注意：如果忘记了锁定码，您只能删除并重新安装 Telgegram 程序，而且所有的加密聊天记录会丢失。</string>
+  <string name="ChangePasscodeAlert">现在，您的聊天记录页面上将会出现锁型标志。点击此标志，将会用锁定您的 Telegram 程序。</string>
+  <string name="PasscodePIN">PIN 码</string>
   <string name="PasscodePassword">密码</string>
   <string name="EnterCurrentPasscode">输入当前的锁定码</string>
   <string name="EnterNewFirstPasscode">输入一个锁定码</string>
@@ -359,10 +388,12 @@
   <string name="AutoLockInTime">于 %1$s 后</string>
   <string name="AutoLockDisabled">禁用自动锁定</string>
         <!--media view-->
-        <string name="NoMedia">在此会话中分享的照片和视频也可以在其他设备上访问。</string>
+  <string name="NoMedia">还没有分享的多媒体</string>
         <string name="DocumentsTitle">文件</string>
-  <string name="SharedMediaTitle">分享的资源</string>
-  <string name="NoSharedFiles">分享这个聊天的文件和文档并可在你的任何设备上查看</string>
+  <string name="SharedMediaTitle">分享多媒体文件</string>
+  <string name="LinksTitle">分享链接</string>
+  <string name="NoSharedFiles">此对话中分享的文件，可以在您任何已登录的设备中访问。</string>
+  <string name="NoSharedLinks">此对话中分享的链接，可以在您任何已登录的设备中访问。</string>
         <!--map view-->
         <string name="Map">地图</string>
         <string name="Satellite">卫星</string>
@@ -380,17 +411,17 @@
   <string name="Of">第 %1$d 张，共 %2$d 张</string>
         <string name="Gallery">相册</string>
   <string name="AllPhotos">全部图片</string>
-  <string name="AllVideo">All Videos</string>
+  <string name="AllVideo">全部视频</string>
   <string name="NoPhotos">还没有图片</string>
-  <string name="NoVideo">No videos yet</string>
+  <string name="NoVideo">还没有视频</string>
   <string name="PleaseDownload">请先下载媒体文件</string>
   <string name="NoRecentPhotos">无最近照片</string>
-  <string name="NoRecentGIFs">无最近GIF</string>
+  <string name="NoRecentGIFs">无最近 GIF</string>
   <string name="SearchImages">搜索图片</string>
   <string name="SearchImagesInfo">网络搜索</string>
-  <string name="SearchGifs">搜索GIF</string>
+  <string name="SearchGifs">搜索 GIF</string>
   <string name="SearchImagesTitle">搜索网络</string>
-  <string name="SearchGifsTitle">搜索GIF标题</string>
+  <string name="SearchGifsTitle">搜索 GIF 标题</string>
   <string name="CropImage">剪裁图片</string>
   <string name="EditImage">编辑照片</string>
   <string name="Enhance">强化</string>
@@ -410,7 +441,7 @@
   <string name="AreYouSureDeletePhoto">您确认要删除此照片？</string>
   <string name="AreYouSureDeleteVideo">您确认要删除此视频？</string>
   <string name="DiscardChanges">放弃修改？</string>
-  <string name="ClearSearch">清除搜索历史记录？</string>
+  <string name="ClearSearch">清除搜索记录？</string>
   <string name="ClearButton">清除</string>
   <string name="PickerPhotos">照片</string>
   <string name="PickerVideo">视频</string>
@@ -465,7 +496,7 @@
   <string name="PasswordRecovery">找回密码</string>
   <string name="PasswordCode">验证码</string>
   <string name="PasswordReset">密码已无效</string>
-  <string name="EnabledPasswordText">您已启用了两步验证。\n要登录您的Telegram账户，需要提供两步验证密码。</string>
+  <string name="EnabledPasswordText">您已启用了两步验证。\n要登录您的 Telegram 账号，需要提供两步验证密码。</string>
   <string name="PendingEmailText">您的找回密码 E-Mail 邮箱 %1$s 还没生效，正在等待确认。</string>
     <!--privacy settings-->
   <string name="PrivacySettings">隐私和安全</string>
@@ -473,37 +504,37 @@
     <string name="PrivacyLastSeen">最后上线</string>
     <string name="LastSeenEverybody">所有人</string>
     <string name="LastSeenContacts">我的联系人</string>
-    <string name="LastSeenNobody">没有人</string>
-    <string name="LastSeenEverybodyMinus">所有人 (-%1$d)</string>
+  <string name="LastSeenNobody">无人</string>
+  <string name="LastSeenEverybodyMinus">所有人(-%1$d)</string>
     <string name="LastSeenContactsPlus">我的联系人 (+%1$d)</string>
-    <string name="LastSeenContactsMinus">我的联系人(-%1$d)</string>
+  <string name="LastSeenContactsMinus">我的联系人 (-%1$d)</string>
     <string name="LastSeenContactsMinusPlus">我的联系人 (-%1$d, +%2$d)</string>
-    <string name="LastSeenNobodyPlus">没有人 (+%1$d)</string>
+  <string name="LastSeenNobodyPlus">无人 (+%1$d)</string>
     <string name="SecurityTitle">安全</string>
-    <string name="DeleteAccountTitle">账户自毁</string>
-    <string name="DeleteAccountIfAwayFor">如果你离开</string>
-    <string name="DeleteAccountHelp">如果在这段时间内你一次都没有登陆，你的账户将被删除，包括所有群，消息和联系人。</string>
-    <string name="DeleteAccountNowConfirmation">删除账户吗？</string>
-    <string name="LastSeenHelp">修改看到你最后登陆的人。</string>
-    <string name="LastSeenTitle">谁能看到你最后登陆时间？</string>
-    <string name="AddExceptions">增加例外</string>
-    <string name="CustomHelp">注意：你不能看到未分享最后登陆的人的最后登陆时间。只会显示最后登陆的大致时间（最近，一周内，一个月内）。</string>
-    <string name="AlwaysShareWith">永远分享给</string>
-<string name="NeverShareWith">从不分享给</string>
-<string name="CustomShareSettingsHelp">这些设置将覆盖上面的值。</string>
-<string name="AlwaysShareWithTitle">永远分享</string>
-<string name="AlwaysShareWithPlaceholder">永远分享给这些用户...</string>
-<string name="NeverShareWithTitle">从不分享</string>
-<string name="NeverShareWithPlaceholder">从不分享给这些用户...</string>
+  <string name="DeleteAccountTitle">自动删除账号</string>
+  <string name="DeleteAccountIfAwayFor">离线时间</string>
+  <string name="DeleteAccountHelp">如果您在此期间内没有登录过，您的账号以及群组、消息和联系人将全部被删除。</string>
+  <string name="DeleteAccountNowConfirmation">确认要删除您的账号？</string>
+  <string name="LastSeenHelp">修改谁可以看见您最后上线的时间。</string>
+  <string name="LastSeenTitle">谁可以看到您最后上线的时间？</string>
+  <string name="AddExceptions">添加例外</string>
+  <string name="CustomHelp">重要提示：您不愿意暴露最后上线时间的对象，他们最后的上线时间您也将无法看到。取而代之的是大概的上线时间（如：最近、一周内、一个月内）。</string>
+  <string name="AlwaysShareWith">白名单</string>
+  <string name="NeverShareWith">黑名单</string>
+  <string name="CustomShareSettingsHelp">这部分例外设置将会覆盖上面的设置。</string>
+  <string name="AlwaysShareWithTitle">白名单</string>
+  <string name="AlwaysShareWithPlaceholder">选择可以看见您上线时间的用户…</string>
+  <string name="NeverShareWithTitle">黑名单</string>
+  <string name="NeverShareWithPlaceholder">选择无法看见您上线时间的用户…</string>
 <string name="EmpryUsersPlaceholder">添加用户</string>
-<string name="PrivacyFloodControlError">抱歉，请求过多。 现不能更改隐私设置，请稍候。</string>
-<string name="ClearOtherSessionsHelp">除此设备外将其他设备登出。</string>
+  <string name="PrivacyFloodControlError">抱歉，请求过于频繁。现在无法修改隐私设置，请稍等。</string>
+  <string name="ClearOtherSessionsHelp">注销该设备以外的其它所有设备。</string>
 <string name="RemoveFromListText">长按用户以删除。</string>
     <!--edit video view-->
 <string name="EditVideo">编辑视频</string>
 <string name="OriginalVideo">原始视频</string>
 <string name="EditedVideo">编辑过的视频</string>
-<string name="SendingVideo">正在发送视频...</string>
+  <string name="SendingVideo">正在发送视频……</string>
 <string name="CompressVideo">压缩视频</string>
   <!--bot-->
   <string name="Bot">接口</string>
@@ -515,6 +546,9 @@
   <string name="BotStatusCantRead">没有读取消息权限</string>
   <string name="BotInfoTitle">本接口的作用</string>
   <string name="BotStart">开始</string>
+  <string name="BotUnblock">重启</string>
+  <string name="BotStop">停止机器人</string>
+  <string name="BotRestart">重启机器人</string>
     <!--button titles-->
   <string name="Next">下一步</string>
 <string name="Back">返回</string>
@@ -611,8 +645,8 @@
 <string name="Page3Title">免费</string>
 <string name="Page4Title">安全</string>
 <string name="Page5Title">强大</string>
-<string name="Page6Title">基于云</string>
-<string name="Page7Title">私密的</string>
+  <string name="Page6Title">基于云端</string>
+  <string name="Page7Title">私密</string>
 <string name="Page1Message">世界上 <![CDATA[<b>最快的</b>]]> 即时通讯应用。<![CDATA[<br/>]]>它 <![CDATA[<b>免费</b>]]> 并且 <![CDATA[<b>安全</b>]]>。</string>
 <string name="Page2Message"><![CDATA[<b>Plus Messenger</b>]]> 消息发送快于<![CDATA[<br/>]]>其他任何应用。</string>
 <string name="Page3Message"><![CDATA[<b>Plus Messenger</b>]]> 永久免费。没有广告。<![CDATA[<br/>]]>没有订阅费。</string>
@@ -620,7 +654,7 @@
 <string name="Page5Message"><![CDATA[<b>Plus Messenger</b>]]> 对<![CDATA[<br/>]]>你的媒体和会话没有容量限制。</string>
 <string name="Page6Message"><![CDATA[<b>Plus Messenger</b>]]> 使你<![CDATA[<br/>]]>可从多部设备上查看消息。</string>
 <string name="Page7Message"><![CDATA[<b>Plus Messenger</b>]]> 消息高度加密<![CDATA[<br/>]]>支持自毁。</string>
-<string name="StartMessaging">开始发送消息</string>
+  <string name="StartMessaging">开始聊天</string>
     <!--plural-->
   <string name="Online_zero">无人在线</string>
   <string name="Online_one">一人在线</string>
@@ -804,7 +838,7 @@
   <string name="formatDateAtTime">%1$s 的 %2$s</string>
   <!--update text-->
   <string name="updateText">Android 版的 Plus Messenger 已更新。最新版本 3.1 的新增功能有：\n\n- 在特定聊天中搜索消息内容。\n- 全新设计的附件选择菜单。从附件选择菜单中直接发送联系人资料或语音文件。\n- 改进的程序内媒体播放功能 （YouTube, Vimoe, Soundcloud 等）, 新播放器适用于大型语音文件。\n\n更多更新请查看：\nhttps://telegram.org/blog/search-and-media</string>
-  <string name="updateBuild">591</string>
+  <string name="updateBuild">594</string>
   <!--Telegram+--><!--
   <string name="updatePlusText">\n\n在 3.0.1.3 版的新功能：\n\n- 添加设置使用手机字体选项\n- 添加聊天/群组聊天内搜索聊天记录选项\n- 在设置/主题调整界面里添加标头颜色、标题颜色和标头图标颜色的设置\n- 添加主界面群组图标颜色的设置\n- 添加导航栏中头像大小的设置\n- 错误修复</string>-->
   <string name="TelegramForAndroid">Plus Messenger for Android</string>
diff --git a/TMessagesProj/src/main/res/values-zh-rTW/strings.xml b/TMessagesProj/src/main/res/values-zh-rTW/strings.xml
index 018695485..8c14206f6 100644
--- a/TMessagesProj/src/main/res/values-zh-rTW/strings.xml
+++ b/TMessagesProj/src/main/res/values-zh-rTW/strings.xml
@@ -11,9 +11,9 @@
     <string name="WrongCountry">錯誤的國碼</string>
     <!--code enter view-->
     <string name="YourCode">您的驗證碼</string>
-  <string name="SentSmsCode">我們已經傳送一則包含啟用碼的簡訊到您的電話</string>
+  <string name="SentSmsCode">我們已經傳送一則包含驗證碼的簡訊到您的電話</string>
   <string name="CallText">我們會在 %1$d:%2$02d 後改用電話語音報驗證碼</string>
-    <string name="Calling">正在撥打給您...</string>
+  <string name="Calling">正在打電話給您...</string>
     <string name="Code">驗證碼</string>
     <string name="WrongNumber">號碼不對嗎？</string>
     <string name="DidNotGetTheCode">仍未收到驗證碼？</string>
@@ -33,7 +33,7 @@
     <string name="NoChats">還未曾聊過...</string>
     <string name="NoChatsHelp">通過按下在右上角的新訊息按鈕開始傳訊\n，或點擊選單按鈕以獲得更多選項。</string>
     <string name="WaitingForNetwork">等候可用網路...</string>
-    <string name="Connecting">連接中...</string>
+  <string name="Connecting">連線中...</string>
     <string name="Updating">更新中...</string>
     <string name="NewSecretChat">新增私密聊天</string>
     <string name="AwaitingEncryption">等待 %s 上線...</string>
@@ -51,17 +51,23 @@
     <string name="SearchMessages">訊息</string>
     <string name="Search">搜尋</string>
     <string name="MuteNotifications">關閉訊息通知</string>
-    <string name="MuteFor">關閉通知 %1$s</string>
+  <string name="MuteFor">靜音 %1$s</string>
     <string name="UnmuteNotifications">恢復訊息通知</string>
     <string name="WillUnmuteIn">%1$s 後</string>
     <string name="MuteDisable">停用</string>
   <string name="Hashtags">主題標籤</string>
+  <string name="Recent">最近的</string>
     <!--broadcasts-->
     <string name="NewBroadcastList">新增廣播名單</string>
     <string name="EnterListName">輸入名單名稱</string>
     <string name="YouCreatedBroadcastList">您建立了一份廣播名單</string>
     <string name="AddRecipient">新增接收者</string>
-  <string name="KickFromBroadcast">從廣播名單中刪除</string>
+  <string name="KickFromBroadcast">從廣播名單中移除</string>
+  <!--audio view-->
+  <string name="NoAudio">為了在這裡可以看到它們，請將檔案加入到您裝置上的音樂庫。</string>
+  <string name="AttachMusic">音樂</string>
+  <string name="AudioUnknownArtist">未知的藝術家</string>
+  <string name="AudioUnknownTitle">未知的標題</string>
     <!--documents view-->
     <string name="SelectFile">選擇檔案</string>
     <string name="FreeOfTotal">剩餘 %1$s，共 %2$s</string>
@@ -78,7 +84,7 @@
     <string name="Folder">資料夾</string>
     <string name="GalleryInfo">傳送未壓縮的照片</string>
     <!--chat view-->
-    <string name="Invisible">隱身</string>
+  <string name="Invisible">隱形</string>
     <string name="Typing">正在輸入...</string>
     <string name="IsTyping">正在輸入...</string>
     <string name="AreTyping">都在輸入...</string>
@@ -86,7 +92,7 @@
   <string name="IsSendingPhoto">%1$s 正在傳送照片...</string>
   <string name="IsSendingVideo">%1$s 正在傳送影片...</string>
   <string name="IsSendingFile">%1$s 正在傳送檔案...</string>
-  <string name="RecordingAudio">正在錄音...</string>
+  <string name="RecordingAudio">正在錄製音訊...</string>
   <string name="SendingPhoto">正在傳送照片...</string>
   <string name="SendingVideoStatus">正在傳送影片...</string>
   <string name="SendingFile">正在傳送檔案...</string>
@@ -96,6 +102,7 @@
     <string name="ChatLocation">位置</string>
   <string name="ChatVideo">拍攝影片</string>
     <string name="ChatDocument">檔案</string>
+  <string name="ChatCamera">相機</string>
     <string name="NoMessages">這裡還沒有訊息...</string>
     <string name="ForwardedMessage">轉寄的訊息</string>
     <string name="From">來自</string>
@@ -107,16 +114,17 @@
     <string name="EncryptedPlaceholderTitleIncoming">%s 已邀請您加入私密聊天。</string>
     <string name="EncryptedPlaceholderTitleOutgoing">您已邀請 %s 加入私密聊天。</string>
     <string name="EncryptedDescriptionTitle">私密聊天：</string>
-  <string name="EncryptedDescription1">使用端點對端點加密</string>
+  <string name="EncryptedDescription1">使用端到端加密</string>
     <string name="EncryptedDescription2">不會在我們伺服器上留下紀錄</string>
     <string name="EncryptedDescription3">使用自動銷毀計時器</string>
     <string name="EncryptedDescription4">不允許轉寄</string>
-  <string name="YouWereKicked">您已從此群組中被刪除</string>
+  <string name="YouWereKicked">您從群組中被移除了</string>
     <string name="YouLeft">您離開了此群組</string>
     <string name="DeleteThisGroup">刪除此群組</string>
   <string name="DeleteThisChat">刪除這個聊天</string>
     <string name="SlideToCancel">滑動以取消</string>
     <string name="SaveToDownloads">儲存至下載</string>
+  <string name="SaveToMusic">儲存為音樂</string>
     <string name="ShareFile">分享</string>
     <string name="ApplyLocalizationFile">套用在地化語系檔</string>
     <string name="UnsupportedAttachment">不支援的附件</string>
@@ -125,6 +133,8 @@
   <string name="GettingLinkInfo">正在取得連結資訊...</string>
   <string name="OpenInBrowser">在瀏覽器中開啟</string>
   <string name="CopyUrl">複製網址</string>
+  <string name="SendItems">傳送 %1$s</string>
+  <string name="OpenUrlAlert">開啟網址 %1$s？</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s 將自毀計時器設定為 %2$s</string>
     <string name="MessageLifetimeChangedOutgoing">您將自毀計時器設定為 %1$s</string>
@@ -154,11 +164,11 @@
     <string name="NotificationEditedGroupPhoto">%1$s 編輯了 %2$s 群組的照片</string>
     <string name="NotificationGroupAddMember">%1$s 已邀請 %3$s 加入 %2$s 群組</string>
     <string name="NotificationGroupAddSelf">%1$s 返回到 %2$s 群組</string>
-  <string name="NotificationGroupKickMember">%1$s 將 %3$s 從 %2$s 群組中刪除</string>
-  <string name="NotificationGroupKickYou">%1$s 將您從 %2$s 群組中刪除</string>
+  <string name="NotificationGroupKickMember">%1$s 將 %3$s 從 %2$s 群組中移除</string>
+  <string name="NotificationGroupKickYou">%1$s 將您從 %2$s 群組中移除</string>
     <string name="NotificationGroupLeftMember">%1$s 已離開了 %2$s 群組</string>
     <string name="NotificationContactJoined">%1$s 加入了 Telegram！</string>
-  <string name="NotificationUnrecognizedDevice">%1$s，\n我們偵測到有新裝置 %2$s 使用您的帳號登入\n\n裝置類型：%3$s\n位置：%4$s\n\n如果這不是您，您可以到「設定」&gt;「隱私和安全」&gt;「作用中的連線」裡，中斷該連線。\n\n如果您懷疑有人未經您的同意登入您的帳號，請在「隱私和安全」的設定中，啟用「兩步驟驗證」。\n\n感謝您！\nTelegram 團隊</string>
+  <string name="NotificationUnrecognizedDevice">%1$s，\n我們偵測到有新裝置%2$s 使用您的帳號登入\n\n裝置類型：%3$s\n位置：%4$s\n\n如果這不是您，您可以到「設定」&gt;「隱私和安全」&gt;「作用中的連線」裡，中斷該連線。\n\n如果您懷疑有人未經您的同意登入您的帳號，請在「隱私和安全」的設定中，啟用「兩步驟驗證」。\n\n感謝您！\nTelegram 團隊</string>
     <string name="NotificationContactNewPhoto">%1$s 更新了個人照片</string>
   <string name="NotificationInvitedToGroupByLink">%1$s 透過邀請連結加入了%2$s群組</string>
     <string name="Reply">回覆</string>
@@ -205,7 +215,7 @@
     <string name="AddMember">新增成員</string>
     <string name="DeleteAndExit">刪除並離開群組</string>
     <string name="Notifications">通知</string>
-  <string name="KickFromGroup">從群組中刪除</string>
+  <string name="KickFromGroup">從群組中移除</string>
     <!--contact info view-->
     <string name="ShareContact">分享</string>
     <string name="AddContact">加入</string>
@@ -242,17 +252,17 @@
     <string name="ErrorOccurred">發生錯誤。</string>
   <!--stickers view-->
   <string name="Stickers">貼圖</string>
-  <string name="StickersInfo">歡迎畫家使用我們的 @Stickers Bot 加入他們自己的貼圖集。\n\n用戶可以通過點擊它們加入貼圖，並選擇 \"加入到貼圖\"。</string>
+  <string name="StickersInfo">歡迎畫家使用我們的 @Stickers 機器人來加入他們自己的貼圖套件。\n\n用戶可以通過點擊它們加入貼圖，並選擇 \"加入到貼圖\"。</string>
   <string name="AddStickers">加入貼圖</string>
   <string name="AddToStickers">加入到貼圖</string>
   <string name="AddStickersNotFound">沒有找到貼圖</string>
-  <string name="StickersRemoved">貼圖已刪除</string>
+  <string name="StickersRemoved">貼圖已移除</string>
   <string name="AddStickersInstalled">新貼圖已加入</string>
   <string name="StickersHide">隱藏</string>
   <string name="StickersShow">顯示</string>
   <string name="StickersShare">分享</string>
   <string name="StickersCopy">複製連結</string>
-  <string name="StickersRemove">刪除</string>
+  <string name="StickersRemove">移除</string>
   <string name="NoStickers">還沒有貼圖</string>
     <!--settings view-->
     <string name="ResetNotificationsText">重設所有通知設定為預設值</string>
@@ -272,16 +282,16 @@
     <string name="InAppVibrate">應用程式內震動</string>
     <string name="Vibrate">震動</string>
     <string name="InAppPreview">應用程式內預覽</string>
-    <string name="Reset">重置</string>
+  <string name="Reset">重設</string>
     <string name="ResetAllNotifications">重設所有通知</string>
-    <string name="UndoAllCustom">重設您對所有聯絡人與群組調整的自訂通知設定</string>
+  <string name="UndoAllCustom">復原您對所有聯絡人與群組調整的自訂通知設定</string>
     <string name="NotificationsAndSounds">通知與音效</string>
     <string name="BlockedUsers">被封鎖的用戶</string>
     <string name="LogOut">登出</string>
     <string name="NoSound">無音效</string>
     <string name="Default">預設</string>
     <string name="Support">支援</string>
-  <string name="OnlyIfSilent">只在若是沉默</string>
+  <string name="OnlyIfSilent">只有當沉默</string>
     <string name="ChatBackground">聊天室背景</string>
     <string name="MessagesSettings">訊息</string>
     <string name="SendByEnter">按下 Enter 就送出訊息</string>
@@ -290,7 +300,7 @@
     <string name="ContactJoined">聯絡人加入 Telegram</string>
     <string name="Pebble">PEBBLE</string>
     <string name="Language">語言</string>
-    <string name="AskAQuestionInfo">請注意，Telegram 的技術支援是由志工提供，我們會試著盡快回覆但還是可能需要一點時間。<![CDATA[<br><br>]]>請見 <![CDATA[<a href=\"http://telegram.org/faq#general\">Telegram FAQ</a>]]>: 當中包含了大多數問題的答案與<![CDATA[<a href=\"http://telegram.org/faq#troubleshooting\">疑難排解</a>]]>時的重要方式。</string>
+  <string name="AskAQuestionInfo">請留意，Telegram 的技術支援是由志工提供。我們會試著盡快回覆，但還是需要一點時間。<![CDATA[<br><br>]]>請看看  <![CDATA[<a href=\"https://telegram.org/faq#general\">Telegram FAQ</a>]]>：它回答了大部分的問題及提供了對於<![CDATA[<a href=\"https://telegram.org/faq#troubleshooting\">故障排除</a>]]>的重要提示。</string>
     <string name="AskButton">詢問志工</string>
     <string name="TelegramFaq">Telegram FAQ</string>
     <string name="TelegramFaqUrl">https://telegram.org/faq</string>
@@ -299,7 +309,7 @@
     <string name="Enabled">啟用</string>
   <string name="Disabled">停用</string>
     <string name="NotificationsService">通知服務</string>
-    <string name="NotificationsServiceDisableInfo">如 Google Play 服務能夠讓你收到通知，您可以停用通知服務。但是我們建議您把它啟用，以保持應用程式於背景運作及接收即時通知。</string>
+  <string name="NotificationsServiceDisableInfo">如 Google Play 服務能夠讓您收到通知，您可以停用通知服務。但是我們建議您把它啟用，以保持應用程式於背景運作及接收即時通知。</string>
     <string name="SortBy">排序</string>
     <string name="ImportContacts">匯入聯絡人</string>
     <string name="SortFirstName">名字</string>
@@ -329,7 +339,7 @@
     <string name="NotificationsPriorityMax">最大</string>
     <string name="RepeatNotificationsNever">從未</string>
     <string name="RepeatNotifications">重複通知</string>
-    <string name="PhoneNumberHelp">您可以在這裡改變 Telegram 所綁定的電話號碼。您的帳號和所有您的雲端資料 — 訊息、媒體、聯絡人...等，將被移動到新的號碼。\n\n<![CDATA[<b>重要提示：</b>]]> 您的所有 Telegram 聯絡人將取得您的 <![CDATA[<b>新號碼</b>]]> ，並加入到他們的手機通訊錄中，條件是他們有您的舊號碼，且您沒有在 Telegram 中封鎖他們。</string>
+  <string name="PhoneNumberHelp">您可以在這裡改變 Telegram 所綁定的電話號碼。您的帳號和所有您的雲端資料 — 訊息、媒體、聯絡人...等，將被移動到新的號碼。\n\n<![CDATA[<b>重要提示：</b>]]> 您的所有 Telegram 聯絡人將取得您的<![CDATA[<b>新號碼</b>]]> ，並加入到他們的手機通訊錄中，條件是他們有您的舊號碼，且您沒有在 Telegram 中封鎖他們。</string>
     <string name="PhoneNumberAlert">您的所有 Telegram 聯絡人將取得您的新號碼，並加入到他們的手機通訊錄中，條件是他們有您的舊號碼，且您沒有在 Telegram 中封鎖他們。</string>
     <string name="PhoneNumberChange">變更號碼</string>
     <string name="ChangePhoneNewNumber">新號碼</string>
@@ -342,6 +352,7 @@
     <string name="RepeatDisabled">關閉</string>
   <string name="InChatSound">聊天音效</string>
   <string name="SoundDefault">預設</string>
+  <string name="VibrationDefault">預設</string>
   <string name="SmartNotifications">智慧型通知</string>
   <string name="SmartNotificationsDisabled">停用</string>
   <string name="SmartNotificationsInfo">最大聲 %1$s 不超過 %2$s</string>
@@ -353,7 +364,7 @@
   <string name="SessionsTitle">作用中的連線</string>
   <string name="CurrentSession">目前的連線</string>
   <string name="NoOtherSessions">沒有其他作用中的連線</string>
-  <string name="NoOtherSessionsInfo">您可以透過使用同一組電話號碼，在其他手提電話、平板電腦及桌面裝置上登入 Telegram。您的所有數據均會立即同步。</string>
+  <string name="NoOtherSessionsInfo">您可以透過使用同一組電話號碼，在其他行動、平板及桌面裝置上登入 Telegram。您的所有數據均會立即同步。</string>
   <string name="OtherSessions">作用中的連線</string>
   <string name="SessionsInfo">控制您在其他裝置上的連線。</string>
   <string name="TerminateSessionInfo">請點擊要中斷的連線。</string>
@@ -379,9 +390,11 @@
   <string name="AutoLockDisabled">停用</string>
     <!--media view-->
   <string name="NoMedia">在此對話群組內分享照片與影片，且只能透過您已登入的裝置來存取。</string>
-    <string name="DocumentsTitle">多個檔案</string>
+  <string name="DocumentsTitle">共享的檔案</string>
     <string name="SharedMediaTitle">共享的媒體</string>
+  <string name="LinksTitle">共享的連結</string>
   <string name="NoSharedFiles">在此對話群組內分享檔案與文件，且只能透過您已登入的裝置來存取。</string>
+  <string name="NoSharedLinks">在這個聊天中分享連結，然後在任何裝置上存取它們。</string>
     <!--map view-->
     <string name="Map">地圖</string>
     <string name="Satellite">衛星</string>
@@ -439,53 +452,53 @@
   <!--password view-->
   <string name="TwoStepVerification">兩步驟驗證</string>
   <string name="SetAdditionalPassword">設定額外的密碼</string>
-  <string name="SetAdditionalPasswordInfo">您可以設定當您登入到一個新裝置上時，除了輸入透過簡訊取得的驗證碼外，另外要輸入的密碼。</string>
+  <string name="SetAdditionalPasswordInfo">您可以設定當您使用一個新裝置登入時，除了透過簡訊取得的驗證碼外，另外要輸入的密碼。</string>
   <string name="YourPassword">您的密碼</string>
   <string name="PleaseEnterCurrentPassword">請輸入您的密碼</string>
   <string name="PleaseEnterFirstPassword">輸入密碼</string>
   <string name="PleaseEnterPassword">請輸入您的新密碼</string>
   <string name="PleaseReEnterPassword">請再次輸入您的密碼</string>
-  <string name="RecoveryEmail">恢復用的電子郵件</string>
+  <string name="RecoveryEmail">復原用的電子郵件</string>
   <string name="YourEmail">您的電子郵件</string>
   <string name="YourEmailInfo">請添加您的有效電子郵件。這是找回忘記的密碼唯一的途徑。</string>
   <string name="YourEmailSkip">跳過</string>
   <string name="YourEmailSkipWarning">警告</string>
   <string name="YourEmailSkipWarningText">糟糕，那是很嚴重的。\n\n如果您忘記密碼，您將無法存取您的 Telegram 帳號。也就沒有辦法恢復它了。</string>
-  <string name="YourEmailAlmostThere">差不多了！</string>
+  <string name="YourEmailAlmostThere">快完成了！</string>
   <string name="YourEmailAlmostThereText">請檢查您的電子郵件 (別忘了垃圾郵件資料夾)，以完成兩步驟驗證設定。</string>
   <string name="YourPasswordSuccess">成功了！</string>
   <string name="YourPasswordSuccessText">您用於兩步驟驗證的密碼現在起作用了。</string>
   <string name="ChangePassword">變更密碼</string>
   <string name="TurnPasswordOff">關閉密碼</string>
-  <string name="SetRecoveryEmail">設定恢復用的電子郵件</string>
-  <string name="ChangeRecoveryEmail">變更恢復用的電子郵件</string>
+  <string name="SetRecoveryEmail">設定復原用的電子郵件</string>
+  <string name="ChangeRecoveryEmail">變更復原用的電子郵件</string>
   <string name="TurnPasswordOffQuestion">您確定要停用密碼？</string>
   <string name="PasswordHint">密碼提示</string>
   <string name="PasswordHintText">請為您的密碼建立一個提示</string>
   <string name="PasswordDoNotMatch">密碼並不相符</string>
-  <string name="AbortPassword">終止兩步驟驗證設定</string>
+  <string name="AbortPassword">中止兩步驟驗證設定</string>
   <string name="EmailPasswordConfirmText">請按照以下步驟來完成兩步驟驗證設定：\n\n1. 檢查您的電子郵件 (別忘了垃圾郵件資料夾) \n%1$s\n\n2. 點擊驗證連結。</string>
   <string name="PasswordAsHintError">提示必須跟您的密碼不同</string>
   <string name="PasswordEmailInvalid">無效的電子郵件</string>
   <string name="RestorePasswordNoEmailTitle">很抱歉</string>
-  <string name="RestorePasswordNoEmailText">由於您在設定密碼時沒有提供恢復用的電子郵件，您剩餘的選項就是要記住您的密碼，或是重設您的帳號。</string>
-  <string name="RestoreEmailSent">我們已經傳送一組恢復用的驗證碼到您所提供的電子郵件：\n\n%1$s</string>
+  <string name="RestorePasswordNoEmailText">由於您在設定密碼時沒有提供復原用的電子郵件，您剩餘的選項就是要記住您的密碼，或是重設您的帳號。</string>
+  <string name="RestoreEmailSent">我們已經傳送一組復原用的驗證碼到您所提供的電子郵件：\n\n%1$s</string>
   <string name="RestoreEmailSentInfo">請檢查您的電子郵件，並輸入我們在這裡傳送的6位數驗證碼。</string>
   <string name="RestoreEmailTrouble">無法存取您的電子郵件 %1$s？</string>
   <string name="RestoreEmailTroubleText">如果無法恢復存取您的電子郵件，您剩下的選項就是要記住您的密碼或重設您的帳號。</string>
-  <string name="ResetMyAccount">重置我的帳號</string>
+  <string name="ResetMyAccount">重設我的帳號</string>
   <string name="ResetMyAccountText">如果您繼續重設您的帳號，您將失去所有的聊天紀錄和訊息，連同您所分享過的任何媒體和檔案。</string>
   <string name="ResetMyAccountWarning">警告</string>
-  <string name="ResetMyAccountWarningText">這動作無法還原。\n\n如果您重設您的帳號，您的所有訊息和聊天紀錄都將被刪除。</string>
-  <string name="ResetMyAccountWarningReset">重置</string>
+  <string name="ResetMyAccountWarningText">這動作無法被復原。\n\n如果您重設您的帳號，您的所有訊息和聊天紀錄都將被刪除。</string>
+  <string name="ResetMyAccountWarningReset">重設</string>
   <string name="LoginPassword">密碼</string>
   <string name="LoginPasswordText">您已經啟用了「兩步驟驗證」，因此您的帳號被一個額外的密碼所保護。</string>
-  <string name="ForgotPassword">忘記密碼了嗎？</string>
-  <string name="PasswordRecovery">密碼恢復</string>
+  <string name="ForgotPassword">忘記密碼了？</string>
+  <string name="PasswordRecovery">密碼復原</string>
   <string name="PasswordCode">驗證碼</string>
   <string name="PasswordReset">密碼不再有效</string>
   <string name="EnabledPasswordText">您已啟動了「兩步驟驗證」。\n您需要提供您先前設立的密碼，才可以登入您的 Telegram 帳號。</string>
-  <string name="PendingEmailText">您的恢復用電子郵件 %1$s 還沒有起作用，正等候確認。</string>
+  <string name="PendingEmailText">您的復原用電子郵件 %1$s 還沒有起作用，正等候確認。</string>
     <!--privacy settings-->
     <string name="PrivacySettings">隱私和安全</string>
     <string name="PrivacyTitle">隱私</string>
@@ -524,6 +537,19 @@
   <string name="EditedVideo">編輯過的影片</string>
     <string name="SendingVideo">傳送影片中…</string>
   <string name="CompressVideo">壓縮影片</string>
+  <!--bot-->
+  <string name="Bot">機器人</string>
+  <string name="BotShare">分享</string>
+  <string name="BotInvite">加入到群組</string>
+  <string name="BotSettings">設定</string>
+  <string name="BotHelp">幫助</string>
+  <string name="BotStatusRead">可以存取訊息</string>
+  <string name="BotStatusCantRead">沒有存取訊息權限</string>
+  <string name="BotInfoTitle">這個機器人可以做什麼？</string>
+  <string name="BotStart">開始</string>
+  <string name="BotUnblock">重新啟動</string>
+  <string name="BotStop">讓機器人停止</string>
+  <string name="BotRestart">重啟機器人</string>
     <!--button titles-->
     <string name="Next">下一步</string>
     <string name="Back">上一步</string>
@@ -548,25 +574,25 @@
     <!--messages-->
   <string name="ActionInviteYou">您透過邀請連結加入了群組</string>
   <string name="ActionInviteUser">un1 透過邀請連結加入了群組</string>
-  <string name="ActionKickUser">un1 刪除了 un2</string>
+  <string name="ActionKickUser">un1 移除了 un2</string>
     <string name="ActionLeftUser">un1 離開了群組</string>
     <string name="ActionAddUser">un1 加入了 un2</string>
-  <string name="ActionRemovedPhoto">un1 刪除了群組照片</string>
+  <string name="ActionRemovedPhoto">un1 移除了群組照片</string>
     <string name="ActionChangedPhoto">un1 變更了群組照片</string>
     <string name="ActionChangedTitle">un1 將群組名稱變更為 un2</string>
     <string name="ActionCreateGroup">un1 建立了群組</string>
-  <string name="ActionYouKickUser">您刪除了 un2</string>
+  <string name="ActionYouKickUser">您移除了 un2</string>
     <string name="ActionYouLeftUser">您離開了群組</string>
     <string name="ActionYouAddUser">您加入了 un2</string>
-  <string name="ActionYouRemovedPhoto">您刪除了群組照片</string>
+  <string name="ActionYouRemovedPhoto">您移除了群組照片</string>
     <string name="ActionYouChangedPhoto">您變更了群組照片</string>
     <string name="ActionYouChangedTitle">您將群組名稱變更為 un2</string>
     <string name="ActionYouCreateGroup">您建立了群組</string>
-  <string name="ActionKickUserYou">un1 刪除了您</string>
+  <string name="ActionKickUserYou">un1 移除了您</string>
     <string name="ActionAddUserYou">un1 已將您加入</string>
     <string name="ActionAddUserSelf">un1 返回到群組</string>
   <string name="ActionAddUserSelfYou">您返回到群組</string>
-    <string name="UnsuppotedMedia">您使用的 Telegram 版本無法顯示此訊息。請更新應用程式: http://telegram.org/update</string>
+  <string name="UnsuppotedMedia">您使用的 Telegram 版本不支援此訊息。請更新應用程式： https://telegram.org/update</string>
     <string name="AttachPhoto">照片</string>
     <string name="AttachVideo">影片</string>
     <string name="AttachLocation">位置</string>
@@ -582,7 +608,7 @@
     <string name="CodeExpired">驗證碼已過期，請重新登入</string>
     <string name="FloodWait">嘗試太多次了，請稍後再試</string>
   <string name="FloodWaitTime">嘗試太多次了，請於 %1$s 後再試</string>
-    <string name="InvalidCode">驗證碼無效</string>
+  <string name="InvalidCode">無效驗證碼</string>
     <string name="InvalidFirstName">姓氏無效</string>
     <string name="InvalidLastName">名字無效</string>
     <string name="Loading">載入中……</string>
@@ -591,7 +617,10 @@
     <string name="NoHandleAppInstalled">您沒有任何應用程式可處理 \'%1$s\' 的檔案類型，請先安裝一個以繼續</string>
     <string name="InviteUser">這位聯絡人尚未使用 Telegram，要傳送邀請訊息嗎？</string>
     <string name="AreYouSure">您確定嗎？</string>
-    <string name="AddToTheGroup">將 %1$s 加入群組？\n\n最後要轉寄的訊息數目：</string>
+  <string name="AddToTheGroupTitle">將 %1$s 加入 %2$s 群組？</string>
+  <string name="AddToTheGroupForwardCount">最後要轉寄的訊息數：</string>
+  <string name="AddToTheGroup">加入 %1$s 到群組？</string>
+  <string name="UserAlreadyInGroup">此用戶已是此群組的一員</string>
     <string name="ForwardMessagesTo">轉寄訊息給 %1$s？</string>
     <string name="SendMessagesTo">傳送訊息給 %1$s？</string>
     <string name="AreYouSureLogout">您確定要登出？\n\n請注意，您可以無縫地在所有裝置上同時使用 Telegram。 請記住，登出會讓您所有的私密聊天內容丟失。</string>
@@ -609,6 +638,8 @@
     <string name="SendMessagesToGroup">傳送訊息給 %1$s？</string>
     <string name="ForwardMessagesToGroup">轉寄訊息給 %1$s？</string>
     <string name="FeatureUnavailable">很抱歉，此功能目前無法在您的國家使用。</string>
+  <string name="NoUsernameFound">沒有 Telegram 帳號使用這個用戶名稱。</string>
+  <string name="BotCantJoinGroups">這個機器人無法加入群組。</string>
    <!--Intro view-->
     <string name="Page1Title">Plus Messenger</string>
     <string name="Page2Title">快速</string>
@@ -805,10 +836,10 @@
     <string name="formatterWeek">EEE</string>
     <string name="formatterDay24H">HH:mm</string>
     <string name="formatterDay12H">a h:mm</string>
-    <string name="formatDateAtTime">%1$s 於時間 %2$s</string>
+  <string name="formatDateAtTime">於時間 %1$s  %2$s</string>
   <!--update text-->
-  <string name="updateText">Android 版的 Plus Messenger 已經更新。在版本 3.1 的新功能：\n\n- 在特定的聊天室裡搜尋訊息。\n- 完全重新設計的附件選單。從附件選單直接傳送「聯絡人」資訊和「音訊檔」。\n- 改進的程式內媒體播放( YouTube、Vimoe、SoundCloud 等 )，新的播放器適用於大型音訊檔。\n\n更多關於這次的更新：\nhttps://telegram.org/blog/search-and-media</string>
-  <string name="updateBuild">591</string>
+  <string name="updateText">Android 版的 Plus Messenger 已經更新。在版本 3.1.3 中的新功能：\n\n- 在聊天室資訊中新增「共享的連結」部份\n- 程式內預覽照片連結</string>
+  <string name="updateBuild">594</string>
   <!--Telegram+--><!--
   <string name="updatePlusText">
 \n\n在 3.1.1.9 版的新功能：\n\n- 新的模組在聊天畫面顯示擁有的大頭照\n- 加入新的泡泡邊緣 (感謝 Edwin Macalopu)\n- 錯誤修復</string>-->
diff --git a/TMessagesProj/src/main/res/values/strings.xml b/TMessagesProj/src/main/res/values/strings.xml
index bac976144..682851e42 100644
--- a/TMessagesProj/src/main/res/values/strings.xml
+++ b/TMessagesProj/src/main/res/values/strings.xml
@@ -1,5 +1,4 @@
-<?xml version="1.0" encoding="utf-8"?>
-
+<?xml version='1.0' encoding='UTF-8'?>
 <resources>
     <string name="AppName">Plus Messenger</string>
     <string name="ShortAppName">Plus</string>
@@ -136,6 +135,7 @@
     <string name="OpenInBrowser">Open in Browser</string>
     <string name="CopyUrl">Copy URL</string>
     <string name="SendItems">Send %1$s</string>
+    <string name="OpenUrlAlert">Open url %1$s?</string>
     <!--notification-->
     <string name="MessageLifetimeChanged">%1$s set the self-destruct timer to %2$s</string>
     <string name="MessageLifetimeChangedOutgoing">You set the self-destruct timer to %1$s</string>
@@ -548,6 +548,9 @@
     <string name="BotStatusCantRead">has no access to messages</string>
     <string name="BotInfoTitle">What can this bot do?</string>
     <string name="BotStart">START</string>
+    <string name="BotUnblock">RESTART</string>
+    <string name="BotStop">Stop bot</string>
+    <string name="BotRestart">Restart bot</string>
     <!--button titles-->
     <string name="Next">Next</string>
     <string name="Back">Back</string>
@@ -836,10 +839,10 @@
     <string name="formatterDay12H">h:mm a</string>
     <string name="formatDateAtTime">%1$s at %2$s</string>
     <!--update text-->
-    <string name="updateText">Plus Messenger for Android has been updated. New in version 3.1.2:\n\n- Recent search results\n- Tap and hold sticker to preview before sending</string>
-    <string name="updateBuild">591</string>
+    <string name="updateText">Plus Messenger for Android has been updated. New in version 3.1.3:\n\n- New \'Shared Links\' section in chat info\n- In-app preview for links to photos</string>
+    <string name="updateBuild">594</string>
     <!--Telegram+-->
-    <string name="updatePlusText">\n\nNew in 3.1.2.0:\n\n- Bug fixes</string>
+    <string name="updatePlusText">\n\nNew in version 3.1.3.0:\n\n- New MOD to change default emoji tab icon color\n- Bug fixes</string>
     <string name="TelegramForAndroid">Plus Messenger for Android</string>
     <string name="Theming">Theming</string>
     <string name="colorHexInvalid">Invalid color hex code!</string>
@@ -884,7 +887,8 @@
     <string name="EditTextSize">Text input size</string>
     <string name="EditTextBGColor">Text input background color</string>
     <string name="EmojiViewBGColor">Emoji background color</string>
-    <string name="EmojiViewTabColor">Emoji tab color</string>
+    <string name="EmojiViewTabColor">Emoji selected tab color</string>
+    <string name="EmojiViewTabIconColor">Emoji tab icon color</string>
     <string name="OnlineColor">Online color</string>
     <string name="ChatMusic">Music</string>
     <string name="SaveTheme">Save theme</string>
