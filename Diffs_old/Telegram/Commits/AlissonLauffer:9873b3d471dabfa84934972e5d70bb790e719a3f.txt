diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index 497fa0019..b5263e17a 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -12718,6 +12718,9 @@ private void createMenu(View v, boolean single, boolean listView, float x, float
                                     icons.add(R.drawable.msg_gallery);
                                 }
                             }
+                            items.add("Clear from cache");
+                            options.add(27);
+                            icons.add(R.drawable.msg_delete);
                         } else if (type == 5) {
                             items.add(LocaleController.getString("ApplyLocalizationFile", R.string.ApplyLocalizationFile));
                             options.add(5);
@@ -12748,6 +12751,9 @@ private void createMenu(View v, boolean single, boolean listView, float x, float
                             items.add(LocaleController.getString("ShareFile", R.string.ShareFile));
                             options.add(6);
                             icons.add(R.drawable.msg_shareout);
+                            items.add("Clear from cache");
+                            options.add(27);
+                            icons.add(R.drawable.msg_delete);
                         } else if (type == 7) {
                             if (selectedObject.isMask()) {
                                 items.add(LocaleController.getString("AddToMasks", R.string.AddToMasks));
@@ -12867,6 +12873,9 @@ private void createMenu(View v, boolean single, boolean listView, float x, float
                                 options.add(4);
                                 icons.add(R.drawable.msg_gallery);
                             }
+                            items.add("Clear from cache");
+                            options.add(27);
+                            icons.add(R.drawable.msg_delete);
                         } else if (type == 5) {
                             items.add(LocaleController.getString("ApplyLocalizationFile", R.string.ApplyLocalizationFile));
                             options.add(5);
@@ -13698,6 +13707,38 @@ private void processSelectedOption(int option) {
                 showDialog(builder.create());
                 break;
             }
+            case 27: {
+                if (Build.VERSION.SDK_INT >= 23 && getParentActivity().checkSelfPermission(Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {
+                    getParentActivity().requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 4);
+                    selectedObject = null;
+                    selectedObjectGroup = null;
+                    selectedObjectToEditCaption = null;
+                    return;
+                }
+                String fileName = FileLoader.getDocumentFileName(selectedObject.getDocument());
+                if (TextUtils.isEmpty(fileName)) {
+                    fileName = selectedObject.getFileName();
+                }
+                String path = selectedObject.messageOwner.attachPath;
+                if (path != null && path.length() > 0) {
+                    File temp = new File(path);
+                    if (!temp.exists()) {
+                        path = null;
+                    }
+                }
+                if (path == null || path.length() == 0) {
+                    path = FileLoader.getPathToMessage(selectedObject.messageOwner).toString();
+                }
+                File file = new File(path);
+                boolean isDeleted = file.delete();
+                if (isDeleted) {
+                    Toast.makeText(getParentActivity(), "File deleted from cache successfully.", Toast.LENGTH_SHORT).show();
+                }
+                else {
+                    Toast.makeText(getParentActivity(), "Looks like something went wrong.", Toast.LENGTH_SHORT).show();
+                }
+                break;
+            }
             case 100: {
                 if (!checkSlowMode(chatActivityEnterView.getSendButton())) {
                     if (getMediaController().isPlayingMessage(selectedObject)) {
