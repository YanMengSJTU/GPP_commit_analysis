diff --git a/TMessagesProj/jni/utils.h b/TMessagesProj/jni/utils.h
index 34805a1d7..7674247f0 100644
--- a/TMessagesProj/jni/utils.h
+++ b/TMessagesProj/jni/utils.h
@@ -17,12 +17,20 @@
 #define LOGV(...)
 #endif
 
+#ifdef __cplusplus
+// Use std::min/std::max from <algorithm> rather than the macros used for C
+// since the macros will collide with things like numeric_limits::max.
+#include <algorithm>
+using std::min;
+using std::max;
+#else
 #ifndef max
 #define max(x, y) ((x) > (y)) ? (x) : (y)
 #endif
 #ifndef min
 #define min(x, y) ((x) < (y)) ? (x) : (y)
 #endif
+#endif
 
 void throwException(JNIEnv *env, char *format, ...);
 
