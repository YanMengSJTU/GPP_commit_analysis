diff --git a/TMessagesProj/src/main/java/com/teamjihu/ThemeManager.java b/TMessagesProj/src/main/java/com/teamjihu/ThemeManager.java
index cdf9f2ad8..6f7e5acac 100644
--- a/TMessagesProj/src/main/java/com/teamjihu/ThemeManager.java
+++ b/TMessagesProj/src/main/java/com/teamjihu/ThemeManager.java
@@ -1,18 +1,18 @@
 package com.teamjihu;
 
-import java.util.ArrayList;
-import java.util.List;
-
+import android.content.Context;
+import android.content.SharedPreferences;
 import android.content.pm.PackageInfo;
 import android.content.pm.PackageManager;
 import android.content.pm.PackageManager.NameNotFoundException;
 import android.content.pm.PermissionInfo;
 import android.content.res.Resources;
 import android.graphics.drawable.Drawable;
-import android.content.Context;
-import android.content.SharedPreferences;
 import android.view.View;
 
+import java.util.ArrayList;
+import java.util.List;
+
 public class ThemeManager {
     private static final String CUSTOM_PERMISSION = "com.teamjihu.theme.telegram.v1";
     private static final String DEFAULT_THEME_PACKAGE = "org.telegram.messenger.phonethemeshop";
@@ -162,10 +162,12 @@ public int getColor(String name) {
 	}
 
     public void setBackgroundDrawable( View v, Drawable d ) {
-        if(android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.JELLY_BEAN)
-            v.setBackgroundDrawable(d);
-        else
-            v.setBackground(d);
+        if ( v != null && d != null ) {
+            if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.JELLY_BEAN)
+                v.setBackgroundDrawable(d);
+            else
+                v.setBackground(d);
+        }
     }
 
     public Drawable getIconImage(Resources res, String emoticonPkg) {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index b3a1228d5..b1089ab6a 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -1097,10 +1097,15 @@ public void showZzalListView(boolean bShow) {
         zzalListView.showZzalListView(bShow);
     }
     public void toggleZzalListView() {
-        if(zzalListView.isShown())
-            showZzalListView(false);
-        else
-            showZzalListView(true);
+        if(zzalListView.isShown()) {
+            zzalListView.showZzalListView(false);
+        }else {
+            zzalListView.showZzalListView(true);
+        }
+    }
+
+    public void changeSwipeBackEnabled( boolean value ) {
+        swipeBackEnabled = value;
     }
 
     public void didSelectPhotos(ArrayList<String> photos) {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Views/ZzalListView.java b/TMessagesProj/src/main/java/org/telegram/ui/Views/ZzalListView.java
index e2f98ab34..c64309698 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Views/ZzalListView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Views/ZzalListView.java
@@ -76,6 +76,7 @@ public void showZzalListView(boolean bShow) {
         } else {
             S3Util.swipeView(zzalLayout, screenWidth, null, 300);
         }
+        chatActivity.changeSwipeBackEnabled(!bShow);
     }
 
     public class JsInterface {
