diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java b/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
index fde2438ee..a06fc8ec0 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/SendMessagesHelper.java
@@ -1091,7 +1091,16 @@ public void sendScreenshotMessage(TLRPC.User user, int messageId, TLRPC.Message
         performSendMessageRequest(req, newMsgObj, null, null, null, false);
     }
 
+    public void sendGifWithCaption(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject, boolean notify, int scheduleDate, String caption) {
+        if (caption.startsWith("@gif")) caption = "";
+        sendSticker(document, peer, replyingMessageObject, parentObject, notify, scheduleDate, caption);
+    }
+
     public void sendSticker(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject, boolean notify, int scheduleDate) {
+        sendSticker(document, peer, replyingMessageObject, parentObject, notify, scheduleDate, null);
+    }
+
+    public void sendSticker(TLRPC.Document document, long peer, MessageObject replyingMessageObject, Object parentObject, boolean notify, int scheduleDate, String caption) {
         if (document == null) {
             return;
         }
@@ -1153,7 +1162,7 @@ public void sendSticker(TLRPC.Document document, long peer, MessageObject replyi
             document = newDocument;
         }
         if (document instanceof TLRPC.TL_document) {
-            sendMessage((TLRPC.TL_document) document, null, null, peer, replyingMessageObject, null, null, null, null, notify, scheduleDate, 0, parentObject);
+            sendMessage((TLRPC.TL_document) document, null, null, peer, replyingMessageObject, caption, null, null, null, notify, scheduleDate, 0, parentObject);
         }
     }
 
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
index 68a675a83..036c1cafe 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Components/ChatActivityEnterView.java
@@ -4203,8 +4203,9 @@ public void onGifSelected(View view, Object gif, Object parent, boolean notify,
                     }
                     if (gif instanceof TLRPC.Document) {
                         TLRPC.Document document = (TLRPC.Document) gif;
-                        SendMessagesHelper.getInstance(currentAccount).sendSticker(document, dialog_id, replyingMessageObject, parent, notify, scheduleDate);
+                        SendMessagesHelper.getInstance(currentAccount).sendGifWithCaption(document, dialog_id, replyingMessageObject, parent, notify, scheduleDate, messageEditText.getText().toString());
                         MediaDataController.getInstance(currentAccount).addRecentGif(document, (int) (System.currentTimeMillis() / 1000));
+                        messageEditText.setText("");
                         if ((int) dialog_id == 0) {
                             accountInstance.getMessagesController().saveGif(parent, document);
                         }
