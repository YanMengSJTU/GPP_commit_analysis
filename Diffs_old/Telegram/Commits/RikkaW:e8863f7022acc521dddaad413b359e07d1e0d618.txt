diff --git a/TMessagesProj/src/main/java/org/telegram/ui/Cells/DividerCell.java b/TMessagesProj/src/main/java/org/telegram/ui/Cells/DividerCell.java
index 5dd69e410..eb5656c3e 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/Cells/DividerCell.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/Cells/DividerCell.java
@@ -24,9 +24,7 @@
     public DividerCell(Context context) {
         super(context);
         if (paint == null) {
-            paint = new Paint();
-            paint.setColor(ContextCompat.getColor(context, R.color.divider));
-            paint.setStrokeWidth(1);
+            createPaint();
         }
     }
 
@@ -34,6 +32,12 @@ public static void resetDivider() {
         paint = null;
     }
 
+    private void createPaint() {
+        paint = new Paint();
+        paint.setColor(ContextCompat.getColor(getContext(), R.color.divider));
+        paint.setStrokeWidth(1);
+    }
+
     @Override
     protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
         setMeasuredDimension(MeasureSpec.getSize(widthMeasureSpec), AndroidUtilities.dp(16) + 1);
@@ -41,6 +45,9 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
 
     @Override
     protected void onDraw(Canvas canvas) {
+        if (paint == null) {
+            createPaint();
+        }
         canvas.drawLine(getPaddingLeft(), AndroidUtilities.dp(8), getWidth() - getPaddingRight(), AndroidUtilities.dp(8), paint);
     }
 }
