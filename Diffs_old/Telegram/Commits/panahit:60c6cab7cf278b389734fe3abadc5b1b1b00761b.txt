diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/ConnectionsManager.java b/TMessagesProj/src/main/java/org/telegram/messenger/ConnectionsManager.java
index 19bd2c1b2..ce85bd5a2 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/ConnectionsManager.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/ConnectionsManager.java
@@ -1185,6 +1185,8 @@ private void processRequestQueue(int requestClass, int _datacenterId) {
                     requestStartTime = updatingDcStartTime;
                     updatingDcStartTime = currentTime;
                     timeout = 60;
+                } else {
+                    request.runningStartTime = 0;
                 }
                 if (requestStartTime != 0 && requestStartTime < currentTime - timeout) {
                     ArrayList<Datacenter> allDc = new ArrayList<Datacenter>(datacenters.values());
@@ -1196,7 +1198,12 @@ private void processRequestQueue(int requestClass, int _datacenterId) {
                         }
                     }
                     Datacenter newDc = allDc.get(Math.abs(Utilities.random.nextInt() % allDc.size()));
-                    datacenterId = request.runningDatacenterId = newDc.datacenterId;
+                    datacenterId = newDc.datacenterId;
+                    if (!(request.rawRequest instanceof TLRPC.TL_help_getConfig)) {
+                        currentDatacenterId = datacenterId;
+                    } else {
+                        request.runningDatacenterId = datacenterId;
+                    }
                 }
             }
 
