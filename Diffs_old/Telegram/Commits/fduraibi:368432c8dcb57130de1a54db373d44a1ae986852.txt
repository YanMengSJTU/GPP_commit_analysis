diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 8ca947579..a01fc3895 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -84,7 +84,7 @@ android {
     defaultConfig {
         minSdkVersion 8
         targetSdkVersion 19
-        versionCode 270
+        versionCode 272
         versionName "1.6.0"
     }
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/android/MessagesController.java b/TMessagesProj/src/main/java/org/telegram/android/MessagesController.java
index 271e52ef5..11b1e79b0 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/MessagesController.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/MessagesController.java
@@ -2156,15 +2156,24 @@ private void sendMessage(String message, double lat, double lon, TLRPC.TL_photo
                         performSendMessageRequest(reqSend, newMsgObj, null);
                     }
                 } else if (type == 8) {
-                    reqSend.media = new TLRPC.TL_inputMediaUploadedAudio();
-                    reqSend.media.duration = audio.duration;
-                    reqSend.media.mime_type = audio.mime_type;
-                    DelayedMessage delayedMessage = new DelayedMessage();
-                    delayedMessage.sendRequest = reqSend;
-                    delayedMessage.type = 3;
-                    delayedMessage.obj = newMsgObj;
-                    delayedMessage.audioLocation = audio;
-                    performSendDelayedMessage(delayedMessage);
+                    if (audio.access_hash == 0) {
+                        reqSend.media = new TLRPC.TL_inputMediaUploadedAudio();
+                        reqSend.media.duration = audio.duration;
+                        reqSend.media.mime_type = audio.mime_type;
+                        DelayedMessage delayedMessage = new DelayedMessage();
+                        delayedMessage.sendRequest = reqSend;
+                        delayedMessage.type = 3;
+                        delayedMessage.obj = newMsgObj;
+                        delayedMessage.audioLocation = audio;
+                        performSendDelayedMessage(delayedMessage);
+                    } else {
+                        TLRPC.TL_inputMediaAudio media = new TLRPC.TL_inputMediaAudio();
+                        media.id = new TLRPC.TL_inputAudio();
+                        media.id.id = audio.id;
+                        media.id.access_hash = audio.access_hash;
+                        reqSend.media = media;
+                        performSendMessageRequest(reqSend, newMsgObj, null);
+                    }
                 }
             } else {
                 TLRPC.TL_decryptedMessage reqSend = new TLRPC.TL_decryptedMessage();
@@ -2848,14 +2857,14 @@ public void run() {
         });
     }
 
-    public void addUserToChat(int chat_id, final TLRPC.User user, final TLRPC.ChatParticipants info) {
+    public void addUserToChat(int chat_id, final TLRPC.User user, final TLRPC.ChatParticipants info, int count_fwd) {
         if (user == null) {
             return;
         }
 
         TLRPC.TL_messages_addChatUser req = new TLRPC.TL_messages_addChatUser();
         req.chat_id = chat_id;
-        req.fwd_limit = 50;
+        req.fwd_limit = count_fwd;
         req.user_id = getInputUser(user);
 
         ConnectionsManager.getInstance().performRpc(req, new RPCRequest.RPCRequestDelegate() {
diff --git a/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java b/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
index b65c3e2be..d7d4ce214 100644
--- a/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
+++ b/TMessagesProj/src/main/java/org/telegram/android/NotificationsController.java
@@ -501,30 +501,27 @@ public void processNewMessages(ArrayList<MessageObject> messageObjects, boolean
                 continue;
             }
 
-            Integer currentCount = pushDialogs.get(dialog_id);
-            if (currentCount == null) {
-                currentCount = 0;
-            }
-            pushDialogs.put(dialog_id, ++currentCount);
-            pushMessagesDict.put(messageObject.messageOwner.id, messageObject);
-
             Boolean value = settingsCache.get(dialog_id);
+            boolean isChat = (int)dialog_id < 0;
+            popup = preferences.getInt(isChat ? "popupGroup" : "popupAll", 0);
             if (value == null) {
                 int notify_override = preferences.getInt("notify2_" + dialog_id, 0);
-                boolean isChat = (int)dialog_id < 0;
-                if (notify_override == 2 || (!preferences.getBoolean("EnableAll", true) || isChat && !preferences.getBoolean("EnableGroup", true)) && notify_override == 0) {
-                    value = false;
-                } else {
-                    popup = preferences.getInt(isChat ? "popupGroup" : "popupAll", 0);
-                    value = popup != 0;
-                }
+                value = !(notify_override == 2 || (!preferences.getBoolean("EnableAll", true) || isChat && !preferences.getBoolean("EnableGroup", true)) && notify_override == 0);
                 settingsCache.put(dialog_id, value);
             }
             if (value) {
-                popupMessages.add(0, messageObject);
+                if (popup != 0) {
+                    popupMessages.add(0, messageObject);
+                }
+                pushMessagesDict.put(messageObject.messageOwner.id, messageObject);
+                pushMessages.add(0, messageObject);
+
+                Integer currentCount = pushDialogs.get(dialog_id);
+                if (currentCount == null) {
+                    currentCount = 0;
+                }
+                pushDialogs.put(dialog_id, ++currentCount);
             }
-            pushMessagesDict.put(messageObject.messageOwner.id, messageObject);
-            pushMessages.add(0, messageObject);
         }
 
         if (!popupMessages.isEmpty() && oldCount != popupMessages.size()) {
diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/Utilities.java b/TMessagesProj/src/main/java/org/telegram/messenger/Utilities.java
index 906654005..9085e859d 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/Utilities.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/Utilities.java
@@ -140,10 +140,14 @@ public static void aesIgeEncryption(ByteBuffer buffer, byte[] key, byte[] iv, bo
 
     public static Integer parseInt(String value) {
         Integer val = 0;
-        Matcher matcher = pattern.matcher(value);
-        if (matcher.find()) {
-            String num = matcher.group(0);
-            val = Integer.parseInt(num);
+        try {
+            Matcher matcher = pattern.matcher(value);
+            if (matcher.find()) {
+                String num = matcher.group(0);
+                val = Integer.parseInt(num);
+            }
+        } catch (Exception e) {
+            FileLog.e("tmessages", e);
         }
         return val;
     }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
index 718ad1044..9610b8c2e 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatActivity.java
@@ -85,7 +85,6 @@
 import java.io.File;
 import java.util.ArrayList;
 import java.util.Collections;
-import java.util.Comparator;
 import java.util.HashMap;
 import java.util.concurrent.Semaphore;
 
@@ -800,7 +799,7 @@ public void onClick(View view) {
                         return;
                     }
                     AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                    builder.setMessage(LocaleController.getString("AreYouSure", R.string.AreYouSure));
+                    builder.setMessage(LocaleController.getString("AreYouSureDeleteThisChat", R.string.AreYouSureDeleteThisChat));
                     builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                     builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
                         @Override
@@ -2314,7 +2313,7 @@ public void onClick(View v) {
                                     return;
                                 }
                                 AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                                builder.setMessage(LocaleController.getString("AreYouSure", R.string.AreYouSure));
+                                builder.setMessage(LocaleController.getString("AreYouSureShareMyContactInfo", R.string.AreYouSureShareMyContactInfo));
                                 builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                                 builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
                                     @Override
@@ -2895,9 +2894,58 @@ public void startDocumentSelectActivity() {
         }
     }
 
+    private void processForwardFromMe(MessageObject messageObject, long did) {
+        if (messageObject == null) {
+            return;
+        }
+        if (messageObject.messageOwner.media != null && !(messageObject.messageOwner.media instanceof TLRPC.TL_messageMediaEmpty)) {
+            if (messageObject.messageOwner.media.photo instanceof TLRPC.TL_photo) {
+                MessagesController.getInstance().sendMessage((TLRPC.TL_photo)messageObject.messageOwner.media.photo, null, did);
+            } else if (messageObject.messageOwner.media.audio instanceof TLRPC.TL_audio) {
+                MessagesController.getInstance().sendMessage((TLRPC.TL_audio)messageObject.messageOwner.media.audio, did);
+            } else if (messageObject.messageOwner.media.video instanceof TLRPC.TL_video) {
+                MessagesController.getInstance().sendMessage((TLRPC.TL_video)messageObject.messageOwner.media.video, null, did);
+            } else if (messageObject.messageOwner.media.document instanceof TLRPC.TL_document) {
+                MessagesController.getInstance().sendMessage((TLRPC.TL_document)messageObject.messageOwner.media.document, null, did);
+            } else if (messageObject.messageOwner.media.geo instanceof TLRPC.TL_geoPoint) {
+                MessagesController.getInstance().sendMessage(messageObject.messageOwner.media.geo.lat, messageObject.messageOwner.media.geo._long, did);
+            } else {
+                MessagesController.getInstance().sendMessage(messageObject, did);
+            }
+        } else if (messageObject.messageOwner.message != null) {
+            MessagesController.getInstance().sendMessage(messageObject.messageOwner.message, did);
+        } else {
+            MessagesController.getInstance().sendMessage(messageObject, did);
+        }
+    }
+
     @Override
-    public void didSelectDialog(MessagesActivity activity, long did) {
+    public void didSelectDialog(MessagesActivity activity, long did, boolean param) {
         if (dialog_id != 0 && (forwaringMessage != null || !selectedMessagesIds.isEmpty())) {
+            if (forwaringMessage != null) {
+                if (forwaringMessage.messageOwner.id > 0) {
+                    if (!param) {
+                        MessagesController.getInstance().sendMessage(forwaringMessage, did);
+                    } else {
+                        processForwardFromMe(forwaringMessage, did);
+                    }
+                }
+                forwaringMessage = null;
+            } else {
+                ArrayList<Integer> ids = new ArrayList<Integer>(selectedMessagesIds.keySet());
+                Collections.sort(ids);
+                for (Integer id : ids) {
+                    if (id > 0) {
+                        if (!param) {
+                            MessagesController.getInstance().sendMessage(selectedMessagesIds.get(id), did);
+                        } else {
+                            processForwardFromMe(selectedMessagesIds.get(id), did);
+                        }
+                    }
+                }
+                selectedMessagesCanCopyIds.clear();
+                selectedMessagesIds.clear();
+            }
             if (did != dialog_id) {
                 int lower_part = (int)did;
                 if (lower_part != 0) {
@@ -2913,44 +2961,11 @@ public void didSelectDialog(MessagesActivity activity, long did) {
                     presentFragment(new ChatActivity(args));
 
                     removeSelfFromStack();
-                    if (forwaringMessage != null) {
-                        if (forwaringMessage.messageOwner.id > 0) {
-                            MessagesController.getInstance().sendMessage(forwaringMessage, did);
-                        }
-                        forwaringMessage = null;
-                    } else {
-                        ArrayList<Integer> ids = new ArrayList<Integer>(selectedMessagesIds.keySet());
-                        Collections.sort(ids);
-                        for (Integer id : ids) {
-                            if (id > 0) {
-                                MessagesController.getInstance().sendMessage(selectedMessagesIds.get(id), did);
-                            }
-                        }
-                        selectedMessagesCanCopyIds.clear();
-                        selectedMessagesIds.clear();
-                    }
                 } else {
                     activity.finishFragment();
                 }
             } else {
                 activity.finishFragment();
-                if (forwaringMessage != null) {
-                    MessagesController.getInstance().sendMessage(forwaringMessage, did);
-                    forwaringMessage = null;
-                } else {
-                    ArrayList<Integer> ids = new ArrayList<Integer>(selectedMessagesIds.keySet());
-                    Collections.sort(ids, new Comparator<Integer>() {
-                        @Override
-                        public int compare(Integer lhs, Integer rhs) {
-                            return lhs.compareTo(rhs);
-                        }
-                    });
-                    for (Integer id : ids) {
-                        MessagesController.getInstance().sendMessage(selectedMessagesIds.get(id), did);
-                    }
-                    selectedMessagesCanCopyIds.clear();
-                    selectedMessagesIds.clear();
-                }
                 chatListView.setSelection(messages.size() + 1);
                 scrollToTopOnResume = true;
             }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ChatProfileActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ChatProfileActivity.java
index edd21c47c..115c41405 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ChatProfileActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ChatProfileActivity.java
@@ -258,8 +258,8 @@ public void onItemClick(AdapterView<?> adapterView, View view, final int i, long
     }
 
     @Override
-    public void didSelectContact(TLRPC.User user) {
-        MessagesController.getInstance().addUserToChat(chat_id, user, info);
+    public void didSelectContact(TLRPC.User user, String param) {
+        MessagesController.getInstance().addUserToChat(chat_id, user, info, Utilities.parseInt(param));
     }
 
     @Override
@@ -680,7 +680,7 @@ public void onClick(View view) {
                                 return;
                             }
                             AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                            builder.setMessage(LocaleController.getString("AreYouSure", R.string.AreYouSure));
+                            builder.setMessage(LocaleController.getString("AreYouSureDeleteAndExit", R.string.AreYouSureDeleteAndExit));
                             builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                             builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
                                 @Override
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/ContactsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/ContactsActivity.java
index a67f82d9b..abb1a5f0b 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/ContactsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/ContactsActivity.java
@@ -15,9 +15,12 @@
 import android.content.SharedPreferences;
 import android.net.Uri;
 import android.os.Bundle;
+import android.text.InputType;
+import android.view.Gravity;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
+import android.view.inputmethod.EditorInfo;
 import android.widget.AbsListView;
 import android.widget.AdapterView;
 import android.widget.EditText;
@@ -71,7 +74,7 @@
     private ContactsActivityDelegate delegate;
 
     public static interface ContactsActivityDelegate {
-        public abstract void didSelectContact(TLRPC.User user);
+        public abstract void didSelectContact(TLRPC.User user, String param);
     }
 
     public ContactsActivity(Bundle args) {
@@ -215,7 +218,7 @@ public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                             if (ignoreUsers != null && ignoreUsers.containsKey(user.id)) {
                                 return;
                             }
-                            didSelectResult(user, true);
+                            didSelectResult(user, true, null);
                         } else {
                             if (createSecretChat) {
                                 creatingChat = true;
@@ -273,7 +276,7 @@ public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                                 if (ignoreUsers != null && ignoreUsers.containsKey(user.id)) {
                                     return;
                                 }
-                                didSelectResult(user, true);
+                                didSelectResult(user, true, null);
                             } else {
                                 if (createSecretChat) {
                                     creatingChat = true;
@@ -338,7 +341,7 @@ public void onScroll(AbsListView absListView, int firstVisibleItem, int visibleI
         return fragmentView;
     }
 
-    private void didSelectResult(final TLRPC.User user, boolean useAlert) {
+    private void didSelectResult(final TLRPC.User user, boolean useAlert, String param) {
         if (useAlert && selectAlertString != null) {
             if (getParentActivity() == null) {
                 return;
@@ -346,17 +349,29 @@ private void didSelectResult(final TLRPC.User user, boolean useAlert) {
             AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
             builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
             builder.setMessage(LocaleController.formatStringSimple(selectAlertString, Utilities.formatName(user.first_name, user.last_name)));
+            final EditText editText = new EditText(getParentActivity());
+            editText.setTextSize(18);
+            editText.setText("50");
+            editText.setGravity(Gravity.CENTER);
+            editText.setInputType(InputType.TYPE_CLASS_NUMBER);
+            editText.setImeOptions(EditorInfo.IME_ACTION_DONE);
+            builder.setView(editText);
             builder.setPositiveButton(R.string.OK, new DialogInterface.OnClickListener() {
                 @Override
                 public void onClick(DialogInterface dialogInterface, int i) {
-                    didSelectResult(user, false);
+                    didSelectResult(user, false, editText.getText().toString());
                 }
             });
             builder.setNegativeButton(R.string.Cancel, null);
             showAlertDialog(builder);
+            ViewGroup.MarginLayoutParams layoutParams = (ViewGroup.MarginLayoutParams)editText.getLayoutParams();
+            if (layoutParams != null) {
+                layoutParams.rightMargin = layoutParams.leftMargin = AndroidUtilities.dp(10);
+                editText.setLayoutParams(layoutParams);
+            }
         } else {
             if (delegate != null) {
-                delegate.didSelectContact(user);
+                delegate.didSelectContact(user, param);
                 delegate = null;
             }
             finishFragment();
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
index c64f25794..f9b627349 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/LaunchActivity.java
@@ -413,7 +413,7 @@ private void handleIntent(Intent intent, boolean isNew, boolean restore) {
             NotificationCenter.getInstance().postNotificationName(MessagesController.closeChats);
             Bundle args = new Bundle();
             args.putBoolean("onlySelect", true);
-            args.putString("selectAlertString", LocaleController.getString("ForwardMessagesTo", R.string.ForwardMessagesTo));
+            args.putString("selectAlertString", LocaleController.getString("SendMessagesTo", R.string.SendMessagesTo));
             MessagesActivity fragment = new MessagesActivity(args);
             fragment.setDelegate(this);
             presentFragment(fragment, false, true);
@@ -437,7 +437,7 @@ protected void onNewIntent(Intent intent) {
     }
 
     @Override
-    public void didSelectDialog(MessagesActivity messageFragment, long dialog_id) {
+    public void didSelectDialog(MessagesActivity messageFragment, long dialog_id, boolean param) {
         if (dialog_id != 0) {
             int lower_part = (int)dialog_id;
 
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/MessagesActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/MessagesActivity.java
index 1056bb7bf..979fba570 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/MessagesActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/MessagesActivity.java
@@ -17,6 +17,7 @@
 import android.view.ViewGroup;
 import android.widget.AbsListView;
 import android.widget.AdapterView;
+import android.widget.CheckBox;
 import android.widget.EditText;
 import android.widget.ListView;
 import android.widget.TextView;
@@ -75,7 +76,7 @@
     private final static int messages_list_menu_settings = 5;
 
     public static interface MessagesActivityDelegate {
-        public abstract void didSelectDialog(MessagesActivity fragment, long dialog_id);
+        public abstract void didSelectDialog(MessagesActivity fragment, long dialog_id, boolean param);
     }
 
     public MessagesActivity(Bundle args) {
@@ -277,7 +278,7 @@ public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                         }
                     }
                     if (onlySelect) {
-                        didSelectResult(dialog_id, true);
+                        didSelectResult(dialog_id, true, false);
                     } else {
                         Bundle args = new Bundle();
                         int lower_part = (int)dialog_id;
@@ -325,8 +326,18 @@ public void onClick(DialogInterface dialog, int which) {
                                 if (which == 0) {
                                     MessagesController.getInstance().deleteDialog(selectedDialog, 0, true);
                                 } else if (which == 1) {
-                                    MessagesController.getInstance().deleteUserFromChat((int) -selectedDialog, MessagesController.getInstance().users.get(UserConfig.getClientUserId()), null);
-                                    MessagesController.getInstance().deleteDialog(selectedDialog, 0, false);
+                                    AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
+                                    builder.setMessage(LocaleController.getString("AreYouSureDeleteAndExit", R.string.AreYouSureDeleteAndExit));
+                                    builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
+                                    builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
+                                        @Override
+                                        public void onClick(DialogInterface dialogInterface, int i) {
+                                            MessagesController.getInstance().deleteUserFromChat((int) -selectedDialog, MessagesController.getInstance().users.get(UserConfig.getClientUserId()), null);
+                                            MessagesController.getInstance().deleteDialog(selectedDialog, 0, false);
+                                        }
+                                    });
+                                    builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
+                                    showAlertDialog(builder);
                                 }
                             }
                         });
@@ -334,7 +345,21 @@ public void onClick(DialogInterface dialog, int which) {
                         builder.setItems(new CharSequence[]{LocaleController.getString("ClearHistory", R.string.ClearHistory), LocaleController.getString("Delete", R.string.Delete)}, new DialogInterface.OnClickListener() {
                             @Override
                             public void onClick(DialogInterface dialog, int which) {
-                                MessagesController.getInstance().deleteDialog(selectedDialog, 0, which == 0);
+                                if (which == 0) {
+                                    MessagesController.getInstance().deleteDialog(selectedDialog, 0, true);
+                                } else {
+                                    AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
+                                    builder.setMessage(LocaleController.getString("AreYouSureDeleteThisChat", R.string.AreYouSureDeleteThisChat));
+                                    builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
+                                    builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
+                                        @Override
+                                        public void onClick(DialogInterface dialogInterface, int i) {
+                                            MessagesController.getInstance().deleteDialog(selectedDialog, 0, false);
+                                        }
+                                    });
+                                    builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
+                                    showAlertDialog(builder);
+                                }
                             }
                         });
                     }
@@ -454,7 +479,7 @@ public void setDelegate(MessagesActivityDelegate delegate) {
         this.delegate = delegate;
     }
 
-    private void didSelectResult(final long dialog_id, boolean useAlert) {
+    private void didSelectResult(final long dialog_id, boolean useAlert, final boolean param) {
         if (useAlert && selectAlertString != null) {
             if (getParentActivity() == null) {
                 return;
@@ -485,17 +510,32 @@ private void didSelectResult(final long dialog_id, boolean useAlert) {
                 }
                 builder.setMessage(LocaleController.formatStringSimple(selectAlertString, Utilities.formatName(user.first_name, user.last_name)));
             }
+            CheckBox checkBox = null;
+            if (delegate instanceof ChatActivity) {
+                checkBox = new CheckBox(getParentActivity());
+                checkBox.setText(LocaleController.getString("ForwardFromMyName", R.string.ForwardFromMyName));
+                checkBox.setChecked(false);
+                builder.setView(checkBox);
+            }
+            final CheckBox checkBoxFinal = checkBox;
             builder.setPositiveButton(R.string.OK, new DialogInterface.OnClickListener() {
                 @Override
                 public void onClick(DialogInterface dialogInterface, int i) {
-                    didSelectResult(dialog_id, false);
+                    didSelectResult(dialog_id, false, checkBoxFinal != null && checkBoxFinal.isChecked());
                 }
             });
             builder.setNegativeButton(R.string.Cancel, null);
             showAlertDialog(builder);
+            if (checkBox != null) {
+                ViewGroup.MarginLayoutParams layoutParams = (ViewGroup.MarginLayoutParams)checkBox.getLayoutParams();
+                if (layoutParams != null) {
+                    layoutParams.rightMargin = layoutParams.leftMargin = AndroidUtilities.dp(10);
+                    checkBox.setLayoutParams(layoutParams);
+                }
+            }
         } else {
             if (delegate != null) {
-                delegate.didSelectDialog(MessagesActivity.this, dialog_id);
+                delegate.didSelectDialog(MessagesActivity.this, dialog_id, param);
                 delegate = null;
             } else {
                 finishFragment();
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
index 709c71835..71cb280de 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
@@ -336,7 +336,7 @@ public void onClick(DialogInterface dialogInterface, int i) {
                             return;
                         }
                         AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                        builder.setMessage(LocaleController.getString("AreYouSure", R.string.AreYouSure));
+                        builder.setMessage(LocaleController.getString("AreYouSureSessions", R.string.AreYouSureSessions));
                         builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                         builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
                             @Override
@@ -970,7 +970,7 @@ public void onClick(View view) {
                                 return;
                             }
                             AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                            builder.setMessage(LocaleController.getString("AreYouSure", R.string.AreYouSure));
+                            builder.setMessage(LocaleController.getString("AreYouSureLogout", R.string.AreYouSureLogout));
                             builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                             builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
                                 @Override
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SettingsBlockedUsers.java b/TMessagesProj/src/main/java/org/telegram/ui/SettingsBlockedUsers.java
index 5d590cacf..54345daf2 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SettingsBlockedUsers.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SettingsBlockedUsers.java
@@ -256,7 +256,7 @@ public void onResume() {
     }
 
     @Override
-    public void didSelectContact(TLRPC.User user) {
+    public void didSelectContact(TLRPC.User user, String param) {
         if (user == null || blockedContactsDict.containsKey(user.id)) {
             return;
         }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/UserProfileActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/UserProfileActivity.java
index 9d1c47c1d..f2925fa2f 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/UserProfileActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/UserProfileActivity.java
@@ -140,7 +140,7 @@ public void onItemClick(int id) {
                         finishFragment();
                     } else if (id == block_contact) {
                         AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                        builder.setMessage(LocaleController.getString("AreYouSure", R.string.AreYouSure));
+                        builder.setMessage(LocaleController.getString("AreYouSureBlockContact", R.string.AreYouSureBlockContact));
                         builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                         builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
                             @Override
@@ -186,7 +186,7 @@ public void run(TLObject response, TLRPC.TL_error error) {
                             return;
                         }
                         AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
-                        builder.setMessage(LocaleController.getString("AreYouSure", R.string.AreYouSure));
+                        builder.setMessage(LocaleController.getString("AreYouSureDeleteContact", R.string.AreYouSureDeleteContact));
                         builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                         builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
                             @Override
@@ -445,7 +445,7 @@ private void createActionBarMenu() {
     }
 
     @Override
-    public void didSelectDialog(MessagesActivity messageFragment, long dialog_id) {
+    public void didSelectDialog(MessagesActivity messageFragment, long dialog_id, boolean param) {
         if (dialog_id != 0) {
             Bundle args = new Bundle();
             args.putBoolean("scrollToTopOnResume", true);
diff --git a/TMessagesProj/src/main/res/values-ar/strings.xml b/TMessagesProj/src/main/res/values-ar/strings.xml
index 693054cb7..9373269d8 100644
--- a/TMessagesProj/src/main/res/values-ar/strings.xml
+++ b/TMessagesProj/src/main/res/values-ar/strings.xml
@@ -264,7 +264,7 @@
     <string name="Enabled">تمكين</string>
     <string name="Disabled">تعطيل</string>
     <string name="NotificationsService">خدمة الإشعارات</string>
-    <string name="NotificationsServiceDisableInfo">إذا كانت خدمات Google play كافية بالنسبة لك لتلقي الإشعارات ، يمكنك تعطيل \" خدمة الإشعارات \" . ومع ذلك نحن نوصي بترك هذه الخدمة مفعلة للحفاظ على تشغيل التطبيق في الخلفية ، ولتلقي إشعارات المحادثة.</string>
+    <string name="NotificationsServiceDisableInfo">إذا كانت خدمات Google play كافية بالنسبة لك لتلقي الإشعارات ، يمكنك تعطيل \" خدمة الإشعارات \" . ومع ذلك نحن نوصي بترك هذه الخدمة مفعلة للحفاظ على تشغيل التطبيق في الخلفية ، ولتلقي إشعارات الدردشة .</string>
     <string name="SortBy">فرز حسب</string>
     <string name="ImportContacts">استيراد جهات الاتصال</string>
     <string name="WiFiOnly">بواسطة WiFi فقط</string>
@@ -363,10 +363,21 @@
     <string name="NoHandleAppInstalled">لا يوجد لديك تطبيق يمكنه فتح \'%1$s\'، يرجى تنزيل تطبيق مناسب للإستمرار</string>
     <string name="InviteUser">هذا المستخدم ليس لديه تيليجرام بعد ، هل ترغب في دعوته الآن؟</string>
     <string name="AreYouSure">هل أنت متأكد؟</string>
-    <string name="DeleteChatQuestion">هل تريد حذف هذه المحادثة؟</string>
     <string name="AddContactQ">هل تريد إضافة جهة اتصال؟</string>
-    <string name="AddToTheGroup">إلى المجموعة؟ %1$s هل تريد إضافة</string>
+    <string name="AddToTheGroup">Add %1$s to the group?\n\nNumber of last messages to forward:</string>
     <string name="ForwardMessagesTo">؟%1$s هل تريد إعادة توجيه الرسائل إلى</string>
+    <string name="DeleteChatQuestion">هل تريد حذف هذه الدردشة؟</string>
+    <string name="SendMessagesTo">Send messages to %1$s?</string>
+    <string name="AreYouSureLogout">Are you sure you want to logout?</string>
+    <string name="AreYouSureSessions">Are you sure you want to terminate all other sessions?</string>
+    <string name="AreYouSureDeleteAndExit">Are you sure you want to delete and leave group?</string>
+    <string name="AreYouSureDeleteThisChat">Are you sure you want to delete this chat?</string>
+    <string name="AreYouSureShareMyContactInfo">Are you sure that you want to share your contact info?</string>
+    <string name="AreYouSureBlockContact">Are you sure you want to block this contact?</string>
+    <string name="AreYouSureUnblockContact">Are you sure you want to unblock this contact?</string>
+    <string name="AreYouSureDeleteContact">Are you sure you want to delete this contact?</string>
+    <string name="AreYouSureSecretChat">Are you sure you want to start secret chat?</string>
+    <string name="ForwardFromMyName">forward from my name</string>
 
     <!--Intro view-->
     <string name="Page1Title">تيليجرام</string>
diff --git a/TMessagesProj/src/main/res/values-de/strings.xml b/TMessagesProj/src/main/res/values-de/strings.xml
index baa8ca46a..e3584e2f4 100644
--- a/TMessagesProj/src/main/res/values-de/strings.xml
+++ b/TMessagesProj/src/main/res/values-de/strings.xml
@@ -361,9 +361,20 @@
     <string name="InviteUser">Dieser Benutzer hat noch kein Telegram. Möchtest du ihn einladen?</string>
     <string name="AreYouSure">Bist du sicher?</string>
     <string name="AddContactQ">Kontakt hinzufügen?</string>
-    <string name="AddToTheGroup">%1$s zur Gruppe hinzufügen?</string>
+    <string name="AddToTheGroup">Add %1$s to the group?\n\nNumber of last messages to forward:</string>
     <string name="ForwardMessagesTo">Nachrichten an %1$s weiterleiten?</string>
     <string name="DeleteChatQuestion">Diesen Chat löschen?</string>
+    <string name="SendMessagesTo">Send messages to %1$s?</string>
+    <string name="AreYouSureLogout">Are you sure you want to logout?</string>
+    <string name="AreYouSureSessions">Are you sure you want to terminate all other sessions?</string>
+    <string name="AreYouSureDeleteAndExit">Are you sure you want to delete and leave group?</string>
+    <string name="AreYouSureDeleteThisChat">Are you sure you want to delete this chat?</string>
+    <string name="AreYouSureShareMyContactInfo">Are you sure that you want to share your contact info?</string>
+    <string name="AreYouSureBlockContact">Are you sure you want to block this contact?</string>
+    <string name="AreYouSureUnblockContact">Are you sure you want to unblock this contact?</string>
+    <string name="AreYouSureDeleteContact">Are you sure you want to delete this contact?</string>
+    <string name="AreYouSureSecretChat">Are you sure you want to start secret chat?</string>
+    <string name="ForwardFromMyName">forward from my name</string>
 
     <!--Intro view-->
     <string name="Page1Title">Telegram</string>
diff --git a/TMessagesProj/src/main/res/values-es/strings.xml b/TMessagesProj/src/main/res/values-es/strings.xml
index 8f0f7a43f..8dbf8860a 100644
--- a/TMessagesProj/src/main/res/values-es/strings.xml
+++ b/TMessagesProj/src/main/res/values-es/strings.xml
@@ -361,9 +361,20 @@
     <string name="InviteUser">Este usuario no tiene Telegram aún. ¿Enviarle una invitación?</string>
     <string name="AreYouSure">¿Estás seguro?</string>
     <string name="AddContactQ">¿Añadir contacto?</string>
-    <string name="AddToTheGroup">¿Añadir a %1$s al grupo?</string>
+    <string name="AddToTheGroup">Add %1$s to the group?\n\nNumber of last messages to forward:</string>
     <string name="ForwardMessagesTo">¿Reenviar mensajes a %1$s?</string>
     <string name="DeleteChatQuestion">¿Eliminar este chat?</string>
+    <string name="SendMessagesTo">Send messages to %1$s?</string>
+    <string name="AreYouSureLogout">Are you sure you want to logout?</string>
+    <string name="AreYouSureSessions">Are you sure you want to terminate all other sessions?</string>
+    <string name="AreYouSureDeleteAndExit">Are you sure you want to delete and leave group?</string>
+    <string name="AreYouSureDeleteThisChat">Are you sure you want to delete this chat?</string>
+    <string name="AreYouSureShareMyContactInfo">Are you sure that you want to share your contact info?</string>
+    <string name="AreYouSureBlockContact">Are you sure you want to block this contact?</string>
+    <string name="AreYouSureUnblockContact">Are you sure you want to unblock this contact?</string>
+    <string name="AreYouSureDeleteContact">Are you sure you want to delete this contact?</string>
+    <string name="AreYouSureSecretChat">Are you sure you want to start secret chat?</string>
+    <string name="ForwardFromMyName">forward from my name</string>
 
     <!--Intro view-->
     <string name="Page1Title">Telegram</string>
diff --git a/TMessagesProj/src/main/res/values-it/strings.xml b/TMessagesProj/src/main/res/values-it/strings.xml
index fc3a0a580..b5d372459 100644
--- a/TMessagesProj/src/main/res/values-it/strings.xml
+++ b/TMessagesProj/src/main/res/values-it/strings.xml
@@ -361,9 +361,20 @@
     <string name="InviteUser">Questo utente non ha ancora Telegram, vuoi invitarlo?</string>
     <string name="AreYouSure">Sei sicuro?</string>
     <string name="AddContactQ">Vuoi aggiungere il contatto?</string>
-    <string name="AddToTheGroup">Vuoi aggiungere %1$s al gruppo?</string>
+    <string name="AddToTheGroup">Add %1$s to the group?\n\nNumber of last messages to forward:</string>
     <string name="ForwardMessagesTo">Vuoi inoltrare i messaggi a %1$s?</string>
     <string name="DeleteChatQuestion">Vuoi eliminare questa chat?</string>
+    <string name="SendMessagesTo">Send messages to %1$s?</string>
+    <string name="AreYouSureLogout">Are you sure you want to logout?</string>
+    <string name="AreYouSureSessions">Are you sure you want to terminate all other sessions?</string>
+    <string name="AreYouSureDeleteAndExit">Are you sure you want to delete and leave group?</string>
+    <string name="AreYouSureDeleteThisChat">Are you sure you want to delete this chat?</string>
+    <string name="AreYouSureShareMyContactInfo">Are you sure that you want to share your contact info?</string>
+    <string name="AreYouSureBlockContact">Are you sure you want to block this contact?</string>
+    <string name="AreYouSureUnblockContact">Are you sure you want to unblock this contact?</string>
+    <string name="AreYouSureDeleteContact">Are you sure you want to delete this contact?</string>
+    <string name="AreYouSureSecretChat">Are you sure you want to start secret chat?</string>
+    <string name="ForwardFromMyName">forward from my name</string>
 
     <!--Intro view-->
     <string name="Page1Title">Telegram</string>
diff --git a/TMessagesProj/src/main/res/values-nl/strings.xml b/TMessagesProj/src/main/res/values-nl/strings.xml
index d5729dabf..a619042ee 100644
--- a/TMessagesProj/src/main/res/values-nl/strings.xml
+++ b/TMessagesProj/src/main/res/values-nl/strings.xml
@@ -361,9 +361,20 @@
     <string name="InviteUser">Deze gebruiker heeft nog geen Telegram. Wil je een uitnodiging sturen?</string>
     <string name="AreYouSure">Weet je het zeker?</string>
     <string name="AddContactQ">Contact toevoegen?</string>
-    <string name="AddToTheGroup">%1$s toevoegen aan de groep?</string>
+    <string name="AddToTheGroup">Add %1$s to the group?\n\nNumber of last messages to forward:</string>
     <string name="ForwardMessagesTo">Berichten doorsturen naar %1$s?</string>
     <string name="DeleteChatQuestion">Dit gesprek verwijderen?</string>
+    <string name="SendMessagesTo">Send messages to %1$s?</string>
+    <string name="AreYouSureLogout">Are you sure you want to logout?</string>
+    <string name="AreYouSureSessions">Are you sure you want to terminate all other sessions?</string>
+    <string name="AreYouSureDeleteAndExit">Are you sure you want to delete and leave group?</string>
+    <string name="AreYouSureDeleteThisChat">Are you sure you want to delete this chat?</string>
+    <string name="AreYouSureShareMyContactInfo">Are you sure that you want to share your contact info?</string>
+    <string name="AreYouSureBlockContact">Are you sure you want to block this contact?</string>
+    <string name="AreYouSureUnblockContact">Are you sure you want to unblock this contact?</string>
+    <string name="AreYouSureDeleteContact">Are you sure you want to delete this contact?</string>
+    <string name="AreYouSureSecretChat">Are you sure you want to start secret chat?</string>
+    <string name="ForwardFromMyName">forward from my name</string>
 
     <!--Intro view-->
     <string name="Page1Title">Telegram</string>
diff --git a/TMessagesProj/src/main/res/values-pt-rBR/strings.xml b/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
index 2d0d4c09d..c55d07fa8 100644
--- a/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
+++ b/TMessagesProj/src/main/res/values-pt-rBR/strings.xml
@@ -361,9 +361,20 @@
     <string name="InviteUser">Este usuário ainda não possui Telegram, deseja enviar um convite?</string>
     <string name="AreYouSure">Você tem certeza?</string>
     <string name="AddContactQ">Adicionar contato?</string>
-    <string name="AddToTheGroup">Adicionar %1$s ao grupo?</string>
+    <string name="AddToTheGroup">Add %1$s to the group?\n\nNumber of last messages to forward:</string>
     <string name="ForwardMessagesTo">Encaminhar mensagem para %1$s?</string>
     <string name="DeleteChatQuestion">Apagar esta conversa?</string>
+    <string name="SendMessagesTo">Send messages to %1$s?</string>
+    <string name="AreYouSureLogout">Are you sure you want to logout?</string>
+    <string name="AreYouSureSessions">Are you sure you want to terminate all other sessions?</string>
+    <string name="AreYouSureDeleteAndExit">Are you sure you want to delete and leave group?</string>
+    <string name="AreYouSureDeleteThisChat">Are you sure you want to delete this chat?</string>
+    <string name="AreYouSureShareMyContactInfo">Are you sure that you want to share your contact info?</string>
+    <string name="AreYouSureBlockContact">Are you sure you want to block this contact?</string>
+    <string name="AreYouSureUnblockContact">Are you sure you want to unblock this contact?</string>
+    <string name="AreYouSureDeleteContact">Are you sure you want to delete this contact?</string>
+    <string name="AreYouSureSecretChat">Are you sure you want to start secret chat?</string>
+    <string name="ForwardFromMyName">forward from my name</string>
 
     <!--Intro view-->
     <string name="Page1Title">Telegram</string>
diff --git a/TMessagesProj/src/main/res/values-pt-rPT/strings.xml b/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
index ac23ff2f3..8a2936a52 100644
--- a/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
+++ b/TMessagesProj/src/main/res/values-pt-rPT/strings.xml
@@ -361,9 +361,20 @@
     <string name="InviteUser">Este utilizador ainda não tem o Telegram. Quer enviar um convite?</string>
     <string name="AreYouSure">Tem a certeza?</string>
     <string name="AddContactQ">Adicionar contacto?</string>
-    <string name="AddToTheGroup">Adicionar %1$s ao grupo?</string>
+    <string name="AddToTheGroup">Add %1$s to the group?\n\nNumber of last messages to forward:</string>
     <string name="ForwardMessagesTo">Reencaminhar mensagens para %1$s?</string>
     <string name="DeleteChatQuestion">Eliminar este chat?</string>
+    <string name="SendMessagesTo">Send messages to %1$s?</string>
+    <string name="AreYouSureLogout">Are you sure you want to logout?</string>
+    <string name="AreYouSureSessions">Are you sure you want to terminate all other sessions?</string>
+    <string name="AreYouSureDeleteAndExit">Are you sure you want to delete and leave group?</string>
+    <string name="AreYouSureDeleteThisChat">Are you sure you want to delete this chat?</string>
+    <string name="AreYouSureShareMyContactInfo">Are you sure that you want to share your contact info?</string>
+    <string name="AreYouSureBlockContact">Are you sure you want to block this contact?</string>
+    <string name="AreYouSureUnblockContact">Are you sure you want to unblock this contact?</string>
+    <string name="AreYouSureDeleteContact">Are you sure you want to delete this contact?</string>
+    <string name="AreYouSureSecretChat">Are you sure you want to start secret chat?</string>
+    <string name="ForwardFromMyName">forward from my name</string>
 
     <!--Intro view-->
     <string name="Page1Title">Telegram</string>
diff --git a/TMessagesProj/src/main/res/values/strings.xml b/TMessagesProj/src/main/res/values/strings.xml
index 71cae71fd..9dd97bf08 100644
--- a/TMessagesProj/src/main/res/values/strings.xml
+++ b/TMessagesProj/src/main/res/values/strings.xml
@@ -364,9 +364,21 @@
     <string name="InviteUser">This user does not have Telegram yet, send an invitation?</string>
     <string name="AreYouSure">Are you sure?</string>
     <string name="AddContactQ">Add contact?</string>
-    <string name="AddToTheGroup">Add %1$s to the group?</string>
+    <string name="AddToTheGroup">Add %1$s to the group?\n\nNumber of last messages to forward:</string>
     <string name="ForwardMessagesTo">Forward messages to %1$s?</string>
     <string name="DeleteChatQuestion">Delete this chat?</string>
+    <string name="SendMessagesTo">Send messages to %1$s?</string>
+    <string name="AreYouSureLogout">Are you sure you want to logout?</string>
+    <string name="AreYouSureSessions">Are you sure you want to terminate all other sessions?</string>
+    <string name="AreYouSureDeleteAndExit">Are you sure you want to delete and leave group?</string>
+    <string name="AreYouSureDeleteThisChat">Are you sure you want to delete this chat?</string>
+    <string name="AreYouSureShareMyContactInfo">Are you sure that you want to share your contact info?</string>
+    <string name="AreYouSureBlockContact">Are you sure you want to block this contact?</string>
+    <string name="AreYouSureUnblockContact">Are you sure you want to unblock this contact?</string>
+    <string name="AreYouSureDeleteContact">Are you sure you want to delete this contact?</string>
+    <string name="AreYouSureSecretChat">Are you sure you want to start secret chat?</string>
+    <string name="ForwardFromMyName">forward from my name</string>
+
 
     <!--Intro view-->
     <string name="Page1Title">Telegram</string>
