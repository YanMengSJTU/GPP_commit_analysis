diff --git a/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java b/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
index 505933282..a91f79ffb 100644
--- a/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
+++ b/TMessagesProj/src/main/java/org/telegram/messenger/MessagesController.java
@@ -7,6 +7,7 @@
  */
 
 package org.telegram.messenger;
+
 import android.app.Activity;
 import android.app.AlertDialog;
 import android.app.ProgressDialog;
@@ -22,6 +23,7 @@
 
 import org.pollgram.R;
 import org.pollgram.decision.service.PollgramFactory;
+import org.pollgram.decision.service.PollgramService;
 import org.telegram.messenger.query.BotQuery;
 import org.telegram.messenger.query.StickersQuery;
 import org.telegram.tgnet.ConnectionsManager;
@@ -122,6 +124,7 @@
     public int maxBroadcastCount = 100;
     public int groupBigSize;
     private ArrayList<TLRPC.TL_disabledFeature> disabledFeatures = new ArrayList<>();
+    private PollgramService pollgramService = PollgramFactory.getPollgramService();
 
     private class UserActionUpdatesSeq extends TLRPC.Updates {
 
@@ -830,7 +833,9 @@ public void run(TLObject response, TLRPC.TL_error error) {
                         for (TLRPC.User u : messagesRes.users) {
                             usersLocal.put(u.id, u);
                         }
-                        objects.add(new MessageObject(message, usersLocal, true));
+                        MessageObject msg = new MessageObject(message, usersLocal, true);
+                        pollgramService.processMessage(msg);
+                        objects.add(msg);
                     }
                     AndroidUtilities.runOnUIThread(new Runnable() {
                         @Override
@@ -2229,6 +2234,7 @@ public void run() {
                         }
                     }
                     MessageObject messageObject = new MessageObject(message, usersDict, false);
+                    pollgramService.processMessage(messageObject);
                     new_dialogMessage.put(messageObject.getDialogId(), messageObject);
                 }
                 for (int a = 0; a < dialogsRes.dialogs.size(); a++) {
@@ -2581,6 +2587,7 @@ public int createChat(String title, ArrayList<Integer> selectedContacts, final S
             newMsg.flags |= TLRPC.MESSAGE_FLAG_HAS_FROM_ID;
             UserConfig.saveConfig(false);
             MessageObject newMsgObj = new MessageObject(newMsg, users, true);
+            pollgramService.processMessage(newMsgObj);
             newMsgObj.messageOwner.send_state = MessageObject.MESSAGE_SEND_STATE_SENT;
 
             ArrayList<MessageObject> objArr = new ArrayList<>();
@@ -4053,7 +4060,10 @@ public void processUpdates(final TLRPC.Updates updates, boolean fromQueue) {
                     message.media = new TLRPC.TL_messageMediaEmpty();
                     MessagesStorage.lastPtsValue = updates.pts;
                     final MessageObject obj = new MessageObject(message, null, true);
-                    PollgramFactory.getPollgramService().processMessage(obj);
+                    pollgramService.processMessage(obj);
+
+
+
                     final ArrayList<MessageObject> objArr = new ArrayList<>();
                     objArr.add(obj);
                     ArrayList<TLRPC.Message> arr = new ArrayList<>();
@@ -4465,6 +4475,7 @@ public void run() {
                 messagesArr.add(message);
                 ImageLoader.saveMessageThumbs(message);
                 MessageObject obj = new MessageObject(message, usersDict, true);
+                pollgramService.processMessage(obj);
                 if (obj.type == 11) {
                     interfaceUpdateMask |= UPDATE_MASK_CHAT_AVATAR;
                 } else if (obj.type == 10) {
@@ -4595,6 +4606,7 @@ public void run() {
 
                     messagesArr.add(newMessage);
                     MessageObject obj = new MessageObject(newMessage, usersDict, true);
+                    pollgramService.processMessage(obj);
                     ArrayList<MessageObject> arr = messages.get(newMessage.dialog_id);
                     if (arr == null) {
                         arr = new ArrayList<>();
@@ -4643,6 +4655,7 @@ public void run() {
 
                 messagesArr.add(newMessage);
                 MessageObject obj = new MessageObject(newMessage, usersDict, true);
+                pollgramService.processMessage(obj);
                 ArrayList<MessageObject> arr = messages.get(newMessage.dialog_id);
                 if (arr == null) {
                     arr = new ArrayList<>();
