diff --git a/compiler/src/main/java/dagger/internal/codegen/ComponentProcessingStep.java b/compiler/src/main/java/dagger/internal/codegen/ComponentProcessingStep.java
index a7f486897..2d9fbab38 100644
--- a/compiler/src/main/java/dagger/internal/codegen/ComponentProcessingStep.java
+++ b/compiler/src/main/java/dagger/internal/codegen/ComponentProcessingStep.java
@@ -57,7 +57,8 @@
       BindingGraphValidator bindingGraphValidator,
       Factory componentDescriptorFactory,
       BindingGraph.Factory bindingGraphFactory,
-      ComponentGenerator componentGenerator) {
+      ComponentGenerator componentGenerator
+  ) {
     this.messager = messager;
     this.componentValidator = componentValidator;
     this.subcomponentValidator = subcomponentValidator;
diff --git a/compiler/src/main/java/dagger/internal/codegen/ComponentProcessor.java b/compiler/src/main/java/dagger/internal/codegen/ComponentProcessor.java
index 1214684ec..4cbde8dee 100644
--- a/compiler/src/main/java/dagger/internal/codegen/ComponentProcessor.java
+++ b/compiler/src/main/java/dagger/internal/codegen/ComponentProcessor.java
@@ -59,7 +59,10 @@ public SourceVersion getSupportedSourceVersion() {
 
   @Override
   public Set<String> getSupportedOptions() {
-    return ImmutableSet.of(DISABLE_INTER_COMPONENT_SCOPE_VALIDATION_KEY, NULLABLE_VALIDATION_KEY);
+    return ImmutableSet.of(
+        DISABLE_INTER_COMPONENT_SCOPE_VALIDATION_KEY,
+        NULLABLE_VALIDATION_KEY
+    );
   }
 
   @Override
@@ -170,7 +173,8 @@ public SourceVersion getSupportedSourceVersion() {
             bindingGraphValidator,
             componentDescriptorFactory,
             bindingGraphFactory,
-            componentGenerator),
+            componentGenerator
+        ),
         new ProducerModuleProcessingStep(
             messager,
             producerModuleValidator,
@@ -183,7 +187,8 @@ public SourceVersion getSupportedSourceVersion() {
             bindingGraphValidator,
             componentDescriptorFactory,
             bindingGraphFactory,
-            componentGenerator));
+            componentGenerator
+        ));
   }
 
   @Override
@@ -199,29 +204,28 @@ protected void postProcess() {
   private static final String DISABLE_INTER_COMPONENT_SCOPE_VALIDATION_KEY =
       "dagger.disableInterComponentScopeValidation";
 
-  private static final String NULLABLE_VALIDATION_KEY =
-      "dagger.nullableValidation";
+  private static final String NULLABLE_VALIDATION_KEY = "dagger.nullableValidation";
 
   private static ValidationType scopeValidationType(ProcessingEnvironment processingEnv) {
-    return validationTypeFor(processingEnv,
+    return valueOf(processingEnv,
         DISABLE_INTER_COMPONENT_SCOPE_VALIDATION_KEY,
         ValidationType.ERROR,
         EnumSet.allOf(ValidationType.class));
   }
 
   private static ValidationType nullableValidationType(ProcessingEnvironment processingEnv) {
-    return validationTypeFor(processingEnv,
+    return valueOf(processingEnv,
         NULLABLE_VALIDATION_KEY,
         ValidationType.ERROR,
         EnumSet.of(ValidationType.ERROR, ValidationType.WARNING));
   }
 
-  private static ValidationType validationTypeFor(ProcessingEnvironment processingEnv, String key,
-      ValidationType defaultValue, Set<ValidationType> validValues) {
+  private static <T extends Enum<T>> T valueOf(ProcessingEnvironment processingEnv, String key,
+      T defaultValue, Set<T> validValues) {
     Map<String, String> options = processingEnv.getOptions();
     if (options.containsKey(key)) {
       try {
-        ValidationType type = ValidationType.valueOf(options.get(key).toUpperCase());
+        T type = Enum.valueOf(defaultValue.getDeclaringClass(), options.get(key).toUpperCase());
         if (!validValues.contains(type)) {
           throw new IllegalArgumentException(); // let handler below print out good msg.
         }
diff --git a/compiler/src/main/java/dagger/internal/codegen/ProductionComponentProcessingStep.java b/compiler/src/main/java/dagger/internal/codegen/ProductionComponentProcessingStep.java
index 187cecd73..667a80b86 100644
--- a/compiler/src/main/java/dagger/internal/codegen/ProductionComponentProcessingStep.java
+++ b/compiler/src/main/java/dagger/internal/codegen/ProductionComponentProcessingStep.java
@@ -46,7 +46,8 @@
       BindingGraphValidator bindingGraphValidator,
       ComponentDescriptor.Factory componentDescriptorFactory,
       BindingGraph.Factory bindingGraphFactory,
-      ComponentGenerator componentGenerator) {
+      ComponentGenerator componentGenerator
+  ) {
     this.messager = messager;
     this.componentValidator = componentValidator;
     this.bindingGraphValidator = bindingGraphValidator;
