diff --git a/compiler/src/main/java/dagger/internal/codegen/ComponentProcessor.java b/compiler/src/main/java/dagger/internal/codegen/ComponentProcessor.java
index cab990195..0adc85b8f 100644
--- a/compiler/src/main/java/dagger/internal/codegen/ComponentProcessor.java
+++ b/compiler/src/main/java/dagger/internal/codegen/ComponentProcessor.java
@@ -26,6 +26,7 @@
 import javax.annotation.processing.Filer;
 import javax.annotation.processing.Messager;
 import javax.annotation.processing.Processor;
+import javax.annotation.processing.RoundEnvironment;
 import javax.lang.model.SourceVersion;
 import javax.lang.model.util.Elements;
 import javax.lang.model.util.Types;
@@ -239,12 +240,14 @@ public SourceVersion getSupportedSourceVersion() {
   }
 
   @Override
-  protected void postProcess() {
-    try {
-      injectBindingRegistry.generateSourcesForRequiredBindings(
-          factoryGenerator, membersInjectorGenerator);
-    } catch (SourceFileGenerationException e) {
-      e.printMessageTo(processingEnv.getMessager());
+  protected void postRound(RoundEnvironment roundEnv) {
+    if (!roundEnv.processingOver()) {
+      try {
+        injectBindingRegistry.generateSourcesForRequiredBindings(
+            factoryGenerator, membersInjectorGenerator);
+      } catch (SourceFileGenerationException e) {
+        e.printMessageTo(processingEnv.getMessager());
+      }
     }
   }
 }
diff --git a/compiler/src/test/java/dagger/internal/codegen/DaggerModuleMethodSubject.java b/compiler/src/test/java/dagger/internal/codegen/DaggerModuleMethodSubject.java
index 61a54d8ea..7814c82f5 100644
--- a/compiler/src/test/java/dagger/internal/codegen/DaggerModuleMethodSubject.java
+++ b/compiler/src/test/java/dagger/internal/codegen/DaggerModuleMethodSubject.java
@@ -159,7 +159,7 @@ void hasError(String errorSubstring) {
   }
 
   private int methodLine(String source) {
-    String beforeMethod = source.substring(0, source.indexOf(getSubject()));
+    String beforeMethod = source.substring(0, source.indexOf(actual()));
     int methodLine = 1;
     for (int nextNewlineIndex = beforeMethod.indexOf('\n');
         nextNewlineIndex >= 0;
@@ -178,7 +178,7 @@ private String moduleSource() {
       writer.println(importLine);
     }
     writer.println();
-    writer.printf(declaration, "TestModule", "\n" + getSubject() + "\n");
+    writer.printf(declaration, "TestModule", "\n" + actual() + "\n");
     writer.println();
     return stringWriter.toString();
   }
diff --git a/compiler/src/test/java/dagger/internal/codegen/SubcomponentValidationTest.java b/compiler/src/test/java/dagger/internal/codegen/SubcomponentValidationTest.java
index 9c011f882..c1ed888f4 100644
--- a/compiler/src/test/java/dagger/internal/codegen/SubcomponentValidationTest.java
+++ b/compiler/src/test/java/dagger/internal/codegen/SubcomponentValidationTest.java
@@ -17,7 +17,6 @@
 package dagger.internal.codegen;
 
 import static com.google.common.truth.Truth.assertAbout;
-import static com.google.common.truth.Truth.assertThat;
 import static com.google.testing.compile.JavaSourcesSubject.assertThat;
 import static com.google.testing.compile.JavaSourcesSubjectFactory.javaSources;
 import static dagger.internal.codegen.GeneratedLines.GENERATED_ANNOTATION;
diff --git a/pom.xml b/pom.xml
index 138f07346..ba8f0ea23 100644
--- a/pom.xml
+++ b/pom.xml
@@ -47,7 +47,7 @@
     <java.version>1.7</java.version>
     <javax.inject.version>1</javax.inject.version>
     <javax.annotation.version>3.0.1</javax.annotation.version>
-    <auto.common.version>0.6</auto.common.version>
+    <auto.common.version>0.7</auto.common.version>
     <auto.factory.version>1.0-beta3</auto.factory.version>
     <auto.service.version>1.0-rc2</auto.service.version>
     <auto.value.version>1.3</auto.value.version>
@@ -60,7 +60,7 @@
     <compile-testing.version>0.9</compile-testing.version>
     <junit.version>4.11</junit.version>
     <mockito.version>1.9.5</mockito.version>
-    <truth.version>0.29</truth.version>
+    <truth.version>0.30</truth.version>
   </properties>
 
   <scm>
