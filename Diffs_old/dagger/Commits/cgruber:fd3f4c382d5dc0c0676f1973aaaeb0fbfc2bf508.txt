diff --git a/.travis.yml b/.travis.yml
index 34622aca9..e7626a7f5 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -62,4 +62,3 @@ branches:
 cache:
   directories:
     - $HOME/.m2
-    - $HOME/.cache/bazel
diff --git a/util/generate-latest-docs.sh b/util/generate-latest-docs.sh
index bf5f7b9ca..e534adc46 100755
--- a/util/generate-latest-docs.sh
+++ b/util/generate-latest-docs.sh
@@ -1,5 +1,7 @@
 # see http://benlimmer.com/2013/12/26/automatically-publish-javadoc-to-gh-pages-with-travis-ci/ for details
 
+set -eu
+
 if [ "$TRAVIS_REPO_SLUG" == "google/dagger" ] && \
    [ "$TRAVIS_JDK_VERSION" == "$JDK_FOR_PUBLISHING" ] && \
    [ "$TRAVIS_PULL_REQUEST" == "false" ] && \
diff --git a/util/publish-snapshot-on-commit.sh b/util/publish-snapshot-on-commit.sh
index a571760f5..ab0d84cab 100755
--- a/util/publish-snapshot-on-commit.sh
+++ b/util/publish-snapshot-on-commit.sh
@@ -1,5 +1,7 @@
 # see https://coderwall.com/p/9b_lfq
 
+set -eu
+
 if [ "$TRAVIS_REPO_SLUG" == "google/dagger" ] && \
    [ "$TRAVIS_JDK_VERSION" == "$JDK_FOR_PUBLISHING" ] && \
    [ "$TRAVIS_PULL_REQUEST" == "false" ] && \
@@ -9,7 +11,8 @@ if [ "$TRAVIS_REPO_SLUG" == "google/dagger" ] && \
   sh $(dirname $0)/execute-deploy.sh \
     "HEAD-SNAPSHOT" \
     "sonatype-nexus-snapshots" \
-    "https://oss.sonatype.org/content/repositories/snapshots"
+    "https://oss.sonatype.org/content/repositories/snapshots" \
+    "--settings=util/settings.xml"
 
   echo -e "Published maven snapshot"
 else
