diff --git a/java/dagger/android/processor/AndroidMapKeyValidator.java b/java/dagger/android/processor/AndroidMapKeyValidator.java
index da5639302..4b8240ff8 100644
--- a/java/dagger/android/processor/AndroidMapKeyValidator.java
+++ b/java/dagger/android/processor/AndroidMapKeyValidator.java
@@ -76,7 +76,7 @@
   }
 
   @Override
-  public Set<? extends Element> process(
+  public Set<Element> process(
       SetMultimap<Class<? extends Annotation>, Element> elementsByAnnotation) {
     elementsByAnnotation.forEach(
         (annotation, element) -> validateMethod(annotation, MoreElements.asExecutable(element)));
diff --git a/java/dagger/android/processor/BUILD b/java/dagger/android/processor/BUILD
index 394ae8525..12ba1e1f9 100644
--- a/java/dagger/android/processor/BUILD
+++ b/java/dagger/android/processor/BUILD
@@ -23,14 +23,22 @@ load(
     "DOCLINT_REFERENCES",
 )
 
+# https://github.com/bazelbuild/bazel/issues/2517
+java_import(
+    name = "dagger_android_import_hack",
+    jars = [
+        "//java/dagger/android:libandroid.jar",
+        "//java/dagger/android/support:libsupport.jar",
+    ],
+)
+
 java_library(
     name = "processor",
     srcs = glob(["*.java"]),
     javacopts = DOCLINT_HTML_AND_SYNTAX + DOCLINT_REFERENCES,
     deps = [
+        ":dagger_android_import_hack",
         "//core",
-        "//java/dagger/android",
-        "//java/dagger/android/support",
         "//third_party:auto_common",
         "//third_party:auto_service",
         "//third_party:auto_value",
