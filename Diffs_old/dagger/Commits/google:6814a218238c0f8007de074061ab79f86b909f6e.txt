diff --git a/java/dagger/internal/codegen/CompilerOptions.java b/java/dagger/internal/codegen/CompilerOptions.java
index d657a15fc..6e6b24acc 100644
--- a/java/dagger/internal/codegen/CompilerOptions.java
+++ b/java/dagger/internal/codegen/CompilerOptions.java
@@ -57,6 +57,8 @@
    */
   abstract boolean experimentalAndroidMode2();
 
+  abstract boolean formatGeneratedSource();
+
   abstract boolean writeProducerNameInToken();
 
   abstract Diagnostic.Kind nullableValidationKind();
@@ -98,6 +100,8 @@ static CompilerOptions create(ProcessingEnvironment processingEnv, DaggerElement
         .fastInit(fastInitEnabled(processingEnv))
         .experimentalAndroidMode2(
             experimentalAndroidMode2FeatureStatus(processingEnv).equals(FeatureStatus.ENABLED))
+        .formatGeneratedSource(
+            formatGeneratedSourceFeatureStatus(processingEnv).equals(FeatureStatus.ENABLED))
         .writeProducerNameInToken(
             writeProducerNameInTokenFeatureStatus(processingEnv).equals(FeatureStatus.ENABLED))
         .nullableValidationKind(nullableValidationType(processingEnv).diagnosticKind().get())
@@ -129,6 +133,8 @@ static CompilerOptions create(ProcessingEnvironment processingEnv, DaggerElement
 
     Builder experimentalAndroidMode2(boolean experimentalAndroidMode2);
 
+    Builder formatGeneratedSource(boolean formatGeneratedSource);
+
     Builder writeProducerNameInToken(boolean writeProducerNameInToken);
 
     Builder nullableValidationKind(Diagnostic.Kind kind);
@@ -161,6 +167,8 @@ Builder warnIfInjectionFactoryNotGeneratedUpstream(
 
   static final String EXPERIMENTAL_ANDROID_MODE2 = "dagger.experimentalAndroidMode2";
 
+  static final String FORMAT_GENERATED_SOURCE = "dagger.formatGeneratedSource";
+
   static final String WRITE_PRODUCER_NAME_IN_TOKEN_KEY = "dagger.writeProducerNameInToken";
 
   static final String DISABLE_INTER_COMPONENT_SCOPE_VALIDATION_KEY =
@@ -196,6 +204,7 @@ Builder warnIfInjectionFactoryNotGeneratedUpstream(
           FAST_INIT,
           EXPERIMENTAL_ANDROID_MODE,
           HEADER_COMPILATION,
+          FORMAT_GENERATED_SOURCE,
           WRITE_PRODUCER_NAME_IN_TOKEN_KEY,
           DISABLE_INTER_COMPONENT_SCOPE_VALIDATION_KEY,
           NULLABLE_VALIDATION_KEY,
@@ -231,6 +240,15 @@ private static FeatureStatus experimentalAndroidMode2FeatureStatus(
         EnumSet.allOf(FeatureStatus.class));
   }
 
+  private static FeatureStatus formatGeneratedSourceFeatureStatus(
+      ProcessingEnvironment processingEnv) {
+    return valueOf(
+        processingEnv,
+        FORMAT_GENERATED_SOURCE,
+        FeatureStatus.ENABLED,
+        EnumSet.allOf(FeatureStatus.class));
+  }
+
   private static FeatureStatus writeProducerNameInTokenFeatureStatus(
       ProcessingEnvironment processingEnv) {
     return valueOf(
diff --git a/java/dagger/internal/codegen/ProcessingEnvironmentModule.java b/java/dagger/internal/codegen/ProcessingEnvironmentModule.java
index 786955570..2c104f5ba 100644
--- a/java/dagger/internal/codegen/ProcessingEnvironmentModule.java
+++ b/java/dagger/internal/codegen/ProcessingEnvironmentModule.java
@@ -54,9 +54,8 @@ Messager messager() {
   }
 
   @Provides
-  @Reusable // to avoid noting about disabling the formatter more than once
-  Filer filer(CompilerOptions compilerOptions, Messager messager) {
-    if (compilerOptions.headerCompilation()) {
+  Filer filer(CompilerOptions compilerOptions) {
+    if (compilerOptions.headerCompilation() || !compilerOptions.formatGeneratedSource()) {
       return processingEnvironment.getFiler();
     } else {
       return new FormattingFiler(processingEnvironment.getFiler());
