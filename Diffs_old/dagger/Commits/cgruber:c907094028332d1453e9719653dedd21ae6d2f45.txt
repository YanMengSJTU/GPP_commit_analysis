diff --git a/WORKSPACE b/WORKSPACE
index d8860f003..de425d11f 100644
--- a/WORKSPACE
+++ b/WORKSPACE
@@ -65,10 +65,16 @@ maven_jar(
     sha1 = "13f0f0dce4e710bb0bb791bd07f6e9858670a865",
 )
 
+maven_jar(
+    name = "com_google_errorprone_javac",
+    artifact = "com.google.errorprone:javac:9-dev-r3297-1-shaded",
+    sha1 = "0f6d4998965282068a3feecddc21578d23f17275",
+)
+
 maven_jar(
     name = "com_google_googlejavaformat_google_java_format",
-    artifact = "com.google.googlejavaformat:google-java-format:jar:all-deps:1.1",
-    sha1 = "cf47e1c32fa8ccc75fa3f1e2331317a866c8bd0a",
+    artifact = "com.google.googlejavaformat:google-java-format:1.2",
+    sha1 = "c897dff7c217667d797bc9bf9d54416e776e9917",
 )
 
 maven_jar(
diff --git a/compiler/pom.xml b/compiler/pom.xml
index c420563aa..0edafbdf5 100644
--- a/compiler/pom.xml
+++ b/compiler/pom.xml
@@ -208,6 +208,13 @@
                     <exclude>META-INF/*.RSA</exclude>
                   </excludes>
                 </filter>
+                <!-- https://github.com/google/google-java-format/issues/114 -->
+                <filter>
+                  <artifact>com.google.errorprone:javac</artifact>
+                  <includes>
+                    <include>**</include>
+                  </includes>
+                </filter>
               </filters>
             </configuration>
           </execution>
diff --git a/pom.xml b/pom.xml
index b55344445..3b7d932ec 100644
--- a/pom.xml
+++ b/pom.xml
@@ -101,7 +101,7 @@
       <dependency>
         <groupId>com.google.googlejavaformat</groupId>
         <artifactId>google-java-format</artifactId>
-        <version>1.1</version>
+        <version>1.2</version>
       </dependency>
       <dependency>
         <groupId>com.google.auto</groupId>
diff --git a/third_party/BUILD b/third_party/BUILD
index e8e6cad4f..492d49743 100644
--- a/third_party/BUILD
+++ b/third_party/BUILD
@@ -142,7 +142,11 @@ java_library(
 
 java_library(
     name = "google_java_format",
-    exports = ["@com_google_googlejavaformat_google_java_format//jar"],
+    exports = [
+        ":guava",
+        "@com_google_errorprone_javac//jar",
+        "@com_google_googlejavaformat_google_java_format//jar",
+    ],
 )
 
 java_library(
diff --git a/util/maven/xml_formatting.py b/util/maven/xml_formatting.py
index 54ee89a0f..71db83b8b 100644
--- a/util/maven/xml_formatting.py
+++ b/util/maven/xml_formatting.py
@@ -21,8 +21,7 @@
 """.strip()
 
 def maven_dependency_xml(artifact_string):
-  group, artifact = artifact_string.split(':')[0:2]
-  version = artifact_string.split(':')[-1]
+  group, artifact, version = artifact_string.split(':')
   formatted = DEP_BLOCK % (group, artifact, version)
   return '\n'.join(['    %s' %x for x in formatted.split('\n')])
 
@@ -51,7 +50,7 @@ def maven_dependency_xml(artifact_string):
     <version>7</version>
   </parent>
 
-  <groupId>com.google.dagger</groupId>
+  <groupId>{group}</groupId>
   <artifactId>{artifact}</artifactId>
   <name>{name}</name>
   <version>{version}</version>
@@ -90,13 +89,12 @@ def maven_dependency_xml(artifact_string):
 """
 
 def generate_pom(artifact_string, metadata, deps, version):
-  artifact = artifact_string.split(':')[1]
-  # accounts for classifiers in artifact string
-  version = artifact_string.split(':')[-1]
+  group, artifact, version = artifact_string.split(':')
 
   return POM_OUTLINE.format(
-      artifact = artifact,
-      name = metadata['name'],
-      version = version,
-      packaging = metadata.get('packaging', 'jar'),
-      deps = '\n'.join(map(maven_dependency_xml, deps)))
+      group=group,
+      artifact=artifact,
+      name=metadata['name'],
+      version=version,
+      packaging=metadata.get('packaging', 'jar'),
+      deps='\n'.join(map(maven_dependency_xml, deps)))
