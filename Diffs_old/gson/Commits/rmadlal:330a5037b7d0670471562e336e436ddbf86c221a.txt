diff --git a/gson/src/main/java/com/google/gson/internal/LinkedTreeMap.java b/gson/src/main/java/com/google/gson/internal/LinkedTreeMap.java
index c2c84802a..b125e71ec 100644
--- a/gson/src/main/java/com/google/gson/internal/LinkedTreeMap.java
+++ b/gson/src/main/java/com/google/gson/internal/LinkedTreeMap.java
@@ -158,15 +158,23 @@ public LinkedTreeMap(Comparator<? super K> comparator) {
     // Create the node and add it to the tree or the table.
     Node<K, V> header = this.header;
     Node<K, V> created;
+    // marked
     if (nearest == null) {
       // Check that the value is comparable if we didn't do any comparisons.
       if (comparator == NATURAL_ORDER && !(key instanceof Comparable)) {
         throw new ClassCastException(key.getClass().getName() + " is not Comparable");
       }
       created = new Node<K, V>(nearest, key, header, header.prev);
-      root = created;
     } else {
       created = new Node<K, V>(nearest, key, header, header.prev);
+    }
+    // after
+    if (nearest == null) {
+      if (comparator == NATURAL_ORDER && !(key instanceof Comparable)) {
+        throw new ClassCastException(key.getClass().getName() + " is not Comparable");
+      }
+      root = created;
+    } else {
       if (comparison < 0) { // nearest.key is higher
         nearest.left = created;
       } else { // comparison > 0, nearest.key is lower
