diff --git a/core/src/main/java/com/graphhopper/routing/AlgorithmOptions.java b/core/src/main/java/com/graphhopper/routing/AlgorithmOptions.java
index e206b35e94..964caa5ebc 100644
--- a/core/src/main/java/com/graphhopper/routing/AlgorithmOptions.java
+++ b/core/src/main/java/com/graphhopper/routing/AlgorithmOptions.java
@@ -80,6 +80,9 @@ public static Builder start(AlgorithmOptions opts) {
             b.weighting(opts.getWeighting());
         if (opts.maxVisitedNodes >= 0)
             b.maxVisitedNodes(opts.maxVisitedNodes);
+        if (!opts.hints.isEmpty())
+            b.hints(opts.hints);
+
         return b;
     }
 
@@ -90,6 +93,10 @@ public TraversalMode getTraversalMode() {
         return traversalMode;
     }
 
+    public boolean hasWeighting() {
+        return weighting != null;
+    }
+
     public Weighting getWeighting() {
         assertNotNull(weighting, "weighting");
         return weighting;
@@ -140,7 +147,7 @@ public Builder weighting(Weighting weighting) {
         public Builder algorithm(String algorithm) {
             this.opts.algorithm = algorithm;
             return this;
-        }        
+        }
 
         public Builder maxVisitedNodes(int maxVisitedNodes) {
             this.opts.maxVisitedNodes = maxVisitedNodes;
diff --git a/core/src/main/java/com/graphhopper/util/PMap.java b/core/src/main/java/com/graphhopper/util/PMap.java
index e6edcbc0a1..24d4d71414 100644
--- a/core/src/main/java/com/graphhopper/util/PMap.java
+++ b/core/src/main/java/com/graphhopper/util/PMap.java
@@ -170,6 +170,10 @@ PMap merge(Map<String, String> map) {
         return this;
     }
 
+    public boolean isEmpty() {
+        return map.isEmpty();
+    }
+
     @Override
     public String toString() {
         return getMap().toString();
diff --git a/graphhopper.sh b/graphhopper.sh
index ef756718e8..7d50b8fae0 100755
--- a/graphhopper.sh
+++ b/graphhopper.sh
@@ -1,4 +1,6 @@
 #!/bin/bash
+(set -o igncr) 2>/dev/null && set -o igncr; # this comment is required for handling Windows cr/lf 
+# See StackOverflow answer http://stackoverflow.com/a/14607651
 
 GH_CLASS=com.graphhopper.tools.Import
 GH_HOME=$(dirname "$0")
