diff --git a/web/src/main/webapp/.ebextensions/server-update.config b/web/src/main/webapp/.ebextensions/server-update.config
index a41bd75868..5b55153124 100644
--- a/web/src/main/webapp/.ebextensions/server-update.config
+++ b/web/src/main/webapp/.ebextensions/server-update.config
@@ -2,37 +2,40 @@ files:
     "/extract.sh" :
         owner: root
         group: root
+        mode: "000755"
         content: |
             #!/bin/bash
-             
-            # This assumes there is already a tar.bz2 file called itnfull.tar.bz2 in /
+            # Remove the existing config.properties so it can be replaced
+            rm -f /config.properties
+            #fetch the preingested routing data
+            AWS_SECRET_ACCESS_KEY=${AWS_SECRET_KEY} aws s3 cp --region eu-west-1 s3://graphhopper/${ROUTING_ARCHIVE} .
+            #fetch applicatio config file
+            AWS_SECRET_ACCESS_KEY=${AWS_SECRET_KEY} aws s3 cp --region eu-west-1 s3://graphhopper/${ROUTING_CONFIG} /config.properties
             
+            # This assumes there is already a tar.bz2 file called ${ROUTING_ARCHIVE} in /
             # Remove existing data
-            rm -rf itn-gh
-             
+            rm -rf ${graphhopper_graph_location}
+
             # Extract the route data
-            tar xvjf itnfull.tar.bz2 -C /
-            #tar xvjf itn-exeter-modified.tar.bz2 -C /
-            
+            tar xvjf ${ROUTING_ARCHIVE} -C /
+
             # Change the owner to tomcat
-            chown -R tomcat:tomcat itn-gh
-            
-            # Remove the existing config.properties so it can be replaced
-            rm -f /config.properties
-        
-        mode: "000755"
+            chown -R tomcat:tomcat ${graphhopper_graph_location}
+           
+
+
 commands:
     01-install-awscli:
         command: easy_install awscli
-    02-download-s3-asset:
-        command: aws s3 cp --region eu-west-1 s3://graphhopper/itn-exeter-modified.tar.bz2 .
-    03-create-post-dir:
+    02-create-post-dir:
         command: mkdir /opt/elasticbeanstalk/hooks/appdeploy/post
         ignoreErrors: true
-    04-download-s3-asset2:
-        command: aws s3 cp --region eu-west-1 s3://graphhopper/env_vars.sh /opt/elasticbeanstalk/hooks/appdeploy/post/99_update_osplaces_key.sh
-    05-run-extract-script:
-        command: bash /extract.sh 
-    06-download-s3-config-properties:
-        command: aws s3 cp --region eu-west-1 s3://graphhopper/config.properties .
+    03-download-s3-asset2:
+        command: aws s3 cp --region eu-west-1 s3://graphhopper/env_vars.sh /opt/elasticbeanstalk/hooks/appdeploy/post/99_update_osplaces_key.sh    
+
+
+container_commands:
+    download-s3-asset-and-extract:
+        command: /extract.sh 
+    
          
