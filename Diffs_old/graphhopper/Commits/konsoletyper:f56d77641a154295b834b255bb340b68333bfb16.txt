diff --git a/graphhopper-teavm/pom.xml b/graphhopper-teavm/pom.xml
index 26da44fdf0..a63f037671 100644
--- a/graphhopper-teavm/pom.xml
+++ b/graphhopper-teavm/pom.xml
@@ -66,7 +66,7 @@
         </dependencies>
         <executions>
           <execution>
-            <id>generate-javascript</id>
+            <id>generate-ui-javascript</id>
             <goals>
               <goal>build-javascript</goal>
             </goals>
@@ -74,7 +74,42 @@
             <configuration>
               <minifying>false</minifying>
               <mainClass>com.graphhopper.teavm.Main</mainClass>
-              <mainPageIncluded>true</mainPageIncluded>
+            </configuration>
+          </execution>
+          <execution>
+            <id>generate-lib-javascript</id>
+            <goals>
+              <goal>build-javascript</goal>
+            </goals>
+            <phase>process-classes</phase>
+            <configuration>
+              <minifying>true</minifying>
+              <targetDirectory>${project.build.directory}</targetDirectory>
+              <runtimeCopy>MERGE</runtimeCopy>
+              <targetFileName>graphhopper-client-0.3.min.js</targetFileName>
+              <classAliases>
+                <item>
+                  <alias>ClientSideGraphHopper</alias>
+                  <className>com.graphhopper.teavm.ClientSideGraphHopper</className>
+                </item>
+              </classAliases>
+              <methodAliases>
+                <item>
+                  <className>com.graphhopper.teavm.ClientSideGraphHopper</className>
+                  <methodName>createInstance</methodName>
+                  <descriptor>()Lcom.graphhopper.teavm.ClientSideGraphHopper;</descriptor>
+                </item>
+                <item>
+                  <className>com.graphhopper.teavm.ClientSideGraphHopper</className>
+                  <methodName>route</methodName>
+                  <descriptor>(II)Lcom.graphhopper.routing.Path;</descriptor>
+                </item>
+                <item>
+                  <className>com.graphhopper.teavm.ClientSideGraphHopper</className>
+                  <methodName>findNode</methodName>
+                  <descriptor>(DD)I</descriptor>
+                </item>
+              </methodAliases>
             </configuration>
           </execution>
           <execution>
diff --git a/graphhopper-teavm/src/main/java/com/graphhopper/teavm/ClientSideGraphHopper.java b/graphhopper-teavm/src/main/java/com/graphhopper/teavm/ClientSideGraphHopper.java
index c46adeba95..422bee305b 100644
--- a/graphhopper-teavm/src/main/java/com/graphhopper/teavm/ClientSideGraphHopper.java
+++ b/graphhopper-teavm/src/main/java/com/graphhopper/teavm/ClientSideGraphHopper.java
@@ -2,6 +2,7 @@
 
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
+import org.teavm.javascript.ni.PreserveOriginalName;
 import org.teavm.jso.JS;
 import org.teavm.jso.JSArray;
 import com.graphhopper.routing.AStarBidirection;
@@ -28,6 +29,7 @@
     private Weighting weighting;
     private PrepareContractionHierarchies prepare;
 
+    @PreserveOriginalName
     public void load(JSArray<DataEntry> data) {
         if (logger.isInfoEnabled()) {
             logger.info("Loading GraphGopper directory");
@@ -84,6 +86,7 @@ private void loadStorage(JSArray<DataEntry> data) {
         }
     }
 
+    @PreserveOriginalName
     public int findNode(double lat, double lng) {
         long start = System.currentTimeMillis();
         int result = locationIndex.findID(lat, lng);
@@ -93,6 +96,7 @@ public int findNode(double lat, double lng) {
         return result;
     }
 
+    @PreserveOriginalName
     public Path route(int from, int to) {
         long start = System.currentTimeMillis();
         AStarBidirection algo = prepare.createAStar();
@@ -103,4 +107,9 @@ public Path route(int from, int to) {
         }
         return path;
     }
+
+    @PreserveOriginalName
+    public static ClientSideGraphHopper createInstance() {
+        return new ClientSideGraphHopper();
+    }
 }
