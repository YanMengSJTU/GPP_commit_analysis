diff --git a/core/src/main/java/com/graphhopper/GraphHopper.java b/core/src/main/java/com/graphhopper/GraphHopper.java
index 64a1e57ca9..4a5308efe5 100644
--- a/core/src/main/java/com/graphhopper/GraphHopper.java
+++ b/core/src/main/java/com/graphhopper/GraphHopper.java
@@ -526,12 +526,14 @@ public GraphHopper init(CmdArgs args) {
         if (!isEmpty(tmpOsmFile))
             dataReaderFile = tmpOsmFile;
 
-        String graphHopperFolder = args.get("graph.location", "");
-        if (isEmpty(graphHopperFolder) && isEmpty(ghLocation)) {
-            if (isEmpty(dataReaderFile))
-                throw new IllegalArgumentException("If no graph.location is provided you need to specify an OSM file.");
-
-            graphHopperFolder = pruneFileEnd(dataReaderFile) + "-gh";
+        if (isEmpty(ghLocation)) {
+            String graphHopperFolder = args.get("graph.location", "");
+            if (isEmpty(graphHopperFolder)) {
+                if (isEmpty(dataReaderFile))
+                    throw new IllegalArgumentException("If no graph.location is provided you need to specify an OSM file.");
+
+                graphHopperFolder = pruneFileEnd(dataReaderFile) + "-gh";
+        	}
             setGraphHopperLocation(graphHopperFolder);
         }
 
