diff --git a/web/src/test/java/com/graphhopper/swl/TDNetworkIT.java b/web/src/test/java/com/graphhopper/swl/TDNetworkIT.java
index 761dd13b72..25adc813c6 100644
--- a/web/src/test/java/com/graphhopper/swl/TDNetworkIT.java
+++ b/web/src/test/java/com/graphhopper/swl/TDNetworkIT.java
@@ -43,11 +43,12 @@ public void setUp() {
         String graphFile = "files/swl-andorra-r5-export";
         OriginalDirectionFlagEncoder originalDirectionFlagEncoder = new OriginalDirectionFlagEncoder();
         EncodingManager encodingManager = new EncodingManager(originalDirectionFlagEncoder);
+        DefaultSpeedCalculator speedCalculator = new DefaultSpeedCalculator(originalDirectionFlagEncoder);
         graphHopper = new GraphHopperOSM() {
             @Override
             public Weighting createWeighting(HintsMap hintsMap, FlagEncoder encoder, Graph graph) {
                 if (hintsMap.getWeighting().equals("td")) {
-                    return new TDWeighting(encoder, new DefaultSpeedCalculator(encoder), hintsMap);
+                    return new TDWeighting(encoder, speedCalculator, hintsMap);
                 } else {
                     return super.createWeighting(hintsMap, encoder, graph);
                 }
