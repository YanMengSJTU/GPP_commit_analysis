diff --git a/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java b/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java
index 57ee5d9866..7471e2add2 100644
--- a/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java
+++ b/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java
@@ -464,10 +464,10 @@ private void initContentStream(InputStream transferStream) throws IOException {
       // dangerous because 529 clients can query the content length, but not
       // the content encoding.
       responseHeaders.stripContentEncoding();
+      int contentLength = responseHeaders.getContentLength();
       responseHeaders.stripContentLength();
-      int responseCode = responseHeaders.getHeaders().getResponseCode();
-      if (responseCode == HttpURLConnectionImpl.HTTP_NOT_MODIFIED) {
-        // 304 have no bodies - this will cause GZIPInputStream to throw an exception
+      if (contentLength == 0 && responseSource == ResponseSource.NETWORK) {
+        // This would cause GZIPInputStream to throw an exception
         responseBodyIn = transferStream;
       } else {
         responseBodyIn = new GZIPInputStream(transferStream);
