diff --git a/build.gradle b/build.gradle
index d8a2dee821..c37e39588f 100644
--- a/build.gradle
+++ b/build.gradle
@@ -8,15 +8,15 @@ buildscript {
     }
 }
 
+apply from: project.file("version.gradle")
+
 allprojects {
     group = 'com.squareup.okhttp'
     version = rootProject.version
 }
 
 project.ext {
-    gitRepoHome = "${System.env.HOME}/.gitRepos"
-    org = "layerhq"
-    repo = "maven-private"
+    gitRepoHome = project.hasProperty("gitRepoHome") ? project.getProperty("gitRepoHome") : "${System.env.HOME}/.gitRepos"
+    org = project.hasProperty("org") ? project.getProperty("org") : "layerhq"
+    repo = project.hasProperty("repo") ? project.getProperty("repo") : "maven-private"
 }
-
-apply from: project.file("version.gradle")
diff --git a/mockwebserver/build.gradle b/mockwebserver/build.gradle
index 74d9cd28e8..dbca8ea91c 100644
--- a/mockwebserver/build.gradle
+++ b/mockwebserver/build.gradle
@@ -39,6 +39,10 @@ task testSourceJar(type: Jar) {
     from sourceSets.test.allJava
 }
 
+public String getLocalGit() {
+    return "$rootProject.ext.gitRepoHome/$rootProject.ext.org/$rootProject.ext.repo"
+}
+
 publishing {
     publications {
         mavenJava(MavenPublication) {
@@ -62,7 +66,7 @@ publishing {
     }
     repositories {
         maven {
-            url "file://${rootProject.hasProperty("gitRepoHome") ? property("gitRepoHome") : "${System.env.HOME}/.gitRepos"}/${rootProject.hasProperty("org") ? property("org") : ""}/${rootProject.hasProperty("repo") ? property("repo") : ""}/releases"
+            url "file://${getLocalGit()}/releases"
         }
     }
 }
diff --git a/okhttp/build.gradle b/okhttp/build.gradle
index 5667907605..972a58259f 100644
--- a/okhttp/build.gradle
+++ b/okhttp/build.gradle
@@ -15,7 +15,7 @@ repositories {
 }
 
 dependencies {
-    compile group: 'com.squareup.okio', name: 'okio', version:'0.9.0.2e5e3837.LAYER'
+    compile group: 'com.squareup.okio', name: 'okio', version:'0.9.0.a71ef0da.LAYER'
 }
 
 
@@ -37,6 +37,10 @@ task testSourceJar(type: Jar) {
     from sourceSets.test.allJava
 }
 
+public String getLocalGit() {
+    return "$rootProject.ext.gitRepoHome/$rootProject.ext.org/$rootProject.ext.repo"
+}
+
 publishing {
     publications {
         mavenJava(MavenPublication) {
@@ -60,7 +64,14 @@ publishing {
     }
     repositories {
         maven {
-            url "file://${rootProject.hasProperty("gitRepoHome") ? property("gitRepoHome") : "${System.env.HOME}/.gitRepos"}/${rootProject.hasProperty("org") ? property("org") : ""}/${rootProject.hasProperty("repo") ? property("repo") : ""}/releases"
+            url "file://${getLocalGit()}/releases"
         }
     }
 }
+
+task cleanLocalGit(type: Delete) {
+    doFirst {
+        println "Deleting local git repo `${getLocalGit()}`..."
+        delete "${getLocalGit()}"
+    }
+}
