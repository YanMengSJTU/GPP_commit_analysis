diff --git a/okhttp/src/main/java/com/squareup/okhttp/Connection.java b/okhttp/src/main/java/com/squareup/okhttp/Connection.java
index 87290411d9..a1ae96fe27 100644
--- a/okhttp/src/main/java/com/squareup/okhttp/Connection.java
+++ b/okhttp/src/main/java/com/squareup/okhttp/Connection.java
@@ -191,6 +191,7 @@ private void upgradeToTls(Request tunnelRequest, int readTimeout, int writeTimeo
     handshake = Handshake.get(sslSocket.getSession());
 
     String maybeProtocol;
+    protocol = route.address.protocols.get(0);
     if (useNpn && (maybeProtocol = platform.getSelectedProtocol(sslSocket)) != null) {
       protocol = Protocol.get(maybeProtocol); // Throws IOE on unknown.
     }
