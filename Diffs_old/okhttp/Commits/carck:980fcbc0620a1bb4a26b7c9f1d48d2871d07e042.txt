diff --git a/okhttp/src/main/java/com/squareup/okhttp/internal/Dns.java b/okhttp/src/main/java/com/squareup/okhttp/internal/Dns.java
index 69b2d37e94..bfc527ea65 100644
--- a/okhttp/src/main/java/com/squareup/okhttp/internal/Dns.java
+++ b/okhttp/src/main/java/com/squareup/okhttp/internal/Dns.java
@@ -22,12 +22,21 @@
  * Domain name service. Prefer this over {@link InetAddress#getAllByName} to
  * make code more testable.
  */
-public interface Dns {
-  Dns DEFAULT = new Dns() {
-    @Override public InetAddress[] getAllByName(String host) throws UnknownHostException {
-      return InetAddress.getAllByName(host);
+public abstract class Dns {
+    private static Dns defaultDns = new Dns() {
+        @Override
+        public InetAddress[] getAllByName(String host) throws UnknownHostException {
+            return InetAddress.getAllByName(host);
+        }
+    };
+
+    public static Dns getDefault() {
+        return defaultDns;
+    }
+
+    public static void setDefault(Dns dns) {
+        defaultDns = dns;
     }
-  };
 
-  InetAddress[] getAllByName(String host) throws UnknownHostException;
+    public abstract InetAddress[] getAllByName(String host) throws UnknownHostException;
 }
diff --git a/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java b/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java
index fee0e0159f..9c80f1bea3 100644
--- a/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java
+++ b/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java
@@ -287,7 +287,7 @@ protected final void connect() throws IOException {
       Address address = new Address(uriHost, getEffectivePort(uri), sslSocketFactory,
           hostnameVerifier, client.getAuthenticator(), client.getProxy(), client.getTransports());
       routeSelector = new RouteSelector(address, uri, client.getProxySelector(),
-          client.getConnectionPool(), Dns.DEFAULT, client.getRoutesDatabase());
+          client.getConnectionPool(), Dns.getDefault(), client.getRoutesDatabase());
     }
     connection = routeSelector.next(method);
     if (!connection.isConnected()) {
diff --git a/okhttp/src/test/java/com/squareup/okhttp/internal/http/RouteSelectorTest.java b/okhttp/src/test/java/com/squareup/okhttp/internal/http/RouteSelectorTest.java
index a92db9ee14..7e0bdd81a9 100644
--- a/okhttp/src/test/java/com/squareup/okhttp/internal/http/RouteSelectorTest.java
+++ b/okhttp/src/test/java/com/squareup/okhttp/internal/http/RouteSelectorTest.java
@@ -410,7 +410,7 @@ private void assertConnection(Connection connection, Address address, Proxy prox
     }
   }
 
-  private static class FakeDns implements Dns {
+  private static class FakeDns extends Dns {
     List<String> requestedHosts = new ArrayList<String>();
     InetAddress[] inetAddresses;
 
