diff --git a/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java
index f84bc27ab8..22677fcaef 100644
--- a/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java
+++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java
@@ -1382,8 +1382,7 @@ private void testAuthenticateWithStreamingPost(StreamingMode streamingMode) thro
     String call = calls.get(0);
     assertTrue(call, call.contains("host=" + url.getHost()));
     assertTrue(call, call.contains("port=" + url.getPort()));
-    InetAddress inetAddress = InetAddress.getByName(url.getHost());
-    assertThat(call, containsString("site=" + inetAddress.getCanonicalHostName() + "/" + inetAddress.getHostAddress()));
+    assertThat(call, containsString("site=" + getProxySite(url.getHost())));
     assertTrue(call, call.contains("url=http://android.com"));
     assertTrue(call, call.contains("type=" + Authenticator.RequestorType.PROXY));
     assertTrue(call, call.contains("prompt=Bar"));
@@ -1412,6 +1411,15 @@ private void testAuthenticateWithStreamingPost(StreamingMode streamingMode) thro
     return authenticator.calls;
   }
 
+  private String getProxySite(String host) throws UnknownHostException {
+    InetAddress inetAddress = InetAddress.getByName(host);
+    if ((Character.digit(host.charAt(0), 16) != -1
+        || (host.charAt(0) == ':'))) {
+      return inetAddress.getCanonicalHostName() + "/" + inetAddress.getHostAddress();
+    }
+    return inetAddress.toString();
+  }
+
   @Test public void setValidRequestMethod() throws Exception {
     server.play();
     assertValidRequestMethod("GET");
