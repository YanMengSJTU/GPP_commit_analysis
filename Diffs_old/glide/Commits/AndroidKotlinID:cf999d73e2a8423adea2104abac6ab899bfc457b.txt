diff --git a/gradle/wrapper/gradle-wrapper.jar b/gradle/wrapper/gradle-wrapper.jar
index 6b6ea3ab4..c44b679ac 100644
Binary files a/gradle/wrapper/gradle-wrapper.jar and b/gradle/wrapper/gradle-wrapper.jar differ
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 702c4b68b..a8a029ed7 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,5 +1,6 @@
+#Sun Feb 11 17:13:25 PST 2018
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-4.3.1-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.5.1-all.zip
diff --git a/instrumentation/src/androidTest/java/com/bumptech/glide/DataUriTest.java b/instrumentation/src/androidTest/java/com/bumptech/glide/DataUriTest.java
index 0b46ad79d..93593c547 100644
--- a/instrumentation/src/androidTest/java/com/bumptech/glide/DataUriTest.java
+++ b/instrumentation/src/androidTest/java/com/bumptech/glide/DataUriTest.java
@@ -10,10 +10,12 @@
 import android.net.Uri;
 import android.support.test.InstrumentationRegistry;
 import android.support.test.runner.AndroidJUnit4;
+import android.support.v4.content.ContextCompat;
 import android.util.Base64;
 import com.bumptech.glide.test.ConcurrencyHelper;
 import com.bumptech.glide.test.ResourceIds;
 import com.bumptech.glide.test.TearDownGlide;
+import com.bumptech.glide.util.Preconditions;
 import java.io.ByteArrayOutputStream;
 import org.junit.Rule;
 import org.junit.Test;
@@ -96,7 +98,8 @@ private String getDataUriString(CompressFormat format) {
 
   private String getBase64BitmapBytes(CompressFormat format) {
     ByteArrayOutputStream bos = new ByteArrayOutputStream();
-    Drawable drawable = context.getResources().getDrawable(ResourceIds.raw.canonical);
+    Drawable drawable =
+        Preconditions.checkNotNull(ContextCompat.getDrawable(context, ResourceIds.raw.canonical));
     Bitmap bitmap = ((BitmapDrawable) drawable).getBitmap();
     bitmap.compress(format, 100, bos);
     byte[] data = bos.toByteArray();
diff --git a/settings.gradle b/settings.gradle
index 464936b4e..360b59b47 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -1,5 +1,6 @@
 exec {
     commandLine "git", "submodule", "update", "--init", "--recursive"
+    ignoreExitValue true
 }
 include ':library'
 include ':library:pmd'
