diff --git a/.gitignore b/.gitignore
index 92418aa8e..1d6218e3e 100644
--- a/.gitignore
+++ b/.gitignore
@@ -54,5 +54,5 @@ build
 out/
 facebook/doc/
 facebook/tests/lint.xml
-facebook/tests/assets/config.json
+facebook/src/androidTest/assets/config.json
 gradle-app.setting
diff --git a/.travis.yml b/.travis.yml
index 4f136b59e..3e3f82b2d 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -4,13 +4,15 @@ android:
   components:
     - build-tools-21.1.2
     - build-tools-21.0.2
+    - build-tools-23.0.1
     - android-18
     - android-21
+    - android-23
     - extra
 
 # Override the install and test so that we don't run integration tests
-install: 
+install:
   - ./gradlew assemble
 
 script:
-  - ./gradlew :junitTests:test -i
+  - ./gradlew :facebook:test -i
diff --git a/build.gradle b/build.gradle
index dba1720a9..7769d34dd 100644
--- a/build.gradle
+++ b/build.gradle
@@ -4,7 +4,7 @@ buildscript {
         mavenCentral()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:1.2.3'
+        classpath 'com.android.tools.build:gradle:1.3.0'
     }
 }
 
diff --git a/facebook/build.gradle b/facebook/build.gradle
index 059f1a4fc..dd8c50bff 100644
--- a/facebook/build.gradle
+++ b/facebook/build.gradle
@@ -7,8 +7,27 @@ repositories {
 project.group = 'com.facebook.android'
 
 dependencies {
-    compile 'com.android.support:support-v4:[22,23)'
-    compile 'com.parse.bolts:bolts-android:1.2.0'
+    // Facbook Dependancies
+    compile 'com.android.support:support-v4:23.0.1'
+    compile 'com.parse.bolts:bolts-android:1.2.1'
+
+    // Unit Tests
+    testCompile 'com.android.support:appcompat-v7:23.0.1'
+
+    testCompile 'junit:junit:4.12'
+    testCompile 'org.robolectric:robolectric:3.0'
+    testCompile 'org.robolectric:shadows-support-v4:3.0'
+
+    def powerMockVersion = '1.6.1'
+    testCompile "org.powermock:powermock-module-junit4:$powerMockVersion"
+    testCompile "org.powermock:powermock-module-junit4-rule:$powerMockVersion"
+    testCompile "org.powermock:powermock-classloading-xstream:$powerMockVersion"
+    testCompile "org.powermock:powermock-api-mockito:$powerMockVersion"
+
+    // Connected Tests
+    androidTestCompile 'org.mockito:mockito-core:1.10.19'
+    androidTestCompile 'com.google.dexmaker:dexmaker:1.2'
+    androidTestCompile 'com.google.dexmaker:dexmaker-mockito:1.2'
 }
 
 android {
@@ -18,20 +37,12 @@ android {
     defaultConfig {
         minSdkVersion 9
         targetSdkVersion 22
+        multiDexEnabled true
     }
 
     lintOptions {
         abortOnError false
     }
-
-    sourceSets {
-        main {
-            manifest.srcFile 'AndroidManifest.xml'
-            java.srcDirs = ['src']
-            res.srcDirs = ['res']
-        }
-    }
-
     compileOptions {
         sourceCompatibility JavaVersion.VERSION_1_7
         targetCompatibility JavaVersion.VERSION_1_7
@@ -48,7 +59,7 @@ def ossrhPassword = hasProperty('NEXUS_PASSWORD') ? NEXUS_PASSWORD : ""
 task setVersion {
     // The version will be derived from source
     project.version = null
-    def sdkVersionFile = file('src/com/facebook/FacebookSdkVersion.java')
+    def sdkVersionFile = file('src/main/java/com/facebook/FacebookSdkVersion.java')
     sdkVersionFile.eachLine{
         def matcher = (it =~ /(?:.*BUILD = \")(.*)(?:\".*)/)
         if (matcher.matches()) {
diff --git a/facebook/junitTests/build.gradle b/facebook/junitTests/build.gradle
deleted file mode 100644
index 09e221088..000000000
--- a/facebook/junitTests/build.gradle
+++ /dev/null
@@ -1,54 +0,0 @@
-buildscript {
-    repositories {
-        mavenCentral()
-    }
-    dependencies {
-        classpath 'org.robolectric:robolectric-gradle-plugin:1.1.+'
-    }
-}
-
-apply plugin: 'com.android.application'
-apply plugin: 'org.robolectric'
-
-android {
-    // roboelectric v21 is currently broken for some of our tests
-    compileSdkVersion 19
-    buildToolsVersion "21.1.2"
-
-    defaultConfig {
-        applicationId "com.facebook.junittests"
-        minSdkVersion Integer.parseInt(project.ANDROID_BUILD_MIN_SDK_VERSION)
-        // roboelectric v21 is currently broken for some of our tests
-        targetSdkVersion 19
-        versionCode 1
-        versionName "1.0"
-    }
-    buildTypes {
-        release {
-            minifyEnabled false
-            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
-        }
-    }
-    compileOptions {
-        sourceCompatibility JavaVersion.VERSION_1_7
-        targetCompatibility JavaVersion.VERSION_1_7
-    }
-}
-
-dependencies {
-    def powerMockVersion = '1.6.1'
-
-    compile fileTree(dir: 'libs', include: ['*.jar'])
-    compile 'com.android.support:appcompat-v7:19.+'
-    compile project(':facebook')
-
-    testCompile 'junit:junit:4.12'
-    testCompile 'org.robolectric:robolectric:3.0'
-    testCompile 'org.robolectric:shadows-support-v4:3.0'
-
-    // PowerMock brings in the mockito dependency
-    testCompile "org.powermock:powermock-module-junit4:$powerMockVersion"
-    testCompile "org.powermock:powermock-module-junit4-rule:$powerMockVersion"
-    testCompile "org.powermock:powermock-classloading-xstream:$powerMockVersion"
-    testCompile "org.powermock:powermock-api-mockito:$powerMockVersion"
-}
diff --git a/facebook/junitTests/proguard-rules.pro b/facebook/junitTests/proguard-rules.pro
deleted file mode 100644
index c65732a17..000000000
--- a/facebook/junitTests/proguard-rules.pro
+++ /dev/null
@@ -1,17 +0,0 @@
-# Add project specific ProGuard rules here.
-# By default, the flags in this file are appended to flags specified
-# in /Users/gokhanc/android-sdk-macosx/tools/proguard/proguard-android.txt
-# You can edit the include path and order by changing the proguardFiles
-# directive in build.gradle.
-#
-# For more details, see
-#   http://developer.android.com/guide/developing/tools/proguard.html
-
-# Add any project specific keep options here:
-
-# If your project uses WebView with JS, uncomment the following
-# and specify the fully qualified class name to the JavaScript interface
-# class:
-#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
-#   public *;
-#}
diff --git a/facebook/junitTests/src/main/java/com/facebook/junittests/MainActivity.java b/facebook/junitTests/src/main/java/com/facebook/junittests/MainActivity.java
deleted file mode 100644
index bc8e3c97e..000000000
--- a/facebook/junitTests/src/main/java/com/facebook/junittests/MainActivity.java
+++ /dev/null
@@ -1,64 +0,0 @@
-/**
- * Copyright (c) 2014-present, Facebook, Inc. All rights reserved.
- *
- * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
- * copy, modify, and distribute this software in source code or binary form for use
- * in connection with the web services and APIs provided by Facebook.
- *
- * As with any software that integrates with the Facebook platform, your use of
- * this software is subject to the Facebook Developer Principles and Policies
- * [http://developers.facebook.com/policy/]. This copyright notice shall be
- * included in all copies or substantial portions of the software.
- *
- * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
- * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
- * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
- * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
- * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
- * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
- */
-
-package com.facebook.junittests;
-
-import android.support.v4.app.FragmentActivity;
-import android.support.v7.app.ActionBarActivity;
-import android.os.Bundle;
-import android.view.Menu;
-import android.view.MenuItem;
-
-import com.facebook.FacebookSdk;
-
-
-public class MainActivity extends FragmentActivity {
-    private static String APP_ID = "1234";
-    @Override
-    protected void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        FacebookSdk.sdkInitialize(getApplicationContext());
-        FacebookSdk.setApplicationId(APP_ID);
-        setContentView(R.layout.activity_main);
-    }
-
-
-    @Override
-    public boolean onCreateOptionsMenu(Menu menu) {
-        // Inflate the menu; this adds items to the action bar if it is present.
-        getMenuInflater().inflate(R.menu.menu_main, menu);
-        return true;
-    }
-
-    @Override
-    public boolean onOptionsItemSelected(MenuItem item) {
-        // Handle action bar item clicks here. The action bar will
-        // automatically handle clicks on the Home/Up button, so long
-        // as you specify a parent activity in AndroidManifest.xml.
-        int id = item.getItemId();
-
-        //noinspection SimplifiableIfStatement
-        if (id == R.id.action_settings) {
-            return true;
-        }
-
-        return super.onOptionsItemSelected(item);
-    }
-}
diff --git a/facebook/junitTests/src/test/java/com/facebook/ApplicationTest.java b/facebook/junitTests/src/test/java/com/facebook/ApplicationTest.java
deleted file mode 100644
index a6452b5a1..000000000
--- a/facebook/junitTests/src/test/java/com/facebook/ApplicationTest.java
+++ /dev/null
@@ -1,61 +0,0 @@
-/**
- * Copyright (c) 2014-present, Facebook, Inc. All rights reserved.
- *
- * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
- * copy, modify, and distribute this software in source code or binary form for use
- * in connection with the web services and APIs provided by Facebook.
- *
- * As with any software that integrates with the Facebook platform, your use of
- * this software is subject to the Facebook Developer Principles and Policies
- * [http://developers.facebook.com/policy/]. This copyright notice shall be
- * included in all copies or substantial portions of the software.
- *
- * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
- * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
- * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
- * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
- * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
- * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
- */
-
-package com.facebook;
-
-import android.app.Activity;
-
-import com.facebook.junittests.MainActivity;
-
-import org.junit.Before;
-import org.junit.Test;
-import org.robolectric.Robolectric;
-
-import java.util.concurrent.CountDownLatch;
-import java.util.concurrent.TimeUnit;
-import java.util.concurrent.atomic.AtomicBoolean;
-
-import static org.junit.Assert.*;
-
-public class ApplicationTest extends FacebookTestCase {
-    @Test
-    public void testCreateActivity() throws Exception {
-        Activity activity = Robolectric.buildActivity(MainActivity.class).create().get();
-        assertTrue(activity != null);
-    }
-
-    @Test
-    public void testSdkInitializeCallback() throws Exception{
-        final CountDownLatch lock = new CountDownLatch(1);
-        Activity activity = Robolectric.buildActivity(MainActivity.class).create().get();
-        final AtomicBoolean initialized = new AtomicBoolean(false);
-        FacebookSdk.sdkInitialize(activity, new FacebookSdk.InitializeCallback() {
-            @Override
-            public void onInitialized() {
-                initialized.set(true);
-                lock.countDown();
-            }
-        });
-
-        lock.await(100, TimeUnit.MILLISECONDS);
-
-        assertTrue(initialized.get());
-    }
-}
diff --git a/facebook/junitTests/src/test/java/com/facebook/login/widget/LoginButtonTest.java b/facebook/junitTests/src/test/java/com/facebook/login/widget/LoginButtonTest.java
deleted file mode 100644
index cd842c176..000000000
--- a/facebook/junitTests/src/test/java/com/facebook/login/widget/LoginButtonTest.java
+++ /dev/null
@@ -1,113 +0,0 @@
-/**
- * Copyright (c) 2014-present, Facebook, Inc. All rights reserved.
- *
- * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
- * copy, modify, and distribute this software in source code or binary form for use
- * in connection with the web services and APIs provided by Facebook.
- *
- * As with any software that integrates with the Facebook platform, your use of
- * this software is subject to the Facebook Developer Principles and Policies
- * [http://developers.facebook.com/policy/]. This copyright notice shall be
- * included in all copies or substantial portions of the software.
- *
- * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
- * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
- * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
- * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
- * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
- * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
- */
-
-package com.facebook.login.widget;
-
-import android.app.Activity;
-
-import com.facebook.BuildConfig;
-import com.facebook.FacebookTestCase;
-import com.facebook.junittests.MainActivity;
-import com.facebook.junittests.R;
-import com.facebook.login.DefaultAudience;
-import com.facebook.login.LoginManager;
-
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.Robolectric;
-import org.robolectric.RobolectricGradleTestRunner;
-import org.robolectric.annotation.Config;
-
-import java.util.ArrayList;
-
-import static org.junit.Assert.fail;
-import static org.mockito.Matchers.anyCollection;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.powermock.api.mockito.PowerMockito.mock;
-
-public class LoginButtonTest extends FacebookTestCase {
-
-    @Test
-    public void testLoginButtonWithReadPermissions() throws Exception {
-        LoginManager loginManager = mock(LoginManager.class);
-        Activity activity = Robolectric.buildActivity(MainActivity.class).create().get();
-
-        LoginButton loginButton = (LoginButton) activity.findViewById(R.id.login_button);
-        ArrayList<String> permissions = new ArrayList<>();
-        permissions.add("user_location");
-        loginButton.setReadPermissions(permissions);
-        loginButton.setDefaultAudience(DefaultAudience.EVERYONE);
-        loginButton.setLoginManager(loginManager);
-        loginButton.performClick();
-
-        verify(loginManager).logInWithReadPermissions(activity, permissions);
-        verify(loginManager, never())
-                .logInWithPublishPermissions(isA(Activity.class), anyCollection());
-        // Verify default audience is channeled
-        verify(loginManager).setDefaultAudience(DefaultAudience.EVERYONE);
-    }
-
-    @Test
-    public void testLoginButtonWithPublishPermissions() throws Exception {
-        LoginManager loginManager = mock(LoginManager.class);
-        Activity activity = Robolectric.buildActivity(MainActivity.class).create().get();
-
-        LoginButton loginButton = (LoginButton) activity.findViewById(R.id.login_button);
-        ArrayList<String> permissions = new ArrayList<>();
-        permissions.add("publish_actions");
-        loginButton.setPublishPermissions(permissions);
-        loginButton.setLoginManager(loginManager);
-        loginButton.performClick();
-
-        verify(loginManager, never())
-                .logInWithReadPermissions(isA(Activity.class), anyCollection());
-        verify(loginManager).logInWithPublishPermissions(activity, permissions);
-    }
-
-    @Test
-    public void testCantSetReadThenPublishPermissions() throws Exception {
-        Activity activity = Robolectric.buildActivity(MainActivity.class).create().get();
-
-        LoginButton loginButton = (LoginButton) activity.findViewById(R.id.login_button);
-        loginButton.setReadPermissions("user_location");
-        try {
-            loginButton.setPublishPermissions("publish_actions");
-        } catch (UnsupportedOperationException e) {
-            return;
-        }
-        fail();
-    }
-
-    @Test
-    public void testCantSetPublishThenReadPermissions() throws Exception {
-        Activity activity = Robolectric.buildActivity(MainActivity.class).create().get();
-
-        LoginButton loginButton = (LoginButton) activity.findViewById(R.id.login_button);
-        loginButton.setPublishPermissions("publish_actions");
-        try {
-            loginButton.setReadPermissions("user_location");
-        } catch (UnsupportedOperationException e) {
-            return;
-        }
-        fail();
-    }
-}
diff --git a/facebook/tests/AndroidManifest.xml b/facebook/src/androidTest/AndroidManifest.xml
similarity index 78%
rename from facebook/tests/AndroidManifest.xml
rename to facebook/src/androidTest/AndroidManifest.xml
index f7625cff2..dc23b3931 100644
--- a/facebook/tests/AndroidManifest.xml
+++ b/facebook/src/androidTest/AndroidManifest.xml
@@ -21,9 +21,9 @@
 
 <!-- package name must be unique so suffix with "tests" so package loader doesn't ignore us -->
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
-          package="com.facebook.sdk.tests"
-          android:versionCode="1"
-          android:versionName="1.0">
+    package="com.facebook"
+    android:versionCode="1"
+    android:versionName="1.0">
     <uses-permission android:name="android.permission.INTERNET"></uses-permission>
     <uses-sdk android:minSdkVersion="9" android:targetSdkVersion="19"/>
     <!-- We add an application tag here just so that we can indicate that
@@ -37,12 +37,4 @@
         <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/>
         <meta-data android:name="com.facebook.sdk.ClientToken" android:value="@string/client_token"/>
     </application>
-    <!--
-    This declares that this application uses the instrumentation test runner targeting
-    the package of com.facebook.sdk.  To run the tests use the command:
-    "adb shell am instrument -w com.facebook.sdk.tests/android.test.InstrumentationTestRunner"
-    -->
-    <instrumentation android:name="android.test.InstrumentationTestRunner"
-                     android:targetPackage="com.facebook.sdk.tests"
-                     android:label="Tests for com.facebook.sdk.tests"/>
 </manifest>
diff --git a/facebook/tests/assets/DarkScreen.mov b/facebook/src/androidTest/assets/DarkScreen.mov
similarity index 100%
rename from facebook/tests/assets/DarkScreen.mov
rename to facebook/src/androidTest/assets/DarkScreen.mov
diff --git a/facebook/tests/src/com/facebook/AsyncRequestTests.java b/facebook/src/androidTest/java/com/facebook/AsyncRequestTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/AsyncRequestTests.java
rename to facebook/src/androidTest/java/com/facebook/AsyncRequestTests.java
diff --git a/facebook/tests/src/com/facebook/BatchRequestTests.java b/facebook/src/androidTest/java/com/facebook/BatchRequestTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/BatchRequestTests.java
rename to facebook/src/androidTest/java/com/facebook/BatchRequestTests.java
diff --git a/facebook/tests/src/com/facebook/FacebookActivityTestCase.java b/facebook/src/androidTest/java/com/facebook/FacebookActivityTestCase.java
similarity index 100%
rename from facebook/tests/src/com/facebook/FacebookActivityTestCase.java
rename to facebook/src/androidTest/java/com/facebook/FacebookActivityTestCase.java
diff --git a/facebook/tests/src/com/facebook/FacebookActivityTests.java b/facebook/src/androidTest/java/com/facebook/FacebookActivityTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/FacebookActivityTests.java
rename to facebook/src/androidTest/java/com/facebook/FacebookActivityTests.java
diff --git a/facebook/tests/src/com/facebook/FacebookAppLinkResolverTests.java b/facebook/src/androidTest/java/com/facebook/FacebookAppLinkResolverTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/FacebookAppLinkResolverTests.java
rename to facebook/src/androidTest/java/com/facebook/FacebookAppLinkResolverTests.java
diff --git a/facebook/tests/src/com/facebook/FacebookTestCase.java b/facebook/src/androidTest/java/com/facebook/FacebookTestCase.java
similarity index 100%
rename from facebook/tests/src/com/facebook/FacebookTestCase.java
rename to facebook/src/androidTest/java/com/facebook/FacebookTestCase.java
diff --git a/facebook/tests/src/com/facebook/FragmentTestCase.java b/facebook/src/androidTest/java/com/facebook/FragmentTestCase.java
similarity index 100%
rename from facebook/tests/src/com/facebook/FragmentTestCase.java
rename to facebook/src/androidTest/java/com/facebook/FragmentTestCase.java
diff --git a/facebook/tests/src/com/facebook/GraphRequestBatchBridge.java b/facebook/src/androidTest/java/com/facebook/GraphRequestBatchBridge.java
similarity index 100%
rename from facebook/tests/src/com/facebook/GraphRequestBatchBridge.java
rename to facebook/src/androidTest/java/com/facebook/GraphRequestBatchBridge.java
diff --git a/facebook/tests/src/com/facebook/GraphRequestTests.java b/facebook/src/androidTest/java/com/facebook/GraphRequestTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/GraphRequestTests.java
rename to facebook/src/androidTest/java/com/facebook/GraphRequestTests.java
diff --git a/facebook/tests/src/com/facebook/GraphResponseBridge.java b/facebook/src/androidTest/java/com/facebook/GraphResponseBridge.java
similarity index 100%
rename from facebook/tests/src/com/facebook/GraphResponseBridge.java
rename to facebook/src/androidTest/java/com/facebook/GraphResponseBridge.java
diff --git a/facebook/tests/src/com/facebook/GraphUtilTests.java b/facebook/src/androidTest/java/com/facebook/GraphUtilTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/GraphUtilTests.java
rename to facebook/src/androidTest/java/com/facebook/GraphUtilTests.java
diff --git a/facebook/tests/src/com/facebook/ProfileManagerTest.java b/facebook/src/androidTest/java/com/facebook/ProfileManagerTest.java
similarity index 100%
rename from facebook/tests/src/com/facebook/ProfileManagerTest.java
rename to facebook/src/androidTest/java/com/facebook/ProfileManagerTest.java
diff --git a/facebook/tests/src/com/facebook/RequestTests.java b/facebook/src/androidTest/java/com/facebook/RequestTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/RequestTests.java
rename to facebook/src/androidTest/java/com/facebook/RequestTests.java
diff --git a/facebook/tests/src/com/facebook/TestBlocker.java b/facebook/src/androidTest/java/com/facebook/TestBlocker.java
similarity index 100%
rename from facebook/tests/src/com/facebook/TestBlocker.java
rename to facebook/src/androidTest/java/com/facebook/TestBlocker.java
diff --git a/facebook/tests/src/com/facebook/TestUserManagerTests.java b/facebook/src/androidTest/java/com/facebook/TestUserManagerTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/TestUserManagerTests.java
rename to facebook/src/androidTest/java/com/facebook/TestUserManagerTests.java
diff --git a/facebook/tests/src/com/facebook/TestUtils.java b/facebook/src/androidTest/java/com/facebook/TestUtils.java
similarity index 100%
rename from facebook/tests/src/com/facebook/TestUtils.java
rename to facebook/src/androidTest/java/com/facebook/TestUtils.java
diff --git a/facebook/tests/src/com/facebook/WaitForBroadcastReceiver.java b/facebook/src/androidTest/java/com/facebook/WaitForBroadcastReceiver.java
similarity index 100%
rename from facebook/tests/src/com/facebook/WaitForBroadcastReceiver.java
rename to facebook/src/androidTest/java/com/facebook/WaitForBroadcastReceiver.java
diff --git a/facebook/tests/src/com/facebook/appevents/AppEventsLoggerTests.java b/facebook/src/androidTest/java/com/facebook/appevents/AppEventsLoggerTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/appevents/AppEventsLoggerTests.java
rename to facebook/src/androidTest/java/com/facebook/appevents/AppEventsLoggerTests.java
diff --git a/facebook/tests/src/com/facebook/internal/ImageResponseCacheTest.java b/facebook/src/androidTest/java/com/facebook/internal/ImageResponseCacheTest.java
similarity index 100%
rename from facebook/tests/src/com/facebook/internal/ImageResponseCacheTest.java
rename to facebook/src/androidTest/java/com/facebook/internal/ImageResponseCacheTest.java
diff --git a/facebook/tests/src/com/facebook/internal/UtilityTest.java b/facebook/src/androidTest/java/com/facebook/internal/UtilityTest.java
similarity index 100%
rename from facebook/tests/src/com/facebook/internal/UtilityTest.java
rename to facebook/src/androidTest/java/com/facebook/internal/UtilityTest.java
diff --git a/facebook/tests/src/com/facebook/login/LoginClientTests.java b/facebook/src/androidTest/java/com/facebook/login/LoginClientTests.java
similarity index 100%
rename from facebook/tests/src/com/facebook/login/LoginClientTests.java
rename to facebook/src/androidTest/java/com/facebook/login/LoginClientTests.java
diff --git a/facebook/tests/src/com/facebook/widget/FacebookDialogTests.java b/facebook/src/androidTest/java/com/facebook/widget/FacebookDialogTests.java
similarity index 98%
rename from facebook/tests/src/com/facebook/widget/FacebookDialogTests.java
rename to facebook/src/androidTest/java/com/facebook/widget/FacebookDialogTests.java
index 03e137fc1..7b972739a 100644
--- a/facebook/tests/src/com/facebook/widget/FacebookDialogTests.java
+++ b/facebook/src/androidTest/java/com/facebook/widget/FacebookDialogTests.java
@@ -82,6 +82,4 @@ private String getAttachmentNameFromContentUri(String contentUri) {
 //        } catch (NullPointerException exception) {
 //        }
 //    }
-
-    // TODO(v4) - Add tests for ShareContentValidation.
 }
diff --git a/facebook/tests/res/values/strings.xml b/facebook/src/androidTest/res/values/strings.xml
similarity index 100%
rename from facebook/tests/res/values/strings.xml
rename to facebook/src/androidTest/res/values/strings.xml
diff --git a/facebook/src/com/facebook/internal/package-info.java b/facebook/src/com/facebook/internal/package-info.java
deleted file mode 100644
index b3d145ce4..000000000
--- a/facebook/src/com/facebook/internal/package-info.java
+++ /dev/null
@@ -1,6 +0,0 @@
-/**
- * com.facebook.internal is solely for the use of other packages within the Facebook SDK for Android. Use of
- * any of the classes in this package is unsupported, and they may be modified or removed without warning at
- * any time.
- */
-package com.facebook.internal;
diff --git a/facebook/AndroidManifest.xml b/facebook/src/main/AndroidManifest.xml
similarity index 100%
rename from facebook/AndroidManifest.xml
rename to facebook/src/main/AndroidManifest.xml
diff --git a/facebook/src/com/facebook/AccessToken.java b/facebook/src/main/java/com/facebook/AccessToken.java
similarity index 100%
rename from facebook/src/com/facebook/AccessToken.java
rename to facebook/src/main/java/com/facebook/AccessToken.java
diff --git a/facebook/src/com/facebook/AccessTokenCache.java b/facebook/src/main/java/com/facebook/AccessTokenCache.java
similarity index 100%
rename from facebook/src/com/facebook/AccessTokenCache.java
rename to facebook/src/main/java/com/facebook/AccessTokenCache.java
diff --git a/facebook/src/com/facebook/AccessTokenManager.java b/facebook/src/main/java/com/facebook/AccessTokenManager.java
similarity index 100%
rename from facebook/src/com/facebook/AccessTokenManager.java
rename to facebook/src/main/java/com/facebook/AccessTokenManager.java
diff --git a/facebook/src/com/facebook/AccessTokenSource.java b/facebook/src/main/java/com/facebook/AccessTokenSource.java
similarity index 100%
rename from facebook/src/com/facebook/AccessTokenSource.java
rename to facebook/src/main/java/com/facebook/AccessTokenSource.java
diff --git a/facebook/src/com/facebook/AccessTokenTracker.java b/facebook/src/main/java/com/facebook/AccessTokenTracker.java
similarity index 100%
rename from facebook/src/com/facebook/AccessTokenTracker.java
rename to facebook/src/main/java/com/facebook/AccessTokenTracker.java
diff --git a/facebook/src/com/facebook/CallbackManager.java b/facebook/src/main/java/com/facebook/CallbackManager.java
similarity index 100%
rename from facebook/src/com/facebook/CallbackManager.java
rename to facebook/src/main/java/com/facebook/CallbackManager.java
diff --git a/facebook/src/com/facebook/FacebookActivity.java b/facebook/src/main/java/com/facebook/FacebookActivity.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookActivity.java
rename to facebook/src/main/java/com/facebook/FacebookActivity.java
diff --git a/facebook/src/com/facebook/FacebookAuthorizationException.java b/facebook/src/main/java/com/facebook/FacebookAuthorizationException.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookAuthorizationException.java
rename to facebook/src/main/java/com/facebook/FacebookAuthorizationException.java
diff --git a/facebook/src/com/facebook/FacebookBroadcastReceiver.java b/facebook/src/main/java/com/facebook/FacebookBroadcastReceiver.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookBroadcastReceiver.java
rename to facebook/src/main/java/com/facebook/FacebookBroadcastReceiver.java
diff --git a/facebook/src/com/facebook/FacebookButtonBase.java b/facebook/src/main/java/com/facebook/FacebookButtonBase.java
similarity index 90%
rename from facebook/src/com/facebook/FacebookButtonBase.java
rename to facebook/src/main/java/com/facebook/FacebookButtonBase.java
index 1b8fe4e96..1e3e1295a 100644
--- a/facebook/src/com/facebook/FacebookButtonBase.java
+++ b/facebook/src/main/java/com/facebook/FacebookButtonBase.java
@@ -20,6 +20,7 @@
 
 package com.facebook;
 
+import android.annotation.SuppressLint;
 import android.app.Activity;
 import android.content.Context;
 import android.content.ContextWrapper;
@@ -29,6 +30,7 @@
 import android.graphics.Paint;
 import android.graphics.Typeface;
 import android.support.v4.app.Fragment;
+import android.support.v4.content.ContextCompat;
 import android.util.AttributeSet;
 import android.util.TypedValue;
 import android.view.Gravity;
@@ -39,6 +41,7 @@
 import com.facebook.FacebookSdk;
 import com.facebook.R;
 import com.facebook.appevents.AppEventsLogger;
+import com.facebook.internal.FragmentWrapper;
 
 /**
  * A base class for a facebook button.
@@ -51,7 +54,7 @@
     private boolean overrideCompoundPadding;
     private int overrideCompoundPaddingLeft;
     private int overrideCompoundPaddingRight;
-    private Fragment parentFragment;
+    private FragmentWrapper parentFragment;
 
     protected FacebookButtonBase(
             final Context context,
@@ -76,18 +79,38 @@ protected FacebookButtonBase(
      * {@link Fragment#onActivityResult(int, int, android.content.Intent) onActivityResult}
      * call rather than the Activity.
      *
-     * @param fragment the fragment that contains this control
+     * @param fragment the android.support.v4.app.Fragment that contains this control
      */
     public void setFragment(final Fragment fragment) {
-        parentFragment = fragment;
+        parentFragment = new FragmentWrapper(fragment);
+    }
+
+    /**
+     * Sets the fragment that contains this control. This allows the button to be embedded inside a
+     * Fragment, and will allow the fragment to receive the
+     * {@link Fragment#onActivityResult(int, int, android.content.Intent) onActivityResult}
+     * call rather than the Activity.
+     *
+     * @param fragment the android.app.Fragment that contains this control
+     */
+    public void setFragment(final android.app.Fragment fragment) {
+        parentFragment = new FragmentWrapper(fragment);
     }
 
     /**
      * Gets the fragment that contains this control.
-     * @return The fragment that contains this control.
+     * @return The android.support.v4.app.Fragment that contains this control.
      */
     public Fragment getFragment() {
-        return parentFragment;
+        return (parentFragment != null) ? parentFragment.getSupportFragment() : null;
+    }
+
+    /**
+     * Gets the fragment that contains this control.
+     * @return The android.app.Fragment that contains this control.
+     */
+    public android.app.Fragment getNativeFragment() {
+        return (parentFragment != null) ? parentFragment.getNativeFragment() : null;
     }
 
     @Override
@@ -234,13 +257,14 @@ private void parseBackgroundAttributes(
                 }
             } else {
                 // fallback, if no background specified, fill with Facebook blue
-                setBackgroundColor(a.getColor(0, R.color.com_facebook_blue));
+                setBackgroundColor(ContextCompat.getColor(context, R.color.com_facebook_blue));
             }
         } finally {
             a.recycle();
         }
     }
 
+    @SuppressLint("ResourceType")
     private void parseCompoundDrawableAttributes(
             final Context context,
             final AttributeSet attrs,
diff --git a/facebook/src/com/facebook/FacebookCallback.java b/facebook/src/main/java/com/facebook/FacebookCallback.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookCallback.java
rename to facebook/src/main/java/com/facebook/FacebookCallback.java
diff --git a/facebook/src/com/facebook/FacebookContentProvider.java b/facebook/src/main/java/com/facebook/FacebookContentProvider.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookContentProvider.java
rename to facebook/src/main/java/com/facebook/FacebookContentProvider.java
diff --git a/facebook/src/com/facebook/FacebookDialog.java b/facebook/src/main/java/com/facebook/FacebookDialog.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookDialog.java
rename to facebook/src/main/java/com/facebook/FacebookDialog.java
diff --git a/facebook/src/com/facebook/FacebookDialogException.java b/facebook/src/main/java/com/facebook/FacebookDialogException.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookDialogException.java
rename to facebook/src/main/java/com/facebook/FacebookDialogException.java
diff --git a/facebook/src/com/facebook/FacebookException.java b/facebook/src/main/java/com/facebook/FacebookException.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookException.java
rename to facebook/src/main/java/com/facebook/FacebookException.java
diff --git a/facebook/src/com/facebook/FacebookGraphResponseException.java b/facebook/src/main/java/com/facebook/FacebookGraphResponseException.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookGraphResponseException.java
rename to facebook/src/main/java/com/facebook/FacebookGraphResponseException.java
diff --git a/facebook/src/com/facebook/FacebookOperationCanceledException.java b/facebook/src/main/java/com/facebook/FacebookOperationCanceledException.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookOperationCanceledException.java
rename to facebook/src/main/java/com/facebook/FacebookOperationCanceledException.java
diff --git a/facebook/src/com/facebook/FacebookRequestError.java b/facebook/src/main/java/com/facebook/FacebookRequestError.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookRequestError.java
rename to facebook/src/main/java/com/facebook/FacebookRequestError.java
diff --git a/facebook/src/com/facebook/FacebookSdk.java b/facebook/src/main/java/com/facebook/FacebookSdk.java
similarity index 99%
rename from facebook/src/com/facebook/FacebookSdk.java
rename to facebook/src/main/java/com/facebook/FacebookSdk.java
index 2872c1525..1fa687221 100644
--- a/facebook/src/com/facebook/FacebookSdk.java
+++ b/facebook/src/main/java/com/facebook/FacebookSdk.java
@@ -38,6 +38,7 @@
 import com.facebook.internal.NativeProtocol;
 import com.facebook.internal.Utility;
 import com.facebook.internal.Validate;
+import com.facebook.internal.WebDialog;
 
 import org.json.JSONException;
 import org.json.JSONObject;
@@ -728,7 +729,7 @@ public static int getWebDialogTheme() {
      * @param theme A theme to use
      */
     public static void setWebDialogTheme(int theme) {
-        webDialogTheme = theme;
+        webDialogTheme = (theme != 0) ? theme : WebDialog.DEFAULT_THEME;
     }
 
     /**
diff --git a/facebook/src/com/facebook/FacebookSdkNotInitializedException.java b/facebook/src/main/java/com/facebook/FacebookSdkNotInitializedException.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookSdkNotInitializedException.java
rename to facebook/src/main/java/com/facebook/FacebookSdkNotInitializedException.java
diff --git a/facebook/src/com/facebook/FacebookSdkVersion.java b/facebook/src/main/java/com/facebook/FacebookSdkVersion.java
similarity index 96%
rename from facebook/src/com/facebook/FacebookSdkVersion.java
rename to facebook/src/main/java/com/facebook/FacebookSdkVersion.java
index 5ef1f8710..51feaf4c4 100644
--- a/facebook/src/com/facebook/FacebookSdkVersion.java
+++ b/facebook/src/main/java/com/facebook/FacebookSdkVersion.java
@@ -21,5 +21,5 @@
 package com.facebook;
 
 final class FacebookSdkVersion {
-    public static final String BUILD = "4.7.0";
+    public static final String BUILD = "4.8.1";
 }
diff --git a/facebook/src/com/facebook/FacebookServiceException.java b/facebook/src/main/java/com/facebook/FacebookServiceException.java
similarity index 100%
rename from facebook/src/com/facebook/FacebookServiceException.java
rename to facebook/src/main/java/com/facebook/FacebookServiceException.java
diff --git a/facebook/src/com/facebook/GraphRequest.java b/facebook/src/main/java/com/facebook/GraphRequest.java
similarity index 98%
rename from facebook/src/com/facebook/GraphRequest.java
rename to facebook/src/main/java/com/facebook/GraphRequest.java
index 644d91d9a..3cbd1ba1d 100644
--- a/facebook/src/com/facebook/GraphRequest.java
+++ b/facebook/src/main/java/com/facebook/GraphRequest.java
@@ -604,6 +604,12 @@ public static GraphRequest newCustomAudienceThirdPartyIdRequest(AccessToken acce
         Bundle parameters = new Bundle();
 
         if (accessToken == null) {
+            if (attributionIdentifiers == null) {
+                throw new FacebookException(
+                        "There is no access token and attribution identifiers could not be " +
+                                "retrieved");
+            }
+
             // Only use the attributionID if we don't have an access token.  If we do, then the user
             // token will be used to identify the user, and is more reliable than the attributionID.
             String udid = attributionIdentifiers.getAttributionId() != null
@@ -617,7 +623,7 @@ public static GraphRequest newCustomAudienceThirdPartyIdRequest(AccessToken acce
         // Server will choose to not provide the App User ID in the event that event usage has been
         // limited for this user for this app.
         if (FacebookSdk.getLimitEventAndDataUsage(context)
-                || attributionIdentifiers.isTrackingLimited()) {
+                || (attributionIdentifiers != null && attributionIdentifiers.isTrackingLimited())) {
             parameters.putString("limit_event_usage", "1");
         }
 
@@ -1055,14 +1061,14 @@ public static HttpURLConnection toHttpConnection(GraphRequestBatch requests) {
             throw new FacebookException("could not construct URL for request", e);
         }
 
-        HttpURLConnection connection;
+        HttpURLConnection connection = null;
         try {
             connection = createConnection(url);
 
             serializeToUrlConnection(requests, connection);
-        } catch (IOException e) {
-            throw new FacebookException("could not construct request body", e);
-        } catch (JSONException e) {
+        } catch (IOException | JSONException e) {
+            Utility.disconnectQuietly(connection);
+
             throw new FacebookException("could not construct request body", e);
         }
 
@@ -1144,18 +1150,23 @@ public static GraphResponse executeAndWait(GraphRequest request) {
 
         HttpURLConnection connection = null;
         try {
-            connection = toHttpConnection(requests);
-        } catch (Exception ex) {
-            List<GraphResponse> responses = GraphResponse.constructErrorResponses(
-                    requests.getRequests(),
-                    null,
-                    new FacebookException(ex));
-            runCallbacks(requests, responses);
+            try {
+                connection = toHttpConnection(requests);
+            } catch (Exception ex) {
+                List<GraphResponse> responses = GraphResponse.constructErrorResponses(
+                        requests.getRequests(),
+                        null,
+                        new FacebookException(ex));
+                runCallbacks(requests, responses);
+                return responses;
+            }
+
+            List<GraphResponse> responses = executeConnectionAndWait(connection, requests);
+
             return responses;
+        } finally {
+            Utility.disconnectQuietly(connection);
         }
-
-        List<GraphResponse> responses = executeConnectionAndWait(connection, requests);
-        return responses;
     }
 
     /**
@@ -1308,7 +1319,7 @@ public static GraphRequestAsyncTask executeConnectionAsync(
      * @param callbackHandler a Handler that will be used to post calls to the callback for each
      *                        request; if null, a Handler will be instantiated on the calling
      *                        thread
-     * @param connection      the HttpURLConnection that the requests were serialized into
+     * @param connection the HttpURLConnection that the requests were serialized into
      * @param requests        the requests represented by the HttpURLConnection
      * @return a RequestAsyncTask that is executing the request
      */
diff --git a/facebook/src/com/facebook/GraphRequestAsyncTask.java b/facebook/src/main/java/com/facebook/GraphRequestAsyncTask.java
similarity index 100%
rename from facebook/src/com/facebook/GraphRequestAsyncTask.java
rename to facebook/src/main/java/com/facebook/GraphRequestAsyncTask.java
diff --git a/facebook/src/com/facebook/GraphRequestBatch.java b/facebook/src/main/java/com/facebook/GraphRequestBatch.java
similarity index 100%
rename from facebook/src/com/facebook/GraphRequestBatch.java
rename to facebook/src/main/java/com/facebook/GraphRequestBatch.java
diff --git a/facebook/src/com/facebook/GraphResponse.java b/facebook/src/main/java/com/facebook/GraphResponse.java
similarity index 100%
rename from facebook/src/com/facebook/GraphResponse.java
rename to facebook/src/main/java/com/facebook/GraphResponse.java
diff --git a/facebook/src/com/facebook/HttpMethod.java b/facebook/src/main/java/com/facebook/HttpMethod.java
similarity index 100%
rename from facebook/src/com/facebook/HttpMethod.java
rename to facebook/src/main/java/com/facebook/HttpMethod.java
diff --git a/facebook/src/com/facebook/LegacyTokenHelper.java b/facebook/src/main/java/com/facebook/LegacyTokenHelper.java
similarity index 100%
rename from facebook/src/com/facebook/LegacyTokenHelper.java
rename to facebook/src/main/java/com/facebook/LegacyTokenHelper.java
diff --git a/facebook/src/com/facebook/LoggingBehavior.java b/facebook/src/main/java/com/facebook/LoggingBehavior.java
similarity index 100%
rename from facebook/src/com/facebook/LoggingBehavior.java
rename to facebook/src/main/java/com/facebook/LoggingBehavior.java
diff --git a/facebook/src/com/facebook/Profile.java b/facebook/src/main/java/com/facebook/Profile.java
similarity index 100%
rename from facebook/src/com/facebook/Profile.java
rename to facebook/src/main/java/com/facebook/Profile.java
diff --git a/facebook/src/com/facebook/ProfileCache.java b/facebook/src/main/java/com/facebook/ProfileCache.java
similarity index 100%
rename from facebook/src/com/facebook/ProfileCache.java
rename to facebook/src/main/java/com/facebook/ProfileCache.java
diff --git a/facebook/src/com/facebook/ProfileManager.java b/facebook/src/main/java/com/facebook/ProfileManager.java
similarity index 100%
rename from facebook/src/com/facebook/ProfileManager.java
rename to facebook/src/main/java/com/facebook/ProfileManager.java
diff --git a/facebook/src/com/facebook/ProfileTracker.java b/facebook/src/main/java/com/facebook/ProfileTracker.java
similarity index 100%
rename from facebook/src/com/facebook/ProfileTracker.java
rename to facebook/src/main/java/com/facebook/ProfileTracker.java
diff --git a/facebook/src/com/facebook/ProgressNoopOutputStream.java b/facebook/src/main/java/com/facebook/ProgressNoopOutputStream.java
similarity index 100%
rename from facebook/src/com/facebook/ProgressNoopOutputStream.java
rename to facebook/src/main/java/com/facebook/ProgressNoopOutputStream.java
diff --git a/facebook/src/com/facebook/ProgressOutputStream.java b/facebook/src/main/java/com/facebook/ProgressOutputStream.java
similarity index 100%
rename from facebook/src/com/facebook/ProgressOutputStream.java
rename to facebook/src/main/java/com/facebook/ProgressOutputStream.java
diff --git a/facebook/src/com/facebook/RequestOutputStream.java b/facebook/src/main/java/com/facebook/RequestOutputStream.java
similarity index 100%
rename from facebook/src/com/facebook/RequestOutputStream.java
rename to facebook/src/main/java/com/facebook/RequestOutputStream.java
diff --git a/facebook/src/com/facebook/RequestProgress.java b/facebook/src/main/java/com/facebook/RequestProgress.java
similarity index 100%
rename from facebook/src/com/facebook/RequestProgress.java
rename to facebook/src/main/java/com/facebook/RequestProgress.java
diff --git a/facebook/src/com/facebook/TestUserManager.java b/facebook/src/main/java/com/facebook/TestUserManager.java
similarity index 100%
rename from facebook/src/com/facebook/TestUserManager.java
rename to facebook/src/main/java/com/facebook/TestUserManager.java
diff --git a/facebook/src/com/facebook/appevents/AppEventsConstants.java b/facebook/src/main/java/com/facebook/appevents/AppEventsConstants.java
similarity index 100%
rename from facebook/src/com/facebook/appevents/AppEventsConstants.java
rename to facebook/src/main/java/com/facebook/appevents/AppEventsConstants.java
diff --git a/facebook/src/com/facebook/appevents/AppEventsLogger.java b/facebook/src/main/java/com/facebook/appevents/AppEventsLogger.java
similarity index 100%
rename from facebook/src/com/facebook/appevents/AppEventsLogger.java
rename to facebook/src/main/java/com/facebook/appevents/AppEventsLogger.java
diff --git a/facebook/src/com/facebook/appevents/FacebookTimeSpentData.java b/facebook/src/main/java/com/facebook/appevents/FacebookTimeSpentData.java
similarity index 100%
rename from facebook/src/com/facebook/appevents/FacebookTimeSpentData.java
rename to facebook/src/main/java/com/facebook/appevents/FacebookTimeSpentData.java
diff --git a/facebook/src/com/facebook/applinks/AppLinkData.java b/facebook/src/main/java/com/facebook/applinks/AppLinkData.java
similarity index 100%
rename from facebook/src/com/facebook/applinks/AppLinkData.java
rename to facebook/src/main/java/com/facebook/applinks/AppLinkData.java
diff --git a/facebook/src/com/facebook/applinks/FacebookAppLinkResolver.java b/facebook/src/main/java/com/facebook/applinks/FacebookAppLinkResolver.java
similarity index 100%
rename from facebook/src/com/facebook/applinks/FacebookAppLinkResolver.java
rename to facebook/src/main/java/com/facebook/applinks/FacebookAppLinkResolver.java
diff --git a/facebook/src/com/facebook/internal/AnalyticsEvents.java b/facebook/src/main/java/com/facebook/internal/AnalyticsEvents.java
similarity index 100%
rename from facebook/src/com/facebook/internal/AnalyticsEvents.java
rename to facebook/src/main/java/com/facebook/internal/AnalyticsEvents.java
diff --git a/facebook/src/com/facebook/internal/AppCall.java b/facebook/src/main/java/com/facebook/internal/AppCall.java
similarity index 100%
rename from facebook/src/com/facebook/internal/AppCall.java
rename to facebook/src/main/java/com/facebook/internal/AppCall.java
diff --git a/facebook/src/com/facebook/internal/AppEventsLoggerUtility.java b/facebook/src/main/java/com/facebook/internal/AppEventsLoggerUtility.java
similarity index 100%
rename from facebook/src/com/facebook/internal/AppEventsLoggerUtility.java
rename to facebook/src/main/java/com/facebook/internal/AppEventsLoggerUtility.java
diff --git a/facebook/src/com/facebook/internal/AttributionIdentifiers.java b/facebook/src/main/java/com/facebook/internal/AttributionIdentifiers.java
similarity index 100%
rename from facebook/src/com/facebook/internal/AttributionIdentifiers.java
rename to facebook/src/main/java/com/facebook/internal/AttributionIdentifiers.java
diff --git a/facebook/src/com/facebook/internal/BoltsMeasurementEventListener.java b/facebook/src/main/java/com/facebook/internal/BoltsMeasurementEventListener.java
similarity index 100%
rename from facebook/src/com/facebook/internal/BoltsMeasurementEventListener.java
rename to facebook/src/main/java/com/facebook/internal/BoltsMeasurementEventListener.java
diff --git a/facebook/src/com/facebook/internal/BundleJSONConverter.java b/facebook/src/main/java/com/facebook/internal/BundleJSONConverter.java
similarity index 100%
rename from facebook/src/com/facebook/internal/BundleJSONConverter.java
rename to facebook/src/main/java/com/facebook/internal/BundleJSONConverter.java
diff --git a/facebook/src/com/facebook/internal/CallbackManagerImpl.java b/facebook/src/main/java/com/facebook/internal/CallbackManagerImpl.java
similarity index 100%
rename from facebook/src/com/facebook/internal/CallbackManagerImpl.java
rename to facebook/src/main/java/com/facebook/internal/CallbackManagerImpl.java
diff --git a/facebook/src/com/facebook/internal/CollectionMapper.java b/facebook/src/main/java/com/facebook/internal/CollectionMapper.java
similarity index 100%
rename from facebook/src/com/facebook/internal/CollectionMapper.java
rename to facebook/src/main/java/com/facebook/internal/CollectionMapper.java
diff --git a/facebook/src/com/facebook/internal/DialogFeature.java b/facebook/src/main/java/com/facebook/internal/DialogFeature.java
similarity index 100%
rename from facebook/src/com/facebook/internal/DialogFeature.java
rename to facebook/src/main/java/com/facebook/internal/DialogFeature.java
diff --git a/facebook/src/com/facebook/internal/DialogPresenter.java b/facebook/src/main/java/com/facebook/internal/DialogPresenter.java
similarity index 98%
rename from facebook/src/com/facebook/internal/DialogPresenter.java
rename to facebook/src/main/java/com/facebook/internal/DialogPresenter.java
index 5dcc4bc7e..d2f934bd3 100644
--- a/facebook/src/com/facebook/internal/DialogPresenter.java
+++ b/facebook/src/main/java/com/facebook/internal/DialogPresenter.java
@@ -62,8 +62,10 @@ public static void present(AppCall appCall, Activity activity) {
         appCall.setPending();
     }
 
-    public static void present(AppCall appCall, Fragment fragment) {
-        fragment.startActivityForResult(appCall.getRequestIntent(), appCall.getRequestCode());
+    public static void present(AppCall appCall, FragmentWrapper fragmentWrapper) {
+        fragmentWrapper.startActivityForResult(
+                appCall.getRequestIntent(),
+                appCall.getRequestCode());
 
         appCall.setPending();
     }
diff --git a/facebook/src/com/facebook/internal/FacebookDialogBase.java b/facebook/src/main/java/com/facebook/internal/FacebookDialogBase.java
similarity index 92%
rename from facebook/src/com/facebook/internal/FacebookDialogBase.java
rename to facebook/src/main/java/com/facebook/internal/FacebookDialogBase.java
index e0956a4a8..ce06c7ecd 100644
--- a/facebook/src/com/facebook/internal/FacebookDialogBase.java
+++ b/facebook/src/main/java/com/facebook/internal/FacebookDialogBase.java
@@ -21,7 +21,6 @@
 package com.facebook.internal;
 
 import android.app.Activity;
-import android.support.v4.app.Fragment;
 import android.util.Log;
 
 import com.facebook.CallbackManager;
@@ -45,24 +44,24 @@
     protected static final Object BASE_AUTOMATIC_MODE = new Object();
 
     private final Activity activity;
-    private final Fragment fragment;
+    private final FragmentWrapper fragmentWrapper;
     private List<ModeHandler> modeHandlers;
     private int requestCode;
 
     protected FacebookDialogBase(final Activity activity, int requestCode) {
         Validate.notNull(activity, "activity");
         this.activity = activity;
-        this.fragment = null;
+        this.fragmentWrapper = null;
         this.requestCode = requestCode;
     }
 
-    protected FacebookDialogBase(final Fragment fragment, int requestCode) {
-        Validate.notNull(fragment, "fragment");
-        this.fragment = fragment;
+    protected FacebookDialogBase(final FragmentWrapper fragmentWrapper, int requestCode) {
+        Validate.notNull(fragmentWrapper, "fragmentWrapper");
+        this.fragmentWrapper = fragmentWrapper;
         this.activity = null;
         this.requestCode = requestCode;
 
-        if (fragment.getActivity() == null) {
+        if (fragmentWrapper.getActivity() == null) {
             throw new IllegalArgumentException(
                     "Cannot use a fragment that is not attached to an activity");
         }
@@ -76,7 +75,7 @@ public final void registerCallback(
             throw new FacebookException("Unexpected CallbackManager, " +
                     "please use the provided Factory.");
         }
-        registerCallbackImpl((CallbackManagerImpl)callbackManager, callback);
+        registerCallbackImpl((CallbackManagerImpl) callbackManager, callback);
     }
 
     @Override
@@ -146,8 +145,8 @@ public void show(final CONTENT content) {
     protected void showImpl(final CONTENT content, final Object mode) {
         AppCall appCall = createAppCallForMode(content, mode);
         if (appCall != null) {
-            if (fragment != null) {
-                DialogPresenter.present(appCall, fragment);
+            if (fragmentWrapper != null) {
+                DialogPresenter.present(appCall, fragmentWrapper);
             } else {
                 DialogPresenter.present(appCall, activity);
             }
@@ -166,8 +165,8 @@ protected Activity getActivityContext() {
             return activity;
         }
 
-        if (fragment != null) {
-            return fragment.getActivity();
+        if (fragmentWrapper != null) {
+            return fragmentWrapper.getActivity();
         }
 
         return null;
diff --git a/facebook/src/com/facebook/internal/FacebookDialogFragment.java b/facebook/src/main/java/com/facebook/internal/FacebookDialogFragment.java
similarity index 100%
rename from facebook/src/com/facebook/internal/FacebookDialogFragment.java
rename to facebook/src/main/java/com/facebook/internal/FacebookDialogFragment.java
diff --git a/facebook/src/com/facebook/internal/FacebookRequestErrorClassification.java b/facebook/src/main/java/com/facebook/internal/FacebookRequestErrorClassification.java
similarity index 100%
rename from facebook/src/com/facebook/internal/FacebookRequestErrorClassification.java
rename to facebook/src/main/java/com/facebook/internal/FacebookRequestErrorClassification.java
diff --git a/facebook/src/com/facebook/internal/FacebookWebFallbackDialog.java b/facebook/src/main/java/com/facebook/internal/FacebookWebFallbackDialog.java
similarity index 100%
rename from facebook/src/com/facebook/internal/FacebookWebFallbackDialog.java
rename to facebook/src/main/java/com/facebook/internal/FacebookWebFallbackDialog.java
diff --git a/facebook/src/com/facebook/internal/FileLruCache.java b/facebook/src/main/java/com/facebook/internal/FileLruCache.java
similarity index 100%
rename from facebook/src/com/facebook/internal/FileLruCache.java
rename to facebook/src/main/java/com/facebook/internal/FileLruCache.java
diff --git a/facebook/src/main/java/com/facebook/internal/FragmentWrapper.java b/facebook/src/main/java/com/facebook/internal/FragmentWrapper.java
new file mode 100644
index 000000000..990faa3a9
--- /dev/null
+++ b/facebook/src/main/java/com/facebook/internal/FragmentWrapper.java
@@ -0,0 +1,75 @@
+/**
+ * Copyright (c) 2014-present, Facebook, Inc. All rights reserved.
+ *
+ * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
+ * copy, modify, and distribute this software in source code or binary form for use
+ * in connection with the web services and APIs provided by Facebook.
+ *
+ * As with any software that integrates with the Facebook platform, your use of
+ * this software is subject to the Facebook Developer Principles and Policies
+ * [http://developers.facebook.com/policy/]. This copyright notice shall be
+ * included in all copies or substantial portions of the software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
+ * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
+ * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
+ * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ */
+
+package com.facebook.internal;
+
+import android.app.Activity;
+import android.content.Context;
+import android.content.Intent;
+import android.support.v4.app.Fragment;
+import android.support.v4.app.FragmentActivity;
+
+public class FragmentWrapper {
+    private Fragment supportFragment;
+    private android.app.Fragment nativeFragment;
+
+    public FragmentWrapper(Fragment fragment) {
+        Validate.notNull(fragment, "fragment");
+        this.supportFragment = fragment;
+    }
+
+    public FragmentWrapper(android.app.Fragment fragment) {
+        Validate.notNull(fragment, "fragment");
+        this.nativeFragment = fragment;
+    }
+
+    public android.app.Fragment getNativeFragment() {
+        return this.nativeFragment;
+    }
+
+    public Fragment getSupportFragment() {
+        return this.supportFragment;
+    }
+
+    /**
+     * Call {@link Activity#startActivityForResult(Intent, int)} from the fragment's
+     * containing Activity.
+     */
+    public void startActivityForResult(Intent intent, int requestCode) {
+        if (supportFragment != null) {
+            supportFragment.startActivityForResult(intent, requestCode);
+        } else {
+            nativeFragment.startActivityForResult(intent, requestCode);
+        }
+    }
+
+    /**
+     * Return the {@link FragmentActivity} this fragment is currently associated with.
+     * May return {@code null} if the fragment is associated with a {@link Context}
+     * instead.
+     */
+    final public Activity getActivity() {
+        if (supportFragment != null) {
+            return supportFragment.getActivity();
+        } else {
+            return nativeFragment.getActivity();
+        }
+    }
+}
diff --git a/facebook/src/com/facebook/internal/GraphUtil.java b/facebook/src/main/java/com/facebook/internal/GraphUtil.java
similarity index 100%
rename from facebook/src/com/facebook/internal/GraphUtil.java
rename to facebook/src/main/java/com/facebook/internal/GraphUtil.java
diff --git a/facebook/src/com/facebook/internal/ImageDownloader.java b/facebook/src/main/java/com/facebook/internal/ImageDownloader.java
similarity index 100%
rename from facebook/src/com/facebook/internal/ImageDownloader.java
rename to facebook/src/main/java/com/facebook/internal/ImageDownloader.java
diff --git a/facebook/src/com/facebook/internal/ImageRequest.java b/facebook/src/main/java/com/facebook/internal/ImageRequest.java
similarity index 100%
rename from facebook/src/com/facebook/internal/ImageRequest.java
rename to facebook/src/main/java/com/facebook/internal/ImageRequest.java
diff --git a/facebook/src/com/facebook/internal/ImageResponse.java b/facebook/src/main/java/com/facebook/internal/ImageResponse.java
similarity index 100%
rename from facebook/src/com/facebook/internal/ImageResponse.java
rename to facebook/src/main/java/com/facebook/internal/ImageResponse.java
diff --git a/facebook/src/com/facebook/internal/ImageResponseCache.java b/facebook/src/main/java/com/facebook/internal/ImageResponseCache.java
similarity index 100%
rename from facebook/src/com/facebook/internal/ImageResponseCache.java
rename to facebook/src/main/java/com/facebook/internal/ImageResponseCache.java
diff --git a/facebook/src/com/facebook/internal/InternalSettings.java b/facebook/src/main/java/com/facebook/internal/InternalSettings.java
similarity index 100%
rename from facebook/src/com/facebook/internal/InternalSettings.java
rename to facebook/src/main/java/com/facebook/internal/InternalSettings.java
diff --git a/facebook/src/com/facebook/internal/JsonUtil.java b/facebook/src/main/java/com/facebook/internal/JsonUtil.java
similarity index 100%
rename from facebook/src/com/facebook/internal/JsonUtil.java
rename to facebook/src/main/java/com/facebook/internal/JsonUtil.java
diff --git a/facebook/src/com/facebook/internal/LockOnGetVariable.java b/facebook/src/main/java/com/facebook/internal/LockOnGetVariable.java
similarity index 100%
rename from facebook/src/com/facebook/internal/LockOnGetVariable.java
rename to facebook/src/main/java/com/facebook/internal/LockOnGetVariable.java
diff --git a/facebook/src/com/facebook/internal/Logger.java b/facebook/src/main/java/com/facebook/internal/Logger.java
similarity index 100%
rename from facebook/src/com/facebook/internal/Logger.java
rename to facebook/src/main/java/com/facebook/internal/Logger.java
diff --git a/facebook/src/com/facebook/internal/LoginAuthorizationType.java b/facebook/src/main/java/com/facebook/internal/LoginAuthorizationType.java
similarity index 100%
rename from facebook/src/com/facebook/internal/LoginAuthorizationType.java
rename to facebook/src/main/java/com/facebook/internal/LoginAuthorizationType.java
diff --git a/facebook/src/com/facebook/internal/Mutable.java b/facebook/src/main/java/com/facebook/internal/Mutable.java
similarity index 100%
rename from facebook/src/com/facebook/internal/Mutable.java
rename to facebook/src/main/java/com/facebook/internal/Mutable.java
diff --git a/facebook/src/com/facebook/internal/NativeAppCallAttachmentStore.java b/facebook/src/main/java/com/facebook/internal/NativeAppCallAttachmentStore.java
similarity index 100%
rename from facebook/src/com/facebook/internal/NativeAppCallAttachmentStore.java
rename to facebook/src/main/java/com/facebook/internal/NativeAppCallAttachmentStore.java
diff --git a/facebook/src/com/facebook/internal/NativeProtocol.java b/facebook/src/main/java/com/facebook/internal/NativeProtocol.java
similarity index 100%
rename from facebook/src/com/facebook/internal/NativeProtocol.java
rename to facebook/src/main/java/com/facebook/internal/NativeProtocol.java
diff --git a/facebook/src/com/facebook/internal/PermissionType.java b/facebook/src/main/java/com/facebook/internal/PermissionType.java
similarity index 100%
rename from facebook/src/com/facebook/internal/PermissionType.java
rename to facebook/src/main/java/com/facebook/internal/PermissionType.java
diff --git a/facebook/src/com/facebook/internal/PlatformServiceClient.java b/facebook/src/main/java/com/facebook/internal/PlatformServiceClient.java
similarity index 100%
rename from facebook/src/com/facebook/internal/PlatformServiceClient.java
rename to facebook/src/main/java/com/facebook/internal/PlatformServiceClient.java
diff --git a/facebook/src/com/facebook/internal/ProfileInformationCache.java b/facebook/src/main/java/com/facebook/internal/ProfileInformationCache.java
similarity index 100%
rename from facebook/src/com/facebook/internal/ProfileInformationCache.java
rename to facebook/src/main/java/com/facebook/internal/ProfileInformationCache.java
diff --git a/facebook/src/com/facebook/internal/ServerProtocol.java b/facebook/src/main/java/com/facebook/internal/ServerProtocol.java
similarity index 100%
rename from facebook/src/com/facebook/internal/ServerProtocol.java
rename to facebook/src/main/java/com/facebook/internal/ServerProtocol.java
diff --git a/facebook/src/com/facebook/internal/UrlRedirectCache.java b/facebook/src/main/java/com/facebook/internal/UrlRedirectCache.java
similarity index 100%
rename from facebook/src/com/facebook/internal/UrlRedirectCache.java
rename to facebook/src/main/java/com/facebook/internal/UrlRedirectCache.java
diff --git a/facebook/src/com/facebook/internal/Utility.java b/facebook/src/main/java/com/facebook/internal/Utility.java
similarity index 99%
rename from facebook/src/com/facebook/internal/Utility.java
rename to facebook/src/main/java/com/facebook/internal/Utility.java
index f8b204f12..48f2704c3 100644
--- a/facebook/src/com/facebook/internal/Utility.java
+++ b/facebook/src/main/java/com/facebook/internal/Utility.java
@@ -561,7 +561,7 @@ public static void closeQuietly(Closeable closeable) {
     }
 
     public static void disconnectQuietly(URLConnection connection) {
-        if (connection instanceof HttpURLConnection) {
+        if (connection != null && connection instanceof HttpURLConnection) {
             ((HttpURLConnection) connection).disconnect();
         }
     }
diff --git a/facebook/src/com/facebook/internal/Validate.java b/facebook/src/main/java/com/facebook/internal/Validate.java
similarity index 100%
rename from facebook/src/com/facebook/internal/Validate.java
rename to facebook/src/main/java/com/facebook/internal/Validate.java
diff --git a/facebook/src/com/facebook/internal/WebDialog.java b/facebook/src/main/java/com/facebook/internal/WebDialog.java
similarity index 99%
rename from facebook/src/com/facebook/internal/WebDialog.java
rename to facebook/src/main/java/com/facebook/internal/WebDialog.java
index abfe7f36c..9046df9a5 100644
--- a/facebook/src/com/facebook/internal/WebDialog.java
+++ b/facebook/src/main/java/com/facebook/internal/WebDialog.java
@@ -113,7 +113,7 @@
      *                be a valid URL pointing to a Facebook Web Dialog
      */
     public WebDialog(Context context, String url) {
-        this(context, url, DEFAULT_THEME);
+        this(context, url, FacebookSdk.getWebDialogTheme());
     }
 
     /**
@@ -125,7 +125,7 @@ public WebDialog(Context context, String url) {
      * @param theme   identifier of a theme to pass to the Dialog class
      */
     public WebDialog(Context context, String url, int theme) {
-        super(context, theme == 0 ? DEFAULT_THEME : theme);
+        super(context, theme == 0 ? FacebookSdk.getWebDialogTheme() : theme);
         this.url = url;
     }
 
@@ -139,7 +139,7 @@ public WebDialog(Context context, String url, int theme) {
      * @param listener the listener to notify, or null if no notification is desired
      */
     public WebDialog(Context context, String action, Bundle parameters, int theme, OnCompleteListener listener) {
-        super(context, theme == 0 ? DEFAULT_THEME : theme);
+        super(context, theme == 0 ? FacebookSdk.getWebDialogTheme() : theme);
 
         if (parameters == null) {
             parameters = new Bundle();
@@ -533,7 +533,7 @@ public void onPageFinished(WebView view, String url) {
         private Context context;
         private String applicationId;
         private String action;
-        private int theme = DEFAULT_THEME;
+        private int theme;
         private OnCompleteListener listener;
         private Bundle parameters;
         private AccessToken accessToken;
diff --git a/facebook/src/com/facebook/internal/WorkQueue.java b/facebook/src/main/java/com/facebook/internal/WorkQueue.java
similarity index 100%
rename from facebook/src/com/facebook/internal/WorkQueue.java
rename to facebook/src/main/java/com/facebook/internal/WorkQueue.java
diff --git a/facebook/src/main/java/com/facebook/internal/package-info.java b/facebook/src/main/java/com/facebook/internal/package-info.java
new file mode 100644
index 000000000..6c63b4a3f
--- /dev/null
+++ b/facebook/src/main/java/com/facebook/internal/package-info.java
@@ -0,0 +1,26 @@
+/**
+ * Copyright (c) 2014-present, Facebook, Inc. All rights reserved.
+ *
+ * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
+ * copy, modify, and distribute this software in source code or binary form for use
+ * in connection with the web services and APIs provided by Facebook.
+ *
+ * As with any software that integrates with the Facebook platform, your use of
+ * this software is subject to the Facebook Developer Principles and Policies
+ * [http://developers.facebook.com/policy/]. This copyright notice shall be
+ * included in all copies or substantial portions of the software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
+ * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
+ * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
+ * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ */
+
+/**
+ * com.facebook.internal is solely for the use of other packages within the Facebook SDK for Android. Use of
+ * any of the classes in this package is unsupported, and they may be modified or removed without warning at
+ * any time.
+ */
+package com.facebook.internal;
diff --git a/facebook/src/com/facebook/login/DefaultAudience.java b/facebook/src/main/java/com/facebook/login/DefaultAudience.java
similarity index 100%
rename from facebook/src/com/facebook/login/DefaultAudience.java
rename to facebook/src/main/java/com/facebook/login/DefaultAudience.java
diff --git a/facebook/src/com/facebook/login/GetTokenClient.java b/facebook/src/main/java/com/facebook/login/GetTokenClient.java
similarity index 100%
rename from facebook/src/com/facebook/login/GetTokenClient.java
rename to facebook/src/main/java/com/facebook/login/GetTokenClient.java
diff --git a/facebook/src/com/facebook/login/GetTokenLoginMethodHandler.java b/facebook/src/main/java/com/facebook/login/GetTokenLoginMethodHandler.java
similarity index 100%
rename from facebook/src/com/facebook/login/GetTokenLoginMethodHandler.java
rename to facebook/src/main/java/com/facebook/login/GetTokenLoginMethodHandler.java
diff --git a/facebook/src/com/facebook/login/KatanaProxyLoginMethodHandler.java b/facebook/src/main/java/com/facebook/login/KatanaProxyLoginMethodHandler.java
similarity index 100%
rename from facebook/src/com/facebook/login/KatanaProxyLoginMethodHandler.java
rename to facebook/src/main/java/com/facebook/login/KatanaProxyLoginMethodHandler.java
diff --git a/facebook/src/com/facebook/login/LoginBehavior.java b/facebook/src/main/java/com/facebook/login/LoginBehavior.java
similarity index 100%
rename from facebook/src/com/facebook/login/LoginBehavior.java
rename to facebook/src/main/java/com/facebook/login/LoginBehavior.java
diff --git a/facebook/src/com/facebook/login/LoginClient.java b/facebook/src/main/java/com/facebook/login/LoginClient.java
similarity index 100%
rename from facebook/src/com/facebook/login/LoginClient.java
rename to facebook/src/main/java/com/facebook/login/LoginClient.java
diff --git a/facebook/src/com/facebook/login/LoginFragment.java b/facebook/src/main/java/com/facebook/login/LoginFragment.java
similarity index 100%
rename from facebook/src/com/facebook/login/LoginFragment.java
rename to facebook/src/main/java/com/facebook/login/LoginFragment.java
diff --git a/facebook/src/com/facebook/login/LoginLogger.java b/facebook/src/main/java/com/facebook/login/LoginLogger.java
similarity index 100%
rename from facebook/src/com/facebook/login/LoginLogger.java
rename to facebook/src/main/java/com/facebook/login/LoginLogger.java
diff --git a/facebook/src/com/facebook/login/LoginManager.java b/facebook/src/main/java/com/facebook/login/LoginManager.java
similarity index 86%
rename from facebook/src/com/facebook/login/LoginManager.java
rename to facebook/src/main/java/com/facebook/login/LoginManager.java
index e45dd2cc2..c883edd5b 100644
--- a/facebook/src/com/facebook/login/LoginManager.java
+++ b/facebook/src/main/java/com/facebook/login/LoginManager.java
@@ -25,8 +25,8 @@
 import android.content.Intent;
 import android.content.pm.ResolveInfo;
 import android.os.Bundle;
-import android.support.v4.app.Fragment;
 import android.content.Context;
+import android.support.v4.app.Fragment;
 
 import com.facebook.AccessToken;
 import com.facebook.CallbackManager;
@@ -38,6 +38,7 @@
 import com.facebook.GraphResponse;
 import com.facebook.Profile;
 import com.facebook.internal.CallbackManagerImpl;
+import com.facebook.internal.FragmentWrapper;
 import com.facebook.internal.Validate;
 import com.facebook.appevents.AppEventsConstants;
 
@@ -103,7 +104,29 @@ public void resolveError(final Activity activity, final GraphResponse response)
      * @param fragment The fragment which is starting the login process.
      * @param response The response that has the error.
      */
-    public void resolveError(final Fragment fragment, final GraphResponse response) {
+    public void resolveError(Fragment fragment, final GraphResponse response) {
+        this.resolveError(new FragmentWrapper(fragment), response);
+    }
+
+    /**
+     * Starts the login process to resolve the error defined in the response. The registered login
+     * callbacks will be called on completion.
+     *
+     * @param fragment The android.app.Fragment which is starting the login process.
+     * @param response The response that has the error.
+     */
+    public void resolveError(final android.app.Fragment fragment, final GraphResponse response) {
+        this.resolveError(new FragmentWrapper(fragment), response);
+    }
+
+    /**
+     * Starts the login process to resolve the error defined in the response. The registered login
+     * callbacks will be called on completion.
+     *
+     * @param fragment The fragment which is starting the login process.
+     * @param response The response that has the error.
+     */
+    private void resolveError(final FragmentWrapper fragment, final GraphResponse response) {
         startLogin(
                 new FragmentStartActivityDelegate(fragment),
                 createLoginRequestFromResponse(response)
@@ -239,12 +262,36 @@ public void logOut() {
         Profile.setCurrentProfile(null);
     }
 
+    /**
+     * Logs the user in with the requested read permissions.
+     * @param fragment    The android.support.v4.app.Fragment which is starting the login process.
+     * @param permissions The requested permissions.
+     */
+    public void logInWithReadPermissions(
+            Fragment fragment,
+            Collection<String> permissions) {
+        logInWithReadPermissions(new FragmentWrapper(fragment), permissions);
+    }
+
+    /**
+     * Logs the user in with the requested read permissions.
+     * @param fragment    The android.app.Fragment which is starting the login process.
+     * @param permissions The requested permissions.
+     */
+    public void logInWithReadPermissions(
+            android.app.Fragment fragment,
+            Collection<String> permissions) {
+        logInWithReadPermissions(new FragmentWrapper(fragment), permissions);
+    }
+
     /**
      * Logs the user in with the requested read permissions.
      * @param fragment    The fragment which is starting the login process.
      * @param permissions The requested permissions.
      */
-    public void logInWithReadPermissions(Fragment fragment, Collection<String> permissions) {
+    private void logInWithReadPermissions(
+            FragmentWrapper fragment,
+            Collection<String> permissions) {
         validateReadPermissions(permissions);
 
         LoginClient.Request loginRequest = createLoginRequest(permissions);
@@ -263,12 +310,36 @@ public void logInWithReadPermissions(Activity activity, Collection<String> permi
         startLogin(new ActivityStartActivityDelegate(activity), loginRequest);
     }
 
+    /**
+     * Logs the user in with the requested publish permissions.
+     * @param fragment    The android.support.v4.app.Fragment which is starting the login process.
+     * @param permissions The requested permissions.
+     */
+    public void logInWithPublishPermissions(
+            Fragment fragment,
+            Collection<String> permissions) {
+        logInWithPublishPermissions(new FragmentWrapper(fragment), permissions);
+    }
+
+    /**
+     * Logs the user in with the requested publish permissions.
+     * @param fragment    The android.app.Fragment which is starting the login process.
+     * @param permissions The requested permissions.
+     */
+    public void logInWithPublishPermissions(
+            android.app.Fragment fragment,
+            Collection<String> permissions) {
+        logInWithPublishPermissions(new FragmentWrapper(fragment), permissions);
+    }
+
     /**
      * Logs the user in with the requested publish permissions.
      * @param fragment    The fragment which is starting the login process.
      * @param permissions The requested permissions.
      */
-    public void logInWithPublishPermissions(Fragment fragment, Collection<String> permissions) {
+    private void logInWithPublishPermissions(
+            FragmentWrapper fragment,
+            Collection<String> permissions) {
         validatePublishPermissions(permissions);
 
         LoginClient.Request loginRequest = createLoginRequest(permissions);
@@ -532,9 +603,9 @@ public Activity getActivityContext() {
     }
 
     private static class FragmentStartActivityDelegate implements StartActivityDelegate {
-        private final Fragment fragment;
+        private final FragmentWrapper fragment;
 
-        FragmentStartActivityDelegate(final Fragment fragment) {
+        FragmentStartActivityDelegate(final FragmentWrapper fragment) {
             Validate.notNull(fragment, "fragment");
             this.fragment = fragment;
         }
diff --git a/facebook/src/com/facebook/login/LoginMethodHandler.java b/facebook/src/main/java/com/facebook/login/LoginMethodHandler.java
similarity index 100%
rename from facebook/src/com/facebook/login/LoginMethodHandler.java
rename to facebook/src/main/java/com/facebook/login/LoginMethodHandler.java
diff --git a/facebook/src/com/facebook/login/LoginResult.java b/facebook/src/main/java/com/facebook/login/LoginResult.java
similarity index 100%
rename from facebook/src/com/facebook/login/LoginResult.java
rename to facebook/src/main/java/com/facebook/login/LoginResult.java
diff --git a/facebook/src/com/facebook/login/StartActivityDelegate.java b/facebook/src/main/java/com/facebook/login/StartActivityDelegate.java
similarity index 100%
rename from facebook/src/com/facebook/login/StartActivityDelegate.java
rename to facebook/src/main/java/com/facebook/login/StartActivityDelegate.java
diff --git a/facebook/src/com/facebook/login/WebViewLoginMethodHandler.java b/facebook/src/main/java/com/facebook/login/WebViewLoginMethodHandler.java
similarity index 99%
rename from facebook/src/com/facebook/login/WebViewLoginMethodHandler.java
rename to facebook/src/main/java/com/facebook/login/WebViewLoginMethodHandler.java
index 4c13570ef..635860db9 100644
--- a/facebook/src/com/facebook/login/WebViewLoginMethodHandler.java
+++ b/facebook/src/main/java/com/facebook/login/WebViewLoginMethodHandler.java
@@ -124,8 +124,7 @@ public void onComplete(Bundle values, FacebookException error) {
                 parameters)
                 .setE2E(e2e)
                 .setIsRerequest(request.isRerequest())
-                .setOnCompleteListener(listener)
-                .setTheme(FacebookSdk.getWebDialogTheme());
+                .setOnCompleteListener(listener);
         loginDialog = builder.build();
 
         FacebookDialogFragment dialogFragment = new FacebookDialogFragment();
diff --git a/facebook/src/com/facebook/login/widget/LoginButton.java b/facebook/src/main/java/com/facebook/login/widget/LoginButton.java
similarity index 98%
rename from facebook/src/com/facebook/login/widget/LoginButton.java
rename to facebook/src/main/java/com/facebook/login/widget/LoginButton.java
index 0b717e5c9..78e8972ba 100644
--- a/facebook/src/com/facebook/login/widget/LoginButton.java
+++ b/facebook/src/main/java/com/facebook/login/widget/LoginButton.java
@@ -723,6 +723,10 @@ public void onClick(DialogInterface dialog, int which) {
                         loginManager.logInWithPublishPermissions(
                                 LoginButton.this.getFragment(),
                                 properties.permissions);
+                    } else if (LoginButton.this.getNativeFragment() != null) {
+                        loginManager.logInWithPublishPermissions(
+                                LoginButton.this.getNativeFragment(),
+                                properties.permissions);
                     } else {
                         loginManager.logInWithPublishPermissions(
                                 LoginButton.this.getActivity(),
@@ -733,6 +737,10 @@ public void onClick(DialogInterface dialog, int which) {
                         loginManager.logInWithReadPermissions(
                                 LoginButton.this.getFragment(),
                                 properties.permissions);
+                    } else if (LoginButton.this.getNativeFragment() != null) {
+                        loginManager.logInWithReadPermissions(
+                                LoginButton.this.getNativeFragment(),
+                                properties.permissions);
                     } else {
                         loginManager.logInWithReadPermissions(
                                 LoginButton.this.getActivity(),
diff --git a/facebook/src/com/facebook/login/widget/ProfilePictureView.java b/facebook/src/main/java/com/facebook/login/widget/ProfilePictureView.java
similarity index 100%
rename from facebook/src/com/facebook/login/widget/ProfilePictureView.java
rename to facebook/src/main/java/com/facebook/login/widget/ProfilePictureView.java
diff --git a/facebook/src/com/facebook/login/widget/ToolTipPopup.java b/facebook/src/main/java/com/facebook/login/widget/ToolTipPopup.java
similarity index 100%
rename from facebook/src/com/facebook/login/widget/ToolTipPopup.java
rename to facebook/src/main/java/com/facebook/login/widget/ToolTipPopup.java
diff --git a/facebook/src/com/facebook/messenger/MessengerThreadParams.java b/facebook/src/main/java/com/facebook/messenger/MessengerThreadParams.java
similarity index 100%
rename from facebook/src/com/facebook/messenger/MessengerThreadParams.java
rename to facebook/src/main/java/com/facebook/messenger/MessengerThreadParams.java
diff --git a/facebook/src/com/facebook/messenger/MessengerUtils.java b/facebook/src/main/java/com/facebook/messenger/MessengerUtils.java
similarity index 100%
rename from facebook/src/com/facebook/messenger/MessengerUtils.java
rename to facebook/src/main/java/com/facebook/messenger/MessengerUtils.java
diff --git a/facebook/src/com/facebook/messenger/ShareToMessengerParams.java b/facebook/src/main/java/com/facebook/messenger/ShareToMessengerParams.java
similarity index 100%
rename from facebook/src/com/facebook/messenger/ShareToMessengerParams.java
rename to facebook/src/main/java/com/facebook/messenger/ShareToMessengerParams.java
diff --git a/facebook/src/com/facebook/messenger/ShareToMessengerParamsBuilder.java b/facebook/src/main/java/com/facebook/messenger/ShareToMessengerParamsBuilder.java
similarity index 100%
rename from facebook/src/com/facebook/messenger/ShareToMessengerParamsBuilder.java
rename to facebook/src/main/java/com/facebook/messenger/ShareToMessengerParamsBuilder.java
diff --git a/facebook/src/com/facebook/share/ShareApi.java b/facebook/src/main/java/com/facebook/share/ShareApi.java
similarity index 100%
rename from facebook/src/com/facebook/share/ShareApi.java
rename to facebook/src/main/java/com/facebook/share/ShareApi.java
diff --git a/facebook/src/com/facebook/share/ShareBuilder.java b/facebook/src/main/java/com/facebook/share/ShareBuilder.java
similarity index 100%
rename from facebook/src/com/facebook/share/ShareBuilder.java
rename to facebook/src/main/java/com/facebook/share/ShareBuilder.java
diff --git a/facebook/src/com/facebook/share/Sharer.java b/facebook/src/main/java/com/facebook/share/Sharer.java
similarity index 100%
rename from facebook/src/com/facebook/share/Sharer.java
rename to facebook/src/main/java/com/facebook/share/Sharer.java
diff --git a/facebook/src/com/facebook/share/internal/AppInviteDialogFeature.java b/facebook/src/main/java/com/facebook/share/internal/AppInviteDialogFeature.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/AppInviteDialogFeature.java
rename to facebook/src/main/java/com/facebook/share/internal/AppInviteDialogFeature.java
diff --git a/facebook/src/com/facebook/share/internal/GameRequestValidation.java b/facebook/src/main/java/com/facebook/share/internal/GameRequestValidation.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/GameRequestValidation.java
rename to facebook/src/main/java/com/facebook/share/internal/GameRequestValidation.java
diff --git a/facebook/src/com/facebook/share/internal/LegacyNativeDialogParameters.java b/facebook/src/main/java/com/facebook/share/internal/LegacyNativeDialogParameters.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/LegacyNativeDialogParameters.java
rename to facebook/src/main/java/com/facebook/share/internal/LegacyNativeDialogParameters.java
diff --git a/facebook/src/com/facebook/share/internal/LikeActionController.java b/facebook/src/main/java/com/facebook/share/internal/LikeActionController.java
similarity index 99%
rename from facebook/src/com/facebook/share/internal/LikeActionController.java
rename to facebook/src/main/java/com/facebook/share/internal/LikeActionController.java
index e0f2017ce..9c5e741fd 100644
--- a/facebook/src/com/facebook/share/internal/LikeActionController.java
+++ b/facebook/src/main/java/com/facebook/share/internal/LikeActionController.java
@@ -25,7 +25,6 @@
 import android.os.Bundle;
 import android.os.Handler;
 import android.os.Looper;
-import android.support.v4.app.Fragment;
 import android.support.v4.content.LocalBroadcastManager;
 import android.util.Log;
 
@@ -36,6 +35,7 @@
 import com.facebook.internal.BundleJSONConverter;
 import com.facebook.internal.CallbackManagerImpl;
 import com.facebook.internal.FileLruCache;
+import com.facebook.internal.FragmentWrapper;
 import com.facebook.internal.Logger;
 import com.facebook.internal.NativeProtocol;
 import com.facebook.internal.ServerProtocol;
@@ -668,7 +668,10 @@ public boolean shouldEnableView() {
     /**
      * Entry-point to the code that performs the like/unlike action.
      */
-    public void toggleLike(Activity activity, Fragment fragment, Bundle analyticsParameters) {
+    public void toggleLike(
+            Activity activity,
+            FragmentWrapper fragment,
+            Bundle analyticsParameters) {
         boolean shouldLikeObject = !this.isObjectLiked;
 
         if (canUseOGPublish()) {
@@ -790,7 +793,7 @@ private void updateState(boolean isObjectLiked,
 
     private void presentLikeDialog(
             final Activity activity,
-            final Fragment fragment,
+            final FragmentWrapper fragmentWrapper,
             final Bundle analyticsParameters) {
         String analyticsEvent = null;
 
@@ -819,8 +822,8 @@ private void presentLikeDialog(
                     .setObjectType(objectTypeString)
                     .build();
 
-            if (fragment != null) {
-                new LikeDialog(fragment).show(likeContent);
+            if (fragmentWrapper != null) {
+                new LikeDialog(fragmentWrapper).show(likeContent);
             } else {
                 new LikeDialog(activity).show(likeContent);
             }
diff --git a/facebook/src/com/facebook/share/internal/LikeBoxCountView.java b/facebook/src/main/java/com/facebook/share/internal/LikeBoxCountView.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/LikeBoxCountView.java
rename to facebook/src/main/java/com/facebook/share/internal/LikeBoxCountView.java
diff --git a/facebook/src/com/facebook/share/internal/LikeButton.java b/facebook/src/main/java/com/facebook/share/internal/LikeButton.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/LikeButton.java
rename to facebook/src/main/java/com/facebook/share/internal/LikeButton.java
diff --git a/facebook/src/com/facebook/share/internal/LikeContent.java b/facebook/src/main/java/com/facebook/share/internal/LikeContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/LikeContent.java
rename to facebook/src/main/java/com/facebook/share/internal/LikeContent.java
diff --git a/facebook/src/com/facebook/share/internal/LikeDialog.java b/facebook/src/main/java/com/facebook/share/internal/LikeDialog.java
similarity index 95%
rename from facebook/src/com/facebook/share/internal/LikeDialog.java
rename to facebook/src/main/java/com/facebook/share/internal/LikeDialog.java
index 48334a410..59969a758 100644
--- a/facebook/src/com/facebook/share/internal/LikeDialog.java
+++ b/facebook/src/main/java/com/facebook/share/internal/LikeDialog.java
@@ -33,6 +33,7 @@
 import com.facebook.internal.CallbackManagerImpl;
 import com.facebook.internal.DialogFeature;
 import com.facebook.internal.DialogPresenter;
+import com.facebook.internal.FragmentWrapper;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -86,7 +87,15 @@ public LikeDialog(Activity activity) {
     }
 
     public LikeDialog(Fragment fragment) {
-        super(fragment, DEFAULT_REQUEST_CODE);
+        this(new FragmentWrapper(fragment));
+    }
+
+    public LikeDialog(android.app.Fragment fragment) {
+        this(new FragmentWrapper(fragment));
+    }
+
+    public LikeDialog(FragmentWrapper fragmentWrapper) {
+        super(fragmentWrapper, DEFAULT_REQUEST_CODE);
     }
 
     @Override
diff --git a/facebook/src/com/facebook/share/internal/LikeDialogFeature.java b/facebook/src/main/java/com/facebook/share/internal/LikeDialogFeature.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/LikeDialogFeature.java
rename to facebook/src/main/java/com/facebook/share/internal/LikeDialogFeature.java
diff --git a/facebook/src/com/facebook/share/internal/LikeStatusClient.java b/facebook/src/main/java/com/facebook/share/internal/LikeStatusClient.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/LikeStatusClient.java
rename to facebook/src/main/java/com/facebook/share/internal/LikeStatusClient.java
diff --git a/facebook/src/com/facebook/share/internal/MessageDialogFeature.java b/facebook/src/main/java/com/facebook/share/internal/MessageDialogFeature.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/MessageDialogFeature.java
rename to facebook/src/main/java/com/facebook/share/internal/MessageDialogFeature.java
diff --git a/facebook/src/com/facebook/share/internal/NativeDialogParameters.java b/facebook/src/main/java/com/facebook/share/internal/NativeDialogParameters.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/NativeDialogParameters.java
rename to facebook/src/main/java/com/facebook/share/internal/NativeDialogParameters.java
diff --git a/facebook/src/com/facebook/share/internal/OpenGraphActionDialogFeature.java b/facebook/src/main/java/com/facebook/share/internal/OpenGraphActionDialogFeature.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/OpenGraphActionDialogFeature.java
rename to facebook/src/main/java/com/facebook/share/internal/OpenGraphActionDialogFeature.java
diff --git a/facebook/src/com/facebook/share/internal/OpenGraphJSONUtility.java b/facebook/src/main/java/com/facebook/share/internal/OpenGraphJSONUtility.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/OpenGraphJSONUtility.java
rename to facebook/src/main/java/com/facebook/share/internal/OpenGraphJSONUtility.java
diff --git a/facebook/src/com/facebook/share/internal/OpenGraphMessageDialogFeature.java b/facebook/src/main/java/com/facebook/share/internal/OpenGraphMessageDialogFeature.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/OpenGraphMessageDialogFeature.java
rename to facebook/src/main/java/com/facebook/share/internal/OpenGraphMessageDialogFeature.java
diff --git a/facebook/src/com/facebook/share/internal/ResultProcessor.java b/facebook/src/main/java/com/facebook/share/internal/ResultProcessor.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/ResultProcessor.java
rename to facebook/src/main/java/com/facebook/share/internal/ResultProcessor.java
diff --git a/facebook/src/com/facebook/share/internal/ShareConstants.java b/facebook/src/main/java/com/facebook/share/internal/ShareConstants.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/ShareConstants.java
rename to facebook/src/main/java/com/facebook/share/internal/ShareConstants.java
diff --git a/facebook/src/com/facebook/share/internal/ShareContentValidation.java b/facebook/src/main/java/com/facebook/share/internal/ShareContentValidation.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/ShareContentValidation.java
rename to facebook/src/main/java/com/facebook/share/internal/ShareContentValidation.java
diff --git a/facebook/src/com/facebook/share/internal/ShareDialogFeature.java b/facebook/src/main/java/com/facebook/share/internal/ShareDialogFeature.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/ShareDialogFeature.java
rename to facebook/src/main/java/com/facebook/share/internal/ShareDialogFeature.java
diff --git a/facebook/src/com/facebook/share/internal/ShareFeedContent.java b/facebook/src/main/java/com/facebook/share/internal/ShareFeedContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/ShareFeedContent.java
rename to facebook/src/main/java/com/facebook/share/internal/ShareFeedContent.java
diff --git a/facebook/src/com/facebook/share/internal/ShareInternalUtility.java b/facebook/src/main/java/com/facebook/share/internal/ShareInternalUtility.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/ShareInternalUtility.java
rename to facebook/src/main/java/com/facebook/share/internal/ShareInternalUtility.java
diff --git a/facebook/src/com/facebook/share/internal/VideoUploader.java b/facebook/src/main/java/com/facebook/share/internal/VideoUploader.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/VideoUploader.java
rename to facebook/src/main/java/com/facebook/share/internal/VideoUploader.java
diff --git a/facebook/src/com/facebook/share/internal/WebDialogParameters.java b/facebook/src/main/java/com/facebook/share/internal/WebDialogParameters.java
similarity index 100%
rename from facebook/src/com/facebook/share/internal/WebDialogParameters.java
rename to facebook/src/main/java/com/facebook/share/internal/WebDialogParameters.java
diff --git a/facebook/src/com/facebook/share/model/AppGroupCreationContent.java b/facebook/src/main/java/com/facebook/share/model/AppGroupCreationContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/AppGroupCreationContent.java
rename to facebook/src/main/java/com/facebook/share/model/AppGroupCreationContent.java
diff --git a/facebook/src/com/facebook/share/model/AppInviteContent.java b/facebook/src/main/java/com/facebook/share/model/AppInviteContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/AppInviteContent.java
rename to facebook/src/main/java/com/facebook/share/model/AppInviteContent.java
diff --git a/facebook/src/com/facebook/share/model/GameRequestContent.java b/facebook/src/main/java/com/facebook/share/model/GameRequestContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/GameRequestContent.java
rename to facebook/src/main/java/com/facebook/share/model/GameRequestContent.java
diff --git a/facebook/src/com/facebook/share/model/ShareContent.java b/facebook/src/main/java/com/facebook/share/model/ShareContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareContent.java
rename to facebook/src/main/java/com/facebook/share/model/ShareContent.java
diff --git a/facebook/src/com/facebook/share/model/ShareLinkContent.java b/facebook/src/main/java/com/facebook/share/model/ShareLinkContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareLinkContent.java
rename to facebook/src/main/java/com/facebook/share/model/ShareLinkContent.java
diff --git a/facebook/src/com/facebook/share/model/ShareMedia.java b/facebook/src/main/java/com/facebook/share/model/ShareMedia.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareMedia.java
rename to facebook/src/main/java/com/facebook/share/model/ShareMedia.java
diff --git a/facebook/src/com/facebook/share/model/ShareModel.java b/facebook/src/main/java/com/facebook/share/model/ShareModel.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareModel.java
rename to facebook/src/main/java/com/facebook/share/model/ShareModel.java
diff --git a/facebook/src/com/facebook/share/model/ShareModelBuilder.java b/facebook/src/main/java/com/facebook/share/model/ShareModelBuilder.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareModelBuilder.java
rename to facebook/src/main/java/com/facebook/share/model/ShareModelBuilder.java
diff --git a/facebook/src/com/facebook/share/model/ShareOpenGraphAction.java b/facebook/src/main/java/com/facebook/share/model/ShareOpenGraphAction.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareOpenGraphAction.java
rename to facebook/src/main/java/com/facebook/share/model/ShareOpenGraphAction.java
diff --git a/facebook/src/com/facebook/share/model/ShareOpenGraphContent.java b/facebook/src/main/java/com/facebook/share/model/ShareOpenGraphContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareOpenGraphContent.java
rename to facebook/src/main/java/com/facebook/share/model/ShareOpenGraphContent.java
diff --git a/facebook/src/com/facebook/share/model/ShareOpenGraphObject.java b/facebook/src/main/java/com/facebook/share/model/ShareOpenGraphObject.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareOpenGraphObject.java
rename to facebook/src/main/java/com/facebook/share/model/ShareOpenGraphObject.java
diff --git a/facebook/src/com/facebook/share/model/ShareOpenGraphValueContainer.java b/facebook/src/main/java/com/facebook/share/model/ShareOpenGraphValueContainer.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareOpenGraphValueContainer.java
rename to facebook/src/main/java/com/facebook/share/model/ShareOpenGraphValueContainer.java
diff --git a/facebook/src/com/facebook/share/model/SharePhoto.java b/facebook/src/main/java/com/facebook/share/model/SharePhoto.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/SharePhoto.java
rename to facebook/src/main/java/com/facebook/share/model/SharePhoto.java
diff --git a/facebook/src/com/facebook/share/model/SharePhotoContent.java b/facebook/src/main/java/com/facebook/share/model/SharePhotoContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/SharePhotoContent.java
rename to facebook/src/main/java/com/facebook/share/model/SharePhotoContent.java
diff --git a/facebook/src/com/facebook/share/model/ShareVideo.java b/facebook/src/main/java/com/facebook/share/model/ShareVideo.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareVideo.java
rename to facebook/src/main/java/com/facebook/share/model/ShareVideo.java
diff --git a/facebook/src/com/facebook/share/model/ShareVideoContent.java b/facebook/src/main/java/com/facebook/share/model/ShareVideoContent.java
similarity index 100%
rename from facebook/src/com/facebook/share/model/ShareVideoContent.java
rename to facebook/src/main/java/com/facebook/share/model/ShareVideoContent.java
diff --git a/facebook/src/com/facebook/share/widget/AppInviteDialog.java b/facebook/src/main/java/com/facebook/share/widget/AppInviteDialog.java
similarity index 85%
rename from facebook/src/com/facebook/share/widget/AppInviteDialog.java
rename to facebook/src/main/java/com/facebook/share/widget/AppInviteDialog.java
index ae87d61d5..c91d0f876 100644
--- a/facebook/src/com/facebook/share/widget/AppInviteDialog.java
+++ b/facebook/src/main/java/com/facebook/share/widget/AppInviteDialog.java
@@ -98,13 +98,32 @@ public static void show(
      * Helper to show the provided {@link com.facebook.share.model.AppInviteContent} using
      * the provided Fragment. No callback will be invoked.
      *
-     * @param fragment          Fragment to use to share the provided content
+     * @param fragment          android.support.v4.app.Fragment to use to share the provided content
      * @param appInviteContent Content of the app invite to send
      */
     public static void show(
             final Fragment fragment,
             final AppInviteContent appInviteContent) {
-        new AppInviteDialog(fragment)
+        show(new FragmentWrapper(fragment), appInviteContent);
+    }
+
+    /**
+     * Helper to show the provided {@link com.facebook.share.model.AppInviteContent} using
+     * the provided Fragment. No callback will be invoked.
+     *
+     * @param fragment          android.app.Fragment to use to share the provided content
+     * @param appInviteContent Content of the app invite to send
+     */
+    public static void show(
+            final android.app.Fragment fragment,
+            final AppInviteContent appInviteContent) {
+        show(new FragmentWrapper(fragment), appInviteContent);
+    }
+
+    private static void show(
+            final FragmentWrapper fragmentWrapper,
+            final AppInviteContent appInviteContent) {
+        new AppInviteDialog(fragmentWrapper)
                 .show(appInviteContent);
     }
 
@@ -128,9 +147,22 @@ public AppInviteDialog(final Activity activity) {
     /**
      * Constructs a new AppInviteDialog.
      *
-     * @param fragment Fragment to use to share the provided content.
+     * @param fragment android.support.v4.app.Fragment to use to share the provided content.
      */
     public AppInviteDialog(final Fragment fragment) {
+        this(new FragmentWrapper(fragment));
+    }
+
+    /**
+     * Constructs a new AppInviteDialog.
+     *
+     * @param fragment android.app.Fragment to use to share the provided content.
+     */
+    public AppInviteDialog(final android.app.Fragment fragment) {
+        this(new FragmentWrapper(fragment));
+    }
+
+    private AppInviteDialog(final FragmentWrapper fragment) {
         super(fragment, DEFAULT_REQUEST_CODE);
     }
 
diff --git a/facebook/src/com/facebook/share/widget/CreateAppGroupDialog.java b/facebook/src/main/java/com/facebook/share/widget/CreateAppGroupDialog.java
similarity index 80%
rename from facebook/src/com/facebook/share/widget/CreateAppGroupDialog.java
rename to facebook/src/main/java/com/facebook/share/widget/CreateAppGroupDialog.java
index dc0455792..cb81ac534 100644
--- a/facebook/src/com/facebook/share/widget/CreateAppGroupDialog.java
+++ b/facebook/src/main/java/com/facebook/share/widget/CreateAppGroupDialog.java
@@ -30,6 +30,7 @@
 import com.facebook.internal.CallbackManagerImpl;
 import com.facebook.internal.DialogPresenter;
 import com.facebook.internal.FacebookDialogBase;
+import com.facebook.internal.FragmentWrapper;
 import com.facebook.share.internal.ResultProcessor;
 import com.facebook.share.internal.ShareInternalUtility;
 import com.facebook.share.internal.WebDialogParameters;
@@ -94,13 +95,32 @@ public static void show(
      * Shows an {@link CreateAppGroupDialog} to create a group with the passed in content, using
      * the passed in fragment. No callback will be invoked.
      *
-     * @param fragment Fragment hosting the dialog
+     * @param fragment android.support.v4.app.Fragment hosting the dialog
      * @param appGroupCreationContent Content describing the group to be created
      */
     public static void show(
             final Fragment fragment,
             AppGroupCreationContent appGroupCreationContent) {
-        new CreateAppGroupDialog(fragment).show(appGroupCreationContent);
+        show(new FragmentWrapper(fragment), appGroupCreationContent);
+    }
+
+    /**
+     * Shows an {@link CreateAppGroupDialog} to create a group with the passed in content, using
+     * the passed in fragment. No callback will be invoked.
+     *
+     * @param fragment android.app.Fragment hosting the dialog
+     * @param appGroupCreationContent Content describing the group to be created
+     */
+    public static void show(
+            final android.app.Fragment fragment,
+            AppGroupCreationContent appGroupCreationContent) {
+        show(new FragmentWrapper(fragment), appGroupCreationContent);
+    }
+
+    private static void show(
+            final FragmentWrapper fragmentWrapper,
+            AppGroupCreationContent appGroupCreationContent) {
+        new CreateAppGroupDialog(fragmentWrapper).show(appGroupCreationContent);
     }
 
     /**
@@ -113,10 +133,22 @@ public CreateAppGroupDialog(final Activity activity) {
 
     /**
      * Constructs a new CreateAppGroupDialog.
-     * @param fragment Fragment hosting the dialog.
+     * @param fragment android.support.v4.app.Fragment hosting the dialog.
      */
     public CreateAppGroupDialog(final Fragment fragment) {
-        super(fragment, DEFAULT_REQUEST_CODE);
+        this(new FragmentWrapper(fragment));
+    }
+
+    /**
+     * Constructs a new CreateAppGroupDialog.
+     * @param fragment android.app.Fragment hosting the dialog.
+     */
+    public CreateAppGroupDialog(final android.app.Fragment fragment) {
+        this(new FragmentWrapper(fragment));
+    }
+
+    private CreateAppGroupDialog(final FragmentWrapper fragmentWrapper) {
+        super(fragmentWrapper, DEFAULT_REQUEST_CODE);
     }
 
     @Override
diff --git a/facebook/src/com/facebook/share/widget/GameRequestDialog.java b/facebook/src/main/java/com/facebook/share/widget/GameRequestDialog.java
similarity index 81%
rename from facebook/src/com/facebook/share/widget/GameRequestDialog.java
rename to facebook/src/main/java/com/facebook/share/widget/GameRequestDialog.java
index 875bd6d03..b9a80af90 100644
--- a/facebook/src/com/facebook/share/widget/GameRequestDialog.java
+++ b/facebook/src/main/java/com/facebook/share/widget/GameRequestDialog.java
@@ -30,6 +30,7 @@
 import com.facebook.internal.AppCall;
 import com.facebook.internal.CallbackManagerImpl;
 import com.facebook.internal.DialogPresenter;
+import com.facebook.internal.FragmentWrapper;
 import com.facebook.share.internal.GameRequestValidation;
 import com.facebook.share.internal.ResultProcessor;
 import com.facebook.share.internal.ShareConstants;
@@ -112,11 +113,32 @@ public static void show(final Activity activity, final GameRequestContent gameRe
      * Shows a {@link GameRequestDialog} to send a request, using
      * the passed in activity. No callback will be invoked.
      *
-     * @param fragment Fragment hosting the dialog.
+     * @param fragment android.support.v4.app.Fragment hosting the dialog.
      * @param gameRequestContent Content of the request.
      */
-    public static void show(final Fragment fragment, final GameRequestContent gameRequestContent) {
-        new GameRequestDialog(fragment).show(gameRequestContent);
+    public static void show(
+            final Fragment fragment,
+            final GameRequestContent gameRequestContent) {
+        show(new FragmentWrapper(fragment), gameRequestContent);
+    }
+
+    /**
+     * Shows a {@link GameRequestDialog} to send a request, using
+     * the passed in activity. No callback will be invoked.
+     *
+     * @param fragment android.app.Fragment hosting the dialog.
+     * @param gameRequestContent Content of the request.
+     */
+    public static void show(
+            final android.app.Fragment fragment,
+            final GameRequestContent gameRequestContent) {
+        show(new FragmentWrapper(fragment), gameRequestContent);
+    }
+
+    private static void show(
+            final FragmentWrapper fragmentWrapper,
+            final GameRequestContent gameRequestContent) {
+        new GameRequestDialog(fragmentWrapper).show(gameRequestContent);
     }
 
     /**
@@ -129,10 +151,22 @@ public GameRequestDialog(Activity activity) {
 
     /**
      * Constructs a new RequestDialog.
-     * @param fragment Fragment hosting the dialog.
+     * @param fragment android.support.v4.app.Fragment hosting the dialog.
      */
     public GameRequestDialog(Fragment fragment) {
-        super(fragment, DEFAULT_REQUEST_CODE);
+        this(new FragmentWrapper(fragment));
+    }
+
+    /**
+     * Constructs a new RequestDialog.
+     * @param fragment android.app.Fragment hosting the dialog.
+     */
+    public GameRequestDialog(android.app.Fragment fragment) {
+        this(new FragmentWrapper(fragment));
+    }
+
+    private GameRequestDialog(FragmentWrapper fragmentWrapper) {
+        super(fragmentWrapper, DEFAULT_REQUEST_CODE);
     }
 
     @Override
diff --git a/facebook/src/com/facebook/share/widget/JoinAppGroupDialog.java b/facebook/src/main/java/com/facebook/share/widget/JoinAppGroupDialog.java
similarity index 81%
rename from facebook/src/com/facebook/share/widget/JoinAppGroupDialog.java
rename to facebook/src/main/java/com/facebook/share/widget/JoinAppGroupDialog.java
index 590a1c9d3..8c48dc0fc 100644
--- a/facebook/src/com/facebook/share/widget/JoinAppGroupDialog.java
+++ b/facebook/src/main/java/com/facebook/share/widget/JoinAppGroupDialog.java
@@ -31,6 +31,7 @@
 import com.facebook.internal.CallbackManagerImpl;
 import com.facebook.internal.DialogPresenter;
 import com.facebook.internal.FacebookDialogBase;
+import com.facebook.internal.FragmentWrapper;
 import com.facebook.share.internal.ResultProcessor;
 import com.facebook.share.internal.ShareConstants;
 import com.facebook.share.internal.ShareInternalUtility;
@@ -93,13 +94,32 @@ public static void show(
      * Shows an {@link JoinAppGroupDialog} to join a group with the passed in Id, using
      * the passed in fragment. No callback will be invoked.
      *
-     * @param fragment Fragment hosting the dialog
+     * @param fragment android.support.v4.app.Fragment hosting the dialog
      * @param groupId Id of the group to join
      */
     public static void show(
             final Fragment fragment,
             final String groupId) {
-        new JoinAppGroupDialog(fragment).show(groupId);
+        show(new FragmentWrapper(fragment), groupId);
+    }
+
+    /**
+     * Shows an {@link JoinAppGroupDialog} to join a group with the passed in Id, using
+     * the passed in fragment. No callback will be invoked.
+     *
+     * @param fragment android.app.Fragment hosting the dialog
+     * @param groupId Id of the group to join
+     */
+    public static void show(
+            final android.app.Fragment fragment,
+            final String groupId) {
+        show(new FragmentWrapper(fragment), groupId);
+    }
+
+    private static void show(
+            final FragmentWrapper fragmentWrapper,
+            final String groupId) {
+        new JoinAppGroupDialog(fragmentWrapper).show(groupId);
     }
 
     /**
@@ -112,10 +132,22 @@ public JoinAppGroupDialog(final Activity activity) {
 
     /**
      * Constructs a JoinAppGroupDialog.
-     * @param fragment Fragment hosting the dialog.
+     * @param fragment android.support.v4.app.Fragment hosting the dialog.
      */
     public JoinAppGroupDialog(final Fragment fragment) {
-        super(fragment, DEFAULT_REQUEST_CODE);
+        this(new FragmentWrapper(fragment));
+    }
+
+    /**
+     * Constructs a JoinAppGroupDialog.
+     * @param fragment android.app.Fragment hosting the dialog.
+     */
+    public JoinAppGroupDialog(final android.app.Fragment fragment) {
+        this(new FragmentWrapper(fragment));
+    }
+
+    private JoinAppGroupDialog(final FragmentWrapper fragmentWrapper) {
+        super(fragmentWrapper, DEFAULT_REQUEST_CODE);
     }
 
     @Override
diff --git a/facebook/src/com/facebook/share/widget/LikeView.java b/facebook/src/main/java/com/facebook/share/widget/LikeView.java
similarity index 97%
rename from facebook/src/com/facebook/share/widget/LikeView.java
rename to facebook/src/main/java/com/facebook/share/widget/LikeView.java
index 4c58efebb..d05184d31 100644
--- a/facebook/src/com/facebook/share/widget/LikeView.java
+++ b/facebook/src/main/java/com/facebook/share/widget/LikeView.java
@@ -287,7 +287,7 @@ private int getValue() {
     private int edgePadding;
     private int internalPadding;
 
-    private Fragment parentFragment;
+    private FragmentWrapper parentFragment;
 
     private boolean explicitlyDisabled;
 
@@ -427,10 +427,22 @@ public OnErrorListener getOnErrorListener() {
      * {@link Fragment#onActivityResult(int, int, android.content.Intent) onActivityResult}
      * call rather than the Activity, upon completion of Likes from this view.
      *
-     * @param fragment Fragment that is hosting the LikeView.
+     * @param fragment android.support.v4.app.Fragment that is hosting the LikeView.
      */
     public void setFragment(Fragment fragment) {
-        this.parentFragment = fragment;
+        this.parentFragment = new FragmentWrapper(fragment);
+    }
+
+    /**
+     * Sets the parent Fragment which is hosting this LikeView. This allows the LikeView to be
+     * embedded inside a Fragment, and will allow the fragment to receive the
+     * {@link Fragment#onActivityResult(int, int, android.content.Intent) onActivityResult}
+     * call rather than the Activity, upon completion of Likes from this view.
+     *
+     * @param fragment android.app.Fragment that is hosting the LikeView.
+     */
+    public void setFragment(android.app.Fragment fragment) {
+        this.parentFragment = new FragmentWrapper(fragment);
     }
 
     @Override
diff --git a/facebook/src/com/facebook/share/widget/MessageDialog.java b/facebook/src/main/java/com/facebook/share/widget/MessageDialog.java
similarity index 81%
rename from facebook/src/com/facebook/share/widget/MessageDialog.java
rename to facebook/src/main/java/com/facebook/share/widget/MessageDialog.java
index a6081cf84..f6114ab49 100644
--- a/facebook/src/com/facebook/share/widget/MessageDialog.java
+++ b/facebook/src/main/java/com/facebook/share/widget/MessageDialog.java
@@ -30,6 +30,7 @@
 import com.facebook.internal.CallbackManagerImpl;
 import com.facebook.internal.DialogFeature;
 import com.facebook.internal.DialogPresenter;
+import com.facebook.internal.FragmentWrapper;
 import com.facebook.share.Sharer;
 import com.facebook.share.internal.LegacyNativeDialogParameters;
 import com.facebook.share.internal.MessageDialogFeature;
@@ -71,13 +72,32 @@ public static void show(
      * Helper to show the provided {@link com.facebook.share.model.ShareContent} using the provided
      * Fragment. No callback will be invoked.
      *
-     * @param fragment Fragment to use to send the provided content
+     * @param fragment android.support.v4.app.Fragment to use to send the provided content
      * @param shareContent Content to send
      */
     public static void show(
             final Fragment fragment,
             final ShareContent shareContent) {
-        new MessageDialog(fragment).show(shareContent);
+        show(new FragmentWrapper(fragment), shareContent);
+    }
+
+    /**
+     * Helper to show the provided {@link com.facebook.share.model.ShareContent} using the provided
+     * Fragment. No callback will be invoked.
+     *
+     * @param fragment android.app.Fragment to use to send the provided content
+     * @param shareContent Content to send
+     */
+    public static void show(
+            final android.app.Fragment fragment,
+            final ShareContent shareContent) {
+        show(new FragmentWrapper(fragment), shareContent);
+    }
+
+    private static void show(
+            final FragmentWrapper fragmentWrapper,
+            final ShareContent shareContent) {
+        new MessageDialog(fragmentWrapper).show(shareContent);
     }
 
     /**
@@ -106,10 +126,23 @@ public MessageDialog(Activity activity) {
 
     /**
      * Constructs a MessageDialog.
-     * @param fragment Fragment to use to send the provided content.
+     * @param fragment android.support.v4.app.Fragment to use to send the provided content.
      */
     public MessageDialog(Fragment fragment) {
-        super(fragment, DEFAULT_REQUEST_CODE);
+        this(new FragmentWrapper(fragment));
+
+    }
+
+    /**
+     * Constructs a MessageDialog.
+     * @param fragment android.app.Fragment to use to send the provided content.
+     */
+    public MessageDialog(android.app.Fragment fragment) {
+        this(new FragmentWrapper(fragment));
+    }
+
+    private MessageDialog(FragmentWrapper fragmentWrapper) {
+        super(fragmentWrapper, DEFAULT_REQUEST_CODE);
 
         ShareInternalUtility.registerStaticShareCallback(DEFAULT_REQUEST_CODE);
     }
@@ -123,7 +156,16 @@ public MessageDialog(Fragment fragment) {
 
     // for SendButton use only
     MessageDialog(Fragment fragment, int requestCode) {
-        super(fragment, requestCode);
+        this(new FragmentWrapper(fragment), requestCode);
+
+    }
+
+    MessageDialog(android.app.Fragment fragment, int requestCode) {
+        this(new FragmentWrapper(fragment), requestCode);
+    }
+
+    private MessageDialog(FragmentWrapper fragmentWrapper, int requestCode) {
+        super(fragmentWrapper, requestCode);
 
         ShareInternalUtility.registerStaticShareCallback(requestCode);
     }
diff --git a/facebook/src/com/facebook/share/widget/SendButton.java b/facebook/src/main/java/com/facebook/share/widget/SendButton.java
similarity index 94%
rename from facebook/src/com/facebook/share/widget/SendButton.java
rename to facebook/src/main/java/com/facebook/share/widget/SendButton.java
index 1ff2b19ef..068d9ebc6 100644
--- a/facebook/src/com/facebook/share/widget/SendButton.java
+++ b/facebook/src/main/java/com/facebook/share/widget/SendButton.java
@@ -69,7 +69,9 @@ protected int getDefaultRequestCode() {
     protected FacebookDialogBase<ShareContent, Sharer.Result> getDialog() {
         final MessageDialog dialog;
         if (SendButton.this.getFragment() != null) {
-            dialog = new MessageDialog(SendButton.this.getFragment() , getRequestCode());
+            dialog = new MessageDialog(SendButton.this.getFragment(), getRequestCode());
+        } else if (SendButton.this.getNativeFragment() != null) {
+            dialog = new MessageDialog(SendButton.this.getNativeFragment(), getRequestCode());
         } else {
             dialog = new MessageDialog(getActivity(), getRequestCode());
         }
diff --git a/facebook/src/com/facebook/share/widget/ShareButton.java b/facebook/src/main/java/com/facebook/share/widget/ShareButton.java
similarity index 94%
rename from facebook/src/com/facebook/share/widget/ShareButton.java
rename to facebook/src/main/java/com/facebook/share/widget/ShareButton.java
index 5eca46b50..2c5835150 100644
--- a/facebook/src/com/facebook/share/widget/ShareButton.java
+++ b/facebook/src/main/java/com/facebook/share/widget/ShareButton.java
@@ -70,7 +70,9 @@ protected int getDefaultRequestCode() {
     protected FacebookDialogBase<ShareContent, Sharer.Result> getDialog() {
         final ShareDialog dialog;
         if (ShareButton.this.getFragment() != null) {
-            dialog = new ShareDialog(ShareButton.this.getFragment() , getRequestCode());
+            dialog = new ShareDialog(ShareButton.this.getFragment(), getRequestCode());
+        } else if (ShareButton.this.getNativeFragment() != null) {
+            dialog = new ShareDialog(ShareButton.this.getNativeFragment(), getRequestCode());
         } else {
             dialog = new ShareDialog(getActivity(), getRequestCode());
         }
diff --git a/facebook/src/com/facebook/share/widget/ShareButtonBase.java b/facebook/src/main/java/com/facebook/share/widget/ShareButtonBase.java
similarity index 100%
rename from facebook/src/com/facebook/share/widget/ShareButtonBase.java
rename to facebook/src/main/java/com/facebook/share/widget/ShareButtonBase.java
diff --git a/facebook/src/com/facebook/share/widget/ShareDialog.java b/facebook/src/main/java/com/facebook/share/widget/ShareDialog.java
similarity index 89%
rename from facebook/src/com/facebook/share/widget/ShareDialog.java
rename to facebook/src/main/java/com/facebook/share/widget/ShareDialog.java
index db78b220c..8180c5e8f 100644
--- a/facebook/src/com/facebook/share/widget/ShareDialog.java
+++ b/facebook/src/main/java/com/facebook/share/widget/ShareDialog.java
@@ -33,6 +33,7 @@
 import com.facebook.internal.DialogFeature;
 import com.facebook.internal.DialogPresenter;
 import com.facebook.internal.FacebookDialogBase;
+import com.facebook.internal.FragmentWrapper;
 import com.facebook.share.internal.ShareFeedContent;
 import com.facebook.share.Sharer;
 import com.facebook.share.internal.LegacyNativeDialogParameters;
@@ -104,13 +105,32 @@ public static void show(
      * Helper to show the provided {@link com.facebook.share.model.ShareContent} using the provided
      * Fragment. No callback will be invoked.
      *
-     * @param fragment Fragment to use to share the provided content
+     * @param fragment android.support.v4.app.Fragment to use to share the provided content
      * @param shareContent Content to share
      */
     public static void show(
             final Fragment fragment,
             final ShareContent shareContent) {
-        new ShareDialog(fragment).show(shareContent);
+        show(new FragmentWrapper(fragment), shareContent);
+    }
+
+    /**
+     * Helper to show the provided {@link com.facebook.share.model.ShareContent} using the provided
+     * Fragment. No callback will be invoked.
+     *
+     * @param fragment android.app.Fragment to use to share the provided content
+     * @param shareContent Content to share
+     */
+    public static void show(
+            final android.app.Fragment fragment,
+            final ShareContent shareContent) {
+        show(new FragmentWrapper(fragment), shareContent);
+    }
+
+    private static void show(
+            final FragmentWrapper fragmentWrapper,
+            final ShareContent shareContent) {
+        new ShareDialog(fragmentWrapper).show(shareContent);
     }
 
     /**
@@ -153,10 +173,23 @@ public ShareDialog(Activity activity) {
 
     /**
      * Constructs a new ShareDialog.
-     * @param fragment Fragment to use to share the provided content.
+     * @param fragment android.support.v4.app.Fragment to use to share the provided content.
      */
     public ShareDialog(Fragment fragment) {
-        super(fragment, DEFAULT_REQUEST_CODE);
+        this(new FragmentWrapper(fragment));
+
+    }
+
+    /**
+     * Constructs a new ShareDialog.
+     * @param fragment android.app.Fragment to use to share the provided content.
+     */
+    public ShareDialog(android.app.Fragment fragment) {
+        this(new FragmentWrapper(fragment));
+    }
+
+    private ShareDialog(FragmentWrapper fragmentWrapper) {
+        super(fragmentWrapper, DEFAULT_REQUEST_CODE);
 
         ShareInternalUtility.registerStaticShareCallback(DEFAULT_REQUEST_CODE);
     }
@@ -170,7 +203,16 @@ public ShareDialog(Fragment fragment) {
 
     // for ShareDialog use only
     ShareDialog(Fragment fragment, int requestCode) {
-        super(fragment, requestCode);
+        this(new FragmentWrapper(fragment), requestCode);
+
+    }
+
+    ShareDialog(android.app.Fragment fragment, int requestCode) {
+        this(new FragmentWrapper(fragment), requestCode);
+    }
+
+    private ShareDialog(FragmentWrapper fragmentWrapper, int requestCode) {
+        super(fragmentWrapper, requestCode);
 
         ShareInternalUtility.registerStaticShareCallback(requestCode);
     }
diff --git a/facebook/res/drawable-hdpi/com_facebook_button_icon.png b/facebook/src/main/res/drawable-hdpi/com_facebook_button_icon.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_button_icon.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_button_icon.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_button_like_icon_selected.png b/facebook/src/main/res/drawable-hdpi/com_facebook_button_like_icon_selected.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_button_like_icon_selected.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_button_like_icon_selected.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_button_send_icon.png b/facebook/src/main/res/drawable-hdpi/com_facebook_button_send_icon.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_button_send_icon.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_button_send_icon.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_close.png b/facebook/src/main/res/drawable-hdpi/com_facebook_close.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_close.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_close.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_tooltip_black_background.9.png b/facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_black_background.9.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_tooltip_black_background.9.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_black_background.9.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_tooltip_black_bottomnub.png b/facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_black_bottomnub.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_tooltip_black_bottomnub.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_black_bottomnub.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_tooltip_black_topnub.png b/facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_black_topnub.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_tooltip_black_topnub.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_black_topnub.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_tooltip_black_xout.png b/facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_black_xout.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_tooltip_black_xout.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_black_xout.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_tooltip_blue_background.9.png b/facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_blue_background.9.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_tooltip_blue_background.9.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_blue_background.9.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_tooltip_blue_bottomnub.png b/facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_blue_bottomnub.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_tooltip_blue_bottomnub.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_blue_bottomnub.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_tooltip_blue_topnub.png b/facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_blue_topnub.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_tooltip_blue_topnub.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_blue_topnub.png
diff --git a/facebook/res/drawable-hdpi/com_facebook_tooltip_blue_xout.png b/facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_blue_xout.png
similarity index 100%
rename from facebook/res/drawable-hdpi/com_facebook_tooltip_blue_xout.png
rename to facebook/src/main/res/drawable-hdpi/com_facebook_tooltip_blue_xout.png
diff --git a/facebook/res/drawable-hdpi/messenger_bubble_large_blue.png b/facebook/src/main/res/drawable-hdpi/messenger_bubble_large_blue.png
similarity index 100%
rename from facebook/res/drawable-hdpi/messenger_bubble_large_blue.png
rename to facebook/src/main/res/drawable-hdpi/messenger_bubble_large_blue.png
diff --git a/facebook/res/drawable-hdpi/messenger_bubble_large_white.png b/facebook/src/main/res/drawable-hdpi/messenger_bubble_large_white.png
similarity index 100%
rename from facebook/res/drawable-hdpi/messenger_bubble_large_white.png
rename to facebook/src/main/res/drawable-hdpi/messenger_bubble_large_white.png
diff --git a/facebook/res/drawable-hdpi/messenger_bubble_small_blue.png b/facebook/src/main/res/drawable-hdpi/messenger_bubble_small_blue.png
similarity index 100%
rename from facebook/res/drawable-hdpi/messenger_bubble_small_blue.png
rename to facebook/src/main/res/drawable-hdpi/messenger_bubble_small_blue.png
diff --git a/facebook/res/drawable-hdpi/messenger_bubble_small_white.png b/facebook/src/main/res/drawable-hdpi/messenger_bubble_small_white.png
similarity index 100%
rename from facebook/res/drawable-hdpi/messenger_bubble_small_white.png
rename to facebook/src/main/res/drawable-hdpi/messenger_bubble_small_white.png
diff --git a/facebook/res/drawable-hdpi/messenger_button_send_round_shadow.png b/facebook/src/main/res/drawable-hdpi/messenger_button_send_round_shadow.png
similarity index 100%
rename from facebook/res/drawable-hdpi/messenger_button_send_round_shadow.png
rename to facebook/src/main/res/drawable-hdpi/messenger_button_send_round_shadow.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_button_icon.png b/facebook/src/main/res/drawable-mdpi/com_facebook_button_icon.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_button_icon.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_button_icon.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_button_like_icon_selected.png b/facebook/src/main/res/drawable-mdpi/com_facebook_button_like_icon_selected.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_button_like_icon_selected.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_button_like_icon_selected.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_button_send_icon.png b/facebook/src/main/res/drawable-mdpi/com_facebook_button_send_icon.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_button_send_icon.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_button_send_icon.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_close.png b/facebook/src/main/res/drawable-mdpi/com_facebook_close.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_close.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_close.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_profile_picture_blank_portrait.png b/facebook/src/main/res/drawable-mdpi/com_facebook_profile_picture_blank_portrait.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_profile_picture_blank_portrait.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_profile_picture_blank_portrait.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_profile_picture_blank_square.png b/facebook/src/main/res/drawable-mdpi/com_facebook_profile_picture_blank_square.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_profile_picture_blank_square.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_profile_picture_blank_square.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_tooltip_black_background.9.png b/facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_black_background.9.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_tooltip_black_background.9.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_black_background.9.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_tooltip_black_bottomnub.png b/facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_black_bottomnub.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_tooltip_black_bottomnub.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_black_bottomnub.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_tooltip_black_topnub.png b/facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_black_topnub.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_tooltip_black_topnub.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_black_topnub.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_tooltip_black_xout.png b/facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_black_xout.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_tooltip_black_xout.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_black_xout.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_tooltip_blue_background.9.png b/facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_blue_background.9.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_tooltip_blue_background.9.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_blue_background.9.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_tooltip_blue_bottomnub.png b/facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_blue_bottomnub.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_tooltip_blue_bottomnub.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_blue_bottomnub.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_tooltip_blue_topnub.png b/facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_blue_topnub.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_tooltip_blue_topnub.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_blue_topnub.png
diff --git a/facebook/res/drawable-mdpi/com_facebook_tooltip_blue_xout.png b/facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_blue_xout.png
similarity index 100%
rename from facebook/res/drawable-mdpi/com_facebook_tooltip_blue_xout.png
rename to facebook/src/main/res/drawable-mdpi/com_facebook_tooltip_blue_xout.png
diff --git a/facebook/res/drawable-mdpi/messenger_bubble_large_blue.png b/facebook/src/main/res/drawable-mdpi/messenger_bubble_large_blue.png
similarity index 100%
rename from facebook/res/drawable-mdpi/messenger_bubble_large_blue.png
rename to facebook/src/main/res/drawable-mdpi/messenger_bubble_large_blue.png
diff --git a/facebook/res/drawable-mdpi/messenger_bubble_large_white.png b/facebook/src/main/res/drawable-mdpi/messenger_bubble_large_white.png
similarity index 100%
rename from facebook/res/drawable-mdpi/messenger_bubble_large_white.png
rename to facebook/src/main/res/drawable-mdpi/messenger_bubble_large_white.png
diff --git a/facebook/res/drawable-mdpi/messenger_bubble_small_blue.png b/facebook/src/main/res/drawable-mdpi/messenger_bubble_small_blue.png
similarity index 100%
rename from facebook/res/drawable-mdpi/messenger_bubble_small_blue.png
rename to facebook/src/main/res/drawable-mdpi/messenger_bubble_small_blue.png
diff --git a/facebook/res/drawable-mdpi/messenger_bubble_small_white.png b/facebook/src/main/res/drawable-mdpi/messenger_bubble_small_white.png
similarity index 100%
rename from facebook/res/drawable-mdpi/messenger_bubble_small_white.png
rename to facebook/src/main/res/drawable-mdpi/messenger_bubble_small_white.png
diff --git a/facebook/res/drawable-mdpi/messenger_button_send_round_shadow.png b/facebook/src/main/res/drawable-mdpi/messenger_button_send_round_shadow.png
similarity index 100%
rename from facebook/res/drawable-mdpi/messenger_button_send_round_shadow.png
rename to facebook/src/main/res/drawable-mdpi/messenger_button_send_round_shadow.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_button_icon.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_button_icon.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_button_icon.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_button_icon.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_button_like_icon_selected.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_button_like_icon_selected.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_button_like_icon_selected.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_button_like_icon_selected.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_button_send_icon.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_button_send_icon.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_button_send_icon.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_button_send_icon.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_close.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_close.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_close.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_close.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_tooltip_black_background.9.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_black_background.9.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_tooltip_black_background.9.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_black_background.9.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_tooltip_black_bottomnub.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_black_bottomnub.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_tooltip_black_bottomnub.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_black_bottomnub.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_tooltip_black_topnub.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_black_topnub.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_tooltip_black_topnub.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_black_topnub.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_tooltip_black_xout.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_black_xout.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_tooltip_black_xout.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_black_xout.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_tooltip_blue_background.9.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_blue_background.9.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_tooltip_blue_background.9.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_blue_background.9.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_tooltip_blue_bottomnub.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_blue_bottomnub.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_tooltip_blue_bottomnub.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_blue_bottomnub.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_tooltip_blue_topnub.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_blue_topnub.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_tooltip_blue_topnub.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_blue_topnub.png
diff --git a/facebook/res/drawable-xhdpi/com_facebook_tooltip_blue_xout.png b/facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_blue_xout.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/com_facebook_tooltip_blue_xout.png
rename to facebook/src/main/res/drawable-xhdpi/com_facebook_tooltip_blue_xout.png
diff --git a/facebook/res/drawable-xhdpi/messenger_bubble_large_blue.png b/facebook/src/main/res/drawable-xhdpi/messenger_bubble_large_blue.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/messenger_bubble_large_blue.png
rename to facebook/src/main/res/drawable-xhdpi/messenger_bubble_large_blue.png
diff --git a/facebook/res/drawable-xhdpi/messenger_bubble_large_white.png b/facebook/src/main/res/drawable-xhdpi/messenger_bubble_large_white.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/messenger_bubble_large_white.png
rename to facebook/src/main/res/drawable-xhdpi/messenger_bubble_large_white.png
diff --git a/facebook/res/drawable-xhdpi/messenger_bubble_small_blue.png b/facebook/src/main/res/drawable-xhdpi/messenger_bubble_small_blue.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/messenger_bubble_small_blue.png
rename to facebook/src/main/res/drawable-xhdpi/messenger_bubble_small_blue.png
diff --git a/facebook/res/drawable-xhdpi/messenger_bubble_small_white.png b/facebook/src/main/res/drawable-xhdpi/messenger_bubble_small_white.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/messenger_bubble_small_white.png
rename to facebook/src/main/res/drawable-xhdpi/messenger_bubble_small_white.png
diff --git a/facebook/res/drawable-xhdpi/messenger_button_send_round_shadow.png b/facebook/src/main/res/drawable-xhdpi/messenger_button_send_round_shadow.png
similarity index 100%
rename from facebook/res/drawable-xhdpi/messenger_button_send_round_shadow.png
rename to facebook/src/main/res/drawable-xhdpi/messenger_button_send_round_shadow.png
diff --git a/facebook/res/drawable-xxhdpi/com_facebook_button_icon.png b/facebook/src/main/res/drawable-xxhdpi/com_facebook_button_icon.png
similarity index 100%
rename from facebook/res/drawable-xxhdpi/com_facebook_button_icon.png
rename to facebook/src/main/res/drawable-xxhdpi/com_facebook_button_icon.png
diff --git a/facebook/res/drawable-xxhdpi/com_facebook_button_like_icon_selected.png b/facebook/src/main/res/drawable-xxhdpi/com_facebook_button_like_icon_selected.png
similarity index 100%
rename from facebook/res/drawable-xxhdpi/com_facebook_button_like_icon_selected.png
rename to facebook/src/main/res/drawable-xxhdpi/com_facebook_button_like_icon_selected.png
diff --git a/facebook/res/drawable-xxhdpi/com_facebook_button_send_icon.png b/facebook/src/main/res/drawable-xxhdpi/com_facebook_button_send_icon.png
similarity index 100%
rename from facebook/res/drawable-xxhdpi/com_facebook_button_send_icon.png
rename to facebook/src/main/res/drawable-xxhdpi/com_facebook_button_send_icon.png
diff --git a/facebook/res/drawable-xxhdpi/messenger_bubble_large_blue.png b/facebook/src/main/res/drawable-xxhdpi/messenger_bubble_large_blue.png
similarity index 100%
rename from facebook/res/drawable-xxhdpi/messenger_bubble_large_blue.png
rename to facebook/src/main/res/drawable-xxhdpi/messenger_bubble_large_blue.png
diff --git a/facebook/res/drawable-xxhdpi/messenger_bubble_large_white.png b/facebook/src/main/res/drawable-xxhdpi/messenger_bubble_large_white.png
similarity index 100%
rename from facebook/res/drawable-xxhdpi/messenger_bubble_large_white.png
rename to facebook/src/main/res/drawable-xxhdpi/messenger_bubble_large_white.png
diff --git a/facebook/res/drawable-xxhdpi/messenger_bubble_small_blue.png b/facebook/src/main/res/drawable-xxhdpi/messenger_bubble_small_blue.png
similarity index 100%
rename from facebook/res/drawable-xxhdpi/messenger_bubble_small_blue.png
rename to facebook/src/main/res/drawable-xxhdpi/messenger_bubble_small_blue.png
diff --git a/facebook/res/drawable-xxhdpi/messenger_bubble_small_white.png b/facebook/src/main/res/drawable-xxhdpi/messenger_bubble_small_white.png
similarity index 100%
rename from facebook/res/drawable-xxhdpi/messenger_bubble_small_white.png
rename to facebook/src/main/res/drawable-xxhdpi/messenger_bubble_small_white.png
diff --git a/facebook/res/drawable-xxhdpi/messenger_button_send_round_shadow.png b/facebook/src/main/res/drawable-xxhdpi/messenger_button_send_round_shadow.png
similarity index 100%
rename from facebook/res/drawable-xxhdpi/messenger_button_send_round_shadow.png
rename to facebook/src/main/res/drawable-xxhdpi/messenger_button_send_round_shadow.png
diff --git a/facebook/res/drawable/com_facebook_button_background.xml b/facebook/src/main/res/drawable/com_facebook_button_background.xml
similarity index 100%
rename from facebook/res/drawable/com_facebook_button_background.xml
rename to facebook/src/main/res/drawable/com_facebook_button_background.xml
diff --git a/facebook/res/drawable/com_facebook_button_like_background.xml b/facebook/src/main/res/drawable/com_facebook_button_like_background.xml
similarity index 100%
rename from facebook/res/drawable/com_facebook_button_like_background.xml
rename to facebook/src/main/res/drawable/com_facebook_button_like_background.xml
diff --git a/facebook/res/drawable/com_facebook_button_login_silver_background.xml b/facebook/src/main/res/drawable/com_facebook_button_login_silver_background.xml
similarity index 100%
rename from facebook/res/drawable/com_facebook_button_login_silver_background.xml
rename to facebook/src/main/res/drawable/com_facebook_button_login_silver_background.xml
diff --git a/facebook/res/drawable/com_facebook_button_send_background.xml b/facebook/src/main/res/drawable/com_facebook_button_send_background.xml
similarity index 100%
rename from facebook/res/drawable/com_facebook_button_send_background.xml
rename to facebook/src/main/res/drawable/com_facebook_button_send_background.xml
diff --git a/facebook/res/drawable/messenger_button_blue_bg_round.xml b/facebook/src/main/res/drawable/messenger_button_blue_bg_round.xml
similarity index 100%
rename from facebook/res/drawable/messenger_button_blue_bg_round.xml
rename to facebook/src/main/res/drawable/messenger_button_blue_bg_round.xml
diff --git a/facebook/res/drawable/messenger_button_blue_bg_selector.xml b/facebook/src/main/res/drawable/messenger_button_blue_bg_selector.xml
similarity index 100%
rename from facebook/res/drawable/messenger_button_blue_bg_selector.xml
rename to facebook/src/main/res/drawable/messenger_button_blue_bg_selector.xml
diff --git a/facebook/res/drawable/messenger_button_white_bg_round.xml b/facebook/src/main/res/drawable/messenger_button_white_bg_round.xml
similarity index 100%
rename from facebook/res/drawable/messenger_button_white_bg_round.xml
rename to facebook/src/main/res/drawable/messenger_button_white_bg_round.xml
diff --git a/facebook/res/drawable/messenger_button_white_bg_selector.xml b/facebook/src/main/res/drawable/messenger_button_white_bg_selector.xml
similarity index 100%
rename from facebook/res/drawable/messenger_button_white_bg_selector.xml
rename to facebook/src/main/res/drawable/messenger_button_white_bg_selector.xml
diff --git a/facebook/res/layout/com_facebook_activity_layout.xml b/facebook/src/main/res/layout/com_facebook_activity_layout.xml
similarity index 100%
rename from facebook/res/layout/com_facebook_activity_layout.xml
rename to facebook/src/main/res/layout/com_facebook_activity_layout.xml
diff --git a/facebook/res/layout/com_facebook_login_fragment.xml b/facebook/src/main/res/layout/com_facebook_login_fragment.xml
similarity index 100%
rename from facebook/res/layout/com_facebook_login_fragment.xml
rename to facebook/src/main/res/layout/com_facebook_login_fragment.xml
diff --git a/facebook/res/layout/com_facebook_tooltip_bubble.xml b/facebook/src/main/res/layout/com_facebook_tooltip_bubble.xml
similarity index 100%
rename from facebook/res/layout/com_facebook_tooltip_bubble.xml
rename to facebook/src/main/res/layout/com_facebook_tooltip_bubble.xml
diff --git a/facebook/res/layout/messenger_button_send_blue_large.xml b/facebook/src/main/res/layout/messenger_button_send_blue_large.xml
similarity index 100%
rename from facebook/res/layout/messenger_button_send_blue_large.xml
rename to facebook/src/main/res/layout/messenger_button_send_blue_large.xml
diff --git a/facebook/res/layout/messenger_button_send_blue_round.xml b/facebook/src/main/res/layout/messenger_button_send_blue_round.xml
similarity index 100%
rename from facebook/res/layout/messenger_button_send_blue_round.xml
rename to facebook/src/main/res/layout/messenger_button_send_blue_round.xml
diff --git a/facebook/res/layout/messenger_button_send_blue_small.xml b/facebook/src/main/res/layout/messenger_button_send_blue_small.xml
similarity index 100%
rename from facebook/res/layout/messenger_button_send_blue_small.xml
rename to facebook/src/main/res/layout/messenger_button_send_blue_small.xml
diff --git a/facebook/res/layout/messenger_button_send_white_large.xml b/facebook/src/main/res/layout/messenger_button_send_white_large.xml
similarity index 100%
rename from facebook/res/layout/messenger_button_send_white_large.xml
rename to facebook/src/main/res/layout/messenger_button_send_white_large.xml
diff --git a/facebook/res/layout/messenger_button_send_white_round.xml b/facebook/src/main/res/layout/messenger_button_send_white_round.xml
similarity index 100%
rename from facebook/res/layout/messenger_button_send_white_round.xml
rename to facebook/src/main/res/layout/messenger_button_send_white_round.xml
diff --git a/facebook/res/layout/messenger_button_send_white_small.xml b/facebook/src/main/res/layout/messenger_button_send_white_small.xml
similarity index 100%
rename from facebook/res/layout/messenger_button_send_white_small.xml
rename to facebook/src/main/res/layout/messenger_button_send_white_small.xml
diff --git a/facebook/res/values-af/messenger_button_strings.xml b/facebook/src/main/res/values-af/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-af/messenger_button_strings.xml
rename to facebook/src/main/res/values-af/messenger_button_strings.xml
diff --git a/facebook/res/values-af/strings.xml b/facebook/src/main/res/values-af/strings.xml
similarity index 100%
rename from facebook/res/values-af/strings.xml
rename to facebook/src/main/res/values-af/strings.xml
diff --git a/facebook/res/values-ar/messenger_button_strings.xml b/facebook/src/main/res/values-ar/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-ar/messenger_button_strings.xml
rename to facebook/src/main/res/values-ar/messenger_button_strings.xml
diff --git a/facebook/res/values-ar/strings.xml b/facebook/src/main/res/values-ar/strings.xml
similarity index 100%
rename from facebook/res/values-ar/strings.xml
rename to facebook/src/main/res/values-ar/strings.xml
diff --git a/facebook/res/values-bn/messenger_button_strings.xml b/facebook/src/main/res/values-bn/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-bn/messenger_button_strings.xml
rename to facebook/src/main/res/values-bn/messenger_button_strings.xml
diff --git a/facebook/res/values-bn/strings.xml b/facebook/src/main/res/values-bn/strings.xml
similarity index 100%
rename from facebook/res/values-bn/strings.xml
rename to facebook/src/main/res/values-bn/strings.xml
diff --git a/facebook/res/values-cs/messenger_button_strings.xml b/facebook/src/main/res/values-cs/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-cs/messenger_button_strings.xml
rename to facebook/src/main/res/values-cs/messenger_button_strings.xml
diff --git a/facebook/res/values-cs/strings.xml b/facebook/src/main/res/values-cs/strings.xml
similarity index 100%
rename from facebook/res/values-cs/strings.xml
rename to facebook/src/main/res/values-cs/strings.xml
diff --git a/facebook/res/values-da/messenger_button_strings.xml b/facebook/src/main/res/values-da/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-da/messenger_button_strings.xml
rename to facebook/src/main/res/values-da/messenger_button_strings.xml
diff --git a/facebook/res/values-da/strings.xml b/facebook/src/main/res/values-da/strings.xml
similarity index 100%
rename from facebook/res/values-da/strings.xml
rename to facebook/src/main/res/values-da/strings.xml
diff --git a/facebook/res/values-de/messenger_button_strings.xml b/facebook/src/main/res/values-de/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-de/messenger_button_strings.xml
rename to facebook/src/main/res/values-de/messenger_button_strings.xml
diff --git a/facebook/res/values-de/strings.xml b/facebook/src/main/res/values-de/strings.xml
similarity index 100%
rename from facebook/res/values-de/strings.xml
rename to facebook/src/main/res/values-de/strings.xml
diff --git a/facebook/res/values-el/messenger_button_strings.xml b/facebook/src/main/res/values-el/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-el/messenger_button_strings.xml
rename to facebook/src/main/res/values-el/messenger_button_strings.xml
diff --git a/facebook/res/values-el/strings.xml b/facebook/src/main/res/values-el/strings.xml
similarity index 100%
rename from facebook/res/values-el/strings.xml
rename to facebook/src/main/res/values-el/strings.xml
diff --git a/facebook/res/values-es-rES/messenger_button_strings.xml b/facebook/src/main/res/values-es-rES/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-es-rES/messenger_button_strings.xml
rename to facebook/src/main/res/values-es-rES/messenger_button_strings.xml
diff --git a/facebook/res/values-es-rES/strings.xml b/facebook/src/main/res/values-es-rES/strings.xml
similarity index 100%
rename from facebook/res/values-es-rES/strings.xml
rename to facebook/src/main/res/values-es-rES/strings.xml
diff --git a/facebook/res/values-es/messenger_button_strings.xml b/facebook/src/main/res/values-es/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-es/messenger_button_strings.xml
rename to facebook/src/main/res/values-es/messenger_button_strings.xml
diff --git a/facebook/res/values-es/strings.xml b/facebook/src/main/res/values-es/strings.xml
similarity index 100%
rename from facebook/res/values-es/strings.xml
rename to facebook/src/main/res/values-es/strings.xml
diff --git a/facebook/res/values-fi/messenger_button_strings.xml b/facebook/src/main/res/values-fi/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-fi/messenger_button_strings.xml
rename to facebook/src/main/res/values-fi/messenger_button_strings.xml
diff --git a/facebook/res/values-fi/strings.xml b/facebook/src/main/res/values-fi/strings.xml
similarity index 100%
rename from facebook/res/values-fi/strings.xml
rename to facebook/src/main/res/values-fi/strings.xml
diff --git a/facebook/res/values-fr/messenger_button_strings.xml b/facebook/src/main/res/values-fr/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-fr/messenger_button_strings.xml
rename to facebook/src/main/res/values-fr/messenger_button_strings.xml
diff --git a/facebook/res/values-fr/strings.xml b/facebook/src/main/res/values-fr/strings.xml
similarity index 100%
rename from facebook/res/values-fr/strings.xml
rename to facebook/src/main/res/values-fr/strings.xml
diff --git a/facebook/res/values-gu/messenger_button_strings.xml b/facebook/src/main/res/values-gu/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-gu/messenger_button_strings.xml
rename to facebook/src/main/res/values-gu/messenger_button_strings.xml
diff --git a/facebook/res/values-gu/strings.xml b/facebook/src/main/res/values-gu/strings.xml
similarity index 100%
rename from facebook/res/values-gu/strings.xml
rename to facebook/src/main/res/values-gu/strings.xml
diff --git a/facebook/res/values-hi/messenger_button_strings.xml b/facebook/src/main/res/values-hi/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-hi/messenger_button_strings.xml
rename to facebook/src/main/res/values-hi/messenger_button_strings.xml
diff --git a/facebook/res/values-hi/strings.xml b/facebook/src/main/res/values-hi/strings.xml
similarity index 100%
rename from facebook/res/values-hi/strings.xml
rename to facebook/src/main/res/values-hi/strings.xml
diff --git a/facebook/res/values-hr/strings.xml b/facebook/src/main/res/values-hr/strings.xml
similarity index 100%
rename from facebook/res/values-hr/strings.xml
rename to facebook/src/main/res/values-hr/strings.xml
diff --git a/facebook/res/values-hu/strings.xml b/facebook/src/main/res/values-hu/strings.xml
similarity index 100%
rename from facebook/res/values-hu/strings.xml
rename to facebook/src/main/res/values-hu/strings.xml
diff --git a/facebook/res/values-id/strings.xml b/facebook/src/main/res/values-id/strings.xml
similarity index 100%
rename from facebook/res/values-id/strings.xml
rename to facebook/src/main/res/values-id/strings.xml
diff --git a/facebook/res/values-in/messenger_button_strings.xml b/facebook/src/main/res/values-in/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-in/messenger_button_strings.xml
rename to facebook/src/main/res/values-in/messenger_button_strings.xml
diff --git a/facebook/res/values-it/messenger_button_strings.xml b/facebook/src/main/res/values-it/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-it/messenger_button_strings.xml
rename to facebook/src/main/res/values-it/messenger_button_strings.xml
diff --git a/facebook/res/values-it/strings.xml b/facebook/src/main/res/values-it/strings.xml
similarity index 100%
rename from facebook/res/values-it/strings.xml
rename to facebook/src/main/res/values-it/strings.xml
diff --git a/facebook/res/values-ja/messenger_button_strings.xml b/facebook/src/main/res/values-ja/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-ja/messenger_button_strings.xml
rename to facebook/src/main/res/values-ja/messenger_button_strings.xml
diff --git a/facebook/res/values-ja/strings.xml b/facebook/src/main/res/values-ja/strings.xml
similarity index 100%
rename from facebook/res/values-ja/strings.xml
rename to facebook/src/main/res/values-ja/strings.xml
diff --git a/facebook/res/values-kn/messenger_button_strings.xml b/facebook/src/main/res/values-kn/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-kn/messenger_button_strings.xml
rename to facebook/src/main/res/values-kn/messenger_button_strings.xml
diff --git a/facebook/res/values-kn/strings.xml b/facebook/src/main/res/values-kn/strings.xml
similarity index 100%
rename from facebook/res/values-kn/strings.xml
rename to facebook/src/main/res/values-kn/strings.xml
diff --git a/facebook/res/values-ko/messenger_button_strings.xml b/facebook/src/main/res/values-ko/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-ko/messenger_button_strings.xml
rename to facebook/src/main/res/values-ko/messenger_button_strings.xml
diff --git a/facebook/res/values-ko/strings.xml b/facebook/src/main/res/values-ko/strings.xml
similarity index 100%
rename from facebook/res/values-ko/strings.xml
rename to facebook/src/main/res/values-ko/strings.xml
diff --git a/facebook/res/values-ml/messenger_button_strings.xml b/facebook/src/main/res/values-ml/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-ml/messenger_button_strings.xml
rename to facebook/src/main/res/values-ml/messenger_button_strings.xml
diff --git a/facebook/res/values-ml/strings.xml b/facebook/src/main/res/values-ml/strings.xml
similarity index 100%
rename from facebook/res/values-ml/strings.xml
rename to facebook/src/main/res/values-ml/strings.xml
diff --git a/facebook/res/values-mr/messenger_button_strings.xml b/facebook/src/main/res/values-mr/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-mr/messenger_button_strings.xml
rename to facebook/src/main/res/values-mr/messenger_button_strings.xml
diff --git a/facebook/res/values-mr/strings.xml b/facebook/src/main/res/values-mr/strings.xml
similarity index 100%
rename from facebook/res/values-mr/strings.xml
rename to facebook/src/main/res/values-mr/strings.xml
diff --git a/facebook/res/values-ms/messenger_button_strings.xml b/facebook/src/main/res/values-ms/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-ms/messenger_button_strings.xml
rename to facebook/src/main/res/values-ms/messenger_button_strings.xml
diff --git a/facebook/res/values-ms/strings.xml b/facebook/src/main/res/values-ms/strings.xml
similarity index 100%
rename from facebook/res/values-ms/strings.xml
rename to facebook/src/main/res/values-ms/strings.xml
diff --git a/facebook/res/values-nb/messenger_button_strings.xml b/facebook/src/main/res/values-nb/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-nb/messenger_button_strings.xml
rename to facebook/src/main/res/values-nb/messenger_button_strings.xml
diff --git a/facebook/res/values-nb/strings.xml b/facebook/src/main/res/values-nb/strings.xml
similarity index 100%
rename from facebook/res/values-nb/strings.xml
rename to facebook/src/main/res/values-nb/strings.xml
diff --git a/facebook/res/values-nl/messenger_button_strings.xml b/facebook/src/main/res/values-nl/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-nl/messenger_button_strings.xml
rename to facebook/src/main/res/values-nl/messenger_button_strings.xml
diff --git a/facebook/res/values-nl/strings.xml b/facebook/src/main/res/values-nl/strings.xml
similarity index 100%
rename from facebook/res/values-nl/strings.xml
rename to facebook/src/main/res/values-nl/strings.xml
diff --git a/facebook/res/values-pa/messenger_button_strings.xml b/facebook/src/main/res/values-pa/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-pa/messenger_button_strings.xml
rename to facebook/src/main/res/values-pa/messenger_button_strings.xml
diff --git a/facebook/res/values-pa/strings.xml b/facebook/src/main/res/values-pa/strings.xml
similarity index 100%
rename from facebook/res/values-pa/strings.xml
rename to facebook/src/main/res/values-pa/strings.xml
diff --git a/facebook/res/values-pl/messenger_button_strings.xml b/facebook/src/main/res/values-pl/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-pl/messenger_button_strings.xml
rename to facebook/src/main/res/values-pl/messenger_button_strings.xml
diff --git a/facebook/res/values-pl/strings.xml b/facebook/src/main/res/values-pl/strings.xml
similarity index 100%
rename from facebook/res/values-pl/strings.xml
rename to facebook/src/main/res/values-pl/strings.xml
diff --git a/facebook/res/values-pt-rPT/messenger_button_strings.xml b/facebook/src/main/res/values-pt-rPT/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-pt-rPT/messenger_button_strings.xml
rename to facebook/src/main/res/values-pt-rPT/messenger_button_strings.xml
diff --git a/facebook/res/values-pt-rPT/strings.xml b/facebook/src/main/res/values-pt-rPT/strings.xml
similarity index 100%
rename from facebook/res/values-pt-rPT/strings.xml
rename to facebook/src/main/res/values-pt-rPT/strings.xml
diff --git a/facebook/res/values-pt/messenger_button_strings.xml b/facebook/src/main/res/values-pt/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-pt/messenger_button_strings.xml
rename to facebook/src/main/res/values-pt/messenger_button_strings.xml
diff --git a/facebook/res/values-pt/strings.xml b/facebook/src/main/res/values-pt/strings.xml
similarity index 100%
rename from facebook/res/values-pt/strings.xml
rename to facebook/src/main/res/values-pt/strings.xml
diff --git a/facebook/res/values-ru/messenger_button_strings.xml b/facebook/src/main/res/values-ru/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-ru/messenger_button_strings.xml
rename to facebook/src/main/res/values-ru/messenger_button_strings.xml
diff --git a/facebook/res/values-ru/strings.xml b/facebook/src/main/res/values-ru/strings.xml
similarity index 100%
rename from facebook/res/values-ru/strings.xml
rename to facebook/src/main/res/values-ru/strings.xml
diff --git a/facebook/res/values-sk/strings.xml b/facebook/src/main/res/values-sk/strings.xml
similarity index 100%
rename from facebook/res/values-sk/strings.xml
rename to facebook/src/main/res/values-sk/strings.xml
diff --git a/facebook/res/values-sv/messenger_button_strings.xml b/facebook/src/main/res/values-sv/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-sv/messenger_button_strings.xml
rename to facebook/src/main/res/values-sv/messenger_button_strings.xml
diff --git a/facebook/res/values-sv/strings.xml b/facebook/src/main/res/values-sv/strings.xml
similarity index 100%
rename from facebook/res/values-sv/strings.xml
rename to facebook/src/main/res/values-sv/strings.xml
diff --git a/facebook/res/values-ta/messenger_button_strings.xml b/facebook/src/main/res/values-ta/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-ta/messenger_button_strings.xml
rename to facebook/src/main/res/values-ta/messenger_button_strings.xml
diff --git a/facebook/res/values-ta/strings.xml b/facebook/src/main/res/values-ta/strings.xml
similarity index 100%
rename from facebook/res/values-ta/strings.xml
rename to facebook/src/main/res/values-ta/strings.xml
diff --git a/facebook/res/values-te/messenger_button_strings.xml b/facebook/src/main/res/values-te/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-te/messenger_button_strings.xml
rename to facebook/src/main/res/values-te/messenger_button_strings.xml
diff --git a/facebook/res/values-te/strings.xml b/facebook/src/main/res/values-te/strings.xml
similarity index 100%
rename from facebook/res/values-te/strings.xml
rename to facebook/src/main/res/values-te/strings.xml
diff --git a/facebook/res/values-th/messenger_button_strings.xml b/facebook/src/main/res/values-th/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-th/messenger_button_strings.xml
rename to facebook/src/main/res/values-th/messenger_button_strings.xml
diff --git a/facebook/res/values-th/strings.xml b/facebook/src/main/res/values-th/strings.xml
similarity index 100%
rename from facebook/res/values-th/strings.xml
rename to facebook/src/main/res/values-th/strings.xml
diff --git a/facebook/res/values-tl/messenger_button_strings.xml b/facebook/src/main/res/values-tl/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-tl/messenger_button_strings.xml
rename to facebook/src/main/res/values-tl/messenger_button_strings.xml
diff --git a/facebook/res/values-tl/strings.xml b/facebook/src/main/res/values-tl/strings.xml
similarity index 100%
rename from facebook/res/values-tl/strings.xml
rename to facebook/src/main/res/values-tl/strings.xml
diff --git a/facebook/res/values-tr/messenger_button_strings.xml b/facebook/src/main/res/values-tr/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-tr/messenger_button_strings.xml
rename to facebook/src/main/res/values-tr/messenger_button_strings.xml
diff --git a/facebook/res/values-tr/strings.xml b/facebook/src/main/res/values-tr/strings.xml
similarity index 100%
rename from facebook/res/values-tr/strings.xml
rename to facebook/src/main/res/values-tr/strings.xml
diff --git a/facebook/res/values-vi/messenger_button_strings.xml b/facebook/src/main/res/values-vi/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-vi/messenger_button_strings.xml
rename to facebook/src/main/res/values-vi/messenger_button_strings.xml
diff --git a/facebook/res/values-vi/strings.xml b/facebook/src/main/res/values-vi/strings.xml
similarity index 100%
rename from facebook/res/values-vi/strings.xml
rename to facebook/src/main/res/values-vi/strings.xml
diff --git a/facebook/res/values-zh-rCN/messenger_button_strings.xml b/facebook/src/main/res/values-zh-rCN/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-zh-rCN/messenger_button_strings.xml
rename to facebook/src/main/res/values-zh-rCN/messenger_button_strings.xml
diff --git a/facebook/res/values-zh-rCN/strings.xml b/facebook/src/main/res/values-zh-rCN/strings.xml
similarity index 100%
rename from facebook/res/values-zh-rCN/strings.xml
rename to facebook/src/main/res/values-zh-rCN/strings.xml
diff --git a/facebook/res/values-zh-rHK/messenger_button_strings.xml b/facebook/src/main/res/values-zh-rHK/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-zh-rHK/messenger_button_strings.xml
rename to facebook/src/main/res/values-zh-rHK/messenger_button_strings.xml
diff --git a/facebook/res/values-zh-rHK/strings.xml b/facebook/src/main/res/values-zh-rHK/strings.xml
similarity index 100%
rename from facebook/res/values-zh-rHK/strings.xml
rename to facebook/src/main/res/values-zh-rHK/strings.xml
diff --git a/facebook/res/values-zh-rTW/messenger_button_strings.xml b/facebook/src/main/res/values-zh-rTW/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values-zh-rTW/messenger_button_strings.xml
rename to facebook/src/main/res/values-zh-rTW/messenger_button_strings.xml
diff --git a/facebook/res/values-zh-rTW/strings.xml b/facebook/src/main/res/values-zh-rTW/strings.xml
similarity index 100%
rename from facebook/res/values-zh-rTW/strings.xml
rename to facebook/src/main/res/values-zh-rTW/strings.xml
diff --git a/facebook/res/values/attrs.xml b/facebook/src/main/res/values/attrs.xml
similarity index 100%
rename from facebook/res/values/attrs.xml
rename to facebook/src/main/res/values/attrs.xml
diff --git a/facebook/res/values/messenger_button_strings.xml b/facebook/src/main/res/values/messenger_button_strings.xml
similarity index 100%
rename from facebook/res/values/messenger_button_strings.xml
rename to facebook/src/main/res/values/messenger_button_strings.xml
diff --git a/facebook/res/values/messenger_button_styles.xml b/facebook/src/main/res/values/messenger_button_styles.xml
similarity index 100%
rename from facebook/res/values/messenger_button_styles.xml
rename to facebook/src/main/res/values/messenger_button_styles.xml
diff --git a/facebook/res/values/strings.xml b/facebook/src/main/res/values/strings.xml
similarity index 100%
rename from facebook/res/values/strings.xml
rename to facebook/src/main/res/values/strings.xml
diff --git a/facebook/res/values/styles.xml b/facebook/src/main/res/values/styles.xml
similarity index 100%
rename from facebook/res/values/styles.xml
rename to facebook/src/main/res/values/styles.xml
diff --git a/facebook/junitTests/src/main/AndroidManifest.xml b/facebook/src/test/AndroidManifest.xml
similarity index 95%
rename from facebook/junitTests/src/main/AndroidManifest.xml
rename to facebook/src/test/AndroidManifest.xml
index 0e71c34e3..b8ad4a979 100644
--- a/facebook/junitTests/src/main/AndroidManifest.xml
+++ b/facebook/src/test/AndroidManifest.xml
@@ -20,7 +20,7 @@
 -->
 
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
-    package="com.facebook.junittests" >
+    package="com.facebook" >
 
     <application
         android:allowBackup="true"
@@ -28,7 +28,7 @@
         android:label="junitTests"
         android:theme="@style/Theme.AppCompat.Light.DarkActionBar" >
         <activity
-            android:name=".MainActivity"
+            android:name="com.facebook.MainActivity"
             android:label="junitTests" >
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
diff --git a/facebook/junitTests/src/main/assets/ShareOpenGraphUtilityTests_actionJSON.json b/facebook/src/test/assets/ShareOpenGraphUtilityTests_actionJSON.json
similarity index 99%
rename from facebook/junitTests/src/main/assets/ShareOpenGraphUtilityTests_actionJSON.json
rename to facebook/src/test/assets/ShareOpenGraphUtilityTests_actionJSON.json
index 688967288..b06b483ec 100644
--- a/facebook/junitTests/src/main/assets/ShareOpenGraphUtilityTests_actionJSON.json
+++ b/facebook/src/test/assets/ShareOpenGraphUtilityTests_actionJSON.json
@@ -15,4 +15,4 @@
       "myPi": 3.14
     }
   }
-}
+}
\ No newline at end of file
diff --git a/facebook/junitTests/src/test/java/com/facebook/AccessTokenCacheTest.java b/facebook/src/test/java/com/facebook/AccessTokenCacheTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/AccessTokenCacheTest.java
rename to facebook/src/test/java/com/facebook/AccessTokenCacheTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/AccessTokenManagerTest.java b/facebook/src/test/java/com/facebook/AccessTokenManagerTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/AccessTokenManagerTest.java
rename to facebook/src/test/java/com/facebook/AccessTokenManagerTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/AccessTokenTest.java b/facebook/src/test/java/com/facebook/AccessTokenTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/AccessTokenTest.java
rename to facebook/src/test/java/com/facebook/AccessTokenTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/AccessTokenTestHelper.java b/facebook/src/test/java/com/facebook/AccessTokenTestHelper.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/AccessTokenTestHelper.java
rename to facebook/src/test/java/com/facebook/AccessTokenTestHelper.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/AccessTokenTrackerTest.java b/facebook/src/test/java/com/facebook/AccessTokenTrackerTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/AccessTokenTrackerTest.java
rename to facebook/src/test/java/com/facebook/AccessTokenTrackerTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/ErrorClassificationTest.java b/facebook/src/test/java/com/facebook/ErrorClassificationTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/ErrorClassificationTest.java
rename to facebook/src/test/java/com/facebook/ErrorClassificationTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/FacebookContentProviderTest.java b/facebook/src/test/java/com/facebook/FacebookContentProviderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/FacebookContentProviderTest.java
rename to facebook/src/test/java/com/facebook/FacebookContentProviderTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/FacebookGraphRequestErrorTest.java b/facebook/src/test/java/com/facebook/FacebookGraphRequestErrorTest.java
similarity index 99%
rename from facebook/junitTests/src/test/java/com/facebook/FacebookGraphRequestErrorTest.java
rename to facebook/src/test/java/com/facebook/FacebookGraphRequestErrorTest.java
index 5ef42b907..7877efacd 100644
--- a/facebook/junitTests/src/test/java/com/facebook/FacebookGraphRequestErrorTest.java
+++ b/facebook/src/test/java/com/facebook/FacebookGraphRequestErrorTest.java
@@ -20,7 +20,7 @@
 
 package com.facebook;
 
-import com.facebook.junittests.R;
+import com.facebook.R;
 
 import org.json.JSONArray;
 import org.json.JSONException;
diff --git a/facebook/junitTests/src/test/java/com/facebook/FacebookPowerMockTestCase.java b/facebook/src/test/java/com/facebook/FacebookPowerMockTestCase.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/FacebookPowerMockTestCase.java
rename to facebook/src/test/java/com/facebook/FacebookPowerMockTestCase.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/FacebookSdkPowerMockTest.java b/facebook/src/test/java/com/facebook/FacebookSdkPowerMockTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/FacebookSdkPowerMockTest.java
rename to facebook/src/test/java/com/facebook/FacebookSdkPowerMockTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/FacebookTestCase.java b/facebook/src/test/java/com/facebook/FacebookTestCase.java
similarity index 95%
rename from facebook/junitTests/src/test/java/com/facebook/FacebookTestCase.java
rename to facebook/src/test/java/com/facebook/FacebookTestCase.java
index 9d8579759..8bb781884 100644
--- a/facebook/junitTests/src/test/java/com/facebook/FacebookTestCase.java
+++ b/facebook/src/test/java/com/facebook/FacebookTestCase.java
@@ -28,7 +28,7 @@
 import org.robolectric.shadows.ShadowLog;
 
 // ShadowLog is used to redirect the android.util.Log calls to System.out
-@Config(shadows = {ShadowLog.class})
+@Config(shadows = {ShadowLog.class}, manifest = "src/test/AndroidManifest.xml", sdk = 21)
 @RunWith(RobolectricTestRunner.class)
 
 /**
diff --git a/facebook/junitTests/src/test/java/com/facebook/GraphErrorTest.java b/facebook/src/test/java/com/facebook/GraphErrorTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/GraphErrorTest.java
rename to facebook/src/test/java/com/facebook/GraphErrorTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/GraphRequestTest.java b/facebook/src/test/java/com/facebook/GraphRequestTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/GraphRequestTest.java
rename to facebook/src/test/java/com/facebook/GraphRequestTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/GraphUtilTest.java b/facebook/src/test/java/com/facebook/GraphUtilTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/GraphUtilTest.java
rename to facebook/src/test/java/com/facebook/GraphUtilTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/LegacyTokenCacheTest.java b/facebook/src/test/java/com/facebook/LegacyTokenCacheTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/LegacyTokenCacheTest.java
rename to facebook/src/test/java/com/facebook/LegacyTokenCacheTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/PowerMockIntegrationTest.java b/facebook/src/test/java/com/facebook/PowerMockIntegrationTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/PowerMockIntegrationTest.java
rename to facebook/src/test/java/com/facebook/PowerMockIntegrationTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/ProfileCacheTest.java b/facebook/src/test/java/com/facebook/ProfileCacheTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/ProfileCacheTest.java
rename to facebook/src/test/java/com/facebook/ProfileCacheTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/ProfileManagerTest.java b/facebook/src/test/java/com/facebook/ProfileManagerTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/ProfileManagerTest.java
rename to facebook/src/test/java/com/facebook/ProfileManagerTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/ProfileTest.java b/facebook/src/test/java/com/facebook/ProfileTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/ProfileTest.java
rename to facebook/src/test/java/com/facebook/ProfileTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/ProfileTrackerTest.java b/facebook/src/test/java/com/facebook/ProfileTrackerTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/ProfileTrackerTest.java
rename to facebook/src/test/java/com/facebook/ProfileTrackerTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/ProgressNoopOutputStreamTest.java b/facebook/src/test/java/com/facebook/ProgressNoopOutputStreamTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/ProgressNoopOutputStreamTest.java
rename to facebook/src/test/java/com/facebook/ProgressNoopOutputStreamTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/ProgressOutputStreamTest.java b/facebook/src/test/java/com/facebook/ProgressOutputStreamTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/ProgressOutputStreamTest.java
rename to facebook/src/test/java/com/facebook/ProgressOutputStreamTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/TestUtils.java b/facebook/src/test/java/com/facebook/TestUtils.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/TestUtils.java
rename to facebook/src/test/java/com/facebook/TestUtils.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/applinks/AppLinkDataTest.java b/facebook/src/test/java/com/facebook/applinks/AppLinkDataTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/applinks/AppLinkDataTest.java
rename to facebook/src/test/java/com/facebook/applinks/AppLinkDataTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/BundleJSONConverterTest.java b/facebook/src/test/java/com/facebook/internal/BundleJSONConverterTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/BundleJSONConverterTest.java
rename to facebook/src/test/java/com/facebook/internal/BundleJSONConverterTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/CallbackManagerImplPowerMockTest.java b/facebook/src/test/java/com/facebook/internal/CallbackManagerImplPowerMockTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/CallbackManagerImplPowerMockTest.java
rename to facebook/src/test/java/com/facebook/internal/CallbackManagerImplPowerMockTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/FacebookRequestErrorClassificationTest.java b/facebook/src/test/java/com/facebook/internal/FacebookRequestErrorClassificationTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/FacebookRequestErrorClassificationTest.java
rename to facebook/src/test/java/com/facebook/internal/FacebookRequestErrorClassificationTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/FileLruCacheTest.java b/facebook/src/test/java/com/facebook/internal/FileLruCacheTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/FileLruCacheTest.java
rename to facebook/src/test/java/com/facebook/internal/FileLruCacheTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/JsonUtilTest.java b/facebook/src/test/java/com/facebook/internal/JsonUtilTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/JsonUtilTest.java
rename to facebook/src/test/java/com/facebook/internal/JsonUtilTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/NativeAppCallAttachmentStoreTest.java b/facebook/src/test/java/com/facebook/internal/NativeAppCallAttachmentStoreTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/NativeAppCallAttachmentStoreTest.java
rename to facebook/src/test/java/com/facebook/internal/NativeAppCallAttachmentStoreTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/NativeProtocolVersionTest.java b/facebook/src/test/java/com/facebook/internal/NativeProtocolVersionTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/NativeProtocolVersionTest.java
rename to facebook/src/test/java/com/facebook/internal/NativeProtocolVersionTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/ShareInternalUtilityTest.java b/facebook/src/test/java/com/facebook/internal/ShareInternalUtilityTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/ShareInternalUtilityTest.java
rename to facebook/src/test/java/com/facebook/internal/ShareInternalUtilityTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/UtilityIntersectRangeTest.java b/facebook/src/test/java/com/facebook/internal/UtilityIntersectRangeTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/UtilityIntersectRangeTest.java
rename to facebook/src/test/java/com/facebook/internal/UtilityIntersectRangeTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/UtilityTest.java b/facebook/src/test/java/com/facebook/internal/UtilityTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/UtilityTest.java
rename to facebook/src/test/java/com/facebook/internal/UtilityTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/ValidateTest.java b/facebook/src/test/java/com/facebook/internal/ValidateTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/ValidateTest.java
rename to facebook/src/test/java/com/facebook/internal/ValidateTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/internal/WorkQueueTest.java b/facebook/src/test/java/com/facebook/internal/WorkQueueTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/internal/WorkQueueTest.java
rename to facebook/src/test/java/com/facebook/internal/WorkQueueTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/login/GetTokenLoginMethodHandlerTest.java b/facebook/src/test/java/com/facebook/login/GetTokenLoginMethodHandlerTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/login/GetTokenLoginMethodHandlerTest.java
rename to facebook/src/test/java/com/facebook/login/GetTokenLoginMethodHandlerTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/login/KatanaProxyLoginMethodHandlerTest.java b/facebook/src/test/java/com/facebook/login/KatanaProxyLoginMethodHandlerTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/login/KatanaProxyLoginMethodHandlerTest.java
rename to facebook/src/test/java/com/facebook/login/KatanaProxyLoginMethodHandlerTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/login/LoginClientTest.java b/facebook/src/test/java/com/facebook/login/LoginClientTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/login/LoginClientTest.java
rename to facebook/src/test/java/com/facebook/login/LoginClientTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/login/LoginHandlerTestCase.java b/facebook/src/test/java/com/facebook/login/LoginHandlerTestCase.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/login/LoginHandlerTestCase.java
rename to facebook/src/test/java/com/facebook/login/LoginHandlerTestCase.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/login/LoginManagerTest.java b/facebook/src/test/java/com/facebook/login/LoginManagerTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/login/LoginManagerTest.java
rename to facebook/src/test/java/com/facebook/login/LoginManagerTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/login/LoginResultTest.java b/facebook/src/test/java/com/facebook/login/LoginResultTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/login/LoginResultTest.java
rename to facebook/src/test/java/com/facebook/login/LoginResultTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/login/WebViewLoginMethodHandlerTest.java b/facebook/src/test/java/com/facebook/login/WebViewLoginMethodHandlerTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/login/WebViewLoginMethodHandlerTest.java
rename to facebook/src/test/java/com/facebook/login/WebViewLoginMethodHandlerTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/messenger/MessengerUtilsTest.java b/facebook/src/test/java/com/facebook/messenger/MessengerUtilsTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/messenger/MessengerUtilsTest.java
rename to facebook/src/test/java/com/facebook/messenger/MessengerUtilsTest.java
diff --git a/facebook/src/test/java/com/facebook/share/internal/ShareContentValidationTest.java b/facebook/src/test/java/com/facebook/share/internal/ShareContentValidationTest.java
new file mode 100644
index 000000000..775fd8051
--- /dev/null
+++ b/facebook/src/test/java/com/facebook/share/internal/ShareContentValidationTest.java
@@ -0,0 +1,268 @@
+/**
+ * Copyright (c) 2014-present, Facebook, Inc. All rights reserved.
+ *
+ * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
+ * copy, modify, and distribute this software in source code or binary form for use
+ * in connection with the web services and APIs provided by Facebook.
+ *
+ * As with any software that integrates with the Facebook platform, your use of
+ * this software is subject to the Facebook Developer Principles and Policies
+ * [http://developers.facebook.com/policy/]. This copyright notice shall be
+ * included in all copies or substantial portions of the software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
+ * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
+ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
+ * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
+ * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ */
+package com.facebook.share.internal;
+
+import android.content.Context;
+import android.graphics.Bitmap;
+import android.net.Uri;
+
+import com.facebook.FacebookException;
+import com.facebook.FacebookPowerMockTestCase;
+import com.facebook.FacebookSdk;
+import com.facebook.internal.Validate;
+import com.facebook.share.model.ShareLinkContent;
+import com.facebook.share.model.ShareOpenGraphAction;
+import com.facebook.share.model.ShareOpenGraphContent;
+import com.facebook.share.model.SharePhoto;
+import com.facebook.share.model.SharePhotoContent;
+import com.facebook.share.model.ShareVideo;
+import com.facebook.share.model.ShareVideoContent;
+
+import org.junit.Test;
+import org.mockito.Mockito;
+import org.powermock.api.mockito.PowerMockito;
+import org.powermock.core.classloader.annotations.PrepareForTest;
+import org.robolectric.RuntimeEnvironment;
+
+import static org.powermock.api.mockito.PowerMockito.doNothing;
+
+
+/**
+ * Tests for {@link ShareContentValidation}
+ */
+@PrepareForTest(Validate.class)
+public class ShareContentValidationTest extends FacebookPowerMockTestCase {
+
+    // Share by Message
+    @Test(expected = FacebookException.class)
+    public void testItValidatesNullForMessage() {
+        ShareContentValidation.validateForMessage(null);
+    }
+
+    // -LinkContent
+    @Test(expected = FacebookException.class)
+    public void testItValidatesNoHttpForShareLinkContentMessage() {
+        Uri imageUri = Uri.parse("ftp://facebook.com/awesome-content.gif");
+        ShareLinkContent linkContent = buildShareLinkContent(imageUri);
+
+        ShareContentValidation.validateForMessage(linkContent);
+    }
+
+    // -PhotoContent
+    @Test(expected = FacebookException.class)
+    public void testItValidatesNullImageForPhotoShareByMessage() {
+        SharePhotoContent.Builder spcBuilder = new SharePhotoContent.Builder();
+        SharePhoto sharePhoto = new SharePhoto.Builder().setImageUrl(null).setBitmap(null)
+                .build();
+        SharePhotoContent sharePhotoContent = spcBuilder.addPhoto(sharePhoto).build();
+
+        ShareContentValidation.validateForMessage(sharePhotoContent);
+    }
+
+    @Test(expected = FacebookException.class)
+    public void testItValidatesEmptyListOfPhotoForPhotoShareByMessage() {
+        SharePhotoContent sharePhoto = new SharePhotoContent.Builder().build();
+
+        ShareContentValidation.validateForMessage(sharePhoto);
+    }
+
+    @Test(expected = FacebookException.class)
+    public void testItValidatesMaxSizeOfPhotoShareByMessage() {
+        SharePhotoContent sharePhotoContent =
+                new SharePhotoContent.Builder()
+                        .addPhoto(buildSharePhoto("https://facebook.com/awesome-1.gif"))
+                        .addPhoto(buildSharePhoto("https://facebook.com/awesome-2.gif"))
+                        .addPhoto(buildSharePhoto("https://facebook.com/awesome-3.gif"))
+                        .addPhoto(buildSharePhoto("https://facebook.com/awesome-4.gif"))
+                        .addPhoto(buildSharePhoto("https://facebook.com/awesome-5.gif"))
+                        .addPhoto(buildSharePhoto("https://facebook.com/awesome-6.gif"))
+                        .addPhoto(buildSharePhoto("https://facebook.com/awesome-7.gif"))
+                        .build();
+
+        ShareContentValidation.validateForMessage(sharePhotoContent);
+    }
+
+    // -ShareVideoContent
+    @Test(expected = FacebookException.class)
+    public void testItValidatesEmptyPreviewPhotoForShareVideoContentByMessage() {
+        ShareVideoContent sharePhoto = new ShareVideoContent.Builder()
+                .setPreviewPhoto(null).build();
+
+        ShareContentValidation.validateForMessage(sharePhoto);
+    }
+
+    // -ShareOpenGraphContent
+    @Test(expected = FacebookException.class)
+    public void testItValidatesShareOpenGraphWithNoActionByMessage() {
+        ShareOpenGraphContent shareOpenGraphContent =
+                new ShareOpenGraphContent.Builder().setAction(null).build();
+
+        ShareContentValidation.validateForMessage(shareOpenGraphContent);
+    }
+
+    @Test(expected = FacebookException.class)
+    public void testItValidateShareOpenGraphWithNoTypeByMessage() {
+        ShareOpenGraphAction shareOpenGraphAction
+                = new ShareOpenGraphAction.Builder().setActionType(null).build();
+
+        ShareOpenGraphContent shareOpenGraphContent =
+                new ShareOpenGraphContent.Builder()
+                        .setAction(shareOpenGraphAction).build();
+
+        ShareContentValidation.validateForMessage(shareOpenGraphContent);
+    }
+
+    @Test(expected = FacebookException.class)
+    public void testItValidatesShareOpenGraphWithPreviewPropertyNameByMessage() {
+        ShareOpenGraphAction shareOpenGraphAction
+                = new ShareOpenGraphAction.Builder().setActionType("foo").build();
+
+        ShareOpenGraphContent shareOpenGraphContent =
+                new ShareOpenGraphContent.Builder()
+                        .setAction(shareOpenGraphAction).build();
+
+        ShareContentValidation.validateForMessage(shareOpenGraphContent);
+    }
+
+    // Share by Native (Is the same as Message)
+    @Test(expected = FacebookException.class)
+    public void testItValidatesNullContentForNativeShare() {
+        ShareContentValidation.validateForNativeShare(null);
+    }
+
+    @Test(expected = FacebookException.class)
+    public void testItValidatesNotHttpForShareLinkContentByNative() {
+        Uri imageUri = Uri.parse("ftp://facebook.com/awesome-content.gif");
+        ShareLinkContent linkContent = buildShareLinkContent(imageUri);
+
+        ShareContentValidation.validateForNativeShare(linkContent);
+    }
+
+    // Share by Web
+    @Test(expected = FacebookException.class)
+    public void testItValidatesNullContentForWebShare() {
+        ShareContentValidation.validateForWebShare(null);
+    }
+
+    @Test(expected = FacebookException.class)
+    public void testItDoesNotAcceptSharePhotoContentByWeb() {
+        SharePhoto sharePhoto = buildSharePhoto("https://facebook.com/awesome.gif");
+        SharePhotoContent sharePhotoContent =
+                new SharePhotoContent.Builder().addPhoto(sharePhoto).build();
+
+        ShareContentValidation.validateForWebShare(sharePhotoContent);
+    }
+
+    @Test(expected = FacebookException.class)
+    public void testItDoesNotAcceptShareVideoContentByWeb() {
+        SharePhoto previewPhoto = buildSharePhoto("https://facebook.com/awesome.gif");
+        ShareVideoContent shareVideoContent =
+                new ShareVideoContent.Builder().setPreviewPhoto(previewPhoto).build();
+
+        ShareContentValidation.validateForWebShare(shareVideoContent);
+    }
+
+    // Share by Api
+    @Test(expected = FacebookException.class)
+    public void testItValidatesNullContentForApiShare() {
+        ShareContentValidation.validateForApiShare(null);
+    }
+
+    @Test(expected = FacebookException.class)
+    public void testItValidatesNullImageForSharePhotoContentByApi() {
+        SharePhotoContent.Builder spcBuilder = new SharePhotoContent.Builder();
+        SharePhoto sharePhoto = new SharePhoto.Builder().setImageUrl(null)
+                .build();
+        SharePhotoContent sharePhotoContent = spcBuilder.addPhoto(sharePhoto).build();
+
+        ShareContentValidation.validateForApiShare(sharePhotoContent);
+    }
+
+    // Valid Share Contents
+    @Test
+    public void testItAcceptNullImageForShareLinkContent() {
+        ShareLinkContent nullImageContent = buildShareLinkContent(null);
+
+        ShareContentValidation.validateForApiShare(nullImageContent);
+        ShareContentValidation.validateForMessage(nullImageContent);
+        ShareContentValidation.validateForNativeShare(nullImageContent);
+        ShareContentValidation.validateForWebShare(nullImageContent);
+    }
+
+    @Test
+    public void testItAcceptsHttpForShareLinkContent() {
+        Uri imageUri = Uri.parse("http://facebook.com/awesome-content.gif");
+        ShareLinkContent linkContent = buildShareLinkContent(imageUri);
+
+        ShareContentValidation.validateForApiShare(linkContent);
+        ShareContentValidation.validateForMessage(linkContent);
+        ShareContentValidation.validateForNativeShare(linkContent);
+        ShareContentValidation.validateForWebShare(linkContent);
+    }
+
+    @Test
+    public void testItAcceptsHttpsForShareLinkContent() {
+        Uri imageUri = Uri.parse("https://facebook.com/awesome-content.gif");
+        ShareLinkContent linkContent = buildShareLinkContent(imageUri);
+
+        ShareContentValidation.validateForApiShare(linkContent);
+        ShareContentValidation.validateForMessage(linkContent);
+        ShareContentValidation.validateForNativeShare(linkContent);
+        ShareContentValidation.validateForWebShare(linkContent);
+    }
+
+    @Test
+    public void testItAcceptsShareOpenGraphContent() {
+        String actionKey = "foo";
+        String actionValue = "fooValue";
+        ShareOpenGraphAction shareOpenGraphAction =
+                new ShareOpenGraphAction.Builder()
+                        .putString(actionKey, actionValue)
+                        .setActionType(actionKey)
+                        .build();
+
+        ShareOpenGraphContent shareOpenGraphContent =
+                new ShareOpenGraphContent.Builder()
+                        .setPreviewPropertyName(actionKey)
+                        .setAction(shareOpenGraphAction).build();
+
+        ShareContentValidation.validateForMessage(shareOpenGraphContent);
+        ShareContentValidation.validateForNativeShare(shareOpenGraphContent);
+        ShareContentValidation.validateForApiShare(shareOpenGraphContent);
+        ShareContentValidation.validateForWebShare(shareOpenGraphContent);
+    }
+
+    private ShareLinkContent buildShareLinkContent(Uri imageLink) {
+        ShareLinkContent.Builder builder = new ShareLinkContent.Builder();
+        return builder.setImageUrl(imageLink)
+                .setContentDescription("Some description")
+                .setContentTitle("some title").build();
+    }
+
+    private SharePhoto buildSharePhoto(String url) {
+        return new SharePhoto.Builder()
+                .setImageUrl(Uri.parse(url))
+                .build();
+    }
+
+    private Bitmap createStubBitmap() {
+        return Bitmap.createBitmap(10,10, Bitmap.Config.ARGB_8888);
+    }
+}
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/internal/ShareOpenGraphUtilityTest.java b/facebook/src/test/java/com/facebook/share/internal/ShareOpenGraphUtilityTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/internal/ShareOpenGraphUtilityTest.java
rename to facebook/src/test/java/com/facebook/share/internal/ShareOpenGraphUtilityTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/ShareLinkContentBuilderTest.java b/facebook/src/test/java/com/facebook/share/model/ShareLinkContentBuilderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/ShareLinkContentBuilderTest.java
rename to facebook/src/test/java/com/facebook/share/model/ShareLinkContentBuilderTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/ShareModelTestUtility.java b/facebook/src/test/java/com/facebook/share/model/ShareModelTestUtility.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/ShareModelTestUtility.java
rename to facebook/src/test/java/com/facebook/share/model/ShareModelTestUtility.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/ShareOpenGraphActionBuilderTest.java b/facebook/src/test/java/com/facebook/share/model/ShareOpenGraphActionBuilderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/ShareOpenGraphActionBuilderTest.java
rename to facebook/src/test/java/com/facebook/share/model/ShareOpenGraphActionBuilderTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/ShareOpenGraphContentBuilderTest.java b/facebook/src/test/java/com/facebook/share/model/ShareOpenGraphContentBuilderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/ShareOpenGraphContentBuilderTest.java
rename to facebook/src/test/java/com/facebook/share/model/ShareOpenGraphContentBuilderTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/ShareOpenGraphObjectBuilderTest.java b/facebook/src/test/java/com/facebook/share/model/ShareOpenGraphObjectBuilderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/ShareOpenGraphObjectBuilderTest.java
rename to facebook/src/test/java/com/facebook/share/model/ShareOpenGraphObjectBuilderTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/SharePhotoBuilderTest.java b/facebook/src/test/java/com/facebook/share/model/SharePhotoBuilderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/SharePhotoBuilderTest.java
rename to facebook/src/test/java/com/facebook/share/model/SharePhotoBuilderTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/SharePhotoContentBuilderTest.java b/facebook/src/test/java/com/facebook/share/model/SharePhotoContentBuilderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/SharePhotoContentBuilderTest.java
rename to facebook/src/test/java/com/facebook/share/model/SharePhotoContentBuilderTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/ShareVideoBuilderTest.java b/facebook/src/test/java/com/facebook/share/model/ShareVideoBuilderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/ShareVideoBuilderTest.java
rename to facebook/src/test/java/com/facebook/share/model/ShareVideoBuilderTest.java
diff --git a/facebook/junitTests/src/test/java/com/facebook/share/model/ShareVideoContentBuilderTest.java b/facebook/src/test/java/com/facebook/share/model/ShareVideoContentBuilderTest.java
similarity index 100%
rename from facebook/junitTests/src/test/java/com/facebook/share/model/ShareVideoContentBuilderTest.java
rename to facebook/src/test/java/com/facebook/share/model/ShareVideoContentBuilderTest.java
diff --git a/facebook/junitTests/src/test/java/org/mockito/configuration/MockitoConfiguration.java b/facebook/src/test/java/org/mockito/configuration/MockitoConfiguration.java
similarity index 100%
rename from facebook/junitTests/src/test/java/org/mockito/configuration/MockitoConfiguration.java
rename to facebook/src/test/java/org/mockito/configuration/MockitoConfiguration.java
diff --git a/facebook/junitTests/src/main/res/drawable-hdpi/ic_launcher.png b/facebook/src/test/resources/drawable-hdpi/ic_launcher.png
similarity index 100%
rename from facebook/junitTests/src/main/res/drawable-hdpi/ic_launcher.png
rename to facebook/src/test/resources/drawable-hdpi/ic_launcher.png
diff --git a/facebook/junitTests/src/main/res/drawable-mdpi/ic_launcher.png b/facebook/src/test/resources/drawable-mdpi/ic_launcher.png
similarity index 100%
rename from facebook/junitTests/src/main/res/drawable-mdpi/ic_launcher.png
rename to facebook/src/test/resources/drawable-mdpi/ic_launcher.png
diff --git a/facebook/junitTests/src/main/res/drawable-xhdpi/ic_launcher.png b/facebook/src/test/resources/drawable-xhdpi/ic_launcher.png
similarity index 100%
rename from facebook/junitTests/src/main/res/drawable-xhdpi/ic_launcher.png
rename to facebook/src/test/resources/drawable-xhdpi/ic_launcher.png
diff --git a/facebook/junitTests/src/main/res/drawable-xxhdpi/ic_launcher.png b/facebook/src/test/resources/drawable-xxhdpi/ic_launcher.png
similarity index 100%
rename from facebook/junitTests/src/main/res/drawable-xxhdpi/ic_launcher.png
rename to facebook/src/test/resources/drawable-xxhdpi/ic_launcher.png
diff --git a/facebook/junitTests/src/main/res/layout/activity_main.xml b/facebook/src/test/resources/layout/activity_main.xml
similarity index 100%
rename from facebook/junitTests/src/main/res/layout/activity_main.xml
rename to facebook/src/test/resources/layout/activity_main.xml
diff --git a/facebook/junitTests/src/main/res/menu/menu_main.xml b/facebook/src/test/resources/menu/menu_main.xml
similarity index 100%
rename from facebook/junitTests/src/main/res/menu/menu_main.xml
rename to facebook/src/test/resources/menu/menu_main.xml
diff --git a/facebook/junitTests/src/main/res/values-w820dp/dimens.xml b/facebook/src/test/resources/values-w820dp/dimens.xml
similarity index 100%
rename from facebook/junitTests/src/main/res/values-w820dp/dimens.xml
rename to facebook/src/test/resources/values-w820dp/dimens.xml
diff --git a/facebook/junitTests/src/main/res/values/dimens.xml b/facebook/src/test/resources/values/dimens.xml
similarity index 100%
rename from facebook/junitTests/src/main/res/values/dimens.xml
rename to facebook/src/test/resources/values/dimens.xml
diff --git a/facebook/junitTests/src/main/res/values/strings.xml b/facebook/src/test/resources/values/strings.xml
similarity index 100%
rename from facebook/junitTests/src/main/res/values/strings.xml
rename to facebook/src/test/resources/values/strings.xml
diff --git a/facebook/junitTests/src/main/res/values/styles.xml b/facebook/src/test/resources/values/styles.xml
similarity index 100%
rename from facebook/junitTests/src/main/res/values/styles.xml
rename to facebook/src/test/resources/values/styles.xml
diff --git a/facebook/tests/build.gradle b/facebook/tests/build.gradle
deleted file mode 100644
index 246fc95ba..000000000
--- a/facebook/tests/build.gradle
+++ /dev/null
@@ -1,36 +0,0 @@
-apply plugin: 'com.android.application'
-
-dependencies {
-    compile project(':facebook')
-    compile 'org.mockito:mockito-core:1.10.8'
-    compile 'com.google.dexmaker:dexmaker:1.2'
-    compile 'com.google.dexmaker:dexmaker-mockito:1.2'
-}
-
-android {
-    compileSdkVersion Integer.parseInt(project.ANDROID_BUILD_SDK_VERSION)
-    buildToolsVersion project.ANDROID_BUILD_TOOLS_VERSION
-
-    defaultConfig {
-        minSdkVersion Integer.parseInt(project.ANDROID_BUILD_MIN_SDK_VERSION)
-        targetSdkVersion Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)
-    }
-
-    lintOptions {
-        abortOnError false
-    }
-
-    sourceSets {
-        main {
-            manifest.srcFile 'AndroidManifest.xml'
-            java.srcDirs = ['src']
-            res.srcDirs = ['res']
-            assets.srcDirs = ['assets']
-        }
-
-        androidTest {
-            java.srcDirs = ['src']
-            res.srcDirs = ['res']
-        }
-    }
-}
diff --git a/facebook/tests/proguard-project.txt b/facebook/tests/proguard-project.txt
deleted file mode 100644
index f2fe1559a..000000000
--- a/facebook/tests/proguard-project.txt
+++ /dev/null
@@ -1,20 +0,0 @@
-# To enable ProGuard in your project, edit project.properties
-# to define the proguard.config property as described in that file.
-#
-# Add project specific ProGuard rules here.
-# By default, the flags in this file are appended to flags specified
-# in ${sdk.dir}/tools/proguard/proguard-android.txt
-# You can edit the include path and order by changing the ProGuard
-# include property in project.properties.
-#
-# For more details, see
-#   http://developer.android.com/guide/developing/tools/proguard.html
-
-# Add any project specific keep options here:
-
-# If your project uses WebView with JS, uncomment the following
-# and specify the fully qualified class name to the JavaScript interface
-# class:
-#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
-#   public *;
-#}
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 78aa46be0..431dd073f 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
-#Mon Sep 14 13:45:47 PDT 2015
+#Mon Oct 05 14:11:01 PDT 2015
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-2.6-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-2.6-all.zip
diff --git a/samples/Scrumptious/src/com/example/scrumptious/MainActivity.java b/samples/Scrumptious/src/com/example/scrumptious/MainActivity.java
index c12fe0342..2fea256d6 100644
--- a/samples/Scrumptious/src/com/example/scrumptious/MainActivity.java
+++ b/samples/Scrumptious/src/com/example/scrumptious/MainActivity.java
@@ -20,19 +20,19 @@
 
 package com.example.scrumptious;
 
+import android.app.Activity;
+import android.app.Fragment;
+import android.app.FragmentManager;
+import android.app.FragmentTransaction;
 import android.content.Intent;
 import android.os.Bundle;
-import android.support.v4.app.Fragment;
-import android.support.v4.app.FragmentActivity;
-import android.support.v4.app.FragmentManager;
-import android.support.v4.app.FragmentTransaction;
 
 import com.facebook.AccessToken;
 import com.facebook.AccessTokenTracker;
 import com.facebook.appevents.AppEventsLogger;
 import com.facebook.CallbackManager;
 
-public class MainActivity extends FragmentActivity {
+public class MainActivity extends Activity {
 
     private static final String USER_SKIPPED_LOGIN_KEY = "user_skipped_login";
 
@@ -61,7 +61,7 @@ public void onCreate(Bundle savedInstanceState) {
             protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken,
                                                        AccessToken currentAccessToken) {
                 if (isResumed) {
-                    FragmentManager manager = getSupportFragmentManager();
+                    FragmentManager manager = getFragmentManager();
                     int backStackSize = manager.getBackStackEntryCount();
                     for (int i = 0; i < backStackSize; i++) {
                         manager.popBackStack();
@@ -77,7 +77,7 @@ protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken,
 
         setContentView(R.layout.main);
 
-        FragmentManager fm = getSupportFragmentManager();
+        FragmentManager fm = getFragmentManager();
         SplashFragment splashFragment = (SplashFragment) fm.findFragmentById(R.id.splashFragment);
         fragments[SPLASH] = splashFragment;
         fragments[SELECTION] = fm.findFragmentById(R.id.selectionFragment);
@@ -107,6 +107,18 @@ public void onResume() {
         // reporting.  Do so in the onResume methods of the primary Activities that an app may be
         // launched into.
         AppEventsLogger.activateApp(this);
+
+        if (AccessToken.getCurrentAccessToken() != null) {
+            // if the user already logged in, try to show the selection fragment
+            showFragment(SELECTION, false);
+            userSkippedLogin = false;
+        } else if (userSkippedLogin) {
+            showFragment(SELECTION, false);
+        } else {
+            // otherwise present the splash screen and ask the user to login,
+            // unless the user explicitly skipped.
+            showFragment(SPLASH, false);
+        }
     }
 
     @Override
@@ -139,23 +151,6 @@ protected void onSaveInstanceState(Bundle outState) {
         outState.putBoolean(USER_SKIPPED_LOGIN_KEY, userSkippedLogin);
     }
 
-    @Override
-    protected void onResumeFragments() {
-        super.onResumeFragments();
-
-        if (AccessToken.getCurrentAccessToken() != null) {
-            // if the user already logged in, try to show the selection fragment
-            showFragment(SELECTION, false);
-            userSkippedLogin = false;
-        } else if (userSkippedLogin) {
-            showFragment(SELECTION, false);
-        } else {
-            // otherwise present the splash screen and ask the user to login,
-            // unless the user explicitly skipped.
-            showFragment(SPLASH, false);
-        }
-    }
-
     public void showSettingsFragment() {
         showFragment(SETTINGS, true);
     }
@@ -166,7 +161,7 @@ public void showSplashFragment() {
 
 
     private void showFragment(int fragmentIndex, boolean addToBackStack) {
-        FragmentManager fm = getSupportFragmentManager();
+        FragmentManager fm = getFragmentManager();
         FragmentTransaction transaction = fm.beginTransaction();
         for (int i = 0; i < fragments.length; i++) {
             if (i == fragmentIndex) {
diff --git a/samples/Scrumptious/src/com/example/scrumptious/PickerActivity.java b/samples/Scrumptious/src/com/example/scrumptious/PickerActivity.java
index f4bfb1fec..09dc84ebf 100644
--- a/samples/Scrumptious/src/com/example/scrumptious/PickerActivity.java
+++ b/samples/Scrumptious/src/com/example/scrumptious/PickerActivity.java
@@ -20,7 +20,10 @@
 
 package com.example.scrumptious;
 
+import android.app.Activity;
 import android.app.AlertDialog;
+import android.app.Fragment;
+import android.app.FragmentManager;
 import android.content.Context;
 import android.content.DialogInterface;
 import android.location.Criteria;
@@ -30,9 +33,6 @@
 import android.net.Uri;
 import android.os.Bundle;
 import android.os.Looper;
-import android.support.v4.app.Fragment;
-import android.support.v4.app.FragmentActivity;
-import android.support.v4.app.FragmentManager;
 import android.widget.Toast;
 import com.facebook.FacebookException;
 import com.example.scrumptious.picker.FriendPickerFragment;
@@ -44,7 +44,7 @@
  * and a Done button. The selection results are saved in the ScrumptiousApplication
  * instance.
  */
-public class PickerActivity extends FragmentActivity {
+public class PickerActivity extends Activity {
     public static final Uri FRIEND_PICKER = Uri.parse("picker://friend");
     public static final Uri PLACE_PICKER = Uri.parse("picker://place");
 
@@ -63,7 +63,7 @@ public void onCreate(Bundle savedInstanceState) {
         setContentView(R.layout.pickers);
 
         Bundle args = getIntent().getExtras();
-        FragmentManager manager = getSupportFragmentManager();
+        FragmentManager manager = getFragmentManager();
         Fragment fragmentToShow = null;
         Uri intentUri = getIntent().getData();
 
diff --git a/samples/Scrumptious/src/com/example/scrumptious/SelectionFragment.java b/samples/Scrumptious/src/com/example/scrumptious/SelectionFragment.java
index 93d167c7a..bc3f54f0a 100644
--- a/samples/Scrumptious/src/com/example/scrumptious/SelectionFragment.java
+++ b/samples/Scrumptious/src/com/example/scrumptious/SelectionFragment.java
@@ -22,6 +22,7 @@
 
 import android.app.Activity;
 import android.app.AlertDialog;
+import android.app.Fragment;
 import android.app.ProgressDialog;
 import android.content.Context;
 import android.content.DialogInterface;
@@ -35,7 +36,6 @@
 import android.os.Bundle;
 import android.os.Environment;
 import android.provider.MediaStore;
-import android.support.v4.app.Fragment;
 import android.util.Log;
 import android.util.Pair;
 import android.view.LayoutInflater;
diff --git a/samples/Scrumptious/src/com/example/scrumptious/SplashFragment.java b/samples/Scrumptious/src/com/example/scrumptious/SplashFragment.java
index 0663905c7..ca271c2aa 100644
--- a/samples/Scrumptious/src/com/example/scrumptious/SplashFragment.java
+++ b/samples/Scrumptious/src/com/example/scrumptious/SplashFragment.java
@@ -20,9 +20,9 @@
 
 package com.example.scrumptious;
 
+import android.app.Fragment;
 import android.content.Intent;
 import android.os.Bundle;
-import android.support.v4.app.Fragment;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
diff --git a/samples/Scrumptious/src/com/example/scrumptious/picker/GraphObjectPagingLoader.java b/samples/Scrumptious/src/com/example/scrumptious/picker/GraphObjectPagingLoader.java
index ce12bba19..01aa6304a 100644
--- a/samples/Scrumptious/src/com/example/scrumptious/picker/GraphObjectPagingLoader.java
+++ b/samples/Scrumptious/src/com/example/scrumptious/picker/GraphObjectPagingLoader.java
@@ -21,7 +21,8 @@
 package com.example.scrumptious.picker;
 
 import android.content.Context;
-import android.support.v4.content.Loader;
+import android.content.Loader;
+
 import com.facebook.*;
 import org.json.JSONArray;
 
diff --git a/samples/Scrumptious/src/com/example/scrumptious/picker/PickerFragment.java b/samples/Scrumptious/src/com/example/scrumptious/picker/PickerFragment.java
index 7f1f3e7ae..f2353a0d5 100644
--- a/samples/Scrumptious/src/com/example/scrumptious/picker/PickerFragment.java
+++ b/samples/Scrumptious/src/com/example/scrumptious/picker/PickerFragment.java
@@ -21,13 +21,13 @@
 package com.example.scrumptious.picker;
 
 import android.app.Activity;
+import android.app.Fragment;
+import android.app.LoaderManager;
 import android.content.Context;
+import android.content.Loader;
 import android.content.res.TypedArray;
 import android.graphics.drawable.Drawable;
 import android.os.Bundle;
-import android.support.v4.app.Fragment;
-import android.support.v4.app.LoaderManager;
-import android.support.v4.content.Loader;
 import android.text.TextUtils;
 import android.util.AttributeSet;
 import android.view.LayoutInflater;
diff --git a/samples/Scrumptious/src/com/example/scrumptious/usersettings/UserSettingsFragment.java b/samples/Scrumptious/src/com/example/scrumptious/usersettings/UserSettingsFragment.java
index e8d7924e0..ce1db0857 100644
--- a/samples/Scrumptious/src/com/example/scrumptious/usersettings/UserSettingsFragment.java
+++ b/samples/Scrumptious/src/com/example/scrumptious/usersettings/UserSettingsFragment.java
@@ -20,13 +20,13 @@
 
 package com.example.scrumptious.usersettings;
 
+import android.app.Fragment;
 import android.content.Intent;
 import android.graphics.Bitmap;
 import android.graphics.drawable.BitmapDrawable;
 import android.graphics.drawable.Drawable;
 import android.net.Uri;
 import android.os.Bundle;
-import android.support.v4.app.Fragment;
 import android.text.TextUtils;
 import android.view.LayoutInflater;
 import android.view.View;
diff --git a/scripts/configure_unit_tests.sh b/scripts/configure_unit_tests.sh
index 1827e028d..734ab69d6 100755
--- a/scripts/configure_unit_tests.sh
+++ b/scripts/configure_unit_tests.sh
@@ -24,7 +24,7 @@
 
 cd $(dirname $0)/..
 FB_SDK_ROOT=$(pwd)
-FB_SDK_TESTS=$FB_SDK_ROOT/facebook/tests
+FB_SDK_TESTS=$FB_SDK_ROOT/facebook/src/androidTest
 
 if [ "$#" -lt 3 ]; then
       echo "Usage: $0 APP_ID APP_SECRET CLIENT_TOKEN [MACHINE_UNIQUE_USER_KEY]"
@@ -47,8 +47,7 @@ function write_config_json {
 DELIMIT
 # end heredoc
 
-    echo "wrote unit test config file at $CONFIG_JSON_FILE" 
+    echo "wrote unit test config file at $CONFIG_JSON_FILE"
 }
 
 write_config_json $1 $2 $3
-
