diff --git a/facebook/build.gradle b/facebook/build.gradle
index d2367c06f..0e538d5d2 100644
--- a/facebook/build.gradle
+++ b/facebook/build.gradle
@@ -12,6 +12,7 @@ android {
     defaultConfig {
         minSdkVersion Integer.parseInt(project.ANDROID_BUILD_MIN_SDK_VERSION)
         targetSdkVersion Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)
+        buildConfigField "boolean", "TEST_GOOGLE_PLAY", project.TEST_GOOGLE_PLAY
     }
 
     lintOptions {
diff --git a/facebook/src/com/facebook/internal/AttributionIdentifiers.java b/facebook/src/com/facebook/internal/AttributionIdentifiers.java
index 1c8f63018..9d3ac51b9 100644
--- a/facebook/src/com/facebook/internal/AttributionIdentifiers.java
+++ b/facebook/src/com/facebook/internal/AttributionIdentifiers.java
@@ -21,6 +21,7 @@
 import android.net.Uri;
 import android.util.Log;
 
+import com.facebook.android.BuildConfig;
 import java.lang.reflect.Method;
 
 /**
@@ -51,11 +52,15 @@
     private static AttributionIdentifiers getAndroidId(Context context) {
         AttributionIdentifiers identifiers = new AttributionIdentifiers();
         try {
-            Method isGooglePlayServicesAvailable = Utility.getMethodQuietly(
-                    "com.google.android.gms.common.GooglePlayServicesUtil",
-                    "isGooglePlayServicesAvailable",
-                    Context.class
-            );
+            Method isGooglePlayServicesAvailable = null;
+            if (BuildConfig.TEST_GOOGLE_PLAY)
+            {
+                isGooglePlayServicesAvailable = Utility.getMethodQuietly(
+                        "com.google.android.gms.common.GooglePlayServicesUtil",
+                        "isGooglePlayServicesAvailable",
+                        Context.class
+                );
+            }
 
             if (isGooglePlayServicesAvailable == null) {
                 return identifiers;
@@ -66,11 +71,15 @@ private static AttributionIdentifiers getAndroidId(Context context) {
                 return identifiers;
             }
 
-            Method getAdvertisingIdInfo = Utility.getMethodQuietly(
-                    "com.google.android.gms.ads.identifier.AdvertisingIdClient",
-                    "getAdvertisingIdInfo",
-                    Context.class
-            );
+            Method getAdvertisingIdInfo = null;
+            if (BuildConfig.TEST_GOOGLE_PLAY)
+            {
+                getAdvertisingIdInfo = Utility.getMethodQuietly(
+                        "com.google.android.gms.ads.identifier.AdvertisingIdClient",
+                        "getAdvertisingIdInfo",
+                        Context.class
+                );
+            }
             if (getAdvertisingIdInfo == null) {
                 return identifiers;
             }
diff --git a/gradle.properties b/gradle.properties
index a18bb5cb5..87cbf0481 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1,4 +1,5 @@
 ANDROID_BUILD_MIN_SDK_VERSION=8
 ANDROID_BUILD_TARGET_SDK_VERSION=19
 ANDROID_BUILD_TOOLS_VERSION=19.1.0
-ANDROID_BUILD_SDK_VERSION=19
\ No newline at end of file
+ANDROID_BUILD_SDK_VERSION=19
+TEST_GOOGLE_PLAY=true
\ No newline at end of file
