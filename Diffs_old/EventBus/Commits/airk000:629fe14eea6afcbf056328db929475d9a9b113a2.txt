diff --git a/EventBusAnnotationProcessor/src/org/greenrobot/eventbus/annotationprocessor/EventBusAnnotationProcessor.java b/EventBusAnnotationProcessor/src/org/greenrobot/eventbus/annotationprocessor/EventBusAnnotationProcessor.java
index c37c18a5..b477adff 100644
--- a/EventBusAnnotationProcessor/src/org/greenrobot/eventbus/annotationprocessor/EventBusAnnotationProcessor.java
+++ b/EventBusAnnotationProcessor/src/org/greenrobot/eventbus/annotationprocessor/EventBusAnnotationProcessor.java
@@ -37,6 +37,7 @@
 import javax.lang.model.element.PackageElement;
 import javax.lang.model.element.TypeElement;
 import javax.lang.model.element.VariableElement;
+import javax.lang.model.element.ElementKind;
 import javax.lang.model.type.DeclaredType;
 import javax.lang.model.type.TypeKind;
 import javax.lang.model.type.TypeMirror;
@@ -264,7 +265,7 @@ private String cutPackage(String paket, String className) {
 
     private PackageElement getPackageElement(TypeElement subscriberClass) {
         Element candidate = subscriberClass.getEnclosingElement();
-        while (!(candidate instanceof PackageElement)) {
+        while (candidate.getKind() != ElementKind.PACKAGE) {
             candidate = candidate.getEnclosingElement();
         }
         return (PackageElement) candidate;
