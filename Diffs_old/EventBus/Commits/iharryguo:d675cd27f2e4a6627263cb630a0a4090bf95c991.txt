diff --git a/.travis.yml b/.travis.yml
index 2210eda2..938a2565 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -7,7 +7,7 @@ jdk:
 android:
   components:
     - tools
-    - build-tools-26.0.3
+    - build-tools-27.0.3
     - android-10
     - android-26
     - extra-android-m2repository
diff --git a/EventBus/src/org/greenrobot/eventbus/EventBus.java b/EventBus/src/org/greenrobot/eventbus/EventBus.java
index e35ecd38..49db84df 100644
--- a/EventBus/src/org/greenrobot/eventbus/EventBus.java
+++ b/EventBus/src/org/greenrobot/eventbus/EventBus.java
@@ -570,4 +570,42 @@ public Logger getLogger() {
     public String toString() {
         return "EventBus[indexCount=" + indexCount + ", eventInheritance=" + eventInheritance + "]";
     }
+
+    // harryguo start。以下全是harryguo的代码，有harryguo end做结束：
+    /**
+     * 调用订阅者，并获得返回值（关键在于：只调用第一个订阅者，其他的订阅者直接忽略。程序设计之初就假定这种订阅者只有一个，多了那是程序失误）
+     */
+    public Object process(Object event) {
+        Object retValue = null;
+        {
+            Class<?> eventClass = event.getClass();
+            boolean subscriptionFound = false;
+
+            CopyOnWriteArrayList<Subscription> subscriptions;
+            synchronized (this) {
+                subscriptions = subscriptionsByEventType.get(eventClass);
+            }
+            if (subscriptions != null && !subscriptions.isEmpty()) {
+                Subscription subscription = subscriptions.get(0);
+                try {
+                    retValue = subscription.subscriberMethod.method.invoke(subscription.subscriber, event);
+                } catch (InvocationTargetException e) {
+                    handleSubscriberException(subscription, event, e.getCause());
+                } catch (IllegalAccessException e) {
+                    throw new IllegalStateException("Unexpected exception", e);
+                }
+                subscriptionFound = true;
+            }
+            if (!subscriptionFound) {
+                if (logNoSubscriberMessages) {
+                    logger.log(Level.FINE, "No subscribers registered for event " + eventClass);
+                }
+                if (sendNoSubscriberEvent && eventClass != NoSubscriberEvent.class && eventClass != SubscriberExceptionEvent.class) {
+                    post(new NoSubscriberEvent(this, event));
+                }
+            }
+        }
+        return retValue;
+    }
+    // harryguo end。以上全是harryguo的代码，有harryguo start做开始。
 }
diff --git a/EventBusAnnotationProcessor/build.gradle b/EventBusAnnotationProcessor/build.gradle
index 644ea215..76b5e1fd 100644
--- a/EventBusAnnotationProcessor/build.gradle
+++ b/EventBusAnnotationProcessor/build.gradle
@@ -24,8 +24,8 @@ configurations {
 }
 
 dependencies {
-    compile project(':eventbus')
-    compile 'de.greenrobot:java-common:2.3.1'
+    implementation project(':eventbus')
+    implementation 'de.greenrobot:java-common:2.3.1'
     deployerJars 'org.apache.maven.wagon:wagon-webdav:1.0-beta-2'
 }
 
diff --git a/EventBusPerformance/build.gradle b/EventBusPerformance/build.gradle
index fb2cc52f..d3751a84 100644
--- a/EventBusPerformance/build.gradle
+++ b/EventBusPerformance/build.gradle
@@ -1,19 +1,20 @@
 buildscript {
     repositories {
+        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
         jcenter()
     }
 
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.3.3'
+        classpath 'com.android.tools.build:gradle:3.1.3'
     }
 }
 
 apply plugin: 'com.android.application'
 
 dependencies {
-    compile project(':eventbus')
+    implementation project(':eventbus')
     annotationProcessor project(':eventbus-annotation-processor')
-    compile 'com.squareup:otto:1.3.8'
+    implementation 'com.squareup:otto:1.3.8'
 }
 
 android {
diff --git a/EventBusTest/build.gradle b/EventBusTest/build.gradle
index ab6b884c..d71436c2 100644
--- a/EventBusTest/build.gradle
+++ b/EventBusTest/build.gradle
@@ -1,10 +1,11 @@
 buildscript {
     repositories {
+        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
         jcenter()
     }
 
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.3.3'
+        classpath 'com.android.tools.build:gradle:3.1.3'
     }
 }
 
diff --git a/EventBusTestSubscriberInJar/build.gradle b/EventBusTestSubscriberInJar/build.gradle
index b75da33b..03bd1ecd 100644
--- a/EventBusTestSubscriberInJar/build.gradle
+++ b/EventBusTestSubscriberInJar/build.gradle
@@ -9,7 +9,7 @@ configurations {
 }
 
 dependencies {
-    compile project(':eventbus')
+    implementation project(':eventbus')
     provided project(':eventbus-annotation-processor')
 }
 
diff --git a/build.gradle b/build.gradle
index f7b81bdf..4bbbbde1 100644
--- a/build.gradle
+++ b/build.gradle
@@ -1,12 +1,13 @@
 buildscript {
     ext {
-        _buildToolsVersion = '26.0.3' // When updating, don't forget to adjust .travis.yml
+        _buildToolsVersion = '27.0.3' // When updating, don't forget to adjust .travis.yml
         _compileSdkVersion = 26
     }
 }
 
 allprojects {
     repositories {
+        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
         jcenter()
         mavenCentral()
         google()
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index bf1b63c3..95f5e92b 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,5 +1,6 @@
+#Sat Jul 14 13:02:41 CST 2018
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-4.1-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.4-all.zip
diff --git a/settings.gradle b/settings.gradle
index c25cd47e..3eeddc06 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -1,7 +1,7 @@
 include ':EventBus'
 include ':EventBusAnnotationProcessor'
-include ':EventBusTestJava'
-include ':EventBusTest'
+//include ':EventBusTestJava'
+//include ':EventBusTest'
 include ':EventBusTestSubscriberInJar'
 include ':EventBusPerformance'
 
