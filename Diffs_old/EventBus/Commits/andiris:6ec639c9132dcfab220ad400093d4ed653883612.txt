diff --git a/EventBusAnnotationProcessor/build.gradle b/EventBusAnnotationProcessor/build.gradle
index 644ea215..76b5e1fd 100644
--- a/EventBusAnnotationProcessor/build.gradle
+++ b/EventBusAnnotationProcessor/build.gradle
@@ -24,8 +24,8 @@ configurations {
 }
 
 dependencies {
-    compile project(':eventbus')
-    compile 'de.greenrobot:java-common:2.3.1'
+    implementation project(':eventbus')
+    implementation 'de.greenrobot:java-common:2.3.1'
     deployerJars 'org.apache.maven.wagon:wagon-webdav:1.0-beta-2'
 }
 
diff --git a/EventBusTest/build.gradle b/EventBusTest/build.gradle
index ab6b884c..5470ed14 100644
--- a/EventBusTest/build.gradle
+++ b/EventBusTest/build.gradle
@@ -1,28 +1,28 @@
 buildscript {
     repositories {
         jcenter()
+        google()
     }
 
     dependencies {
-        classpath 'com.android.tools.build:gradle:2.3.3'
+        classpath 'com.android.tools.build:gradle:3.2.1'
     }
 }
 
 apply plugin: 'com.android.application'
 
 dependencies {
-    androidTestCompile project(':eventbus')
-    androidTestCompile project(':EventBusTestJava')
+    androidTestImplementation project(':eventbus')
+    androidTestImplementation project(':EventBusTestJava')
     androidTestAnnotationProcessor project(':eventbus-annotation-processor')
     // Trying to repro bug:
-//    androidTestAnnotationProcessor 'org.greenrobot:eventbus-annotation-processor:3.1.0'
-    compile fileTree(dir: 'libs', include: '*.jar')
-    androidTestCompile 'com.android.support.test:runner:1.0.1'
-    androidTestCompile 'com.android.support.test:rules:1.0.1'
+    androidTestAnnotationProcessor 'org.greenrobot:eventbus-annotation-processor:3.1.0'
+    implementation fileTree(dir: 'libs', include: '*.jar')
+    androidTestImplementation 'com.android.support.test:runner:1.0.1'
+    androidTestImplementation 'com.android.support.test:rules:1.0.1'
 }
 
 android {
-    buildToolsVersion _buildToolsVersion
     compileSdkVersion _compileSdkVersion
 
     compileOptions {
@@ -34,10 +34,6 @@ android {
         main {
             manifest.srcFile 'AndroidManifest.xml'
         }
-
-        androidTest {
-            java.srcDirs = ['src']
-        }
     }
 
     defaultConfig {
@@ -63,4 +59,5 @@ android {
         // TODO FIXME: Travis only error
         abortOnError false
     }
+    buildToolsVersion '28.0.3'
 }
diff --git a/EventBusTest/src/org/greenrobot/eventbus/AbstractAndroidEventBusTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/AbstractAndroidEventBusTest.java
similarity index 97%
rename from EventBusTest/src/org/greenrobot/eventbus/AbstractAndroidEventBusTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/AbstractAndroidEventBusTest.java
index 13178206..8ce0a9b4 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/AbstractAndroidEventBusTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/AbstractAndroidEventBusTest.java
@@ -21,6 +21,7 @@
 import android.os.Message;
 import android.support.test.runner.AndroidJUnit4;
 
+import org.greenrobot.eventbus.AbstractEventBusTest;
 import org.junit.Before;
 import org.junit.runner.RunWith;
 
diff --git a/EventBusTest/src/org/greenrobot/eventbus/ClassMapPerfTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/ClassMapPerfTest.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/ClassMapPerfTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/ClassMapPerfTest.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidActivityTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidActivityTest.java
similarity index 91%
rename from EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidActivityTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidActivityTest.java
index 364a3936..0b17c381 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidActivityTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidActivityTest.java
@@ -20,6 +20,10 @@
 import android.support.test.rule.UiThreadTestRule;
 import android.util.Log;
 
+import org.greenrobot.eventbus.AbstractEventBusTest;
+import org.greenrobot.eventbus.EventBus;
+import org.greenrobot.eventbus.EventBusBasicTest;
+import org.greenrobot.eventbus.Subscribe;
 import org.junit.Rule;
 import org.junit.Test;
 
diff --git a/EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidCancelEventDeliveryTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidCancelEventDeliveryTest.java
similarity index 95%
rename from EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidCancelEventDeliveryTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidCancelEventDeliveryTest.java
index 781ceda2..ae545409 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidCancelEventDeliveryTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidCancelEventDeliveryTest.java
@@ -15,6 +15,7 @@
  */
 package org.greenrobot.eventbus;
 
+import org.greenrobot.eventbus.EventBusCancelEventDeliveryTest;
 import org.junit.Test;
 import org.junit.runner.RunWith;
 
diff --git a/EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidMultithreadedTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidMultithreadedTest.java
similarity index 95%
rename from EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidMultithreadedTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidMultithreadedTest.java
index 8be31cc1..0df16a96 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidMultithreadedTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidMultithreadedTest.java
@@ -15,6 +15,9 @@
  */
 package org.greenrobot.eventbus;
 
+import org.greenrobot.eventbus.EventBusMultithreadedTest;
+import org.greenrobot.eventbus.Subscribe;
+import org.greenrobot.eventbus.ThreadMode;
 import org.junit.Test;
 import org.junit.runner.RunWith;
 
diff --git a/EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidOrderTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidOrderTest.java
similarity index 96%
rename from EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidOrderTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidOrderTest.java
index ff348e1d..d8e38ff1 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/EventBusAndroidOrderTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusAndroidOrderTest.java
@@ -3,6 +3,8 @@
 import android.os.Handler;
 import android.os.Looper;
 
+import org.greenrobot.eventbus.Subscribe;
+import org.greenrobot.eventbus.ThreadMode;
 import org.junit.After;
 import org.junit.Before;
 import org.junit.Test;
diff --git a/EventBusTest/src/org/greenrobot/eventbus/EventBusBackgroundThreadTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusBackgroundThreadTest.java
similarity index 95%
rename from EventBusTest/src/org/greenrobot/eventbus/EventBusBackgroundThreadTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusBackgroundThreadTest.java
index 6ccb6025..6f24f90f 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/EventBusBackgroundThreadTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusBackgroundThreadTest.java
@@ -17,6 +17,8 @@
 
 import android.os.Looper;
 
+import org.greenrobot.eventbus.Subscribe;
+import org.greenrobot.eventbus.ThreadMode;
 import org.junit.Test;
 
 import static org.junit.Assert.assertEquals;
diff --git a/EventBusTest/src/org/greenrobot/eventbus/EventBusMainThreadRacingTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMainThreadRacingTest.java
similarity index 97%
rename from EventBusTest/src/org/greenrobot/eventbus/EventBusMainThreadRacingTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMainThreadRacingTest.java
index 8ed637e8..e5f6df89 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/EventBusMainThreadRacingTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMainThreadRacingTest.java
@@ -18,6 +18,8 @@
 import android.os.Handler;
 import android.os.Looper;
 
+import org.greenrobot.eventbus.Subscribe;
+import org.greenrobot.eventbus.ThreadMode;
 import org.junit.Test;
 
 import java.util.Random;
diff --git a/EventBusTest/src/org/greenrobot/eventbus/EventBusMainThreadTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMainThreadTest.java
similarity index 95%
rename from EventBusTest/src/org/greenrobot/eventbus/EventBusMainThreadTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMainThreadTest.java
index 34c29ee6..98858f0d 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/EventBusMainThreadTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMainThreadTest.java
@@ -17,6 +17,8 @@
 
 import android.os.Looper;
 
+import org.greenrobot.eventbus.Subscribe;
+import org.greenrobot.eventbus.ThreadMode;
 import org.junit.Test;
 
 
diff --git a/EventBusTest/src/org/greenrobot/eventbus/EventBusMethodModifiersTest.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMethodModifiersTest.java
similarity index 95%
rename from EventBusTest/src/org/greenrobot/eventbus/EventBusMethodModifiersTest.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMethodModifiersTest.java
index 2818d85d..13060817 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/EventBusMethodModifiersTest.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/EventBusMethodModifiersTest.java
@@ -17,6 +17,8 @@
 
 import android.os.Looper;
 
+import org.greenrobot.eventbus.Subscribe;
+import org.greenrobot.eventbus.ThreadMode;
 import org.junit.Test;
 
 import static org.junit.Assert.assertNotSame;
diff --git a/EventBusTest/src/org/greenrobot/eventbus/TestBackgroundPoster.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/TestBackgroundPoster.java
similarity index 97%
rename from EventBusTest/src/org/greenrobot/eventbus/TestBackgroundPoster.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/TestBackgroundPoster.java
index a40eefd9..3310dab1 100644
--- a/EventBusTest/src/org/greenrobot/eventbus/TestBackgroundPoster.java
+++ b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/TestBackgroundPoster.java
@@ -1,5 +1,7 @@
 package org.greenrobot.eventbus;
 
+import org.greenrobot.eventbus.EventBus;
+
 import java.util.ArrayList;
 import java.util.List;
 
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusAndroidOrderTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusAndroidOrderTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusAndroidOrderTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusAndroidOrderTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusBackgroundThreadTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusBackgroundThreadTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusBackgroundThreadTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusBackgroundThreadTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusBasicTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusBasicTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusBasicTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusBasicTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusCancelEventDeliveryTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusCancelEventDeliveryTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusCancelEventDeliveryTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusCancelEventDeliveryTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusFallbackToReflectionTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusFallbackToReflectionTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusFallbackToReflectionTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusFallbackToReflectionTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusGenericsTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusGenericsTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusGenericsTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusGenericsTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusInheritanceDisabledTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusInheritanceDisabledTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusInheritanceDisabledTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusInheritanceDisabledTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusInheritanceTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusInheritanceTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusInheritanceTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusInheritanceTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusMainThreadRacingTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusMainThreadRacingTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusMainThreadRacingTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusMainThreadRacingTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusMainThreadTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusMainThreadTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusMainThreadTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusMainThreadTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusMethodModifiersTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusMethodModifiersTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusMethodModifiersTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusMethodModifiersTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusMultithreadedTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusMultithreadedTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusMultithreadedTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusMultithreadedTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusNoSubscriberEventTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusNoSubscriberEventTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusNoSubscriberEventTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusNoSubscriberEventTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusOrderedSubscriptionsTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusOrderedSubscriptionsTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusOrderedSubscriptionsTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusOrderedSubscriptionsTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusRegistrationRacingTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusRegistrationRacingTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusRegistrationRacingTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusRegistrationRacingTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusStickyEventTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusStickyEventTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusStickyEventTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusStickyEventTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusSubscriberExceptionTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusSubscriberExceptionTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusSubscriberExceptionTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusSubscriberExceptionTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusSubscriberInJarTestWithIndex.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusSubscriberInJarTestWithIndex.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/EventBusSubscriberInJarTestWithIndex.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/EventBusSubscriberInJarTestWithIndex.java
diff --git a/EventBusTest/src/org/greenrobot/eventbus/indexed/Indexed.java b/EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/Indexed.java
similarity index 100%
rename from EventBusTest/src/org/greenrobot/eventbus/indexed/Indexed.java
rename to EventBusTest/src/androidTest/java/org/greenrobot/eventbus/indexed/Indexed.java
diff --git a/EventBusTestJava/build.gradle b/EventBusTestJava/build.gradle
index 5fec7913..28b74cdd 100644
--- a/EventBusTestJava/build.gradle
+++ b/EventBusTestJava/build.gradle
@@ -4,13 +4,13 @@ buildscript {
     }
 
     dependencies {
-        classpath "net.ltgt.gradle:gradle-apt-plugin:0.12"
+        classpath "net.ltgt.gradle:gradle-apt-plugin:0.19"
     }
 }
 
 apply plugin: 'java'
 // plugin to make it easier/safer to use EventBus annotation processor
-apply plugin: 'net.ltgt.apt-idea'
+apply plugin: 'net.ltgt.apt'
 
 sourceCompatibility = 1.7
 
@@ -25,12 +25,12 @@ sourceSets {
 }
 
 dependencies {
-    compile fileTree(dir: 'libs', include: '*.jar')
-    compile(project(':eventbus')) {
+    implementation fileTree(dir: 'libs', include: '*.jar')
+    implementation(project(':eventbus')) {
         exclude group: "com.google.android" // Does not seem to work...
     }
     apt project(':eventbus-annotation-processor')
-    compile 'junit:junit:4.12'
+    implementation 'junit:junit:4.12'
 }
 
 tasks.withType(JavaCompile) {
diff --git a/EventBusTestSubscriberInJar/build.gradle b/EventBusTestSubscriberInJar/build.gradle
index b75da33b..03bd1ecd 100644
--- a/EventBusTestSubscriberInJar/build.gradle
+++ b/EventBusTestSubscriberInJar/build.gradle
@@ -9,7 +9,7 @@ configurations {
 }
 
 dependencies {
-    compile project(':eventbus')
+    implementation project(':eventbus')
     provided project(':eventbus-annotation-processor')
 }
 
diff --git a/build.gradle b/build.gradle
index f7b81bdf..b4ed808f 100644
--- a/build.gradle
+++ b/build.gradle
@@ -3,6 +3,9 @@ buildscript {
         _buildToolsVersion = '26.0.3' // When updating, don't forget to adjust .travis.yml
         _compileSdkVersion = 26
     }
+    repositories {
+        google()
+    }
 }
 
 allprojects {
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index bf1b63c3..3f0f9be6 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -2,4 +2,4 @@ distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-4.1-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.6-all.zip
