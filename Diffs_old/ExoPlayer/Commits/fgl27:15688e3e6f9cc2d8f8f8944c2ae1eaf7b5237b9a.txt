diff --git a/javadoc_library.gradle b/javadoc_library.gradle
index a818ea390e..74fcc3dd6c 100644
--- a/javadoc_library.gradle
+++ b/javadoc_library.gradle
@@ -18,10 +18,13 @@ android.libraryVariants.all { variant ->
     if (!name.equals("release")) {
         return; // Skip non-release builds.
     }
+    def allSourceDirs = variant.sourceSets.inject ([]) {
+        acc, val -> acc << val.javaDirectories
+    }
     task("generateJavadoc", type: Javadoc) {
         description = "Generates Javadoc for the ${javadocTitle}."
         title = "ExoPlayer ${javadocTitle}"
-        source = variant.javaCompileProvider.get().source
+        source = allSourceDirs
         options {
             links "http://docs.oracle.com/javase/7/docs/api/"
             linksOffline "https://developer.android.com/reference",
