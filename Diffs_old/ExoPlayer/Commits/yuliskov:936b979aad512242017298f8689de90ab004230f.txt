diff --git a/constants.gradle b/constants.gradle
index 16fb3420ce..221d011eb9 100644
--- a/constants.gradle
+++ b/constants.gradle
@@ -22,7 +22,7 @@ project.ext {
     minSdkVersion = 14
     targetSdkVersion = 28
     compileSdkVersion = 28
-    buildToolsVersion = '28.0.2'
+    buildToolsVersion = '28.0.3'
     testSupportLibraryVersion = '0.5'
     supportLibraryVersion = '27.1.1'
     dexmakerVersion = '1.2'
diff --git a/library/core/src/main/java/com/google/android/exoplayer2/audio/AudioTrackPositionTracker.java b/library/core/src/main/java/com/google/android/exoplayer2/audio/AudioTrackPositionTracker.java
index 62b120f00a..e5c876ecc9 100644
--- a/library/core/src/main/java/com/google/android/exoplayer2/audio/AudioTrackPositionTracker.java
+++ b/library/core/src/main/java/com/google/android/exoplayer2/audio/AudioTrackPositionTracker.java
@@ -506,7 +506,16 @@ private long getPlaybackHeadPosition() {
       return 0;
     }
 
-    long rawPlaybackHeadPosition = 0xFFFFFFFFL & audioTrack.getPlaybackHeadPosition();
+    long rawPlaybackHeadPosition;
+
+    if (Util.SDK_INT < 19) {
+      rawPlaybackHeadPosition = 0xFFFFFFFFL & audioTrack.getPlaybackHeadPosition();
+    } else {
+      AudioTimestamp timestamp = new AudioTimestamp();
+      audioTrack.getTimestamp(timestamp);
+      rawPlaybackHeadPosition = timestamp.framePosition;
+    }
+
     if (needsPassthroughWorkarounds) {
       // Work around an issue with passthrough/direct AudioTracks on platform API versions 21/22
       // where the playback head position jumps back to zero on paused passthrough/direct audio
