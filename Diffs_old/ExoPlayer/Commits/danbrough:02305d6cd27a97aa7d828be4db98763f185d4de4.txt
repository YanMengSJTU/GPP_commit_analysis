diff --git a/build.gradle b/build.gradle
index 9f9081a945..4792028bc9 100644
--- a/build.gradle
+++ b/build.gradle
@@ -17,8 +17,9 @@ buildscript {
         google()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:3.0.1'
+        classpath 'com.android.tools.build:gradle:3.1.0'
         classpath 'com.novoda:bintray-release:0.5.0'
+        classpath 'com.github.dcendents:android-maven-gradle-plugin:2.0'
     }
     // Workaround for the following test coverage issue. Remove when fixed:
     // https://code.google.com/p/android/issues/detail?id=226070
diff --git a/extensions/cast/build.gradle b/extensions/cast/build.gradle
index 253a1922a8..0bd1d8dc73 100644
--- a/extensions/cast/build.gradle
+++ b/extensions/cast/build.gradle
@@ -49,10 +49,10 @@ dependencies {
 ext {
     javadocTitle = 'Cast extension'
 }
-apply from: '../../javadoc_library.gradle'
+
 
 ext {
     releaseArtifact = 'extension-cast'
     releaseDescription = 'Cast extension for ExoPlayer.'
 }
-apply from: '../../publish.gradle'
+
diff --git a/extensions/okhttp/build.gradle b/extensions/okhttp/build.gradle
index 2da245b1a5..0ac562c5f5 100644
--- a/extensions/okhttp/build.gradle
+++ b/extensions/okhttp/build.gradle
@@ -13,6 +13,10 @@
 // limitations under the License.
 apply from: '../../constants.gradle'
 apply plugin: 'com.android.library'
+apply plugin: 'com.github.dcendents.android-maven'
+
+
+group='com.github.danbroid.exoplayer'
 
 android {
     compileSdkVersion project.ext.compileSdkVersion
@@ -32,7 +36,7 @@ android {
 dependencies {
     implementation project(modulePrefix + 'library-core')
     implementation 'com.android.support:support-annotations:' + supportLibraryVersion
-    implementation('com.squareup.okhttp3:okhttp:3.9.0') {
+    implementation('com.squareup.okhttp3:okhttp:3.10.0') {
         exclude group: 'org.json'
     }
 }
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 32ec7e3327..b1289a577e 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -3,4 +3,4 @@ distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-4.1-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-4.6-all.zip
diff --git a/javadoc_library.gradle b/javadoc_library.gradle
index ea193e661c..d2add17f34 100644
--- a/javadoc_library.gradle
+++ b/javadoc_library.gradle
@@ -11,30 +11,4 @@
 // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 // See the License for the specific language governing permissions and
 // limitations under the License.
-android.libraryVariants.all { variant ->
-    def name = variant.buildType.name
-    if (!name.equals("release")) {
-        return; // Skip non-release builds.
-    }
-    task("generateJavadoc", type: Javadoc) {
-        description = "Generates Javadoc for the ${javadocTitle}."
-        title = "ExoPlayer ${javadocTitle}"
-        source = variant.javaCompile.source
-        classpath = files(variant.javaCompile.classpath.files,
-	                  project.android.getBootClasspath())
-        options {
-            links "http://docs.oracle.com/javase/7/docs/api/"
-            linksOffline "https://developer.android.com/reference",
-                         "${android.sdkDirectory}/docs/reference"
-            encoding = "UTF-8"
-        }
-        exclude "**/BuildConfig.java"
-        exclude "**/R.java"
-        doLast {
-            copy {
-                from "src/main/javadoc"
-                into "$buildDir/docs/javadoc"
-            }
-        }
-    }
-}
+
diff --git a/publish.gradle b/publish.gradle
index ca1a2cfd8b..aa4289f1c0 100644
--- a/publish.gradle
+++ b/publish.gradle
@@ -11,19 +11,7 @@
 // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 // See the License for the specific language governing permissions and
 // limitations under the License.
-if (project.ext.has("exoplayerPublishEnabled")
-        && project.ext.exoplayerPublishEnabled) {
-    apply plugin: 'bintray-release'
-    publish {
-        artifactId = releaseArtifact
-        description = releaseDescription
-        version = releaseVersion
-        repoName = getBintrayRepo()
-        userOrg = 'google'
-        groupId = 'com.google.android.exoplayer'
-        website = 'https://github.com/google/ExoPlayer'
-    }
-}
+
 
 def getBintrayRepo() {
     boolean publicRepo = hasProperty('publicRepo') &&
