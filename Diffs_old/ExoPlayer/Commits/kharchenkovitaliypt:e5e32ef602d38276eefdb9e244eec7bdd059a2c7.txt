diff --git a/extensions/rtmp/build.gradle b/extensions/rtmp/build.gradle
index c832cb82e9..a8c339b409 100644
--- a/extensions/rtmp/build.gradle
+++ b/extensions/rtmp/build.gradle
@@ -26,7 +26,8 @@ android {
 
 dependencies {
     compile project(modulePrefix + 'library-core')
-    compile 'net.butterflytv.utils:rtmp-client:0.2.8'
+    compile project(':rtmp-client-core')
+//    compile 'net.butterflytv.utils:rtmp-client:0.2.8'
 }
 
 ext {
diff --git a/extensions/rtmp/src/main/java/com/google/android/exoplayer2/ext/rtmp/RtmpDataSource.java b/extensions/rtmp/src/main/java/com/google/android/exoplayer2/ext/rtmp/RtmpDataSource.java
index 0601af4a2f..7e2974e4f3 100644
--- a/extensions/rtmp/src/main/java/com/google/android/exoplayer2/ext/rtmp/RtmpDataSource.java
+++ b/extensions/rtmp/src/main/java/com/google/android/exoplayer2/ext/rtmp/RtmpDataSource.java
@@ -17,6 +17,8 @@
 
 import android.net.Uri;
 import android.support.annotation.Nullable;
+import android.util.Log;
+
 import com.google.android.exoplayer2.C;
 import com.google.android.exoplayer2.ExoPlayerLibraryInfo;
 import com.google.android.exoplayer2.upstream.DataSource;
@@ -37,24 +39,30 @@
 
   @Nullable private final TransferListener<? super RtmpDataSource> listener;
 
+  private final RtmpClient.Config config;
   private RtmpClient rtmpClient;
   private Uri uri;
 
   public RtmpDataSource() {
-    this(null);
+    this(null, null);
   }
 
   /**
    * @param listener An optional listener.
    */
   public RtmpDataSource(@Nullable TransferListener<? super RtmpDataSource> listener) {
+    this(null, listener);
+  }
+
+  public RtmpDataSource(@Nullable RtmpClient.Config config, @Nullable TransferListener<? super RtmpDataSource> listener) {
+    this.config = config;
     this.listener = listener;
   }
 
   @Override
   public long open(DataSpec dataSpec) throws RtmpIOException {
     rtmpClient = new RtmpClient();
-    rtmpClient.open(dataSpec.uri.toString(), false);
+    rtmpClient.open(dataSpec.uri.toString(), config, false);
 
     this.uri = dataSpec.uri;
     if (listener != null) {
@@ -66,6 +74,7 @@ public long open(DataSpec dataSpec) throws RtmpIOException {
   @Override
   public int read(byte[] buffer, int offset, int readLength) throws IOException {
     int bytesRead = rtmpClient.read(buffer, offset, readLength);
+    Log.d("TAG", "read() bytesRead: " + bytesRead);
     if (bytesRead == -1) {
       return C.RESULT_END_OF_INPUT;
     }
