diff --git a/library/core/src/main/java/com/google/android/exoplayer2/offline/DownloadManager.java b/library/core/src/main/java/com/google/android/exoplayer2/offline/DownloadManager.java
index d50fe8d4da..3e91c74a90 100644
--- a/library/core/src/main/java/com/google/android/exoplayer2/offline/DownloadManager.java
+++ b/library/core/src/main/java/com/google/android/exoplayer2/offline/DownloadManager.java
@@ -42,6 +42,7 @@
 import java.lang.annotation.Retention;
 import java.lang.annotation.RetentionPolicy;
 import java.util.ArrayList;
+import java.util.Iterator;
 import java.util.List;
 import java.util.concurrent.CopyOnWriteArraySet;
 
@@ -232,8 +233,9 @@ public void stopDownloads() {
   public void pauseDownload(DownloadAction action) {
     Assertions.checkState(!released);
     if (!downloadsStopped) {
-      for (int i = 0; i < activeDownloadTasks.size(); i++) {
-        Task task = activeDownloadTasks.get(i);
+      Iterator<Task> taskIterator = activeDownloadTasks.iterator();
+      while (taskIterator.hasNext()) {
+        Task task = taskIterator.next();
         if (task.action.equals(action)) {
           task.pause();
         }
@@ -244,19 +246,18 @@ public void pauseDownload(DownloadAction action) {
 
   public void resumeDownload(DownloadAction action) {
     Assertions.checkState(!released);
-    if (!downloadsStopped) {
-      for (int i = 0; i < tasks.size(); i++) {
-        Task task = tasks.get(i);
-        if (task.action.equals(action)) {
-          Task resumedTask = task.getResumedTask();
-          replaceTask(task, resumedTask);
-          saveActions();
-          resumedTask.resume();
-        }
+    Iterator<Task> taskIterator = tasks.iterator();
+    while (taskIterator.hasNext()) {
+      Task task = taskIterator.next();
+      if (task.action.equals(action)) {
+        Task resumedTask = task.getResumedTask();
+        replaceTask(task, resumedTask);
+        resumedTask.resume();
+        saveActions();
       }
-      maybeStartTasks();
-      logd("Download is resuming");
     }
+    startDownloads();
+    logd("Download is resuming");
   }
 
   /**
@@ -474,6 +475,7 @@ private void onTaskStateChange(Task task) {
 
   private void replaceTask(Task oldTask, Task newTask) {
     int index = tasks.indexOf(oldTask);
+    tasks.remove(oldTask);
     tasks.add(index, newTask);
   }
 
@@ -703,7 +705,11 @@ private Task(
       this.id = id;
       this.downloadManager = downloadManager;
       this.action = action;
-      this.currentState = STATE_QUEUED;
+      if (action.paused) {
+        this.currentState = STATE_PAUSED;
+      } else {
+        this.currentState = STATE_QUEUED;
+      }
       this.minRetryCount = minRetryCount;
     }
 
@@ -810,7 +816,6 @@ private int getExternalState() {
           return STATE_QUEUED;
         case STATE_STARTED_CANCELING:
         case STATE_STARTED_PAUSING:
-          return STATE_STARTED;
         case STATE_STARTED_STOPPING:
           return STATE_STARTED;
         case STATE_QUEUED:
diff --git a/library/core/src/main/java/com/google/android/exoplayer2/offline/ProgressiveDownloadAction.java b/library/core/src/main/java/com/google/android/exoplayer2/offline/ProgressiveDownloadAction.java
index 055ba8136a..6b801c445a 100644
--- a/library/core/src/main/java/com/google/android/exoplayer2/offline/ProgressiveDownloadAction.java
+++ b/library/core/src/main/java/com/google/android/exoplayer2/offline/ProgressiveDownloadAction.java
@@ -98,6 +98,7 @@ public ProgressiveDownloader createDownloader(DownloaderConstructorHelper constr
   protected void writeToStream(DataOutputStream output) throws IOException {
     output.writeUTF(uri.toString());
     output.writeBoolean(isRemoveAction);
+    output.writeBoolean(paused);
     output.writeInt(data.length);
     output.write(data);
     boolean customCacheKeySet = customCacheKey != null;
diff --git a/library/dash/src/main/java/com/google/android/exoplayer2/source/dash/offline/DashDownloadAction.java b/library/dash/src/main/java/com/google/android/exoplayer2/source/dash/offline/DashDownloadAction.java
index f932c0e48e..384ef6bb85 100644
--- a/library/dash/src/main/java/com/google/android/exoplayer2/source/dash/offline/DashDownloadAction.java
+++ b/library/dash/src/main/java/com/google/android/exoplayer2/source/dash/offline/DashDownloadAction.java
@@ -73,7 +73,7 @@ public static DashDownloadAction createRemoveAction(Uri uri, @Nullable byte[] da
   @Deprecated
   public DashDownloadAction(
       Uri uri, boolean isRemoveAction, boolean paused, @Nullable byte[] data, List<StreamKey> keys) {
-    super(TYPE, VERSION, uri, isRemoveAction,paused, data, keys);
+    super(TYPE, VERSION, uri, isRemoveAction, paused, data, keys);
   }
 
   @Override
