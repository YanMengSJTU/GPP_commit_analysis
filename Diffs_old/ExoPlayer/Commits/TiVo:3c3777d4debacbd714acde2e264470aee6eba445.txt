diff --git a/library/core/src/main/java/com/google/android/exoplayer2/source/ProgressiveMediaPeriod.java b/library/core/src/main/java/com/google/android/exoplayer2/source/ProgressiveMediaPeriod.java
index 83145d04b0..d25fff5104 100644
--- a/library/core/src/main/java/com/google/android/exoplayer2/source/ProgressiveMediaPeriod.java
+++ b/library/core/src/main/java/com/google/android/exoplayer2/source/ProgressiveMediaPeriod.java
@@ -200,9 +200,9 @@ public void release() {
       for (SampleQueue sampleQueue : sampleQueues) {
         sampleQueue.discardToEnd();
       }
-    }
-    for (DecryptableSampleQueueReader reader : sampleQueueReaders) {
-      reader.release();
+      for (DecryptableSampleQueueReader reader : sampleQueueReaders) {
+        reader.release();
+      }
     }
     loader.release(/* callback= */ this);
     handler.removeCallbacksAndMessages(null);
@@ -216,6 +216,9 @@ public void onLoaderReleased() {
     for (SampleQueue sampleQueue : sampleQueues) {
       sampleQueue.reset();
     }
+    for (DecryptableSampleQueueReader reader : sampleQueueReaders) {
+      reader.release();
+    }
     extractorHolder.release();
   }
 
