diff --git a/build.gradle b/build.gradle
index 8ec24a6e82..2623db66fc 100644
--- a/build.gradle
+++ b/build.gradle
@@ -14,12 +14,10 @@
 buildscript {
     repositories {
         jcenter()
-        maven {
-            url "https://maven.google.com"
-        }
+        google()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:3.0.0-beta4'
+        classpath 'com.android.tools.build:gradle:3.0.0'
         classpath 'com.novoda:bintray-release:0.5.0'
     }
     // Workaround for the following test coverage issue. Remove when fixed:
@@ -34,9 +32,7 @@ buildscript {
 allprojects {
     repositories {
         jcenter()
-        maven {
-            url "https://maven.google.com"
-        }
+        google()
     }
     project.ext {
         exoplayerPublishEnabled = true
diff --git a/constants.gradle b/constants.gradle
index 1f23eca07f..4db517b2f7 100644
--- a/constants.gradle
+++ b/constants.gradle
@@ -19,7 +19,7 @@ project.ext {
     minSdkVersion = 9
     compileSdkVersion = 25
     targetSdkVersion = 25
-    buildToolsVersion = '26.0.0'
+    buildToolsVersion = '27.0.0'
     testSupportLibraryVersion = '0.5'
     supportLibraryVersion = '25.4.0'
     dexmakerVersion = '1.2'
diff --git a/demo/src/main/java/com/google/android/exoplayer2/demo/PlayerActivity.java b/demo/src/main/java/com/google/android/exoplayer2/demo/PlayerActivity.java
index b08a8dffad..764496307f 100644
--- a/demo/src/main/java/com/google/android/exoplayer2/demo/PlayerActivity.java
+++ b/demo/src/main/java/com/google/android/exoplayer2/demo/PlayerActivity.java
@@ -355,7 +355,7 @@ private void initializePlayer() {
       player.seekTo(resumeWindow, resumePosition);
     }
     mediaSource = new ExtractorMediaSource(Uri.parse(
-            "/storage/emulated/0/DCIM/doupai/MV-幸福.mp4"),
+            "/storage/emulated/0/DCIM/doupai/1509850197827p5.mp4"),
             mediaDataSourceFactory, new DefaultExtractorsFactory(),
             mainHandler, eventLogger);
     player.prepare(mediaSource, true, true);
diff --git a/demo/src/main/res/layout/player_activity.xml b/demo/src/main/res/layout/player_activity.xml
index 3f8cdaa7d6..05b5016f72 100644
--- a/demo/src/main/res/layout/player_activity.xml
+++ b/demo/src/main/res/layout/player_activity.xml
@@ -20,7 +20,8 @@
     android:layout_height="match_parent"
     android:keepScreenOn="true">
 
-  <com.google.android.exoplayer2.ui.SimpleExoPlayerView android:id="@+id/player_view"
+  <com.google.android.exoplayer2.ui.SimpleExoPlayerView
+      android:id="@+id/player_view"
       android:layout_width="match_parent"
       android:layout_height="match_parent"/>
 
diff --git a/gradle.properties b/gradle.properties
index 43b0787c49..a9cc943dd6 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -2,7 +2,7 @@
 GROUP=com.google.android.exoplayer
 VERSION_NAME=2.0-snapshot
 
-POM_DESCRIPTION=ExoPlayer.
+POM_DESCRIPTION=ExoPlayer
 
 POM_URL=
 POM_SCM_URL=
@@ -18,9 +18,9 @@ POM_DEVELOPER_NAME=Android
 
 
 systemProp.http.proxyHost=127.0.0.1
-systemProp.http.proxyPort=7777
+systemProp.http.proxyPort=1080
 systemProp.https.proxyHost=127.0.0.1
-systemProp.https.proxyPort=7777
+systemProp.https.proxyPort=1080
 
 org.gradle.jvmargs=-Xmx8072M
 org.gradle.daemon=true
diff --git a/library/all/build.gradle b/library/all/build.gradle
index 79ed9c747b..1f222e60f3 100644
--- a/library/all/build.gradle
+++ b/library/all/build.gradle
@@ -37,3 +37,4 @@ ext {
     releaseDescription = 'The ExoPlayer library (all modules).'
 }
 apply from: '../../publish.gradle'
+// apply from: '../../gradle-mvn-push.gradle'
diff --git a/library/all/gradle.properties b/library/all/gradle.properties
new file mode 100644
index 0000000000..ac87ad2709
--- /dev/null
+++ b/library/all/gradle.properties
@@ -0,0 +1,3 @@
+POM_ARTIFACT_ID=exoplayer-smoothstreaming
+POM_NAME=Exoplayer smoothstreaming
+POM_PACKAGING=aar
\ No newline at end of file
diff --git a/library/core/build.gradle b/library/core/build.gradle
index ecad1e58b5..92c85b91d6 100644
--- a/library/core/build.gradle
+++ b/library/core/build.gradle
@@ -55,4 +55,5 @@ ext {
     releaseArtifact = 'exoplayer-core'
     releaseDescription = 'The ExoPlayer library core module.'
 }
-apply from: '../../publish.gradle'
+// apply from: '../../publish.gradle'
+apply from: '../../gradle-mvn-push.gradle'
diff --git a/library/core/gradle.properties b/library/core/gradle.properties
new file mode 100644
index 0000000000..d50e5de87f
--- /dev/null
+++ b/library/core/gradle.properties
@@ -0,0 +1,3 @@
+POM_ARTIFACT_ID=exoplayer-core
+POM_NAME=Exoplayer Core
+POM_PACKAGING=aar
diff --git a/library/dash/build.gradle b/library/dash/build.gradle
index 2220e5b250..0af3985272 100644
--- a/library/dash/build.gradle
+++ b/library/dash/build.gradle
@@ -51,4 +51,4 @@ ext {
     releaseArtifact = 'exoplayer-dash'
     releaseDescription = 'The ExoPlayer library DASH module.'
 }
-apply from: '../../publish.gradle'
+// apply from: '../../publish.gradle'
diff --git a/library/dash/gradle.properties b/library/dash/gradle.properties
new file mode 100644
index 0000000000..2c749a654c
--- /dev/null
+++ b/library/dash/gradle.properties
@@ -0,0 +1,3 @@
+POM_ARTIFACT_ID=exoplayer-dash
+POM_NAME=Exoplayer DASH
+POM_PACKAGING=aar
\ No newline at end of file
diff --git a/library/hls/build.gradle b/library/hls/build.gradle
index ac77725ca5..e73fbf095d 100644
--- a/library/hls/build.gradle
+++ b/library/hls/build.gradle
@@ -49,4 +49,4 @@ ext {
     releaseArtifact = 'exoplayer-hls'
     releaseDescription = 'The ExoPlayer library HLS module.'
 }
-apply from: '../../publish.gradle'
+// apply from: '../../publish.gradle'
diff --git a/library/hls/gradle.properties b/library/hls/gradle.properties
new file mode 100644
index 0000000000..717fd3b156
--- /dev/null
+++ b/library/hls/gradle.properties
@@ -0,0 +1,3 @@
+POM_ARTIFACT_ID=exoplayer-hls
+POM_NAME=Exoplayer HLS
+POM_PACKAGING=aar
\ No newline at end of file
diff --git a/library/smoothstreaming/build.gradle b/library/smoothstreaming/build.gradle
index ee5a8c4e73..f6e1bf8883 100644
--- a/library/smoothstreaming/build.gradle
+++ b/library/smoothstreaming/build.gradle
@@ -50,4 +50,4 @@ ext {
     releaseArtifact = 'exoplayer-smoothstreaming'
     releaseDescription = 'The ExoPlayer library SmoothStreaming module.'
 }
-apply from: '../../publish.gradle'
+// apply from: '../../publish.gradle'
diff --git a/library/smoothstreaming/gradle.properties b/library/smoothstreaming/gradle.properties
new file mode 100644
index 0000000000..e521c441db
--- /dev/null
+++ b/library/smoothstreaming/gradle.properties
@@ -0,0 +1,3 @@
+POM_ARTIFACT_ID=exoplayer-smoothstreaming
+POM_NAME=Exoplayer Smoothstreaming
+POM_PACKAGING=aar
\ No newline at end of file
diff --git a/library/ui/build.gradle b/library/ui/build.gradle
index 89734ed806..d16eef3f6c 100644
--- a/library/ui/build.gradle
+++ b/library/ui/build.gradle
@@ -46,4 +46,4 @@ ext {
     releaseArtifact = 'exoplayer-ui'
     releaseDescription = 'The ExoPlayer library UI module.'
 }
-apply from: '../../publish.gradle'
+// apply from: '../../publish.gradle'
diff --git a/library/ui/gradle.properties b/library/ui/gradle.properties
new file mode 100644
index 0000000000..f26c8cc20a
--- /dev/null
+++ b/library/ui/gradle.properties
@@ -0,0 +1,3 @@
+POM_ARTIFACT_ID=exoplayer-ui
+POM_NAME=Exoplayer UI
+POM_PACKAGING=aar
\ No newline at end of file
