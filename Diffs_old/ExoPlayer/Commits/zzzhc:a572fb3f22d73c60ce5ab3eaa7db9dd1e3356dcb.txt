diff --git a/library/core/src/main/java/com/google/android/exoplayer2/Format.java b/library/core/src/main/java/com/google/android/exoplayer2/Format.java
index b2bd20f0fe..37539845dc 100644
--- a/library/core/src/main/java/com/google/android/exoplayer2/Format.java
+++ b/library/core/src/main/java/com/google/android/exoplayer2/Format.java
@@ -180,8 +180,8 @@
   // Video.
 
   /**
-   * @deprecated Use {@link #createVideoContainerFormat(String, String, String, String, String, int,
-   *     int, int, float, List, int, int)} instead.
+   * @deprecated Use {@link #createVideoContainerFormat(String, String, String, String, String,
+   *     Metadata, int, int, int, float, List, int, int)} instead.
    */
   @Deprecated
   public static Format createVideoContainerFormat(
@@ -201,6 +201,7 @@ public static Format createVideoContainerFormat(
         containerMimeType,
         sampleMimeType,
         codecs,
+        /* metadata= */ null,
         bitrate,
         width,
         height,
@@ -216,6 +217,7 @@ public static Format createVideoContainerFormat(
       @Nullable String containerMimeType,
       String sampleMimeType,
       String codecs,
+      @Nullable Metadata metadata,
       int bitrate,
       int width,
       int height,
@@ -230,7 +232,7 @@ public static Format createVideoContainerFormat(
         roleFlags,
         bitrate,
         codecs,
-        /* metadata= */ null,
+        metadata,
         containerMimeType,
         sampleMimeType,
         /* maxInputSize= */ NO_VALUE,
@@ -363,8 +365,8 @@ public static Format createVideoSampleFormat(
   // Audio.
 
   /**
-   * @deprecated Use {@link #createAudioContainerFormat(String, String, String, String, String, int,
-   *     int, int, List, int, int, String)} instead.
+   * @deprecated Use {@link #createAudioContainerFormat(String, String, String, String, String,
+   *     Metadata, int, int, int, List, int, int, String)} instead.
    */
   @Deprecated
   public static Format createAudioContainerFormat(
@@ -384,6 +386,7 @@ public static Format createAudioContainerFormat(
         containerMimeType,
         sampleMimeType,
         codecs,
+        /* metadata= */ null,
         bitrate,
         channelCount,
         sampleRate,
@@ -399,6 +402,7 @@ public static Format createAudioContainerFormat(
       @Nullable String containerMimeType,
       @Nullable String sampleMimeType,
       @Nullable String codecs,
+      @Nullable Metadata metadata,
       int bitrate,
       int channelCount,
       int sampleRate,
@@ -413,7 +417,7 @@ public static Format createAudioContainerFormat(
         roleFlags,
         bitrate,
         codecs,
-        /* metadata= */ null,
+        metadata,
         containerMimeType,
         sampleMimeType,
         /* maxInputSize= */ NO_VALUE,
diff --git a/library/dash/src/main/java/com/google/android/exoplayer2/source/dash/manifest/DashManifestParser.java b/library/dash/src/main/java/com/google/android/exoplayer2/source/dash/manifest/DashManifestParser.java
index 8affcb27ce..9f6cce672e 100644
--- a/library/dash/src/main/java/com/google/android/exoplayer2/source/dash/manifest/DashManifestParser.java
+++ b/library/dash/src/main/java/com/google/android/exoplayer2/source/dash/manifest/DashManifestParser.java
@@ -596,6 +596,7 @@ protected Format buildFormat(
             containerMimeType,
             sampleMimeType,
             codecs,
+            /* metadata= */ null,
             bitrate,
             width,
             height,
@@ -610,6 +611,7 @@ protected Format buildFormat(
             containerMimeType,
             sampleMimeType,
             codecs,
+            /* metadata= */ null,
             bitrate,
             audioChannels,
             audioSamplingRate,
diff --git a/library/dash/src/test/java/com/google/android/exoplayer2/source/dash/DashUtilTest.java b/library/dash/src/test/java/com/google/android/exoplayer2/source/dash/DashUtilTest.java
index a53b1ff80d..6e769b72e1 100644
--- a/library/dash/src/test/java/com/google/android/exoplayer2/source/dash/DashUtilTest.java
+++ b/library/dash/src/test/java/com/google/android/exoplayer2/source/dash/DashUtilTest.java
@@ -80,6 +80,7 @@ private static Representation newRepresentations(DrmInitData drmInitData) {
             MimeTypes.VIDEO_MP4,
             MimeTypes.VIDEO_H264,
             /* codecs= */ "",
+            /* metadata= */ null,
             Format.NO_VALUE,
             /* width= */ 1024,
             /* height= */ 768,
diff --git a/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/HlsMediaPeriod.java b/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/HlsMediaPeriod.java
index 8053958c2b..f4f91cf1b4 100644
--- a/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/HlsMediaPeriod.java
+++ b/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/HlsMediaPeriod.java
@@ -787,6 +787,7 @@ private static Format deriveVideoFormat(Format variantFormat) {
         variantFormat.containerMimeType,
         sampleMimeType,
         codecs,
+        /* metadata= */ null,
         variantFormat.bitrate,
         variantFormat.width,
         variantFormat.height,
@@ -829,6 +830,7 @@ private static Format deriveAudioFormat(
         variantFormat.containerMimeType,
         sampleMimeType,
         codecs,
+        /* metadata= */ null,
         bitrate,
         channelCount,
         /* sampleRate= */ Format.NO_VALUE,
diff --git a/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/playlist/HlsPlaylistParser.java b/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/playlist/HlsPlaylistParser.java
index 42b27f259f..030520f8cb 100644
--- a/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/playlist/HlsPlaylistParser.java
+++ b/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/playlist/HlsPlaylistParser.java
@@ -349,6 +349,7 @@ private static HlsMasterPlaylist parseMasterPlaylist(LineIterator iterator, Stri
                 /* containerMimeType= */ MimeTypes.APPLICATION_M3U8,
                 /* sampleMimeType= */ null,
                 codecs,
+                /* metadata= */ null,
                 bitrate,
                 width,
                 height,
@@ -422,6 +423,7 @@ private static HlsMasterPlaylist parseMasterPlaylist(LineIterator iterator, Stri
                       /* containerMimeType= */ MimeTypes.APPLICATION_M3U8,
                       sampleMimeType,
                       codecs,
+                      /* metadata= */ null,
                       /* bitrate= */ Format.NO_VALUE,
                       width,
                       height,
@@ -451,6 +453,7 @@ private static HlsMasterPlaylist parseMasterPlaylist(LineIterator iterator, Stri
                   /* containerMimeType= */ MimeTypes.APPLICATION_M3U8,
                   sampleMimeType,
                   codecs,
+                  /* metadata= */ null,
                   /* bitrate= */ Format.NO_VALUE,
                   channelCount,
                   /* sampleRate= */ Format.NO_VALUE,
diff --git a/library/hls/src/test/java/com/google/android/exoplayer2/source/hls/HlsMediaPeriodTest.java b/library/hls/src/test/java/com/google/android/exoplayer2/source/hls/HlsMediaPeriodTest.java
index 93b8be3346..847e46591d 100644
--- a/library/hls/src/test/java/com/google/android/exoplayer2/source/hls/HlsMediaPeriodTest.java
+++ b/library/hls/src/test/java/com/google/android/exoplayer2/source/hls/HlsMediaPeriodTest.java
@@ -128,6 +128,7 @@ private static Variant createMuxedVideoAudioVariant(int bitrate) {
             /* containerMimeType= */ MimeTypes.APPLICATION_M3U8,
             /* sampleMimeType= */ null,
             /* codecs= */ "avc1.100.41,mp4a.40.2",
+            /* metadata= */ null,
             bitrate,
             /* width= */ Format.NO_VALUE,
             /* height= */ Format.NO_VALUE,
@@ -145,6 +146,7 @@ private static Variant createAudioOnlyVariant(int bitrate) {
             /* containerMimeType= */ MimeTypes.APPLICATION_M3U8,
             /* sampleMimeType= */ null,
             /* codecs= */ "mp4a.40.2",
+            /* metadata= */ null,
             bitrate,
             /* width= */ Format.NO_VALUE,
             /* height= */ Format.NO_VALUE,
@@ -177,6 +179,7 @@ private static Format createAudioFormat(String language) {
         /* containerMimeType= */ MimeTypes.APPLICATION_M3U8,
         MimeTypes.getMediaMimeType("mp4a.40.2"),
         /* codecs= */ "mp4a.40.2",
+        /* metadata= */ null,
         /* bitrate= */ Format.NO_VALUE,
         /* channelCount= */ Format.NO_VALUE,
         /* sampleRate= */ Format.NO_VALUE,
diff --git a/library/smoothstreaming/src/main/java/com/google/android/exoplayer2/source/smoothstreaming/manifest/SsManifestParser.java b/library/smoothstreaming/src/main/java/com/google/android/exoplayer2/source/smoothstreaming/manifest/SsManifestParser.java
index 03e9e91e22..c08a867f37 100644
--- a/library/smoothstreaming/src/main/java/com/google/android/exoplayer2/source/smoothstreaming/manifest/SsManifestParser.java
+++ b/library/smoothstreaming/src/main/java/com/google/android/exoplayer2/source/smoothstreaming/manifest/SsManifestParser.java
@@ -681,6 +681,7 @@ public void parseStartTag(XmlPullParser parser) throws ParserException {
                 MimeTypes.VIDEO_MP4,
                 sampleMimeType,
                 /* codecs= */ null,
+                /* metadata= */ null,
                 bitrate,
                 width,
                 height,
@@ -706,6 +707,7 @@ public void parseStartTag(XmlPullParser parser) throws ParserException {
                 MimeTypes.AUDIO_MP4,
                 sampleMimeType,
                 /* codecs= */ null,
+                /* metadata= */ null,
                 bitrate,
                 channels,
                 samplingRate,
