diff --git a/demos/ima/src/main/AndroidManifest.xml b/demos/ima/src/main/AndroidManifest.xml
index 85439018fd..d006779e4e 100644
--- a/demos/ima/src/main/AndroidManifest.xml
+++ b/demos/ima/src/main/AndroidManifest.xml
@@ -21,6 +21,7 @@
   <uses-sdk/>
 
   <application android:label="@string/application_name" android:icon="@mipmap/ic_launcher"
+      android:networkSecurityConfig="@xml/network_security_config"
       android:largeHeap="true" android:allowBackup="false">
 
     <activity android:name="com.google.android.exoplayer2.imademo.MainActivity"
diff --git a/demos/ima/src/main/java/com/google/android/exoplayer2/imademo/PlayerManager.java b/demos/ima/src/main/java/com/google/android/exoplayer2/imademo/PlayerManager.java
index 3caf7f0c16..92e0fe675f 100644
--- a/demos/ima/src/main/java/com/google/android/exoplayer2/imademo/PlayerManager.java
+++ b/demos/ima/src/main/java/com/google/android/exoplayer2/imademo/PlayerManager.java
@@ -32,6 +32,7 @@
 import com.google.android.exoplayer2.ui.PlayerView;
 import com.google.android.exoplayer2.upstream.DataSource;
 import com.google.android.exoplayer2.upstream.DefaultDataSourceFactory;
+import com.google.android.exoplayer2.util.EventLogger;
 import com.google.android.exoplayer2.util.Util;
 
 /** Manages the {@link ExoPlayer}, the IMA plugin and all video playback. */
@@ -54,6 +55,7 @@ public PlayerManager(Context context) {
   public void init(Context context, PlayerView playerView) {
     // Create a player instance.
     player = new SimpleExoPlayer.Builder(context).build();
+    player.addAnalyticsListener(new EventLogger(null));
     adsLoader.setPlayer(player);
     playerView.setPlayer(player);
 
diff --git a/demos/ima/src/main/res/raw/charles.pem b/demos/ima/src/main/res/raw/charles.pem
new file mode 100644
index 0000000000..7a656f95c1
--- /dev/null
+++ b/demos/ima/src/main/res/raw/charles.pem
@@ -0,0 +1,27 @@
+-----BEGIN CERTIFICATE-----
+MIIFajCCBFKgAwIBAgIGAVLqa4q1MA0GCSqGSIb3DQEBCwUAMIG5MUswSQYDVQQDDEJDaGFybGVz
+IFByb3h5IEN1c3RvbSBSb290IENlcnRpZmljYXRlIChidWlsdCBvbiB6YWlyLCAxNiBGZWIgMjAx
+NikxJDAiBgNVBAsMG2h0dHA6Ly9jaGFybGVzcHJveHkuY29tL3NzbDERMA8GA1UECgwIWEs3MiBM
+dGQxETAPBgNVBAcMCEF1Y2tsYW5kMREwDwYDVQQIDAhBdWNrbGFuZDELMAkGA1UEBhMCTlowHhcN
+MDAwMTAxMDAwMDAwWhcNNDUwNDE0MTQxMTAyWjCBuTFLMEkGA1UEAwxCQ2hhcmxlcyBQcm94eSBD
+dXN0b20gUm9vdCBDZXJ0aWZpY2F0ZSAoYnVpbHQgb24gemFpciwgMTYgRmViIDIwMTYpMSQwIgYD
+VQQLDBtodHRwOi8vY2hhcmxlc3Byb3h5LmNvbS9zc2wxETAPBgNVBAoMCFhLNzIgTHRkMREwDwYD
+VQQHDAhBdWNrbGFuZDERMA8GA1UECAwIQXVja2xhbmQxCzAJBgNVBAYTAk5aMIIBIjANBgkqhkiG
+9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1abUctUHG6hx6ZyXc8zMdCse1vCwcJG7QouI5OG1Rtnj7Dnn
+6mbndiPEn6SO+ixzE4IZ4I+EsV7MlJerCyUTpYUP5e65YW6u009SfmlLflf7vedK60RA8XoCZCaO
+TwcLGxnKNXdBDBeGtzZfP2hvN0ysSylE3gIuxIqOc8EZVkw2Q6BfhyMHnGaZ3dxhRqj6GU/ZWnM5
+aCEOcIQFX0NAiLOFk0Bpxl+Ml3GX6UJb1vM1HE9fuiPTwOvb8HOhjZuwEEtzOSxCJExlDwU21EY5
+xGkEHhJupQHe/j3PnjtXUIYqZklgpQIFNFrqudCoz7a4PxEDd6egFlwCS0LYUHYhCQIDAQABo4IB
+dDCCAXAwDwYDVR0TAQH/BAUwAwEB/zCCASwGCWCGSAGG+EIBDQSCAR0TggEZVGhpcyBSb290IGNl
+cnRpZmljYXRlIHdhcyBnZW5lcmF0ZWQgYnkgQ2hhcmxlcyBQcm94eSBmb3IgU1NMIFByb3h5aW5n
+LiBJZiB0aGlzIGNlcnRpZmljYXRlIGlzIHBhcnQgb2YgYSBjZXJ0aWZpY2F0ZSBjaGFpbiwgdGhp
+cyBtZWFucyB0aGF0IHlvdSdyZSBicm93c2luZyB0aHJvdWdoIENoYXJsZXMgUHJveHkgd2l0aCBT
+U0wgUHJveHlpbmcgZW5hYmxlZCBmb3IgdGhpcyB3ZWJzaXRlLiBQbGVhc2Ugc2VlIGh0dHA6Ly9j
+aGFybGVzcHJveHkuY29tL3NzbCBmb3IgbW9yZSBpbmZvcm1hdGlvbi4wDgYDVR0PAQH/BAQDAgIE
+MB0GA1UdDgQWBBQCsSVzW+77pGu/5VeGH+f+oQF28zANBgkqhkiG9w0BAQsFAAOCAQEAmXfXR8sf
+Ic5+uQJUR/7alnkv2yBDr+1HqDvOVcBqE97DC7GuegEP/CZf6x4oYTbDGy4GOeBD8lHYLA2hKS1w
+wnNgSc2n96S/5OR7PUidF14g+3iCcZ8BhsPjMElaTKMjNptdYEFQ4nQXxlOv2bKXdkCTNV+WkFmH
+NdNt8Go0ImicHNMmG8ZaomPi6lqEj+ZTkgRSYDoKxLFPhRUZLL11zv5BYZS8fclaLYPVXpV99mQ/
+7uS9vv0CBVple7AuitBntQFq9I18PBiVRURB/SccX17LOHhTTgWcciQjY3ekUd8PvkrqhgWcD/Ph
+sRpNlMCs9N9DDBUBIP4O0BF7TEJwsQ==
+-----END CERTIFICATE-----
diff --git a/demos/ima/src/main/res/values/strings.xml b/demos/ima/src/main/res/values/strings.xml
index 2eb5700bf0..ef7d0a98f4 100644
--- a/demos/ima/src/main/res/values/strings.xml
+++ b/demos/ima/src/main/res/values/strings.xml
@@ -17,8 +17,10 @@
 
   <string name="application_name">Exo IMA Demo</string>
 
-  <string name="content_url"><![CDATA[https://storage.googleapis.com/exoplayer-test-media-1/mkv/android-screens-lavf-56.36.100-aac-avc-main-1280x720.mkv]]></string>
+  <!--<string name="content_url"><![CDATA[https://storage.googleapis.com/exoplayer-test-media-1/mkv/android-screens-lavf-56.36.100-aac-avc-main-1280x720.mkv]]></string>-->
+  <string name="content_url"><![CDATA[https://raw.githubusercontent.com/zzzhc/storage/master/hls/index.m3u8]]></string>
 
-  <string name="ad_tag_url"><![CDATA[https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator=]]></string>
+  <!--<string name="ad_tag_url"><![CDATA[https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator=]]></string>-->
+  <string name="ad_tag_url"><![CDATA[https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpostpod&cmsid=496&vid=short_onecue&correlator=]]></string>
 
 </resources>
diff --git a/demos/ima/src/main/res/xml/network_security_config.xml b/demos/ima/src/main/res/xml/network_security_config.xml
new file mode 100644
index 0000000000..c4d9f1ebc1
--- /dev/null
+++ b/demos/ima/src/main/res/xml/network_security_config.xml
@@ -0,0 +1,10 @@
+<?xml version="1.0" encoding="utf-8"?>
+<network-security-config>
+  <debug-overrides>
+    <trust-anchors>
+      <!-- Trust user added CAs while debuggable only -->
+      <certificates src="user" />
+    </trust-anchors>
+  </debug-overrides>
+  <base-config cleartextTrafficPermitted="true" />
+</network-security-config>
\ No newline at end of file
diff --git a/extensions/ima/src/main/java/com/google/android/exoplayer2/ext/ima/ImaAdsLoader.java b/extensions/ima/src/main/java/com/google/android/exoplayer2/ext/ima/ImaAdsLoader.java
index cf0ea79da6..afbe5050ee 100644
--- a/extensions/ima/src/main/java/com/google/android/exoplayer2/ext/ima/ImaAdsLoader.java
+++ b/extensions/ima/src/main/java/com/google/android/exoplayer2/ext/ima/ImaAdsLoader.java
@@ -269,7 +269,7 @@ public ImaAdsLoader buildForAdsResponse(String adsResponse) {
     }
   }
 
-  private static final boolean DEBUG = false;
+  private static final boolean DEBUG = true;
   private static final String TAG = "ImaAdsLoader";
 
   /**
