diff --git a/CHANGELOG.md b/CHANGELOG.md
index a61380393b..61c0767699 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -4,7 +4,7 @@
 * [ObjectServer] Added support for Client Resync which automatically will recover the local Realm in case the server is rolled back. This largely replaces the Client Reset mechanism. Can be configured using `SyncConfiguration.Builder.clientResyncMode()`. (Issue [#6487](https://github.com/realm/realm-java/issues/6487))
 
 ### Fixed
-* None.
+* Huawei devices reporting `Permission denied` when opening a Realm file after an app upgrade or factory reset. This does not automatically fix already existing Realm files. See [this FAQ entry](https://realm.io/docs/java/latest/#huawei-permission-denied) for more details. (Issue [#5715](https://github.com/realm/realm-java/issues/5715))
 
 ### Compatibility
 * Realm Object Server: 3.21.0 or later.
@@ -12,8 +12,10 @@
 * APIs are backwards compatible with all previous release of realm-java in the 5.x.y series.
 
 ### Internal
-* Updated to Object Store commit: 2786752758a63c8d9c77b8caee0a97d9eddb11ca.
 * Implemented direct access to sync workers on Cloud, bypassing the Sync Proxy: the binding will override the sync session's url prefix if the token refresh response for a realm contains a sync worker path field.
+* Updated to Object Store commit: 9f19d79fde248ba37cef0bd52fe64984f9d71be0.
+* Updated to Realm Sync 4.7.4.
+* Updated to Realm Core 5.23.2.
 
 
 ## 5.14.1(YYYY-MM-DD)
diff --git a/Jenkinsfile b/Jenkinsfile
index 0d12486c6b..a820d8a31f 100644
--- a/Jenkinsfile
+++ b/Jenkinsfile
@@ -76,14 +76,6 @@ try {
                     }
                   }
 
-                  stage('Gradle plugin tests') {
-                    try {
-                      gradle('gradle-plugin', 'check')
-                    } finally {
-                      storeJunitResults 'gradle-plugin/build/test-results/test/TEST-*.xml'
-                    }
-                  }
-
                   stage('Realm Transformer tests') {
                     try {
                       gradle('realm-transformer', 'check')
@@ -121,6 +113,16 @@ try {
                     }
                   }
 
+                  // Gradle plugin tests require that artifacts are available, so this
+                  // step needs to be after the instrumentation tests
+                  stage('Gradle plugin tests') {
+                    try {
+                      gradle('gradle-plugin', 'check --debug')
+                    } finally {
+                      storeJunitResults 'gradle-plugin/build/test-results/test/TEST-*.xml'
+                    }
+                  }
+
                   // TODO: add support for running monkey on the example apps
 
                   if (['master'].contains(env.BRANCH_NAME)) {
diff --git a/README.md b/README.md
index 87398a1aa6..de05f96a84 100644
--- a/README.md
+++ b/README.md
@@ -77,10 +77,17 @@ You may unzip the file wherever you choose.  For macOS, a suggested location is
  * If you will be building with Android Studio, you will need to tell it to use the correct NDK.  To do this, define the variable `ndk.dir` in `realm/local.properties` and assign it the full pathname of the directory that you unzipped above.  Note that there is a `local.properites` in the root directory that is *not* the one that needs to be edited.
 
     ```
-    ndk.dir=/Users/brian/Library/Android/android-ndk-r10e/r10e
+    ndk.dir=/Users/brian/Library/Android/android-ndk-r10e
 
     ```
 
+* You also need a file called `source.properties` to the `android-ndk-r10e` folder with the following content:
+
+    ```
+    Pkg.Desc = Android NDK
+    Pkg.Revision = 10.0.0
+    ```
+
  * Add two environment variables to your profile (presuming you installed the NDK in `~/Library/android-ndk-r10e`):
 
     ```
diff --git a/dependencies.list b/dependencies.list
index 6c5ad0f65f..1255617b1f 100644
--- a/dependencies.list
+++ b/dependencies.list
@@ -1,7 +1,7 @@
 # Realm Sync release used by Realm Java (This includes Realm Core)
 # https://github.com/realm/realm-sync/releases
-REALM_SYNC_VERSION=4.7.1
-REALM_SYNC_SHA256=28c37d53e63d80db6be1f3e566adac7eea291f496be2b5274cfb94658b435d3d
+REALM_SYNC_VERSION=4.7.4
+REALM_SYNC_SHA256=a7ec9b32a137760c317df15279cc33ffdb63b8663e9ce789a345628afb8424a7
 
 # Object Server Release used by Integration tests. Installed using NPM.
 # Use `npm view realm-object-server versions` to get a list of available versions.
diff --git a/gradle-plugin/build.gradle b/gradle-plugin/build.gradle
index ea02b04bd6..867ff9fb5c 100644
--- a/gradle-plugin/build.gradle
+++ b/gradle-plugin/build.gradle
@@ -40,6 +40,10 @@ configurations {
     compile.extendsFrom provided
 }
 
+test {
+    testLogging.showStandardStreams = true
+}
+
 sourceSets {
     main {
         compileClasspath += configurations.provided
diff --git a/gradle-plugin/src/main/groovy/io/realm/gradle/Realm.groovy b/gradle-plugin/src/main/groovy/io/realm/gradle/Realm.groovy
index 7abd2ba74a..f1eff15f9c 100644
--- a/gradle-plugin/src/main/groovy/io/realm/gradle/Realm.groovy
+++ b/gradle-plugin/src/main/groovy/io/realm/gradle/Realm.groovy
@@ -73,7 +73,17 @@ class Realm implements Plugin<Project> {
         project.android.registerTransform(new RealmTransformer(project))
 
         project.afterEvaluate {
-            if (project.repositories.isEmpty()) {
+            // The Android Gradle Plugin automatically adds the local maven repository
+            // found in the Android SDK, so we need to filter that out.
+            if (project.repositories.findAll {
+                def url = it.url.toString()
+                if (url.endsWith('/')) {
+                    url = url.substring(0, url.length() - 1)
+                }
+                return (!url.endsWith("extras/m2repository")
+                        && !url.endsWith("extras/android/m2repository")
+                        && !url.endsWith("extras/google/m2repository"))
+            }.isEmpty()) {
                 // If no repository was defined, we add jCenter
                 // Calling this automatically adds jCenter to the list of repositories
                 project.getRepositories().jcenter()
diff --git a/gradle-plugin/src/test/groovy/io/realm/gradle/PluginTest.groovy b/gradle-plugin/src/test/groovy/io/realm/gradle/PluginTest.groovy
index f6e7b97594..cfe500208a 100644
--- a/gradle-plugin/src/test/groovy/io/realm/gradle/PluginTest.groovy
+++ b/gradle-plugin/src/test/groovy/io/realm/gradle/PluginTest.groovy
@@ -59,7 +59,6 @@ class PluginTest {
             }
             dependencies {
                 classpath "com.android.tools.build:gradle:${projectDependencies.get("GRADLE_BUILD_TOOLS")}"
-                classpath 'com.jakewharton.sdkmanager:gradle-plugin:0.12.0'
             }
         }
 
@@ -111,9 +110,14 @@ class PluginTest {
     @Test
     void pluginAddsRightRepositories_noRepositorySet() {
         project.buildscript {
+            repositories {
+                maven {
+                    url 'https://maven.google.com/'
+                }
+                jcenter()
+            }
             dependencies {
                 classpath "com.android.tools.build:gradle:${projectDependencies.get("GRADLE_BUILD_TOOLS")}"
-                classpath 'com.jakewharton.sdkmanager:gradle-plugin:0.12.0'
             }
         }
 
@@ -135,27 +139,26 @@ class PluginTest {
 
         project.evaluate()
 
-        assertTrue(project.buildscript.repositories.isEmpty())
-
-        assertTrue(project.repositories.size() == 1)
-        assertTrue(project.repositories.first().url.host == 'jcenter.bintray.com')
+        assertEquals(2, project.buildscript.repositories.size())
+        assertEquals(4, project.repositories.size()) // The Android plugin adds 3 different local repos
+        assertEquals('jcenter.bintray.com', project.repositories.last().url.host)
     }
 
     @Test
     void pluginAddsRightRepositories_withRepositoriesSet() {
         project.buildscript {
             repositories {
+                jcenter()
                 maven {
                     url 'https://maven.google.com/'
                 }
             }
             dependencies {
                 classpath "com.android.tools.build:gradle:${projectDependencies.get("GRADLE_BUILD_TOOLS")}"
-                classpath 'com.jakewharton.sdkmanager:gradle-plugin:0.12.0'
             }
         }
 
-        repositories {
+        project.repositories {
             google()
         }
 
@@ -177,11 +180,11 @@ class PluginTest {
 
         project.evaluate()
 
-        assertTrue(project.buildscript.repositories.size() == 1)
-        assertTrue(project.buildscript.repositories.first().url.host == 'maven.google.com')
+        assertEquals(2, project.buildscript.repositories.size())
+        assertEquals('maven.google.com', project.buildscript.repositories.last().url.host)
 
-        assertTrue(project.repositories.size() == 1)
-        assertTrue(project.repositories.first().url.host == 'dl.google.com')
+        assertEquals(4, project.repositories.size())
+        assertEquals('dl.google.com', project.repositories.last().url.host)
     }
 
     @Test
@@ -191,10 +194,10 @@ class PluginTest {
                 maven {
                     url 'https://maven.google.com/'
                 }
+                jcenter()
             }
             dependencies {
                 classpath "com.android.tools.build:gradle:${projectDependencies.get("GRADLE_BUILD_TOOLS")}"
-                classpath 'com.jakewharton.sdkmanager:gradle-plugin:0.12.0'
             }
         }
 
@@ -205,7 +208,7 @@ class PluginTest {
         project.apply plugin: 'com.android.application'
         project.apply plugin: 'realm-android'
 
-        repositories {
+        project.repositories {
             google()
         }
 
@@ -220,11 +223,11 @@ class PluginTest {
 
         project.evaluate()
 
-        assertTrue(project.buildscript.repositories.size() == 1)
-        assertTrue(project.buildscript.repositories.first().url.host == 'maven.google.com')
+        assertEquals(2, project.buildscript.repositories.size())
+        assertEquals('maven.google.com', project.buildscript.repositories.first().url.host)
 
-        assertTrue(project.repositories.size() == 1)
-        assertTrue(project.repositories.first().url.host == 'dl.google.com')
+        assertEquals(4, project.repositories.size())
+        assertEquals('dl.google.com', project.repositories.last().url.host)
     }
 
     private static boolean containsUrl(RepositoryHandler repositories, String url) {
diff --git a/realm/realm-library/src/main/cpp/object-store b/realm/realm-library/src/main/cpp/object-store
index 2786752758..9f19d79fde 160000
--- a/realm/realm-library/src/main/cpp/object-store
+++ b/realm/realm-library/src/main/cpp/object-store
@@ -1 +1 @@
-Subproject commit 2786752758a63c8d9c77b8caee0a97d9eddb11ca
+Subproject commit 9f19d79fde248ba37cef0bd52fe64984f9d71be0
