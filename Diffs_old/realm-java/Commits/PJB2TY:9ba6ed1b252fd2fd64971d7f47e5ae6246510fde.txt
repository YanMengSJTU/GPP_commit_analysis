diff --git a/CHANGELOG.md b/CHANGELOG.md
index 46d46cebd1..7f01af61e2 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -1,19 +1,34 @@
-## 5.4.0 (YYYY-MM-DD)
+## 5.4.1 (YYYY-MM-DD)
 
-### Enhancements
+### Bug Fixes
 
-* Removing a ChangeListener on invalid objects or `RealmResults` should warn instead of throwing (fixes #5855).
+* Compile time crash if no `targetSdk` was defined in Gradle. This was introduced in 5.4.0 (#6082).
+* Fix Realm Gradle Plugin adding dependencies in a way incompatible with Kotlin Android Extensions. This was introduced in Realm Java 5.4.0 (#6080).
 
-### Credits
 
-* Thanks to @kageiit for removing Groovy from the Realm Transformer (#3971).
+## 5.4.0 (2018-07-22)
 
+### Enhancements
 
-## 5.3.2 (YYYY-MM-DD)
+* Removing a ChangeListener on invalid objects or `RealmResults` should warn instead of throwing (fixes #5855).
 
 ### Bug Fixes
 
 * [ObjectServer] Using Android Network Security Configuration is necessary to install the custom root CA for tests (API >= 24) (#5970).
+* Fixes issue with the incremental build causing direct access to model without accessor to fail (#6056).
+* `RealmQuery.distinct()` is now correctly applied when calling `RealmQuery.count()` (#5958).
+
+### Internal
+
+* Upgraded to Realm Core 5.7.2
+* Upgraded to Realm Sync 3.8.1
+* [ObjectServer] Improved performance when integrating changes from the server.
+* Added extra information about the state of the Realm file if an exception is thrown due to Realm not being able to open it.
+* Removed internal dependency on Groovy in the Realm Transformer (#3971).
+
+### Credits
+
+* Thanks to @kageiit for removing Groovy from the Realm Transformer (#3971).
 
 
 ## 5.3.1 (2018-06-19)
diff --git a/dependencies.list b/dependencies.list
index 38c280404a..34ad7bb009 100644
--- a/dependencies.list
+++ b/dependencies.list
@@ -1,8 +1,8 @@
 # Realm Sync Core release used by Realm Java
 # https://github.com/realm/realm-sync/releases
-REALM_SYNC_VERSION=3.5.6
-REALM_SYNC_SHA256=f24e404bbd649d3f5071ece7eb8ab7d667a3d2a95dc83766ebf8e0534b83125d
+REALM_SYNC_VERSION=3.8.1
+REALM_SYNC_SHA256=346bc1cfe8e77d20d268ca002a4990dceb29e9d5aa08f9201be80143ebde85a3
 
 # Object Server Release used by Integration tests. Installed using NPM.
 # Use `npm view realm-object-server versions` to get a list of available versions.
-REALM_OBJECT_SERVER_VERSION=3.6.6
+REALM_OBJECT_SERVER_VERSION=3.9.2
diff --git a/gradle-plugin/src/main/groovy/io/realm/gradle/Realm.groovy b/gradle-plugin/src/main/groovy/io/realm/gradle/Realm.groovy
index b566c100bc..5331cb1cd2 100644
--- a/gradle-plugin/src/main/groovy/io/realm/gradle/Realm.groovy
+++ b/gradle-plugin/src/main/groovy/io/realm/gradle/Realm.groovy
@@ -19,6 +19,7 @@ package io.realm.gradle
 import com.android.build.gradle.AppPlugin
 import com.android.build.gradle.LibraryPlugin
 import com.neenbedankt.gradle.androidapt.AndroidAptPlugin
+import io.realm.gradle.RealmPluginExtension
 import io.realm.transformer.RealmTransformer
 import org.gradle.api.GradleException
 import org.gradle.api.Plugin
@@ -47,8 +48,20 @@ class Realm implements Plugin<Project> {
         def hasAnnotationProcessorConfiguration = project.getConfigurations().findByName('annotationProcessor') != null
         // TODO add a parameter in 'realm' block if this should be specified by users
         def preferAptOnKotlinProject = false
-
+        def dependencyConfigurationName = getDependencyConfigurationName(project)
         def extension = project.extensions.create('realm', RealmPluginExtension)
+        extension.addPropertyListener(RealmPluginExtension.KEY_KOTLIN_EXTENSIONS_ENABLED, new RealmPluginExtension.PropertyChangedListener<Boolean>() {
+            @Override
+            void onChange(Boolean checked) {
+                setDependencies(project, dependencyConfigurationName, extension.syncEnabled, extension.kotlinExtensionsEnabled)
+            }
+        })
+        extension.addPropertyListener(RealmPluginExtension.KEY_SYNC_ENABLED, new RealmPluginExtension.PropertyChangedListener<Boolean>() {
+            @Override
+            void onChange(Boolean checked) {
+                setDependencies(project, dependencyConfigurationName, extension.syncEnabled, extension.kotlinExtensionsEnabled)
+            }
+        })
         extension.kotlinExtensionsEnabled = useKotlinExtensionsDefault
 
         if (shouldApplyAndroidAptPlugin(usesAptPlugin, isKotlinProject,
@@ -58,7 +71,6 @@ class Realm implements Plugin<Project> {
         }
 
         project.android.registerTransform(new RealmTransformer(project))
-        def dependencyConfigurationName = getDependencyConfigurationName(project)
 
         project.repositories.add(project.getRepositories().jcenter())
         project.dependencies.add(dependencyConfigurationName, "io.realm:realm-annotations:${Version.VERSION}")
@@ -73,10 +85,6 @@ class Realm implements Plugin<Project> {
             project.dependencies.add("annotationProcessor", "io.realm:realm-annotations-processor:${Version.VERSION}")
             project.dependencies.add("androidTestAnnotationProcessor", "io.realm:realm-annotations-processor:${Version.VERSION}")
         }
-
-        project.afterEvaluate {
-            setDependencies(project, dependencyConfigurationName, extension.syncEnabled, extension.kotlinExtensionsEnabled)
-        }
     }
 
     private static boolean isTransformAvailable() {
@@ -119,9 +127,11 @@ class Realm implements Plugin<Project> {
         return !hasAnnotationProcessorConfiguration
     }
 
+    // This will setup the required dependencies.
+    // Due to how Gradle works, we have no choice but to run this code every time any of the parameters
+    // in the Realm extension is changed.
     private static void setDependencies(Project project, String dependencyConfigurationName, boolean syncEnabled, boolean kotlinExtensionsEnabled) {
         // remove libraries first
-        
         def iterator = project.getConfigurations().getByName(dependencyConfigurationName).getDependencies().iterator()
         while (iterator.hasNext()) {
             def item = iterator.next()
diff --git a/latest b/latest
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/realm-transformer/src/main/java/io/realm/gradle/RealmPluginExtension.java b/realm-transformer/src/main/java/io/realm/gradle/RealmPluginExtension.java
index 3ec0d8ee73..a83fed35f0 100644
--- a/realm-transformer/src/main/java/io/realm/gradle/RealmPluginExtension.java
+++ b/realm-transformer/src/main/java/io/realm/gradle/RealmPluginExtension.java
@@ -18,8 +18,54 @@
 
 import org.gradle.api.tasks.Input;
 
+import java.util.LinkedHashMap;
+import java.util.Map;
+
 public class RealmPluginExtension {
 
-    @Input public boolean syncEnabled = false;
-    @Input public boolean kotlinExtensionsEnabled = false;
+    public static final String KEY_SYNC_ENABLED = "syncEnabled";
+    public static final String KEY_KOTLIN_EXTENSIONS_ENABLED = "kotlinExtensionsEnabled";
+
+    private boolean syncEnabled;
+    private boolean kotlinExtensionsEnabled;
+    private Map<String, PropertyChangedListener> listeners = new LinkedHashMap<>();
+
+    @Input
+    public boolean isSyncEnabled() {
+        return syncEnabled;
+    }
+
+    public void setSyncEnabled(boolean syncEnabled) {
+        this.syncEnabled = syncEnabled;
+        notifyChange(KEY_SYNC_ENABLED, syncEnabled);
+    }
+
+    @Input
+    public boolean isKotlinExtensionsEnabled() {
+        return kotlinExtensionsEnabled;
+    }
+
+    public void setKotlinExtensionsEnabled(boolean kotlinExtensionsEnabled) {
+        this.kotlinExtensionsEnabled = kotlinExtensionsEnabled;
+        notifyChange(KEY_KOTLIN_EXTENSIONS_ENABLED, kotlinExtensionsEnabled);
+    }
+
+    public void addPropertyListener(String property, PropertyChangedListener listener) {
+        listeners.put(property, listener);
+    }
+
+    private void notifyChange(String key, Object value) {
+        PropertyChangedListener listener = listeners.get(key);
+        if (listener != null) {
+            // Up to users of the API to use the correct generic type, otherwise it will crash
+            // at runtime.
+            //noinspection unchecked
+            listener.onChange(value);
+        }
+    }
+
+    // Callback triggered when the extension property is changed
+    public interface PropertyChangedListener<T> {
+        void onChange(T value);
+    }
 }
diff --git a/realm-transformer/src/main/java/io/realm/transformer/Utils.java b/realm-transformer/src/main/java/io/realm/transformer/Utils.java
index 8d50ec7ac8..042fe7c6eb 100644
--- a/realm-transformer/src/main/java/io/realm/transformer/Utils.java
+++ b/realm-transformer/src/main/java/io/realm/transformer/Utils.java
@@ -63,23 +63,9 @@ public static String hexStringify(byte[] data) {
         return stringBuilder.toString();
     }
 
-    public static String getTargetSdk(Project project) {
-        return getAndroidExtension(project).getDefaultConfig().getTargetSdkVersion().getApiString();
-    }
-
-    public static String getMinSdk(Project project) {
-        return getAndroidExtension(project).getDefaultConfig().getMinSdkVersion().getApiString();
-    }
-
     public static boolean isSyncEnabled(Project project) {
-        return ((RealmPluginExtension) project.getExtensions().getByName("realm")).syncEnabled;
+        RealmPluginExtension realmExtension = (RealmPluginExtension) project.getExtensions().findByName("realm");
+        return realmExtension != null && realmExtension.isSyncEnabled();
     }
 
-    public static List<File> getBootClasspath(Project project) {
-        return getAndroidExtension(project).getBootClasspath();
-    }
-
-    private static BaseExtension getAndroidExtension(Project project) {
-        return (BaseExtension) project.getExtensions().getByName("android");
-    }
 }
diff --git a/realm-transformer/src/main/kotlin/io/realm/transformer/ByteCodeModifier.kt b/realm-transformer/src/main/kotlin/io/realm/transformer/ByteCodeModifier.kt
index 7839c95b22..0d972f6784 100644
--- a/realm-transformer/src/main/kotlin/io/realm/transformer/ByteCodeModifier.kt
+++ b/realm-transformer/src/main/kotlin/io/realm/transformer/ByteCodeModifier.kt
@@ -162,9 +162,16 @@ class BytecodeModifier {
         @Throws(CannotCompileException::class)
         override fun edit(fieldAccess: FieldAccess) {
             logger.debug("      Field being accessed: ${fieldAccess.className}.${fieldAccess.fieldName}")
-            if (isRealmModelClass(fieldAccess.enclosingClass) && isModelField(fieldAccess.field)) {
+
+            val fieldAccessCtClass: CtClass? = try { classPool.get(fieldAccess.className) } catch (e: NotFoundException) { null }
+            if (fieldAccessCtClass != null && isRealmModelClass(fieldAccessCtClass) && isModelField(fieldAccess.field)) {
                 logger.debug("        Realm: Manipulating ${ctClass.simpleName}.${behaviour.name}(): ${fieldAccess.fieldName}")
                 logger.debug("        Methods: ${ctClass.declaredMethods}")
+
+                // make sure accessors are added, otherwise javassist will fail with
+                // javassist.CannotCompileException: [source error] realmGet$id() not found in 'foo.Model'
+                addRealmAccessors(fieldAccessCtClass)
+
                 val fieldName: String = fieldAccess . fieldName
                 if (fieldAccess.isReader) {
                     fieldAccess.replace("\$_ = \$0.realmGet\$$fieldName();")
diff --git a/realm-transformer/src/main/kotlin/io/realm/transformer/RealmTransformer.kt b/realm-transformer/src/main/kotlin/io/realm/transformer/RealmTransformer.kt
index ffbd4d11ea..74efc31a08 100644
--- a/realm-transformer/src/main/kotlin/io/realm/transformer/RealmTransformer.kt
+++ b/realm-transformer/src/main/kotlin/io/realm/transformer/RealmTransformer.kt
@@ -20,6 +20,8 @@ import com.android.build.api.transform.*
 import io.realm.transformer.build.FullBuild
 import io.realm.transformer.build.IncrementalBuild
 import io.realm.transformer.build.BuildTemplate
+import io.realm.transformer.ext.getMinSdk
+import io.realm.transformer.ext.getTargetSdk
 import javassist.CtClass
 import org.gradle.api.Project
 import org.slf4j.Logger
@@ -95,23 +97,23 @@ class RealmTransformer(val project: Project) : Transform() {
         timer.splitTime("Prepare output classes")
         if (build.hasNoOutput()) {
             // Abort transform as quickly as possible if no files where found for processing.
-            exitTransform(emptySet(), emptyList(), timer)
+            exitTransform(emptySet(), emptySet(), timer)
             return
         }
-        build.prepareReferencedClasses(referencedInputs!!);
+        build.prepareReferencedClasses(referencedInputs!!)
         timer.splitTime("Prepare referenced classes")
         build.markMediatorsAsTransformed()
         timer.splitTime("Mark mediators as transformed")
-        build.transformModelClasses();
+        build.transformModelClasses()
         timer.splitTime("Transform model classes")
-        build.transformDirectAccessToModelFields();
+        build.transformDirectAccessToModelFields()
         timer.splitTime("Transform references to model fields")
-        build.copyResourceFiles();
+        build.copyResourceFiles()
         timer.splitTime("Copy resource files")
         exitTransform(inputs, build.getOutputModelClasses(), timer)
     }
 
-    private fun exitTransform(inputs: Collection<TransformInput>, outputModelClasses: Collection<CtClass>, timer: Stopwatch) {
+    private fun exitTransform(inputs: Collection<TransformInput>, outputModelClasses: Set<CtClass>, timer: Stopwatch) {
         timer.stop()
         this.sendAnalytics(inputs, outputModelClasses)
     }
@@ -122,42 +124,47 @@ class RealmTransformer(val project: Project) : Transform() {
      * @param inputs the inputs provided by the Transform API
      * @param inputModelClasses a list of ctClasses describing the Realm models
      */
-    private fun sendAnalytics(inputs: Collection<TransformInput>, outputModelClasses: Collection<CtClass>) {
-        val disableAnalytics: Boolean = "true".equals(System.getenv()["REALM_DISABLE_ANALYTICS"])
-        if (inputs.isEmpty() || disableAnalytics) {
-            // Don't send analytics for incremental builds or if they have ben explicitly disabled.
-            return
-        }
+    private fun sendAnalytics(inputs: Collection<TransformInput>, outputModelClasses: Set<CtClass>) {
+        try {
+            val disableAnalytics: Boolean = "true".equals(System.getenv()["REALM_DISABLE_ANALYTICS"], ignoreCase = true)
+            if (inputs.isEmpty() || disableAnalytics) {
+                // Don't send analytics for incremental builds or if they have been explicitly disabled.
+                return
+            }
 
-        var containsKotlin = false
-
-        outer@
-        for(input: TransformInput in inputs) {
-            for (di: DirectoryInput in input.directoryInputs) {
-                val path: String = di.file.absolutePath
-                val index: Int = path.indexOf("build${File.separator}intermediates${File.separator}classes")
-                if (index != -1) {
-                    val projectPath: String = path.substring(0, index)
-                    val buildFile = File(projectPath + "build.gradle")
-                    if (buildFile.exists() && buildFile.readText().contains("kotlin")) {
-                        containsKotlin = true
-                        break@outer
+            var containsKotlin = false
+
+            outer@
+            for(input: TransformInput in inputs) {
+                for (di: DirectoryInput in input.directoryInputs) {
+                    val path: String = di.file.absolutePath
+                    val index: Int = path.indexOf("build${File.separator}intermediates${File.separator}classes")
+                    if (index != -1) {
+                        val projectPath: String = path.substring(0, index)
+                        val buildFile = File(projectPath + "build.gradle")
+                        if (buildFile.exists() && buildFile.readText().contains("kotlin")) {
+                            containsKotlin = true
+                            break@outer
+                        }
                     }
                 }
             }
-        }
 
-        val packages: Collection<String> = outputModelClasses.map {
-            it.packageName
-        }
+            val packages: Set<String> = outputModelClasses.map {
+                it.packageName
+            }.toSet()
 
-        val targetSdk: String? = Utils.getTargetSdk(project)
-        val minSdk: String?  = Utils.getMinSdk(project)
+            val targetSdk: String? = project.getTargetSdk()
+            val minSdk: String?  = project.getMinSdk()
 
-        if (disableAnalytics) {
-            val sync: Boolean = Utils.isSyncEnabled(project)
-            val analytics = RealmAnalytics(packages as Set, containsKotlin, sync, targetSdk, minSdk)
-            analytics.execute()
+            if (!disableAnalytics) {
+                val sync: Boolean = Utils.isSyncEnabled(project)
+                val analytics = RealmAnalytics(packages, containsKotlin, sync, targetSdk, minSdk)
+                analytics.execute()
+            }
+        } catch (e: Exception) {
+            // Analytics failing for any reason should not crash the build
+            logger.debug("Could not send analytics: $e")
         }
     }
 
diff --git a/realm-transformer/src/main/kotlin/io/realm/transformer/build/BuildTemplate.kt b/realm-transformer/src/main/kotlin/io/realm/transformer/build/BuildTemplate.kt
index 7d8cd8c9ec..0a73198128 100644
--- a/realm-transformer/src/main/kotlin/io/realm/transformer/build/BuildTemplate.kt
+++ b/realm-transformer/src/main/kotlin/io/realm/transformer/build/BuildTemplate.kt
@@ -25,6 +25,7 @@ import io.realm.transformer.BytecodeModifier
 import io.realm.transformer.ManagedClassPool
 import io.realm.transformer.logger
 import io.realm.transformer.Utils
+import io.realm.transformer.ext.getBootClasspath
 import javassist.ClassPool
 import javassist.CtClass
 import org.gradle.api.Project
@@ -147,7 +148,7 @@ abstract class BuildTemplate(val project: Project, val outputProvider: Transform
      */
     private fun addBootClassesToClassPool(classPool: ClassPool) {
         try {
-            Utils.getBootClasspath(project).forEach {
+            project.getBootClasspath().forEach {
                 val path: String = it.absolutePath
                 logger.debug("Add boot class $path to class pool.")
                 classPool.appendClassPath(path)
@@ -159,8 +160,8 @@ abstract class BuildTemplate(val project: Project, val outputProvider: Transform
         }
     }
 
-    fun getOutputModelClasses(): Collection<CtClass> {
-        return outputModelClasses
+    fun getOutputModelClasses(): Set<CtClass> {
+        return outputModelClasses.toSet()
     }
 
     protected abstract fun findModelClasses(classNames: Set<String>): Collection<CtClass>
diff --git a/realm-transformer/src/main/kotlin/io/realm/transformer/ext/CtClassExt.kt b/realm-transformer/src/main/kotlin/io/realm/transformer/ext/CtClassExt.kt
index 24a8511672..6a0a106674 100644
--- a/realm-transformer/src/main/kotlin/io/realm/transformer/ext/CtClassExt.kt
+++ b/realm-transformer/src/main/kotlin/io/realm/transformer/ext/CtClassExt.kt
@@ -1,3 +1,18 @@
+/*
+ * Copyright 2018 Realm Inc.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
 package io.realm.transformer.ext
 
 import javassist.CtClass
diff --git a/realm-transformer/src/main/kotlin/io/realm/transformer/ext/ProjectExt.kt b/realm-transformer/src/main/kotlin/io/realm/transformer/ext/ProjectExt.kt
new file mode 100644
index 0000000000..d33fc33e98
--- /dev/null
+++ b/realm-transformer/src/main/kotlin/io/realm/transformer/ext/ProjectExt.kt
@@ -0,0 +1,48 @@
+/*
+ * Copyright 2018 Realm Inc.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package io.realm.transformer.ext
+
+import com.android.build.gradle.BaseExtension
+import org.gradle.api.Project
+import java.io.File
+
+/**
+ * Returns the `targetSdk` property for this project if it is available.
+ */
+fun Project.getTargetSdk(): String? {
+    return getAndroidExtension(this).defaultConfig?.targetSdkVersion?.apiString
+}
+
+/**
+ * Returns the `minSdk` property for this project if it is available.
+ */
+fun Project.getMinSdk(): String? {
+    return getAndroidExtension(this).defaultConfig?.minSdkVersion?.apiString
+}
+
+/**
+ * Returns the `bootClasspath` for this project
+ */
+fun Project.getBootClasspath(): List<File> {
+    return getAndroidExtension(this).bootClasspath ?: listOf()
+}
+
+private fun getAndroidExtension(project: Project): BaseExtension {
+    // This will always be present, otherwise the android build would not be able to
+    // trigger the transformer code in the first place.
+    return project.extensions.getByName("android") as BaseExtension
+}
diff --git a/realm/realm-library/src/androidTest/java/io/realm/RealmQueryTests.java b/realm/realm-library/src/androidTest/java/io/realm/RealmQueryTests.java
index 103038444d..1601b59ea7 100644
--- a/realm/realm-library/src/androidTest/java/io/realm/RealmQueryTests.java
+++ b/realm/realm-library/src/androidTest/java/io/realm/RealmQueryTests.java
@@ -24,6 +24,7 @@
 import java.lang.reflect.Field;
 import java.util.Date;
 import java.util.Locale;
+import java.util.UUID;
 import java.util.concurrent.CountDownLatch;
 import java.util.concurrent.atomic.AtomicInteger;
 
@@ -2278,6 +2279,20 @@ public void count() {
         assertEquals(TEST_DATA_SIZE, realm.where(AllTypes.class).count());
     }
 
+    // Verify that count correctly when using distinct.
+    // See https://github.com/realm/realm-java/issues/5958
+    @Test
+    public void distinctCount() {
+        realm.executeTransaction(r -> {
+            for (int i = 0; i < 5; i++) {
+                AllTypes obj = new AllTypes();
+                obj.setColumnString("Foo");
+                realm.copyToRealm(obj);
+            }
+        });
+        assertEquals(1, realm.where(AllTypes.class).distinct(AllTypes.FIELD_STRING).count());
+    }
+
     // Tests isNull on link's nullable field.
     @Test
     public void isNull_linkField() {
diff --git a/realm/realm-library/src/main/java/io/realm/RealmQuery.java b/realm/realm-library/src/main/java/io/realm/RealmQuery.java
index 32ddf59c87..10327254d4 100644
--- a/realm/realm-library/src/main/java/io/realm/RealmQuery.java
+++ b/realm/realm-library/src/main/java/io/realm/RealmQuery.java
@@ -1749,8 +1749,12 @@ public Date maximumDate(String fieldName) {
      */
     public long count() {
         realm.checkIfValid();
-
-        return this.query.count();
+        // The fastest way of doing `count()` is going through `TableQuery.count()`. Unfortunately
+        // doing this does not correctly apply all side effects of queries (like subscriptions). Also
+        // some queries constructs, like doing distinct is not easily supported this way.
+        // In order to get the best of both worlds we thus need to create a Java RealmResults object
+        // and then directly access the `Results` class from Object Store.
+        return lazyFindAll().size();
     }
 
     /**
@@ -1766,6 +1770,24 @@ public long count() {
         return createRealmResults(query, sortDescriptor, distinctDescriptor, true, SubscriptionAction.NO_SUBSCRIPTION);
     }
 
+    /**
+     * The same as {@link #findAll()} expect the RealmResult is not forcefully evaluated. This
+     * means this method will return a more "pure" wrapper around the Object Store Results class.
+     *
+     * This can be useful for internal usage where we still want to take advantage of optimizations
+     * and additional functionality provided by Object Store, but do not wish to trigger the query
+     * unless needed.
+     */
+    private OsResults lazyFindAll() {
+        realm.checkIfValid();
+        return createRealmResults(
+                query,
+                sortDescriptor,
+                distinctDescriptor,
+                false,
+                SubscriptionAction.NO_SUBSCRIPTION).osResults;
+    }
+
     /**
      * Finds all objects that fulfill the query conditions. This method is only available from a Looper thread.
      * <p>
diff --git a/realm/realm-library/src/main/java/io/realm/internal/TableQuery.java b/realm/realm-library/src/main/java/io/realm/internal/TableQuery.java
index 1f9ba3d387..2750ad689e 100644
--- a/realm/realm-library/src/main/java/io/realm/internal/TableQuery.java
+++ b/realm/realm-library/src/main/java/io/realm/internal/TableQuery.java
@@ -614,6 +614,13 @@ public long count(long start, long end, long limit) {
         return nativeCount(nativePtr, start, end, limit);
     }
 
+    /**
+     * Returns only the number of matching objects.
+     * This method is very fast compared to evaluating a query completely, but it does not
+     * goes around any logic implemented in Object Store and other parts of the API that works
+     * on query results. So the primary use case for this method is testing.
+     */
+    @Deprecated
     public long count() {
         validateQuery();
         return nativeCount(nativePtr, 0, Table.INFINITE, Table.INFINITE);
diff --git a/version.txt b/version.txt
index 7daa13a179..a26d4d9728 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-5.4.0-SNAPSHOT
+5.5.0-SNAPSHOT
\ No newline at end of file
